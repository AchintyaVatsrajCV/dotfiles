(function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={i:moduleId,l:false,exports:{}};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.l=true;return module.exports}__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.i=function(value){return value};__webpack_require__.d=function(exports,name,getter){if(!__webpack_require__.o(exports,name)){Object.defineProperty(exports,name,{configurable:false,enumerable:true,get:getter})}};__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module["default"]}:function getModuleExports(){return module};__webpack_require__.d(getter,"a",getter);return getter};__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)};__webpack_require__.p="";return __webpack_require__(__webpack_require__.s=336)})({130:function(module,exports){eval("\nvar origNode, correctionNode, content, qNode, hiddenCheck;\n\nfunction findNodes() {\n\tcorrectionNode = document.querySelector('a.spell');\n\torigNode = document.querySelector('a.spell_orig');\n\tcontent = document.querySelector('div.content#main');\n\tqNode = document.querySelector('[aria-label=\"Search\"]');\n\thiddenCheck = document.querySelector('#search');\n}\n\nvar lastQ = \"\";\nfunction getValues() {\n\tvar fullq = \"\",\n\t    q = \"\",\n\t    cq = \"\";\n\tfindNodes();\n\n\tif (qNode) {\n\t\tfullq = qNode.value;\n\t}\n\n\tif (origNode) {\n\t\tq = origNode.text;\n\t}\n\n\tif (correctionNode) {\n\t\tcq = correctionNode.text;\n\t}\n\n\tif (lastQ === fullq) {\n\t\treturn;\n\t}\n\n\tlastQ = fullq;\n\n\tif (cq.length == 0 || q.length == 0) {\n\t\tq = fullq;\n\t}\n\n\tif (q.length == 0) {\n\t\treturn;\n\t}\n\n\tvar cache = {\n\t\tqu: q,\n\t\tco: cq,\n\t\tla: getLang()\n\t};\n\n\twindow.sendMessage(\"cache\", cache);\n\tsetTimeout(getValues, 1000);\n}\n\nfunction applyInputListener() {\n\tfindNodes();\n\tgetValues();\n\tif (content) {\n\t\tcontent.addEventListener('DOMSubtreeModified', getValues);\n\t\tcontent.addEventListener('DOMAttrModified', getValues);\n\t} else {\n\t\tsetTimeout(applyInputListener, 1000);\n\t}\n}\n\nsetTimeout(applyInputListener, 1000);//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTMwLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL3NyYy9qcy9jYWNoZS5qcz9lNThkIl0sInNvdXJjZXNDb250ZW50IjpbIlxudmFyIG9yaWdOb2RlLCBjb3JyZWN0aW9uTm9kZSwgY29udGVudCwgcU5vZGUsIGhpZGRlbkNoZWNrO1xuXG5mdW5jdGlvbiBmaW5kTm9kZXMoKSB7XG5cdGNvcnJlY3Rpb25Ob2RlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYS5zcGVsbCcpO1xuXHRvcmlnTm9kZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Euc3BlbGxfb3JpZycpO1xuXHRjb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZGl2LmNvbnRlbnQjbWFpbicpO1xuXHRxTm9kZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1thcmlhLWxhYmVsPVwiU2VhcmNoXCJdJyk7XG5cdGhpZGRlbkNoZWNrID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3NlYXJjaCcpO1xufVxuXG52YXIgbGFzdFEgPSBcIlwiO1xuZnVuY3Rpb24gZ2V0VmFsdWVzKCkge1xuXHR2YXIgZnVsbHEgPSBcIlwiLCBxID0gXCJcIiwgY3EgPSBcIlwiO1xuXHRmaW5kTm9kZXMoKTtcblxuXHRpZihxTm9kZSkge1xuXHRcdGZ1bGxxID0gcU5vZGUudmFsdWU7XG5cdH1cblxuXHRpZihvcmlnTm9kZSkge1xuXHRcdHEgPSBvcmlnTm9kZS50ZXh0O1xuXHR9XG5cblx0aWYoY29ycmVjdGlvbk5vZGUpIHtcblx0XHRjcSA9IGNvcnJlY3Rpb25Ob2RlLnRleHQ7XG5cdH1cblxuXHRpZihsYXN0USA9PT0gZnVsbHEpIHtcblx0XHRyZXR1cm47XG5cdH1cblxuXHRsYXN0USA9IGZ1bGxxO1xuXG5cdGlmKGNxLmxlbmd0aCA9PSAwIHx8IHEubGVuZ3RoID09IDApIHtcblx0XHRxID0gZnVsbHE7XG5cdH1cblxuXHRpZihxLmxlbmd0aCA9PSAwKSB7XG5cdFx0cmV0dXJuO1xuXHR9XG5cblx0dmFyIGNhY2hlID0ge1xuXHRcdHF1OiBxLFxuXHRcdGNvOiBjcSxcblx0XHRsYTogZ2V0TGFuZygpXG5cdH07XG5cblx0d2luZG93LnNlbmRNZXNzYWdlKFwiY2FjaGVcIiwgY2FjaGUpO1xuXHRzZXRUaW1lb3V0KGdldFZhbHVlcywgMTAwMCk7XG59XG5cbmZ1bmN0aW9uIGFwcGx5SW5wdXRMaXN0ZW5lcigpIHtcblx0ZmluZE5vZGVzKCk7XG5cdGdldFZhbHVlcygpO1xuXHRpZihjb250ZW50KSB7XG5cdFx0Y29udGVudC5hZGRFdmVudExpc3RlbmVyKCdET01TdWJ0cmVlTW9kaWZpZWQnLCBnZXRWYWx1ZXMpO1xuXHRcdGNvbnRlbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQXR0ck1vZGlmaWVkJywgZ2V0VmFsdWVzKTtcblx0fSBlbHNlIHtcblx0XHRzZXRUaW1lb3V0KGFwcGx5SW5wdXRMaXN0ZW5lciwgMTAwMCk7XG5cdH1cbn1cblxuXG5zZXRUaW1lb3V0KGFwcGx5SW5wdXRMaXN0ZW5lciwgMTAwMCk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gc3JjL2pzL2NhY2hlLmpzIl0sIm1hcHBpbmdzIjoiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQSIsInNvdXJjZVJvb3QiOiIifQ==")},145:function(module,exports){eval('\nreadFile = function readFile(filename, callback) {\n\tfilename = chrome.runtime.getURL(filename);\n\n\tvar xml = new XMLHttpRequest();\n\n\txml.onload = function () {\n\t\tvar ret = xml.responseText;\n\n\t\tpattern = /\x3c!--%[^%]+%--\x3e/;\n\t\twhile (true) {\n\t\t\tvar match = pattern.exec(ret);\n\t\t\tif (match == null) break;\n\n\t\t\tmatch = match[0];\n\n\t\t\tvar url = match.substring(5, match.length - 4);\n\t\t\tret = ret.replace(match, chrome.runtime.getURL(url));\n\t\t}\n\n\t\tcallback(ret);\n\t};\n\n\txml.open("GET", filename);\n\txml.send();\n};\n\nfunction getChromeVersion() {\n\tvar raw = navigator.userAgent.match(/Chrom(e|ium)\\/([0-9]+)\\./);\n\treturn raw ? parseInt(raw[2], 10) : false;\n}//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTQ1LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL3NyYy9qcy91dGlscy91dGlscy5qcz8zYWQ4Il0sInNvdXJjZXNDb250ZW50IjpbIlxucmVhZEZpbGUgPSBmdW5jdGlvbihmaWxlbmFtZSwgY2FsbGJhY2spIHtcblx0ZmlsZW5hbWUgPSBjaHJvbWUucnVudGltZS5nZXRVUkwoZmlsZW5hbWUpO1xuXG5cdHZhciB4bWwgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblxuXHR4bWwub25sb2FkID0gZnVuY3Rpb24oKSB7XG5cdFx0dmFyIHJldCA9IHhtbC5yZXNwb25zZVRleHQ7XG5cblx0XHRwYXR0ZXJuID0gLzwhLS0lW14lXSslLS0+Lztcblx0XHR3aGlsZSh0cnVlKSB7XG5cdFx0XHR2YXIgbWF0Y2ggPSBwYXR0ZXJuLmV4ZWMocmV0KTtcblx0XHRcdGlmKG1hdGNoID09IG51bGwpIGJyZWFrO1xuXG5cdFx0XHRtYXRjaCA9IG1hdGNoWzBdO1xuXG5cdFx0XHR2YXIgdXJsID0gbWF0Y2guc3Vic3RyaW5nKDUsIG1hdGNoLmxlbmd0aC00KTtcblx0XHRcdHJldCA9IHJldC5yZXBsYWNlKG1hdGNoLCBjaHJvbWUucnVudGltZS5nZXRVUkwodXJsKSk7XG5cdFx0fVxuXG5cdFx0Y2FsbGJhY2socmV0KTtcblx0fVxuXG5cdHhtbC5vcGVuKFwiR0VUXCIsIGZpbGVuYW1lKTtcblx0eG1sLnNlbmQoKTtcbn1cblxuZnVuY3Rpb24gZ2V0Q2hyb21lVmVyc2lvbiAoKSB7XG5cdHZhciByYXcgPSBuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9DaHJvbShlfGl1bSlcXC8oWzAtOV0rKVxcLi8pO1xuXHRyZXR1cm4gcmF3ID8gcGFyc2VJbnQocmF3WzJdLCAxMCkgOiBmYWxzZTtcbn1cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gc3JjL2pzL3V0aWxzL3V0aWxzLmpzIl0sIm1hcHBpbmdzIjoiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=')},146:function(module,exports){eval('(function () {\n\n\tfunction genId() {\n\t\tvar n = Math.random();\n\n\t\tn = n * 8000999999 + 1000000000;\n\t\tn = Math.floor(n);\n\n\t\treturn "widget" + n;\n\t}\n\n\tfunction getHighestZIndex() {\n\t\tvar elems = document.querySelectorAll("*");\n\t\tvar highest = 0;\n\t\tfor (var i = 0; i < elems.length; i++) {\n\t\t\tvar zindex = document.defaultView.getComputedStyle(elems[i], null).getPropertyValue("z-index");\n\t\t\tif (zindex > highest && zindex != \'auto\') {\n\t\t\t\thighest = zindex;\n\t\t\t}\n\t\t}\n\t\treturn Math.min(parseInt(highest) + 1, 2147483647);\n\t}\n\n\tvar widgetList = [];\n\n\tfunction refreshWidgets() {\n\t\tfor (var i = 0; i < widgetList.length; i++) {\n\t\t\tvar widget = widgetList[i];\n\n\t\t\t//process widget\n\t\t\tif (!widget.shouldExist(widget.widgetElm)) {\n\t\t\t\tdocument.body.removeChild(widget.iframe);\n\t\t\t\twidgetList.splice(i, 1);\n\t\t\t\ti--;\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\twidget.iframe.style.left = widget.getLeft(widget.widgetElm);\n\t\t\twidget.iframe.style.top = widget.getTop(widget.widgetElm);\n\t\t\twidget.iframe.style.width = widget.getWidth(widget.widgetElm);\n\t\t\twidget.iframe.style.height = widget.getHeight(widget.widgetElm);\n\t\t}\n\t}\n\tsetInterval(refreshWidgets, 10);\n\n\twindow.createWidget = function (widget) {\n\n\t\tvar father = document.createElement("IFRAME");\n\n\t\tfather.style.position = "absolute";\n\t\tfather.style.zIndex = getHighestZIndex();\n\n\t\tfather.setAttribute("frameborder", "0");\n\n\t\tdocument.body.appendChild(father);\n\n\t\tvar shadow = father.contentDocument.body;\n\t\tshadow.style.overflow = "hidden";\n\t\tshadow.style.margin = "0px";\n\n\t\twidget = widget || {};\n\t\twidget.iframe = father;\n\t\twidget.widgetElm = widget.widgetElm || document.createElement("DIV");\n\t\twidget.getLeft = widget.getLeft || function () {\n\t\t\treturn "0px";\n\t\t};\n\t\twidget.getTop = widget.getTop || function () {\n\t\t\treturn "0px";\n\t\t};\n\t\twidget.getWidth = widget.getWidth || function () {\n\t\t\treturn "0px";\n\t\t};\n\t\twidget.getHeight = widget.getHeight || function () {\n\t\t\treturn "0px";\n\t\t};\n\t\twidget.shouldExist = widget.shouldExist || function () {\n\t\t\treturn false;\n\t\t};\n\t\twidgetList.push(widget);\n\n\t\tshadow.appendChild(widget.widgetElm);\n\t};\n})();//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTQ2LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL3NyYy9qcy91dGlscy93aWRnZXRTeXN0ZW0uanM/YjY1ZCJdLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKSB7XG5cbmZ1bmN0aW9uIGdlbklkKCkge1xuXHR2YXIgbiA9IE1hdGgucmFuZG9tKCk7XG5cblx0biA9IChuKjgwMDA5OTk5OTkpICsgMTAwMDAwMDAwMDtcblx0biA9IE1hdGguZmxvb3Iobik7XG5cblx0cmV0dXJuIFwid2lkZ2V0XCIgKyBuO1xufVxuXG5mdW5jdGlvbiBnZXRIaWdoZXN0WkluZGV4KClcbntcblx0dmFyIGVsZW1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIipcIik7XG5cdHZhciBoaWdoZXN0ID0gMDtcblx0Zm9yICh2YXIgaSA9IDA7IGkgPCBlbGVtcy5sZW5ndGg7IGkrKylcblx0e1xuXHRcdHZhciB6aW5kZXg9ZG9jdW1lbnQuZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZShlbGVtc1tpXSxudWxsKS5nZXRQcm9wZXJ0eVZhbHVlKFwiei1pbmRleFwiKTtcblx0XHRpZiAoKHppbmRleCA+IGhpZ2hlc3QpICYmICh6aW5kZXggIT0gJ2F1dG8nKSlcblx0XHR7XG5cdFx0XHRoaWdoZXN0ID0gemluZGV4O1xuXHRcdH1cblx0fVxuXHRyZXR1cm4gTWF0aC5taW4ocGFyc2VJbnQoaGlnaGVzdCkrMSwgMjE0NzQ4MzY0Nyk7XG59XG5cbnZhciB3aWRnZXRMaXN0ID0gW107XG5cbmZ1bmN0aW9uIHJlZnJlc2hXaWRnZXRzKCkge1xuXHRmb3IodmFyIGkgPSAwOyBpIDwgd2lkZ2V0TGlzdC5sZW5ndGg7IGkrKykge1xuXHRcdHZhciB3aWRnZXQgPSB3aWRnZXRMaXN0W2ldO1xuXG5cdFx0Ly9wcm9jZXNzIHdpZGdldFxuXHRcdGlmKCF3aWRnZXQuc2hvdWxkRXhpc3Qod2lkZ2V0LndpZGdldEVsbSkpIHtcblx0XHRcdGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQod2lkZ2V0LmlmcmFtZSk7XG5cdFx0XHR3aWRnZXRMaXN0LnNwbGljZShpLCAxKTtcblx0XHRcdGktLTtcblx0XHRcdGNvbnRpbnVlO1xuXHRcdH1cblxuXHRcdHdpZGdldC5pZnJhbWUuc3R5bGUubGVmdCA9IHdpZGdldC5nZXRMZWZ0KHdpZGdldC53aWRnZXRFbG0pO1xuXHRcdHdpZGdldC5pZnJhbWUuc3R5bGUudG9wID0gd2lkZ2V0LmdldFRvcCh3aWRnZXQud2lkZ2V0RWxtKTtcblx0XHR3aWRnZXQuaWZyYW1lLnN0eWxlLndpZHRoID0gd2lkZ2V0LmdldFdpZHRoKHdpZGdldC53aWRnZXRFbG0pO1xuXHRcdHdpZGdldC5pZnJhbWUuc3R5bGUuaGVpZ2h0ID0gd2lkZ2V0LmdldEhlaWdodCh3aWRnZXQud2lkZ2V0RWxtKTtcblx0fVxufVxuc2V0SW50ZXJ2YWwocmVmcmVzaFdpZGdldHMsIDEwKTtcblxud2luZG93LmNyZWF0ZVdpZGdldCA9IGZ1bmN0aW9uKHdpZGdldCkge1xuXG5cdHZhciBmYXRoZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiSUZSQU1FXCIpO1xuXG5cdGZhdGhlci5zdHlsZS5wb3NpdGlvbiA9IFwiYWJzb2x1dGVcIjtcblx0ZmF0aGVyLnN0eWxlLnpJbmRleCA9IGdldEhpZ2hlc3RaSW5kZXgoKTtcblxuXHRmYXRoZXIuc2V0QXR0cmlidXRlKFwiZnJhbWVib3JkZXJcIiwgXCIwXCIpO1xuXG5cdGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZmF0aGVyKTtcblxuXHR2YXIgc2hhZG93ID0gZmF0aGVyLmNvbnRlbnREb2N1bWVudC5ib2R5O1xuXHRzaGFkb3cuc3R5bGUub3ZlcmZsb3cgPSBcImhpZGRlblwiO1xuXHRzaGFkb3cuc3R5bGUubWFyZ2luID0gXCIwcHhcIjtcblxuXHR3aWRnZXQgPSB3aWRnZXQgfHwge307XG5cdHdpZGdldC5pZnJhbWUgPSBmYXRoZXI7XG5cdHdpZGdldC53aWRnZXRFbG0gPSB3aWRnZXQud2lkZ2V0RWxtIHx8IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJESVZcIik7XG5cdHdpZGdldC5nZXRMZWZ0ID0gd2lkZ2V0LmdldExlZnQgfHwgZnVuY3Rpb24oKXtyZXR1cm4gXCIwcHhcIjt9O1xuXHR3aWRnZXQuZ2V0VG9wID0gd2lkZ2V0LmdldFRvcCB8fCBmdW5jdGlvbigpe3JldHVybiBcIjBweFwiO307XG5cdHdpZGdldC5nZXRXaWR0aCA9IHdpZGdldC5nZXRXaWR0aCB8fCBmdW5jdGlvbigpe3JldHVybiBcIjBweFwiO307XG5cdHdpZGdldC5nZXRIZWlnaHQgPSB3aWRnZXQuZ2V0SGVpZ2h0IHx8IGZ1bmN0aW9uKCl7cmV0dXJuIFwiMHB4XCI7fTtcblx0d2lkZ2V0LnNob3VsZEV4aXN0ID0gd2lkZ2V0LnNob3VsZEV4aXN0IHx8IGZ1bmN0aW9uKCl7cmV0dXJuIGZhbHNlO307XG5cdHdpZGdldExpc3QucHVzaCh3aWRnZXQpO1xuXG5cdHNoYWRvdy5hcHBlbmRDaGlsZCh3aWRnZXQud2lkZ2V0RWxtKTtcbn1cblxufSkoKTtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gc3JjL2pzL3V0aWxzL3dpZGdldFN5c3RlbS5qcyJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQSIsInNvdXJjZVJvb3QiOiIifQ==')},18:function(module,exports){eval('(function () {\n  var f = this,\n      g = function g(a, d) {\n    var c = a.split("."),\n        b = window || f;c[0] in b || !b.execScript || b.execScript("var " + c[0]);for (var e; c.length && (e = c.shift());) {\n      c.length || void 0 === d ? b = b[e] ? b[e] : b[e] = {} : b[e] = d;\n    }\n  };var h = function h(a) {\n    var d = chrome.runtime.connect("nmmhkkegccagdldgiimedpiccmgmieda", {}),\n        c = !1;d.onMessage.addListener(function (b) {\n      c = !0;"response" in b && !("errorType" in b.response) ? a.success && a.success(b) : a.failure && a.failure(b);\n    });d.onDisconnect.addListener(function () {\n      !c && a.failure && a.failure({ request: {}, response: { errorType: "INTERNAL_SERVER_ERROR" } });\n    });d.postMessage(a);\n  };g("google.payments.inapp.buy", function (a) {\n    a.method = "buy";h(a);\n  });\n  g("google.payments.inapp.consumePurchase", function (a) {\n    a.method = "consumePurchase";h(a);\n  });g("google.payments.inapp.getPurchases", function (a) {\n    a.method = "getPurchases";h(a);\n  });g("google.payments.inapp.getSkuDetails", function (a) {\n    a.method = "getSkuDetails";h(a);\n  });\n})();//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTguanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL2pzL2dhL2J1eS5qcz80M2MyIl0sInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpIHsgdmFyIGY9dGhpcyxnPWZ1bmN0aW9uKGEsZCl7dmFyIGM9YS5zcGxpdChcIi5cIiksYj13aW5kb3d8fGY7Y1swXWluIGJ8fCFiLmV4ZWNTY3JpcHR8fGIuZXhlY1NjcmlwdChcInZhciBcIitjWzBdKTtmb3IodmFyIGU7Yy5sZW5ndGgmJihlPWMuc2hpZnQoKSk7KWMubGVuZ3RofHx2b2lkIDA9PT1kP2I9YltlXT9iW2VdOmJbZV09e306YltlXT1kfTt2YXIgaD1mdW5jdGlvbihhKXt2YXIgZD1jaHJvbWUucnVudGltZS5jb25uZWN0KFwibm1taGtrZWdjY2FnZGxkZ2lpbWVkcGljY21nbWllZGFcIix7fSksYz0hMTtkLm9uTWVzc2FnZS5hZGRMaXN0ZW5lcihmdW5jdGlvbihiKXtjPSEwO1wicmVzcG9uc2VcImluIGImJiEoXCJlcnJvclR5cGVcImluIGIucmVzcG9uc2UpP2Euc3VjY2VzcyYmYS5zdWNjZXNzKGIpOmEuZmFpbHVyZSYmYS5mYWlsdXJlKGIpfSk7ZC5vbkRpc2Nvbm5lY3QuYWRkTGlzdGVuZXIoZnVuY3Rpb24oKXshYyYmYS5mYWlsdXJlJiZhLmZhaWx1cmUoe3JlcXVlc3Q6e30scmVzcG9uc2U6e2Vycm9yVHlwZTpcIklOVEVSTkFMX1NFUlZFUl9FUlJPUlwifX0pfSk7ZC5wb3N0TWVzc2FnZShhKX07ZyhcImdvb2dsZS5wYXltZW50cy5pbmFwcC5idXlcIixmdW5jdGlvbihhKXthLm1ldGhvZD1cImJ1eVwiO2goYSl9KTtcbmcoXCJnb29nbGUucGF5bWVudHMuaW5hcHAuY29uc3VtZVB1cmNoYXNlXCIsZnVuY3Rpb24oYSl7YS5tZXRob2Q9XCJjb25zdW1lUHVyY2hhc2VcIjtoKGEpfSk7ZyhcImdvb2dsZS5wYXltZW50cy5pbmFwcC5nZXRQdXJjaGFzZXNcIixmdW5jdGlvbihhKXthLm1ldGhvZD1cImdldFB1cmNoYXNlc1wiO2goYSl9KTtnKFwiZ29vZ2xlLnBheW1lbnRzLmluYXBwLmdldFNrdURldGFpbHNcIixmdW5jdGlvbihhKXthLm1ldGhvZD1cImdldFNrdURldGFpbHNcIjtoKGEpfSk7IH0pKCk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gc3JjL2pzL2dhL2J1eS5qcyJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEiLCJzb3VyY2VSb290IjoiIn0=')},19:function(module,exports){eval("Storage = {};\n\nStorage.dateFormat = \"MM/dd/yyyy HH:mm:ss\";\n\nStorage.addToOverlayBlacklist = function (domain) {\n\tif (typeof domain !== 'string' || domain === '') return;\n\n\tchrome.storage.local.get('overlayBlacklist', function (items) {\n\t\tvar overlayBlacklist;\n\t\tif (typeof items.overlayBlacklist !== 'undefined') {\n\t\t\toverlayBlacklist = items.overlayBlacklist;\n\t\t} else {\n\t\t\toverlayBlacklist = [];\n\t\t}\n\n\t\tfor (var i = 0; i < overlayBlacklist.length; i++) {\n\t\t\tif (overlayBlacklist[i] === domain) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\toverlayBlacklist.push(domain);\n\t\tchrome.storage.local.set({\n\t\t\t'overlayBlacklist': overlayBlacklist\n\t\t});\n\t});\n};\n\nStorage.getOverlayBlacklist = function (callback) {\n\tif (typeof callback === 'undefined') return;\n\n\tchrome.storage.local.get('overlayBlacklist', function (items) {\n\t\tif (typeof items.overlayBlacklist === 'undefined') callback([]);else callback(items.overlayBlacklist);\n\t});\n};\n\nStorage.getAppSettings = function (callback) {\n\tif (typeof callback === 'undefined') return;\n\n\tchrome.storage.sync.get([\"language\", \"region\", \"gender\", \"speed\", \"auto\", \"paragraphPlay\", \"autoLang\", \"playButton\"], callback);\n};\n\nStorage.setLanguage = function (value) {\n\tchrome.storage.sync.set({ 'language': value });\n};\n\nStorage.setRegion = function (value) {\n\tchrome.storage.sync.set({ 'region': value });\n};\n\nStorage.setGender = function (value) {\n\tchrome.storage.sync.set({ 'gender': value });\n};\n\nStorage.setSpeed = function (value) {\n\tchrome.storage.sync.set({ 'speed': value });\n};\n\nStorage.setAuto = function (value) {\n\tchrome.storage.sync.set({ 'auto': value });\n};\n\nStorage.setAutoLang = function (value) {\n\tchrome.storage.sync.set({ 'autoLang': value });\n};\n\nStorage.setParagraphPlay = function (value) {\n\tchrome.storage.sync.set({ 'paragraphPlay': value });\n};\n\nStorage.generateDate = function () {\n\tvar d = new Date();\n\treturn d.getFullYear() + \"\" + d.getMonth() + \"\" + d.getDate();\n};\n\nStorage.setSubTotal = function (subTotalValue) {\n\n\tchrome.storage.sync.get([\"subId\", \"wordsLeft\"], function (value) {\n\t\tif (typeof value.subId === 'undefined' || value.subId.length == 0) {\n\n\t\t\ttoSave = {\n\t\t\t\t'wordsTotal': subTotalValue\n\t\t\t};\n\n\t\t\tif (typeof value.wordsLeft === 'undefined') {\n\t\t\t\ttoSave.wordsLeft = subTotalValue;\n\t\t\t}\n\n\t\t\tchrome.storage.sync.set(toSave);\n\t\t}\n\t});\n};\n\nStorage.clearPurchase = function () {\n\tchrome.storage.sync.set({\n\t\tlastCheckTime: Date.now().add(-1).year().toString(Storage.dateFormat),\n\t\tprofileId: \"\",\n\t\teducationKey: \"\"\n\t});\n};\n\nStorage.subtractWordsLeft = function (subtract) {\n\tchrome.storage.sync.get([\"wordsLeft\"], function (value) {\n\t\tvalue.wordsLeft -= subtract;\n\t\tif (value.wordsLeft < 0) value.wordsLeft = 0;\n\t\twindow.sendMessage(\"wl_update\", value.wordsLeft);\n\t\tchrome.storage.sync.set(value);\n\t});\n};\n\nStorage.shouldCheck = function (callback) {\n\tchrome.storage.sync.get([\"lastCheckTime\"], function (value) {\n\n\t\tvar check = true;\n\n\t\tif (typeof value.lastCheckTime === 'undefined') {\n\t\t\tcheck = true;\n\t\t} else {\n\t\t\tvar checkTime = Date.parseExact(value.lastCheckTime, Storage.dateFormat);\n\t\t\tif (checkTime != null) {\n\t\t\t\tcheck = Date.now().compareTo(checkTime.add(6).hours()) == 1;\n\t\t\t}\n\t\t}\n\n\t\tif (check) {\n\t\t\tchrome.storage.sync.set({ lastCheckTime: Date.now().toString(Storage.dateFormat) });\n\t\t}\n\t\tcallback(check);\n\t});\n};\n\nStorage.getSubInfo = function (callback) {\n\tchrome.storage.sync.get([\"subId\", \"currentMonth\", \"wordsLeft\", \"wordsTotal\"], function (value) {\n\n\t\t// if(typeof value.subId === 'undefined') {\n\t\t// \tcallback(value);\n\t\t// \treturn;\n\t\t// }\n\n\t\tif (value.currentMonth !== Storage.generateDate()) {\n\t\t\tvalue.currentMonth = Storage.generateDate();\n\t\t\tvalue.wordsLeft = value.wordsTotal;\n\t\t\tchrome.storage.sync.set(value);\n\t\t}\n\n\t\tcallback(value);\n\t});\n};\n\nStorage.storePaypal = function (profileId) {\n\tchrome.storage.sync.set({\n\t\t'profileId': profileId\n\t});\n};\n\nStorage.hasPaypal = function (callback) {\n\tchrome.storage.sync.get(['profileId'], function (value) {\n\t\tif (value.profileId) {\n\t\t\tcallback(value.profileId);\n\t\t} else {\n\t\t\tcallback(\"\");\n\t\t}\n\t});\n};\n\nStorage.hasValidPaypal = function (callback) {\n\tchrome.storage.sync.get(['profileId'], function (value) {\n\t\tif (value.profileId) {\n\n\t\t\tStorage.shouldCheck(function (check) {\n\t\t\t\tif (check) {\n\n\t\t\t\t\tvar xmlhttp = new XMLHttpRequest();\n\t\t\t\t\txmlhttp.onload = function () {\n\t\t\t\t\t\tvar obj = JSON.parse(this.responseText);\n\t\t\t\t\t\tif (obj.result === 'success') {\n\t\t\t\t\t\t\tif (obj.subbed == false) chrome.storage.sync.set({ 'profileId': \"\" });\n\t\t\t\t\t\t\tcallback(obj.subbed);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tcallback(false);\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\n\t\t\t\t\txmlhttp.open(\"GET\", 'https://www.ispeech.org/services/selspeak/check?profile_id=' + value.profileId);\n\t\t\t\t\txmlhttp.send();\n\t\t\t\t} else {\n\t\t\t\t\tcallback(true);\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\tcallback(false);\n\t\t}\n\t});\n};\n\nStorage.getFarmCount = function (callback) {\n\tchrome.storage.sync.get(['farmedCount'], function (value) {\n\t\tif (typeof value.farmedCount === 'undefined') {\n\t\t\tvalue.farmedCount = 0;\n\t\t}\n\t\tcallback(value.farmedCount);\n\t});\n};\n\nStorage.incrementFarmCount = function (callback) {\n\tchrome.storage.sync.get(['farmedCount'], function (value) {\n\t\tif (typeof value.farmedCount === 'undefined') {\n\t\t\tvalue.farmedCount = 0;\n\t\t}\n\t\tvalue.farmedCount++;\n\t\tchrome.storage.sync.set(value);\n\t\tif (!!callback) callback(value.farmedCount);\n\t});\n};\n\nStorage.setProPeriod = function (days) {\n\tvar endDate = Date.today().add(days).days();\n\n\tchrome.storage.sync.set({\n\t\tproPeriod: endDate.toDateString()\n\t});\n};\n\nStorage.inProPeriod = function (callback) {\n\tchrome.storage.sync.get([\"proPeriod\"], function (value) {\n\t\tvar proEnd = Date.parse(value.proPeriod);\n\n\t\tif (proEnd == null) {\n\t\t\tcallback(false);\n\t\t\treturn;\n\t\t}\n\n\t\tcallback(Date.today().compareTo(proEnd) <= 0);\n\t});\n};\n\nStorage.setFarmingUsed = function () {\n\tchrome.storage.sync.set({\n\t\tfarmingUsed: true\n\t});\n};\n\nStorage.getFarmingUsed = function (callback) {\n\tchrome.storage.sync.get([\"farmingUsed\"], function (value) {\n\t\tif (typeof value.farmingUsed === 'undefined') {\n\t\t\tvalue.farmingUsed = false;\n\t\t}\n\t\tcallback(value.farmingUsed);\n\t});\n};\n\nStorage.setEducationKey = function (key) {\n\tchrome.storage.sync.set({\n\t\teducationKey: key\n\t});\n};\n\nStorage.getEducationKey = function (callback) {\n\tchrome.storage.sync.get([\"educationKey\"], function (value) {\n\t\tif (typeof value.educationKey === 'undefined') {\n\t\t\tvalue.educationKey = \"\";\n\t\t}\n\t\tcallback(value.educationKey);\n\t});\n};\n\nStorage.emailSubmitted = function (callback) {\n\tchrome.storage.sync.get([\"emailSubmitted\"], function (value) {\n\t\tif (typeof value.emailSubmitted === 'undefined') {\n\t\t\tvalue.emailSubmitted = false;\n\t\t}\n\t\tcallback(value.emailSubmitted);\n\t});\n};\n\nStorage.setEmailSubmitted = function () {\n\tchrome.storage.sync.set({\n\t\temailSubmitted: true\n\t});\n};\n\nStorage.getPlayButton = function (callback) {\n\tchrome.storage.sync.get([\"playButton\"], function (value) {\n\t\tif (typeof value.playButton === 'undefined') {\n\t\t\tvalue.playButton = true;\n\t\t}\n\t\tcallback(value.playButton);\n\t});\n};\n\nStorage.setPlayButton = function (value) {\n\tchrome.storage.sync.set({\n\t\t'playButton': value\n\t});\n};\n\nStorage.setHotkeyEnabled = function (value) {\n\tchrome.storage.sync.set({\n\t\t'hotkeyEnabled': value\n\t});\n};\n\nStorage.getHotkeyEnabled = function (callback) {\n\tchrome.storage.sync.get([\"hotkeyEnabled\"], function (value) {\n\t\tif (typeof value.hotkeyEnabled === 'undefined') {\n\t\t\tvalue.hotkeyEnabled = true;\n\t\t}\n\t\tcallback(value.hotkeyEnabled);\n\t});\n};\n\nStorage.setHotkey = function (value) {\n\tchrome.storage.sync.set({\n\t\t'hotkey': value\n\t});\n};\n\nStorage.getHotkey = function (callback) {\n\tchrome.storage.sync.get([\"hotkey\"], function (value) {\n\t\tif (typeof value.hotkey === 'undefined') {\n\t\t\tvalue.hotkey = \"ctrl + shift + 83\";\n\t\t}\n\t\tcallback(value.hotkey);\n\t});\n};\n\nStorage.getHotkeyIfEnabled = function (callback) {\n\tchrome.storage.sync.get([\"hotkeyEnabled\", \"hotkey\"], function (value) {\n\t\tif (typeof value.hotkeyEnabled === 'undefined' || typeof value.hotkey === 'undefined') {\n\t\t\tcallback(\"\");\n\t\t} else if (value.hotkeyEnabled) {\n\t\t\tcallback(value.hotkey);\n\t\t} else {\n\t\t\tcallback(\"\");\n\t\t}\n\t});\n};\n\nStorage.shouldShowPopUnder = function (callback) {\n\tcallback(false);\n};\n\nStorage.setPopUnderShown = function () {\n\n\tvar endDate = Date.now().add(1).days();\n\n\tchrome.storage.sync.set({\n\t\tnextPopUnder: endDate.toString(Storage.dateFormat)\n\t});\n};\n\nStorage.log = function (input) {\n\tchrome.storage.sync.get(input, function (value) {\n\t\tconsole.log(value);\n\t});\n};\n\nStorage.emptyWords = function () {\n\tchrome.storage.sync.set({\n\t\t\"wordsLeft\": 0\n\t});\n};\n\nStorage.cleanInstall = function () {\n\twindow.localStorage.clear();\n\tchrome.storage.sync.clear(function () {\n\t\tchrome.runtime.reload();\n\t});\n};//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTkuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL2pzL3NlbGVjdC1hbmQtc3BlYWsvc3RvcmFnZS5qcz8zNWFiIl0sInNvdXJjZXNDb250ZW50IjpbIlN0b3JhZ2UgPSB7fTtcblxuU3RvcmFnZS5kYXRlRm9ybWF0ID0gXCJNTS9kZC95eXl5IEhIOm1tOnNzXCI7XG5cblN0b3JhZ2UuYWRkVG9PdmVybGF5QmxhY2tsaXN0ID0gZnVuY3Rpb24oZG9tYWluKSB7XG5cdGlmICh0eXBlb2YgZG9tYWluICE9PSAnc3RyaW5nJyB8fCBkb21haW4gPT09ICcnKVxuXHRcdHJldHVybjtcblxuXHRjaHJvbWUuc3RvcmFnZS5sb2NhbC5nZXQoJ292ZXJsYXlCbGFja2xpc3QnLCBmdW5jdGlvbihpdGVtcykge1xuXHRcdHZhciBvdmVybGF5QmxhY2tsaXN0O1xuXHRcdGlmICh0eXBlb2YgaXRlbXMub3ZlcmxheUJsYWNrbGlzdCAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0XHRcdG92ZXJsYXlCbGFja2xpc3QgPSBpdGVtcy5vdmVybGF5QmxhY2tsaXN0O1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRvdmVybGF5QmxhY2tsaXN0ID0gW107XG5cdFx0fVxuXG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBvdmVybGF5QmxhY2tsaXN0Lmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRpZiAob3ZlcmxheUJsYWNrbGlzdFtpXSA9PT0gZG9tYWluKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRvdmVybGF5QmxhY2tsaXN0LnB1c2goZG9tYWluKTtcblx0XHRjaHJvbWUuc3RvcmFnZS5sb2NhbC5zZXQoe1xuXHRcdFx0J292ZXJsYXlCbGFja2xpc3QnOiBvdmVybGF5QmxhY2tsaXN0XG5cdFx0fSk7XG5cdH0pO1xufTtcblxuU3RvcmFnZS5nZXRPdmVybGF5QmxhY2tsaXN0ID0gZnVuY3Rpb24oY2FsbGJhY2spIHtcblx0aWYgKHR5cGVvZiBjYWxsYmFjayA9PT0gJ3VuZGVmaW5lZCcpXG5cdFx0cmV0dXJuO1xuXG5cdGNocm9tZS5zdG9yYWdlLmxvY2FsLmdldCgnb3ZlcmxheUJsYWNrbGlzdCcsIGZ1bmN0aW9uKGl0ZW1zKSB7XG5cdFx0aWYgKHR5cGVvZiBpdGVtcy5vdmVybGF5QmxhY2tsaXN0ID09PSAndW5kZWZpbmVkJylcblx0XHRcdGNhbGxiYWNrKFtdKTtcblx0XHRlbHNlXG5cdFx0XHRjYWxsYmFjayhpdGVtcy5vdmVybGF5QmxhY2tsaXN0KTtcblx0fSk7XG59XG5cblN0b3JhZ2UuZ2V0QXBwU2V0dGluZ3MgPSBmdW5jdGlvbihjYWxsYmFjaykge1xuXHRpZih0eXBlb2YgY2FsbGJhY2sgPT09ICd1bmRlZmluZWQnKVxuXHRcdHJldHVybjtcblxuXHRjaHJvbWUuc3RvcmFnZS5zeW5jLmdldChbXCJsYW5ndWFnZVwiLCBcInJlZ2lvblwiLCBcImdlbmRlclwiLCBcInNwZWVkXCIsIFwiYXV0b1wiLCBcInBhcmFncmFwaFBsYXlcIiwgXCJhdXRvTGFuZ1wiLCBcInBsYXlCdXR0b25cIl0sIGNhbGxiYWNrKTtcbn1cblxuU3RvcmFnZS5zZXRMYW5ndWFnZSA9IGZ1bmN0aW9uKHZhbHVlKSB7XG5cdGNocm9tZS5zdG9yYWdlLnN5bmMuc2V0KHsnbGFuZ3VhZ2UnOiB2YWx1ZX0pO1xufVxuXG5TdG9yYWdlLnNldFJlZ2lvbiA9IGZ1bmN0aW9uKHZhbHVlKSB7XG5cdGNocm9tZS5zdG9yYWdlLnN5bmMuc2V0KHsncmVnaW9uJzogdmFsdWV9KTtcbn1cblxuU3RvcmFnZS5zZXRHZW5kZXIgPSBmdW5jdGlvbih2YWx1ZSkge1xuXHRjaHJvbWUuc3RvcmFnZS5zeW5jLnNldCh7J2dlbmRlcic6IHZhbHVlfSk7XG59XG5cblN0b3JhZ2Uuc2V0U3BlZWQgPSBmdW5jdGlvbih2YWx1ZSkge1xuXHRjaHJvbWUuc3RvcmFnZS5zeW5jLnNldCh7J3NwZWVkJzogdmFsdWV9KTtcbn1cblxuU3RvcmFnZS5zZXRBdXRvID0gZnVuY3Rpb24odmFsdWUpIHtcblx0Y2hyb21lLnN0b3JhZ2Uuc3luYy5zZXQoeydhdXRvJzogdmFsdWV9KTtcbn1cblxuU3RvcmFnZS5zZXRBdXRvTGFuZyA9IGZ1bmN0aW9uKHZhbHVlKSB7XG5cdGNocm9tZS5zdG9yYWdlLnN5bmMuc2V0KHsnYXV0b0xhbmcnOiB2YWx1ZX0pO1xufVxuXG5TdG9yYWdlLnNldFBhcmFncmFwaFBsYXkgPSBmdW5jdGlvbih2YWx1ZSkge1xuXHRjaHJvbWUuc3RvcmFnZS5zeW5jLnNldCh7J3BhcmFncmFwaFBsYXknOiB2YWx1ZX0pO1xufVxuXG5TdG9yYWdlLmdlbmVyYXRlRGF0ZSA9IGZ1bmN0aW9uKCkge1xuXHR2YXIgZCA9IG5ldyBEYXRlKCk7XG5cdHJldHVybiBkLmdldEZ1bGxZZWFyKCkgKyBcIlwiICsgZC5nZXRNb250aCgpICsgXCJcIiArIGQuZ2V0RGF0ZSgpO1xufVxuXG5TdG9yYWdlLnNldFN1YlRvdGFsID0gZnVuY3Rpb24oc3ViVG90YWxWYWx1ZSkge1xuXG5cdGNocm9tZS5zdG9yYWdlLnN5bmMuZ2V0KFtcInN1YklkXCIsIFwid29yZHNMZWZ0XCJdLCBmdW5jdGlvbih2YWx1ZSkge1xuXHRcdGlmKHR5cGVvZiB2YWx1ZS5zdWJJZCA9PT0gJ3VuZGVmaW5lZCcgfHwgdmFsdWUuc3ViSWQubGVuZ3RoID09IDApIHtcblxuXHRcdFx0dG9TYXZlID0ge1xuXHRcdFx0XHQnd29yZHNUb3RhbCc6IHN1YlRvdGFsVmFsdWVcblx0XHRcdH07XG5cblx0XHRcdGlmKHR5cGVvZiB2YWx1ZS53b3Jkc0xlZnQgPT09ICd1bmRlZmluZWQnKSB7XG5cdFx0XHRcdHRvU2F2ZS53b3Jkc0xlZnQgPSBzdWJUb3RhbFZhbHVlO1xuXHRcdFx0fVxuXG5cdFx0XHRjaHJvbWUuc3RvcmFnZS5zeW5jLnNldCh0b1NhdmUpO1xuXHRcdH1cblx0fSk7XG59XG5cblN0b3JhZ2UuY2xlYXJQdXJjaGFzZSA9IGZ1bmN0aW9uKCkge1xuXHRjaHJvbWUuc3RvcmFnZS5zeW5jLnNldCh7XG5cdFx0bGFzdENoZWNrVGltZTogRGF0ZS5ub3coKS5hZGQoLTEpLnllYXIoKS50b1N0cmluZyhTdG9yYWdlLmRhdGVGb3JtYXQpLFxuXHRcdHByb2ZpbGVJZDogXCJcIixcblx0XHRlZHVjYXRpb25LZXk6IFwiXCJcblx0fSk7XG59XG5cblN0b3JhZ2Uuc3VidHJhY3RXb3Jkc0xlZnQgPSBmdW5jdGlvbihzdWJ0cmFjdCkge1xuXHRjaHJvbWUuc3RvcmFnZS5zeW5jLmdldChbXCJ3b3Jkc0xlZnRcIl0sIGZ1bmN0aW9uKHZhbHVlKSB7XG5cdFx0dmFsdWUud29yZHNMZWZ0IC09IHN1YnRyYWN0O1xuXHRcdGlmKHZhbHVlLndvcmRzTGVmdCA8IDApIHZhbHVlLndvcmRzTGVmdCA9IDA7XG5cdFx0d2luZG93LnNlbmRNZXNzYWdlKFwid2xfdXBkYXRlXCIsIHZhbHVlLndvcmRzTGVmdCk7XG5cdFx0Y2hyb21lLnN0b3JhZ2Uuc3luYy5zZXQodmFsdWUpO1xuXHR9KTtcbn1cblxuU3RvcmFnZS5zaG91bGRDaGVjayA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG5cdGNocm9tZS5zdG9yYWdlLnN5bmMuZ2V0KFtcImxhc3RDaGVja1RpbWVcIl0sIGZ1bmN0aW9uKHZhbHVlKSB7XG5cdFx0XG5cdFx0dmFyIGNoZWNrID0gdHJ1ZTtcblx0XHRcblx0XHRpZih0eXBlb2YodmFsdWUubGFzdENoZWNrVGltZSkgPT09ICd1bmRlZmluZWQnKSB7XG5cdFx0XHRjaGVjayA9IHRydWU7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHZhciBjaGVja1RpbWUgPSBEYXRlLnBhcnNlRXhhY3QodmFsdWUubGFzdENoZWNrVGltZSwgU3RvcmFnZS5kYXRlRm9ybWF0KTtcblx0XHRcdGlmKGNoZWNrVGltZSAhPSBudWxsKSB7XG5cdFx0XHRcdGNoZWNrID0gRGF0ZS5ub3coKS5jb21wYXJlVG8oY2hlY2tUaW1lLmFkZCg2KS5ob3VycygpKSA9PSAxO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRcblx0XHRpZihjaGVjaykge1xuXHRcdFx0Y2hyb21lLnN0b3JhZ2Uuc3luYy5zZXQoe2xhc3RDaGVja1RpbWU6IERhdGUubm93KCkudG9TdHJpbmcoU3RvcmFnZS5kYXRlRm9ybWF0KX0pO1xuXHRcdH1cblx0XHRjYWxsYmFjayhjaGVjayk7XG5cdH0pO1xufVxuXG5TdG9yYWdlLmdldFN1YkluZm8gPSBmdW5jdGlvbihjYWxsYmFjaykge1xuXHRjaHJvbWUuc3RvcmFnZS5zeW5jLmdldChbXCJzdWJJZFwiLCBcImN1cnJlbnRNb250aFwiLCBcIndvcmRzTGVmdFwiLCBcIndvcmRzVG90YWxcIl0sIGZ1bmN0aW9uKHZhbHVlKSB7XG5cblx0XHQvLyBpZih0eXBlb2YgdmFsdWUuc3ViSWQgPT09ICd1bmRlZmluZWQnKSB7XG5cdFx0Ly8gXHRjYWxsYmFjayh2YWx1ZSk7XG5cdFx0Ly8gXHRyZXR1cm47XG5cdFx0Ly8gfVxuXG5cdFx0aWYodmFsdWUuY3VycmVudE1vbnRoICE9PSBTdG9yYWdlLmdlbmVyYXRlRGF0ZSgpKSB7XG5cdFx0XHR2YWx1ZS5jdXJyZW50TW9udGggPSBTdG9yYWdlLmdlbmVyYXRlRGF0ZSgpO1xuXHRcdFx0dmFsdWUud29yZHNMZWZ0ID0gdmFsdWUud29yZHNUb3RhbDtcblx0XHRcdGNocm9tZS5zdG9yYWdlLnN5bmMuc2V0KHZhbHVlKTtcblx0XHR9XG5cblx0XHRjYWxsYmFjayh2YWx1ZSk7XG5cdH0pO1xufVxuXG5TdG9yYWdlLnN0b3JlUGF5cGFsID0gZnVuY3Rpb24ocHJvZmlsZUlkKSB7XG5cdGNocm9tZS5zdG9yYWdlLnN5bmMuc2V0KHtcblx0XHQncHJvZmlsZUlkJzogcHJvZmlsZUlkXG5cdH0pO1xufVxuXG5TdG9yYWdlLmhhc1BheXBhbCA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG5cdGNocm9tZS5zdG9yYWdlLnN5bmMuZ2V0KFsncHJvZmlsZUlkJ10sIGZ1bmN0aW9uKHZhbHVlKSB7XG5cdFx0aWYodmFsdWUucHJvZmlsZUlkKSB7XG5cdFx0XHRjYWxsYmFjayh2YWx1ZS5wcm9maWxlSWQpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRjYWxsYmFjayhcIlwiKTtcblx0XHR9XG5cdH0pO1xufVxuXG5TdG9yYWdlLmhhc1ZhbGlkUGF5cGFsID0gZnVuY3Rpb24oY2FsbGJhY2spIHtcblx0Y2hyb21lLnN0b3JhZ2Uuc3luYy5nZXQoWydwcm9maWxlSWQnXSwgZnVuY3Rpb24odmFsdWUpIHtcblx0XHRpZih2YWx1ZS5wcm9maWxlSWQpIHtcblx0XHRcdFxuXHRcdFx0U3RvcmFnZS5zaG91bGRDaGVjayhmdW5jdGlvbihjaGVjaykge1xuXHRcdFx0XHRpZihjaGVjaykge1xuXHRcblx0XHRcdFx0XHR2YXIgeG1saHR0cD1uZXcgWE1MSHR0cFJlcXVlc3QoKTtcblx0XHRcdFx0XHR4bWxodHRwLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0dmFyIG9iaiA9IEpTT04ucGFyc2UodGhpcy5yZXNwb25zZVRleHQpO1xuXHRcdFx0XHRcdFx0aWYob2JqLnJlc3VsdCA9PT0gJ3N1Y2Nlc3MnKSB7XG5cdFx0XHRcdFx0XHRcdGlmKG9iai5zdWJiZWQgPT0gZmFsc2UpIGNocm9tZS5zdG9yYWdlLnN5bmMuc2V0KHsgJ3Byb2ZpbGVJZCc6IFwiXCIgfSk7XG5cdFx0XHRcdFx0XHRcdGNhbGxiYWNrKG9iai5zdWJiZWQpO1xuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0Y2FsbGJhY2soZmFsc2UpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH07XG5cdFxuXHRcdFx0XHRcdHhtbGh0dHAub3BlbihcIkdFVFwiLCAnaHR0cHM6Ly93d3cuaXNwZWVjaC5vcmcvc2VydmljZXMvc2Vsc3BlYWsvY2hlY2s/cHJvZmlsZV9pZD0nICsgdmFsdWUucHJvZmlsZUlkKTtcblx0XHRcdFx0XHR4bWxodHRwLnNlbmQoKTtcblx0XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Y2FsbGJhY2sodHJ1ZSk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRjYWxsYmFjayhmYWxzZSk7XG5cdFx0fVxuXHR9KTtcbn1cblxuU3RvcmFnZS5nZXRGYXJtQ291bnQgPSBmdW5jdGlvbihjYWxsYmFjaykge1xuXHRjaHJvbWUuc3RvcmFnZS5zeW5jLmdldChbJ2Zhcm1lZENvdW50J10sIGZ1bmN0aW9uKHZhbHVlKSB7XG5cdFx0aWYodHlwZW9mKHZhbHVlLmZhcm1lZENvdW50KSA9PT0gJ3VuZGVmaW5lZCcpIHtcblx0XHRcdHZhbHVlLmZhcm1lZENvdW50ID0gMDtcblx0XHR9XG5cdFx0Y2FsbGJhY2sodmFsdWUuZmFybWVkQ291bnQpO1xuXHR9KTtcbn1cblxuU3RvcmFnZS5pbmNyZW1lbnRGYXJtQ291bnQgPSBmdW5jdGlvbihjYWxsYmFjaykge1xuXHRjaHJvbWUuc3RvcmFnZS5zeW5jLmdldChbJ2Zhcm1lZENvdW50J10sIGZ1bmN0aW9uKHZhbHVlKSB7XG5cdFx0aWYodHlwZW9mKHZhbHVlLmZhcm1lZENvdW50KSA9PT0gJ3VuZGVmaW5lZCcpIHtcblx0XHRcdHZhbHVlLmZhcm1lZENvdW50ID0gMDtcblx0XHR9XG5cdFx0dmFsdWUuZmFybWVkQ291bnQrKztcblx0XHRjaHJvbWUuc3RvcmFnZS5zeW5jLnNldCh2YWx1ZSk7XG5cdFx0aWYoISFjYWxsYmFjaylcblx0XHRcdGNhbGxiYWNrKHZhbHVlLmZhcm1lZENvdW50KTtcblx0fSk7XG59XG5cblN0b3JhZ2Uuc2V0UHJvUGVyaW9kID0gZnVuY3Rpb24oZGF5cykge1xuXHR2YXIgZW5kRGF0ZSA9IERhdGUudG9kYXkoKS5hZGQoZGF5cykuZGF5cygpO1xuXHRcblx0Y2hyb21lLnN0b3JhZ2Uuc3luYy5zZXQoe1xuXHRcdHByb1BlcmlvZDogZW5kRGF0ZS50b0RhdGVTdHJpbmcoKSxcblx0fSk7XG59XG5cblN0b3JhZ2UuaW5Qcm9QZXJpb2QgPSBmdW5jdGlvbihjYWxsYmFjaykge1xuXHRjaHJvbWUuc3RvcmFnZS5zeW5jLmdldChbXCJwcm9QZXJpb2RcIl0sIGZ1bmN0aW9uKHZhbHVlKSB7XG5cdFx0dmFyIHByb0VuZCA9IERhdGUucGFyc2UodmFsdWUucHJvUGVyaW9kKTtcblx0XHRcblx0XHRpZihwcm9FbmQgPT0gbnVsbCkge1xuXHRcdFx0Y2FsbGJhY2soZmFsc2UpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHRcblx0XHRjYWxsYmFjayhEYXRlLnRvZGF5KCkuY29tcGFyZVRvKHByb0VuZCkgPD0gMCk7XG5cdH0pO1xufVxuXG5TdG9yYWdlLnNldEZhcm1pbmdVc2VkID0gZnVuY3Rpb24oKSB7XG5cdGNocm9tZS5zdG9yYWdlLnN5bmMuc2V0KHtcblx0XHRmYXJtaW5nVXNlZDogdHJ1ZVxuXHR9KTtcbn1cblxuU3RvcmFnZS5nZXRGYXJtaW5nVXNlZCA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG5cdGNocm9tZS5zdG9yYWdlLnN5bmMuZ2V0KFtcImZhcm1pbmdVc2VkXCJdLCBmdW5jdGlvbih2YWx1ZSkge1xuXHRcdGlmKHR5cGVvZih2YWx1ZS5mYXJtaW5nVXNlZCkgPT09ICd1bmRlZmluZWQnKSB7XG5cdFx0XHR2YWx1ZS5mYXJtaW5nVXNlZCA9IGZhbHNlO1xuXHRcdH1cblx0XHRjYWxsYmFjayh2YWx1ZS5mYXJtaW5nVXNlZCk7XG5cdH0pO1xufVxuXG5TdG9yYWdlLnNldEVkdWNhdGlvbktleSA9IGZ1bmN0aW9uKGtleSkge1xuXHRjaHJvbWUuc3RvcmFnZS5zeW5jLnNldCh7XG5cdFx0ZWR1Y2F0aW9uS2V5OiBrZXlcblx0fSk7XG59XG5cblN0b3JhZ2UuZ2V0RWR1Y2F0aW9uS2V5ID0gZnVuY3Rpb24oY2FsbGJhY2spIHtcblx0Y2hyb21lLnN0b3JhZ2Uuc3luYy5nZXQoW1wiZWR1Y2F0aW9uS2V5XCJdLCBmdW5jdGlvbih2YWx1ZSkge1xuXHRcdGlmKHR5cGVvZih2YWx1ZS5lZHVjYXRpb25LZXkpID09PSAndW5kZWZpbmVkJykge1xuXHRcdFx0dmFsdWUuZWR1Y2F0aW9uS2V5ID0gXCJcIjtcblx0XHR9XG5cdFx0Y2FsbGJhY2sodmFsdWUuZWR1Y2F0aW9uS2V5KTtcblx0fSk7XG59XG5cblN0b3JhZ2UuZW1haWxTdWJtaXR0ZWQgPSBmdW5jdGlvbihjYWxsYmFjaykge1xuXHRjaHJvbWUuc3RvcmFnZS5zeW5jLmdldChbXCJlbWFpbFN1Ym1pdHRlZFwiXSwgZnVuY3Rpb24odmFsdWUpIHtcblx0XHRpZih0eXBlb2YodmFsdWUuZW1haWxTdWJtaXR0ZWQpID09PSAndW5kZWZpbmVkJykge1xuXHRcdFx0dmFsdWUuZW1haWxTdWJtaXR0ZWQgPSBmYWxzZTtcblx0XHR9XG5cdFx0Y2FsbGJhY2sodmFsdWUuZW1haWxTdWJtaXR0ZWQpO1xuXHR9KTtcbn1cblxuU3RvcmFnZS5zZXRFbWFpbFN1Ym1pdHRlZCA9IGZ1bmN0aW9uKCkge1xuXHRjaHJvbWUuc3RvcmFnZS5zeW5jLnNldCh7XG5cdFx0ZW1haWxTdWJtaXR0ZWQ6IHRydWVcblx0fSk7XG59XG5cblN0b3JhZ2UuZ2V0UGxheUJ1dHRvbiA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG5cdGNocm9tZS5zdG9yYWdlLnN5bmMuZ2V0KFtcInBsYXlCdXR0b25cIl0sIGZ1bmN0aW9uKHZhbHVlKSB7XG5cdFx0aWYodHlwZW9mKHZhbHVlLnBsYXlCdXR0b24pID09PSAndW5kZWZpbmVkJykge1xuXHRcdFx0dmFsdWUucGxheUJ1dHRvbiA9IHRydWU7XG5cdFx0fVxuXHRcdGNhbGxiYWNrKHZhbHVlLnBsYXlCdXR0b24pO1xuXHR9KTtcbn1cblxuU3RvcmFnZS5zZXRQbGF5QnV0dG9uID0gZnVuY3Rpb24odmFsdWUpIHtcblx0Y2hyb21lLnN0b3JhZ2Uuc3luYy5zZXQoe1xuXHRcdCdwbGF5QnV0dG9uJzogdmFsdWVcblx0fSk7XG59XG5cblN0b3JhZ2Uuc2V0SG90a2V5RW5hYmxlZCA9IGZ1bmN0aW9uKHZhbHVlKSB7XG5cdGNocm9tZS5zdG9yYWdlLnN5bmMuc2V0KHtcblx0XHQnaG90a2V5RW5hYmxlZCc6IHZhbHVlXG5cdH0pO1xufVxuXG5TdG9yYWdlLmdldEhvdGtleUVuYWJsZWQgPSBmdW5jdGlvbihjYWxsYmFjaykge1xuXHRjaHJvbWUuc3RvcmFnZS5zeW5jLmdldChbXCJob3RrZXlFbmFibGVkXCJdLCBmdW5jdGlvbih2YWx1ZSkge1xuXHRcdGlmKHR5cGVvZih2YWx1ZS5ob3RrZXlFbmFibGVkKSA9PT0gJ3VuZGVmaW5lZCcpIHtcblx0XHRcdHZhbHVlLmhvdGtleUVuYWJsZWQgPSB0cnVlO1xuXHRcdH1cblx0XHRjYWxsYmFjayh2YWx1ZS5ob3RrZXlFbmFibGVkKTtcblx0fSk7XG59XG5cblN0b3JhZ2Uuc2V0SG90a2V5ID0gZnVuY3Rpb24odmFsdWUpIHtcblx0Y2hyb21lLnN0b3JhZ2Uuc3luYy5zZXQoe1xuXHRcdCdob3RrZXknOiB2YWx1ZVxuXHR9KTtcbn1cblxuU3RvcmFnZS5nZXRIb3RrZXkgPSBmdW5jdGlvbihjYWxsYmFjaykge1xuXHRjaHJvbWUuc3RvcmFnZS5zeW5jLmdldChbXCJob3RrZXlcIl0sIGZ1bmN0aW9uKHZhbHVlKSB7XG5cdFx0aWYodHlwZW9mKHZhbHVlLmhvdGtleSkgPT09ICd1bmRlZmluZWQnKSB7XG5cdFx0XHR2YWx1ZS5ob3RrZXkgPSBcImN0cmwgKyBzaGlmdCArIDgzXCI7XG5cdFx0fVxuXHRcdGNhbGxiYWNrKHZhbHVlLmhvdGtleSk7XG5cdH0pO1xufVxuXG5TdG9yYWdlLmdldEhvdGtleUlmRW5hYmxlZCA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG5cdGNocm9tZS5zdG9yYWdlLnN5bmMuZ2V0KFtcImhvdGtleUVuYWJsZWRcIiwgXCJob3RrZXlcIl0sIGZ1bmN0aW9uKHZhbHVlKSB7XG5cdFx0aWYodHlwZW9mKHZhbHVlLmhvdGtleUVuYWJsZWQpID09PSAndW5kZWZpbmVkJyB8fCB0eXBlb2YodmFsdWUuaG90a2V5KSA9PT0gJ3VuZGVmaW5lZCcpIHtcblx0XHRcdGNhbGxiYWNrKFwiXCIpO1xuXHRcdH0gZWxzZSBpZih2YWx1ZS5ob3RrZXlFbmFibGVkKSB7XG5cdFx0XHRjYWxsYmFjayh2YWx1ZS5ob3RrZXkpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRjYWxsYmFjayhcIlwiKTtcblx0XHR9XG5cdH0pO1xufVxuXG5TdG9yYWdlLnNob3VsZFNob3dQb3BVbmRlciA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gICAgY2FsbGJhY2soZmFsc2UpO1xufVxuXG5TdG9yYWdlLnNldFBvcFVuZGVyU2hvd24gPSBmdW5jdGlvbigpIHtcblx0XG5cdHZhciBlbmREYXRlID0gRGF0ZS5ub3coKS5hZGQoMSkuZGF5cygpO1xuXHRcblx0Y2hyb21lLnN0b3JhZ2Uuc3luYy5zZXQoe1xuXHRcdG5leHRQb3BVbmRlcjogZW5kRGF0ZS50b1N0cmluZyhTdG9yYWdlLmRhdGVGb3JtYXQpXG5cdH0pO1xufVxuXG5TdG9yYWdlLmxvZyA9IGZ1bmN0aW9uKGlucHV0KSB7XG5cdGNocm9tZS5zdG9yYWdlLnN5bmMuZ2V0KGlucHV0LCBmdW5jdGlvbih2YWx1ZSkge1xuXHRcdGNvbnNvbGUubG9nKHZhbHVlKTtcblx0fSk7XG59XG5cblN0b3JhZ2UuZW1wdHlXb3JkcyA9IGZ1bmN0aW9uKCkge1xuXHRjaHJvbWUuc3RvcmFnZS5zeW5jLnNldCh7XG5cdFx0XCJ3b3Jkc0xlZnRcIjogMFxuXHR9KTtcbn1cblxuU3RvcmFnZS5jbGVhbkluc3RhbGwgPSBmdW5jdGlvbigpIHtcblx0d2luZG93LmxvY2FsU3RvcmFnZS5jbGVhcigpO1xuXHRjaHJvbWUuc3RvcmFnZS5zeW5jLmNsZWFyKGZ1bmN0aW9uKCkge1xuXHRcdGNocm9tZS5ydW50aW1lLnJlbG9hZCgpO1xuXHR9KTtcbn1cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gc3JjL2pzL3NlbGVjdC1hbmQtc3BlYWsvc3RvcmFnZS5qcyJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=")},20:function(module,exports){eval('\nvar sku_sub = \'sepak_sub\';\nvar sku_sub_monthly = sku_sub + \'_monthly\';\nvar sku_sub_yearly = sku_sub + \'_yearly\';\nvar purchase_sku = sku_sub;\n\nvar paypal_server = \'https://www.ispeech.org/services/selspeak/subscribe\';\n// var paypal_server = \'http://localhost/paypal.php\';\n\nbuy = function buy(sku, onPurchase, onPurchaseFail) {\n\tgoogle.payments.inapp.buy({\n\t\t\'parameters\': { \'env\': \'prod\' },\n\t\t\'sku\': sku,\n\t\t\'success\': onPurchase,\n\t\t\'failure\': onPurchaseFail\n\t});\n};\n\nisSubbed = function isSubbed(callback) {\n\t// callback(true); return;\n\tif (window.isFreeMode) {\n\t\tcallback(true);\n\t\treturn;\n\t}\n\tisPurchased(sku_sub, function (subbed) {\n\t\tif (subbed) {\n\t\t\tcallback(true);\n\t\t} else {\n\t\t\tStorage.hasValidPaypal(function (paypalValid) {\n\t\t\t\tif (paypalValid) {\n\t\t\t\t\tcallback(true);\n\t\t\t\t} else {\n\t\t\t\t\thasProFromEducation(function (educationValid) {\n\t\t\t\t\t\tif (educationValid) {\n\t\t\t\t\t\t\tcallback(true);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tStorage.inProPeriod(callback);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t});\n};\n\nisPurchased = function isPurchased(sku, callback) {\n\n\tvar onLicenseUpdate = function onLicenseUpdate(response) {\n\t\tvar licenses = response.response.details;\n\t\tvar count = licenses.length;\n\t\tvar found = false;\n\t\tfor (var i = 0; i < count; i++) {\n\t\t\tvar license = licenses[i];\n\n\t\t\tif (license.sku.startsWith(sku) && license.state === "ACTIVE") {\n\t\t\t\tcallback(true);\n\t\t\t\tfound = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif (!found) {\n\t\t\tcallback(false);\n\t\t}\n\t};\n\n\tvar onLicenseUpdateFail = function onLicenseUpdateFail() {\n\t\tcallback(false);\n\t};\n\n\tgoogle.payments.inapp.getPurchases({\n\t\t\'parameters\': { env: "prod" },\n\t\t\'success\': onLicenseUpdate,\n\t\t\'failure\': onLicenseUpdateFail\n\t});\n};\n\nstartPaypal = function startPaypal(sub_type) {\n\t//   var desc = chrome.i18n.getMessage("free_trial") + " - " + chrome.i18n.getMessage(sub_type + "_desc");\n\tvar desc = chrome.i18n.getMessage(sub_type + "_desc");\n\twindow.open(paypal_server + \'?step=start&sub_type=\' + sub_type + \'&sub_desc=\' + encodeURI(desc)).focus();\n};\n\nstartBuy = function startBuy(logFunc, sku) {\n\n\tif (typeof sku === \'undefined\') {\n\t\tsku = purchase_sku;\n\t}\n\n\tlogFunc(\'general\', \'sub_started\');\n\n\tbuy(sku, function () {\n\t\tshowSubConf();\n\t\t// document.getElementById(\'subButton\').innerHTML = "Subscribed!";\n\t\tlogFunc(\'general\', \'subAdded\');\n\t}, function () {\n\t\tlogFunc(\'general\', \'subFailed\');\n\t});\n};\n\nopenOptions = function openOptions(showBox) {\n\n\tif (typeof showBox === \'undefined\') {\n\t\tshowBox = true;\n\t}\n\n\tvar optionsUrl = chrome.extension.getURL(\'options.html?\');\n\toptionsUrl += showBox ? "canceled" : "";\n\tvar optionsWindow = window.open(optionsUrl);\n};\n\nopenEdu = function openEdu() {\n\twindow.open(chrome.extension.getURL(\'options.html?step=edu\'));\n};\n\nactivatePaypal = function activatePaypal(profile_id, callback) {\n\tcallback = callback || function () {};\n\n\tisSubbed(function (valid) {\n\t\tif (valid) {\n\t\t\tcallback(true);\n\t\t\treturn;\n\t\t} else {\n\t\t\tvar xml = new XMLHttpRequest();\n\n\t\t\txml.onreadystatechange = function () {\n\t\t\t\tif (xml.readyState == 4 && xml.status == 200) {\n\t\t\t\t\tvar response = JSON.parse(xml.responseText);\n\t\t\t\t\tif (response.result == "success") {\n\t\t\t\t\t\tStorage.storePaypal(profile_id);\n\t\t\t\t\t\tcallback(true);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcallback(false);\n\t\t\t\t\t}\n\t\t\t\t} else if (xml.readyState == 4) {\n\t\t\t\t\tcallback(false);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\txml.open("GET", "https://www.ispeech.org/services/selspeak/activate?profile_id=" + profile_id, true);\n\t\t\txml.send();\n\t\t}\n\t});\n};\n\napplyMeta = function applyMeta(metaObj) {\n\n\tif (metaObj.result != \'success\') {\n\t\treturn;\n\t}\n\n\tswitch (metaObj.action) {\n\t\tcase \'subbed\':\n\t\t\t// Storage.storePaypal(metaObj.profile_id);\n\t\t\tactivatePaypal(metaObj.profile_id, function () {\n\t\t\t\twindow.sendMessage("track", { "tag": \'payment\', "msg": \'paypal_added\' });\n\t\t\t\twindow.sendMessage("appView", { "tag": "Subscribed" });\n\t\t\t\twindow.sendMessage("subbed");\n\t\t\t});\n\t\t\tbreak;\n\n\t\tcase \'canceled\':\n\t\t\twindow.sendMessage("track", { "tag": \'payment\', "msg": \'paypal_canceled\' });\n\t\t\twindow.sendMessage("appView", { "tag": "Payment Canceled" });\n\t\t\twindow.sendMessage("sub_canceled");\n\t\t\tbreak;\n\n\t\tcase \'eduCanceled\':\n\t\t\twindow.sendMessage("edu_canceled");\n\t\t\twindow.sendMessage("appView", { "tag": "Edu Payment Canceled" });\n\t\t\tbreak;\n\n\t\tcase \'eduPaid\':\n\t\t\twindow.sendMessage("appView", { "tag": "Edu Paid" });\n\t\t\tbreak;\n\t}\n};\n\nhasProFromEducation = function hasProFromEducation(callback) {\n\tStorage.getEducationKey(function (key) {\n\t\tif (key) {\n\t\t\tStorage.shouldCheck(function (check) {\n\t\t\t\tvalidateEducationKey(key, function (valid) {\n\t\t\t\t\tif (valid) {\n\t\t\t\t\t\tcallback(true);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcallback(false);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t} else {\n\t\t\tcallback(false);\n\t\t}\n\t});\n};\n\nvar validEducationKey = false;\nvalidateEducationKey = function validateEducationKey(key, callback) {\n\tvar checkTokenRequest = new XMLHttpRequest();\n\n\t//   if(validEducationKey) { callback(validEducationKey); return; }\n\n\tcheckTokenRequest.onreadystatechange = function () {\n\t\tif (checkTokenRequest.readyState == 4) {\n\t\t\tvar response = JSON.parse(checkTokenRequest.responseText);\n\t\t\tvar credits = response.credits;\n\t\t\tvalidEducationKey = typeof credits !== \'undefined\';\n\t\t\tcallback(validEducationKey);\n\t\t}\n\t};\n\n\tcheckTokenRequest.open("GET", "https://api.ispeech.org/api/rest?action=information&output=json&apikey=" + key, true);\n\tcheckTokenRequest.send();\n};\n\nactivateEducationKey = function activateEducationKey(key, callback) {\n\tkey = key || "";\n\n\tif (key.length == 0) {\n\t\tcallback(false);\n\t\treturn;\n\t}\n\n\tStorage.getEducationKey(function (eduKey) {\n\t\tif (eduKey == key) {\n\t\t\tcallback(true);\n\t\t} else {\n\t\t\tvar checkTokenRequest = new XMLHttpRequest();\n\n\t\t\tcheckTokenRequest.onreadystatechange = function () {\n\t\t\t\tif (checkTokenRequest.readyState == 4) {\n\t\t\t\t\tvar response = JSON.parse(checkTokenRequest.responseText);\n\t\t\t\t\tvar credits = response.credits;\n\t\t\t\t\tif (credits > 0) {\n\t\t\t\t\t\tuseEducationKey(key, function (successful) {\n\t\t\t\t\t\t\tif (successful) {\n\t\t\t\t\t\t\t\tStorage.setEducationKey(key);\n\t\t\t\t\t\t\t\tcallback(true);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tcallback(false);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcallback(false);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tcheckTokenRequest.open("GET", "https://api.ispeech.org/api/rest?action=information&output=json&apikey=" + key, true);\n\t\t\tcheckTokenRequest.send();\n\t\t}\n\t});\n};\n\nuseEducationKey = function useEducationKey(key, callback) {\n\tvar checkTokenRequest = new XMLHttpRequest();\n\n\tcheckTokenRequest.onreadystatechange = function () {\n\t\tif (checkTokenRequest.readyState == 2) {\n\t\t\tvar successful = checkTokenRequest.getResponseHeader(\'Content-Type\').startsWith(\'audio\');\n\t\t\tcallback(successful);\n\t\t}\n\t};\n\n\tcheckTokenRequest.open("GET", "https://api.ispeech.org/api/rest?action=convert&text=something&voice=voice&apikey=" + key, true);\n\tcheckTokenRequest.send();\n};\n\ndoPopUnder = function doPopUnder(tabs) {\n\tif (typeof tabs === "string") tabs = [tabs];\n\tchrome.tabs.query({ active: true, currentWindow: true }, function (arrayOfTabs) {\n\t\tvar activeTab = arrayOfTabs[0];\n\t\tvar activeTabId = arrayOfTabs[0].id;\n\n\t\tfor (var i = 0; i < tabs.length; i++) {\n\t\t\twindow.open(tabs[i]);\n\t\t}\n\t\tsetTimeout(function () {\n\t\t\tchrome.tabs.update(activeTabId, { selected: true });\n\t\t}, 0);\n\t});\n};//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjAuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL2pzL3V0aWxzL2J1eVV0aWxzLmpzP2NmMDEiXSwic291cmNlc0NvbnRlbnQiOlsiXG52YXIgc2t1X3N1YiA9ICdzZXBha19zdWInO1xudmFyIHNrdV9zdWJfbW9udGhseSA9IHNrdV9zdWIgKyAnX21vbnRobHknO1xudmFyIHNrdV9zdWJfeWVhcmx5ID0gc2t1X3N1YiArICdfeWVhcmx5JztcbnZhciBwdXJjaGFzZV9za3UgPSBza3Vfc3ViO1xuXG52YXIgcGF5cGFsX3NlcnZlciA9ICdodHRwczovL3d3dy5pc3BlZWNoLm9yZy9zZXJ2aWNlcy9zZWxzcGVhay9zdWJzY3JpYmUnO1xuLy8gdmFyIHBheXBhbF9zZXJ2ZXIgPSAnaHR0cDovL2xvY2FsaG9zdC9wYXlwYWwucGhwJztcblxuYnV5ID0gZnVuY3Rpb24oc2t1LCBvblB1cmNoYXNlLCBvblB1cmNoYXNlRmFpbCkge1xuXHRnb29nbGUucGF5bWVudHMuaW5hcHAuYnV5KHtcblx0XHQncGFyYW1ldGVycyc6IHsnZW52JzogJ3Byb2QnfSxcblx0XHQnc2t1Jzogc2t1LFxuXHRcdCdzdWNjZXNzJzogb25QdXJjaGFzZSxcblx0XHQnZmFpbHVyZSc6IG9uUHVyY2hhc2VGYWlsXG5cdH0pO1xufTtcblxuaXNTdWJiZWQgPSBmdW5jdGlvbihjYWxsYmFjaykge1xuXHQvLyBjYWxsYmFjayh0cnVlKTsgcmV0dXJuO1xuXHRpZih3aW5kb3cuaXNGcmVlTW9kZSkge1xuXHRcdGNhbGxiYWNrKHRydWUpO1xuXHRcdHJldHVybjtcblx0fVxuXHRpc1B1cmNoYXNlZChza3Vfc3ViLCBmdW5jdGlvbihzdWJiZWQpIHtcblx0XHRpZihzdWJiZWQpIHtcblx0XHRcdGNhbGxiYWNrKHRydWUpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRTdG9yYWdlLmhhc1ZhbGlkUGF5cGFsKGZ1bmN0aW9uKHBheXBhbFZhbGlkKSB7XG5cdFx0XHRcdGlmKHBheXBhbFZhbGlkKSB7XG5cdFx0XHRcdFx0Y2FsbGJhY2sodHJ1ZSk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0aGFzUHJvRnJvbUVkdWNhdGlvbihmdW5jdGlvbihlZHVjYXRpb25WYWxpZCkge1xuXHRcdFx0XHRcdFx0aWYoZWR1Y2F0aW9uVmFsaWQpIHtcblx0XHRcdFx0XHRcdFx0Y2FsbGJhY2sodHJ1ZSk7XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRTdG9yYWdlLmluUHJvUGVyaW9kKGNhbGxiYWNrKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fVxuXHR9KTtcbn1cblxuaXNQdXJjaGFzZWQgPSBmdW5jdGlvbihza3UsIGNhbGxiYWNrKSB7XG5cblx0dmFyIG9uTGljZW5zZVVwZGF0ZSA9IGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG5cdFx0dmFyIGxpY2Vuc2VzID0gcmVzcG9uc2UucmVzcG9uc2UuZGV0YWlscztcblx0XHR2YXIgY291bnQgPSBsaWNlbnNlcy5sZW5ndGg7XG5cdFx0dmFyIGZvdW5kID0gZmFsc2U7XG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBjb3VudDsgaSsrKSB7XG5cdFx0XHR2YXIgbGljZW5zZSA9IGxpY2Vuc2VzW2ldO1xuXG5cdFx0XHRpZihsaWNlbnNlLnNrdS5zdGFydHNXaXRoKHNrdSkgJiYgbGljZW5zZS5zdGF0ZSA9PT0gXCJBQ1RJVkVcIikge1xuXHRcdFx0XHRjYWxsYmFjayh0cnVlKTtcblx0XHRcdFx0Zm91bmQgPSB0cnVlO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdH1cblx0XHR9XG5cdFx0aWYoIWZvdW5kKSB7XG5cdFx0XHRjYWxsYmFjayhmYWxzZSk7XG5cdFx0fVxuXHR9O1xuXG5cdHZhciBvbkxpY2Vuc2VVcGRhdGVGYWlsID0gZnVuY3Rpb24oKSB7XG5cdFx0Y2FsbGJhY2soZmFsc2UpO1xuXHR9O1xuXG5cdGdvb2dsZS5wYXltZW50cy5pbmFwcC5nZXRQdXJjaGFzZXMoe1xuXHRcdCdwYXJhbWV0ZXJzJzoge2VudjogXCJwcm9kXCJ9LFxuXHRcdCdzdWNjZXNzJzogb25MaWNlbnNlVXBkYXRlLFxuXHRcdCdmYWlsdXJlJzogb25MaWNlbnNlVXBkYXRlRmFpbFxuXHR9KTtcbn1cblxuc3RhcnRQYXlwYWwgPSBmdW5jdGlvbihzdWJfdHlwZSkge1xuLy8gICB2YXIgZGVzYyA9IGNocm9tZS5pMThuLmdldE1lc3NhZ2UoXCJmcmVlX3RyaWFsXCIpICsgXCIgLSBcIiArIGNocm9tZS5pMThuLmdldE1lc3NhZ2Uoc3ViX3R5cGUgKyBcIl9kZXNjXCIpO1xuXHR2YXIgZGVzYyA9IGNocm9tZS5pMThuLmdldE1lc3NhZ2Uoc3ViX3R5cGUgKyBcIl9kZXNjXCIpO1xuXHR3aW5kb3cub3BlbihwYXlwYWxfc2VydmVyICsgJz9zdGVwPXN0YXJ0JnN1Yl90eXBlPScgKyBzdWJfdHlwZSArICcmc3ViX2Rlc2M9JyArIGVuY29kZVVSSShkZXNjKSkuZm9jdXMoKTtcbn1cblxuc3RhcnRCdXkgPSBmdW5jdGlvbihsb2dGdW5jLCBza3UpIHtcblxuXHRpZih0eXBlb2Ygc2t1ID09PSAndW5kZWZpbmVkJykge1xuXHRcdHNrdSA9IHB1cmNoYXNlX3NrdTtcblx0fVxuXG5cdGxvZ0Z1bmMoJ2dlbmVyYWwnLCAnc3ViX3N0YXJ0ZWQnKTtcblxuXHRidXkoc2t1LCBmdW5jdGlvbigpIHtcblx0XHRzaG93U3ViQ29uZigpO1xuXHRcdC8vIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdWJCdXR0b24nKS5pbm5lckhUTUwgPSBcIlN1YnNjcmliZWQhXCI7XG5cdFx0bG9nRnVuYygnZ2VuZXJhbCcsICdzdWJBZGRlZCcpO1xuXHR9LCBmdW5jdGlvbigpIHtcblx0XHRsb2dGdW5jKCdnZW5lcmFsJywgJ3N1YkZhaWxlZCcpO1xuXHR9KTtcbn07XG5cbm9wZW5PcHRpb25zID0gZnVuY3Rpb24oc2hvd0JveCkge1xuXG5cdGlmKHR5cGVvZiBzaG93Qm94ID09PSAndW5kZWZpbmVkJykge1xuXHRcdHNob3dCb3ggPSB0cnVlO1xuXHR9XG5cblx0dmFyIG9wdGlvbnNVcmwgPSBjaHJvbWUuZXh0ZW5zaW9uLmdldFVSTCgnb3B0aW9ucy5odG1sPycpO1xuXHRvcHRpb25zVXJsICs9IChzaG93Qm94ID8gXCJjYW5jZWxlZFwiIDogXCJcIik7XG5cdHZhciBvcHRpb25zV2luZG93ID0gd2luZG93Lm9wZW4ob3B0aW9uc1VybCk7XG59O1xuXG5vcGVuRWR1ID0gZnVuY3Rpb24oKSB7XG5cdHdpbmRvdy5vcGVuKGNocm9tZS5leHRlbnNpb24uZ2V0VVJMKCdvcHRpb25zLmh0bWw/c3RlcD1lZHUnKSk7XG59XG5cbmFjdGl2YXRlUGF5cGFsID0gZnVuY3Rpb24ocHJvZmlsZV9pZCwgY2FsbGJhY2spIHtcblx0Y2FsbGJhY2sgPSBjYWxsYmFjayB8fCBmdW5jdGlvbigpIHt9O1xuXG5cdGlzU3ViYmVkKGZ1bmN0aW9uKHZhbGlkKSB7XG5cdFx0aWYodmFsaWQpIHtcblx0XHRcdGNhbGxiYWNrKHRydWUpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR2YXIgeG1sID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG5cblx0XHRcdHhtbC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0aWYoeG1sLnJlYWR5U3RhdGUgPT0gNCAmJiB4bWwuc3RhdHVzID09IDIwMCkge1xuXHRcdFx0XHRcdHZhciByZXNwb25zZSA9IEpTT04ucGFyc2UoeG1sLnJlc3BvbnNlVGV4dCk7XG5cdFx0XHRcdFx0aWYocmVzcG9uc2UucmVzdWx0ID09IFwic3VjY2Vzc1wiKSB7XG5cdFx0XHRcdFx0XHRTdG9yYWdlLnN0b3JlUGF5cGFsKHByb2ZpbGVfaWQpO1xuXHRcdFx0XHRcdFx0Y2FsbGJhY2sodHJ1ZSk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdGNhbGxiYWNrKGZhbHNlKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gZWxzZSBpZih4bWwucmVhZHlTdGF0ZSA9PSA0KSB7XG5cdFx0XHRcdFx0Y2FsbGJhY2soZmFsc2UpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdHhtbC5vcGVuKFwiR0VUXCIsIFwiaHR0cHM6Ly93d3cuaXNwZWVjaC5vcmcvc2VydmljZXMvc2Vsc3BlYWsvYWN0aXZhdGU/cHJvZmlsZV9pZD1cIiArIHByb2ZpbGVfaWQsIHRydWUpO1xuXHRcdFx0eG1sLnNlbmQoKTtcblx0XHR9XG5cdH0pO1xufVxuXG5hcHBseU1ldGEgPSBmdW5jdGlvbihtZXRhT2JqKSB7XG5cblx0aWYobWV0YU9iai5yZXN1bHQgIT0gJ3N1Y2Nlc3MnKSB7XG5cdFx0cmV0dXJuO1xuXHR9XG5cblx0c3dpdGNoKG1ldGFPYmouYWN0aW9uKSB7XG5cdFx0Y2FzZSAnc3ViYmVkJzpcblx0XHRcdC8vIFN0b3JhZ2Uuc3RvcmVQYXlwYWwobWV0YU9iai5wcm9maWxlX2lkKTtcblx0XHRcdGFjdGl2YXRlUGF5cGFsKG1ldGFPYmoucHJvZmlsZV9pZCwgZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHdpbmRvdy5zZW5kTWVzc2FnZShcInRyYWNrXCIsIHtcInRhZ1wiOiAncGF5bWVudCcsIFwibXNnXCI6ICAncGF5cGFsX2FkZGVkJ30pO1xuXHRcdFx0XHR3aW5kb3cuc2VuZE1lc3NhZ2UoXCJhcHBWaWV3XCIsIHtcInRhZ1wiOiBcIlN1YnNjcmliZWRcIn0pO1xuXHRcdFx0XHR3aW5kb3cuc2VuZE1lc3NhZ2UoXCJzdWJiZWRcIik7XG5cdFx0XHR9KTtcblx0XHRcdGJyZWFrO1xuXG5cdFx0Y2FzZSAnY2FuY2VsZWQnOlxuXHRcdFx0d2luZG93LnNlbmRNZXNzYWdlKFwidHJhY2tcIiwge1widGFnXCI6ICdwYXltZW50JywgXCJtc2dcIjogICdwYXlwYWxfY2FuY2VsZWQnfSk7XG5cdFx0XHR3aW5kb3cuc2VuZE1lc3NhZ2UoXCJhcHBWaWV3XCIsIHtcInRhZ1wiOiBcIlBheW1lbnQgQ2FuY2VsZWRcIn0pXG5cdFx0XHR3aW5kb3cuc2VuZE1lc3NhZ2UoXCJzdWJfY2FuY2VsZWRcIik7XG5cdFx0XHRicmVhaztcblx0XHRcdFxuXHRcdGNhc2UgJ2VkdUNhbmNlbGVkJzpcblx0XHRcdHdpbmRvdy5zZW5kTWVzc2FnZShcImVkdV9jYW5jZWxlZFwiKTtcblx0XHRcdHdpbmRvdy5zZW5kTWVzc2FnZShcImFwcFZpZXdcIiwge1widGFnXCI6IFwiRWR1IFBheW1lbnQgQ2FuY2VsZWRcIn0pXG5cdFx0XHRicmVhaztcblxuXHRcdGNhc2UgJ2VkdVBhaWQnOlxuXHRcdFx0d2luZG93LnNlbmRNZXNzYWdlKFwiYXBwVmlld1wiLCB7XCJ0YWdcIjogXCJFZHUgUGFpZFwifSk7XG5cdFx0XHRicmVhaztcblx0fVxufVxuXG5oYXNQcm9Gcm9tRWR1Y2F0aW9uID0gZnVuY3Rpb24oY2FsbGJhY2spIHtcblx0U3RvcmFnZS5nZXRFZHVjYXRpb25LZXkoZnVuY3Rpb24oa2V5KSB7XG5cdFx0aWYoa2V5KSB7XG5cdFx0XHRTdG9yYWdlLnNob3VsZENoZWNrKGZ1bmN0aW9uKGNoZWNrKSB7XG5cdFx0XHRcdHZhbGlkYXRlRWR1Y2F0aW9uS2V5KGtleSwgZnVuY3Rpb24odmFsaWQpIHtcblx0XHRcdFx0XHRpZih2YWxpZCkge1xuXHRcdFx0XHRcdFx0Y2FsbGJhY2sodHJ1ZSk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdGNhbGxiYWNrKGZhbHNlKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGNhbGxiYWNrKGZhbHNlKTtcblx0XHR9XG5cdH0pO1xufVxuXG52YXIgdmFsaWRFZHVjYXRpb25LZXkgPSBmYWxzZVxudmFsaWRhdGVFZHVjYXRpb25LZXkgPSBmdW5jdGlvbihrZXksIGNhbGxiYWNrKSB7XG5cdHZhciBjaGVja1Rva2VuUmVxdWVzdCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuXHRcbi8vICAgaWYodmFsaWRFZHVjYXRpb25LZXkpIHsgY2FsbGJhY2sodmFsaWRFZHVjYXRpb25LZXkpOyByZXR1cm47IH1cblx0XG5cdGNoZWNrVG9rZW5SZXF1ZXN0Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCkge1xuXHRcdGlmKGNoZWNrVG9rZW5SZXF1ZXN0LnJlYWR5U3RhdGUgPT0gNCkge1xuXHRcdFx0dmFyIHJlc3BvbnNlID0gSlNPTi5wYXJzZShjaGVja1Rva2VuUmVxdWVzdC5yZXNwb25zZVRleHQpO1xuXHRcdFx0dmFyIGNyZWRpdHMgPSByZXNwb25zZS5jcmVkaXRzO1xuXHRcdFx0dmFsaWRFZHVjYXRpb25LZXkgPSB0eXBlb2YoY3JlZGl0cykgIT09ICd1bmRlZmluZWQnO1xuXHRcdFx0Y2FsbGJhY2sodmFsaWRFZHVjYXRpb25LZXkpO1xuXHRcdH1cblx0fTtcblx0XG5cdGNoZWNrVG9rZW5SZXF1ZXN0Lm9wZW4oXCJHRVRcIiwgXCJodHRwczovL2FwaS5pc3BlZWNoLm9yZy9hcGkvcmVzdD9hY3Rpb249aW5mb3JtYXRpb24mb3V0cHV0PWpzb24mYXBpa2V5PVwiICsga2V5LCB0cnVlKTtcblx0Y2hlY2tUb2tlblJlcXVlc3Quc2VuZCgpO1xufVxuXG5hY3RpdmF0ZUVkdWNhdGlvbktleSA9IGZ1bmN0aW9uKGtleSwgY2FsbGJhY2spIHtcblx0a2V5ID0ga2V5IHx8IFwiXCI7XG5cblx0aWYoa2V5Lmxlbmd0aCA9PSAwKSB7XG5cdFx0Y2FsbGJhY2soZmFsc2UpO1xuXHRcdHJldHVybjtcblx0fVxuXG5cdFN0b3JhZ2UuZ2V0RWR1Y2F0aW9uS2V5KGZ1bmN0aW9uKGVkdUtleSkge1xuXHRcdGlmKGVkdUtleSA9PSBrZXkpIHtcblx0XHRcdGNhbGxiYWNrKHRydWUpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR2YXIgY2hlY2tUb2tlblJlcXVlc3QgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblx0XHRcdFxuXHRcdFx0Y2hlY2tUb2tlblJlcXVlc3Qub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGlmKGNoZWNrVG9rZW5SZXF1ZXN0LnJlYWR5U3RhdGUgPT0gNCkge1xuXHRcdFx0XHRcdHZhciByZXNwb25zZSA9IEpTT04ucGFyc2UoY2hlY2tUb2tlblJlcXVlc3QucmVzcG9uc2VUZXh0KTtcblx0XHRcdFx0XHR2YXIgY3JlZGl0cyA9IHJlc3BvbnNlLmNyZWRpdHM7XG5cdFx0XHRcdFx0aWYoY3JlZGl0cyA+IDApIHtcblx0XHRcdFx0XHRcdHVzZUVkdWNhdGlvbktleShrZXksIGZ1bmN0aW9uKHN1Y2Nlc3NmdWwpIHtcblx0XHRcdFx0XHRcdFx0aWYoc3VjY2Vzc2Z1bCkge1xuXHRcdFx0XHRcdFx0XHRcdFN0b3JhZ2Uuc2V0RWR1Y2F0aW9uS2V5KGtleSk7XG5cdFx0XHRcdFx0XHRcdFx0Y2FsbGJhY2sodHJ1ZSk7XG5cdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0Y2FsbGJhY2soZmFsc2UpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0Y2FsbGJhY2soZmFsc2UpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fTtcblx0XHRcdFxuXHRcdFx0Y2hlY2tUb2tlblJlcXVlc3Qub3BlbihcIkdFVFwiLCBcImh0dHBzOi8vYXBpLmlzcGVlY2gub3JnL2FwaS9yZXN0P2FjdGlvbj1pbmZvcm1hdGlvbiZvdXRwdXQ9anNvbiZhcGlrZXk9XCIgKyBrZXksIHRydWUpO1xuXHRcdFx0Y2hlY2tUb2tlblJlcXVlc3Quc2VuZCgpO1xuXHRcdH1cblx0fSk7XG59XG5cbnVzZUVkdWNhdGlvbktleSA9IGZ1bmN0aW9uKGtleSwgY2FsbGJhY2spIHtcblx0dmFyIGNoZWNrVG9rZW5SZXF1ZXN0ID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG5cdFxuXHRjaGVja1Rva2VuUmVxdWVzdC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpIHtcblx0XHRpZihjaGVja1Rva2VuUmVxdWVzdC5yZWFkeVN0YXRlID09IDIpIHtcblx0XHRcdHZhciBzdWNjZXNzZnVsID0gY2hlY2tUb2tlblJlcXVlc3QuZ2V0UmVzcG9uc2VIZWFkZXIoJ0NvbnRlbnQtVHlwZScpLnN0YXJ0c1dpdGgoJ2F1ZGlvJyk7XG5cdFx0XHRjYWxsYmFjayhzdWNjZXNzZnVsKTtcblx0XHR9XG5cdH07XG5cdFxuXHRjaGVja1Rva2VuUmVxdWVzdC5vcGVuKFwiR0VUXCIsIFwiaHR0cHM6Ly9hcGkuaXNwZWVjaC5vcmcvYXBpL3Jlc3Q/YWN0aW9uPWNvbnZlcnQmdGV4dD1zb21ldGhpbmcmdm9pY2U9dm9pY2UmYXBpa2V5PVwiICsga2V5LCB0cnVlKTtcblx0Y2hlY2tUb2tlblJlcXVlc3Quc2VuZCgpO1xufVxuXG5kb1BvcFVuZGVyID0gZnVuY3Rpb24odGFicykge1xuXHRpZih0eXBlb2YgdGFicyA9PT0gXCJzdHJpbmdcIikgdGFicyA9IFt0YWJzXTtcblx0Y2hyb21lLnRhYnMucXVlcnkoe2FjdGl2ZTogdHJ1ZSwgY3VycmVudFdpbmRvdzogdHJ1ZX0sIGZ1bmN0aW9uKGFycmF5T2ZUYWJzKSB7XG5cdFx0dmFyIGFjdGl2ZVRhYiA9IGFycmF5T2ZUYWJzWzBdO1xuXHRcdHZhciBhY3RpdmVUYWJJZCA9IGFycmF5T2ZUYWJzWzBdLmlkO1xuXHRcblxuXHRcdGZvcih2YXIgaSA9IDA7IGkgPCB0YWJzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR3aW5kb3cub3Blbih0YWJzW2ldKTtcblx0XHR9XG5cdFx0c2V0VGltZW91dChmdW5jdGlvbigpIHtcblx0XHRcdGNocm9tZS50YWJzLnVwZGF0ZShhY3RpdmVUYWJJZCwge3NlbGVjdGVkOiB0cnVlfSk7XG5cdFx0fSwgMCk7XG5cdH0pO1xufVxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBzcmMvanMvdXRpbHMvYnV5VXRpbHMuanMiXSwibWFwcGluZ3MiOiI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBdkJBO0FBeUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=')},21:function(module,exports){eval('/**\n * Version: 1.0 Alpha-1 \n * Build Date: 13-Nov-2007\n * Copyright (c) 2006-2007, Coolite Inc. (http://www.coolite.com/). All rights reserved.\n * License: Licensed under The MIT License. See license.txt and http://www.datejs.com/license/. \n * Website: http://www.datejs.com/ or http://www.coolite.com/datejs/\n */\nDate.CultureInfo = { name: "en-US", englishName: "English (United States)", nativeName: "English (United States)", dayNames: ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"], abbreviatedDayNames: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"], shortestDayNames: ["Su", "Mo", "Tu", "We", "Th", "Fr", "Sa"], firstLetterDayNames: ["S", "M", "T", "W", "T", "F", "S"], monthNames: ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"], abbreviatedMonthNames: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"], amDesignator: "AM", pmDesignator: "PM", firstDayOfWeek: 0, twoDigitYearMax: 2029, dateElementOrder: "mdy", formatPatterns: { shortDate: "M/d/yyyy", longDate: "dddd, MMMM dd, yyyy", shortTime: "h:mm tt", longTime: "h:mm:ss tt", fullDateTime: "dddd, MMMM dd, yyyy h:mm:ss tt", sortableDateTime: "yyyy-MM-ddTHH:mm:ss", universalSortableDateTime: "yyyy-MM-dd HH:mm:ssZ", rfc1123: "ddd, dd MMM yyyy HH:mm:ss GMT", monthDay: "MMMM dd", yearMonth: "MMMM, yyyy" }, regexPatterns: { jan: /^jan(uary)?/i, feb: /^feb(ruary)?/i, mar: /^mar(ch)?/i, apr: /^apr(il)?/i, may: /^may/i, jun: /^jun(e)?/i, jul: /^jul(y)?/i, aug: /^aug(ust)?/i, sep: /^sep(t(ember)?)?/i, oct: /^oct(ober)?/i, nov: /^nov(ember)?/i, dec: /^dec(ember)?/i, sun: /^su(n(day)?)?/i, mon: /^mo(n(day)?)?/i, tue: /^tu(e(s(day)?)?)?/i, wed: /^we(d(nesday)?)?/i, thu: /^th(u(r(s(day)?)?)?)?/i, fri: /^fr(i(day)?)?/i, sat: /^sa(t(urday)?)?/i, future: /^next/i, past: /^last|past|prev(ious)?/i, add: /^(\\+|after|from)/i, subtract: /^(\\-|before|ago)/i, yesterday: /^yesterday/i, today: /^t(oday)?/i, tomorrow: /^tomorrow/i, now: /^n(ow)?/i, millisecond: /^ms|milli(second)?s?/i, second: /^sec(ond)?s?/i, minute: /^min(ute)?s?/i, hour: /^h(ou)?rs?/i, week: /^w(ee)?k/i, month: /^m(o(nth)?s?)?/i, day: /^d(ays?)?/i, year: /^y((ea)?rs?)?/i, shortMeridian: /^(a|p)/i, longMeridian: /^(a\\.?m?\\.?|p\\.?m?\\.?)/i, timezone: /^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\\s*(\\+|\\-)\\s*\\d\\d\\d\\d?)|gmt)/i, ordinalSuffix: /^\\s*(st|nd|rd|th)/i, timeContext: /^\\s*(\\:|a|p)/i }, abbreviatedTimeZoneStandard: { GMT: "-000", EST: "-0400", CST: "-0500", MST: "-0600", PST: "-0700" }, abbreviatedTimeZoneDST: { GMT: "-000", EDT: "-0500", CDT: "-0600", MDT: "-0700", PDT: "-0800" } };\nDate.getMonthNumberFromName = function (name) {\n  var n = Date.CultureInfo.monthNames,\n      m = Date.CultureInfo.abbreviatedMonthNames,\n      s = name.toLowerCase();for (var i = 0; i < n.length; i++) {\n    if (n[i].toLowerCase() == s || m[i].toLowerCase() == s) {\n      return i;\n    }\n  }\n  return -1;\n};Date.getDayNumberFromName = function (name) {\n  var n = Date.CultureInfo.dayNames,\n      m = Date.CultureInfo.abbreviatedDayNames,\n      o = Date.CultureInfo.shortestDayNames,\n      s = name.toLowerCase();for (var i = 0; i < n.length; i++) {\n    if (n[i].toLowerCase() == s || m[i].toLowerCase() == s) {\n      return i;\n    }\n  }\n  return -1;\n};Date.isLeapYear = function (year) {\n  return year % 4 === 0 && year % 100 !== 0 || year % 400 === 0;\n};Date.getDaysInMonth = function (year, month) {\n  return [31, Date.isLeapYear(year) ? 29 : 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31][month];\n};Date.getTimezoneOffset = function (s, dst) {\n  return dst || false ? Date.CultureInfo.abbreviatedTimeZoneDST[s.toUpperCase()] : Date.CultureInfo.abbreviatedTimeZoneStandard[s.toUpperCase()];\n};Date.getTimezoneAbbreviation = function (offset, dst) {\n  var n = dst || false ? Date.CultureInfo.abbreviatedTimeZoneDST : Date.CultureInfo.abbreviatedTimeZoneStandard,\n      p;for (p in n) {\n    if (n[p] === offset) {\n      return p;\n    }\n  }\n  return null;\n};Date.prototype.clone = function () {\n  return new Date(this.getTime());\n};Date.prototype.compareTo = function (date) {\n  if (isNaN(this)) {\n    throw new Error(this);\n  }\n  if (date instanceof Date && !isNaN(date)) {\n    return this > date ? 1 : this < date ? -1 : 0;\n  } else {\n    throw new TypeError(date);\n  }\n};Date.prototype.equals = function (date) {\n  return this.compareTo(date) === 0;\n};Date.prototype.between = function (start, end) {\n  var t = this.getTime();return t >= start.getTime() && t <= end.getTime();\n};Date.prototype.addMilliseconds = function (value) {\n  this.setMilliseconds(this.getMilliseconds() + value);return this;\n};Date.prototype.addSeconds = function (value) {\n  return this.addMilliseconds(value * 1000);\n};Date.prototype.addMinutes = function (value) {\n  return this.addMilliseconds(value * 60000);\n};Date.prototype.addHours = function (value) {\n  return this.addMilliseconds(value * 3600000);\n};Date.prototype.addDays = function (value) {\n  return this.addMilliseconds(value * 86400000);\n};Date.prototype.addWeeks = function (value) {\n  return this.addMilliseconds(value * 604800000);\n};Date.prototype.addMonths = function (value) {\n  var n = this.getDate();this.setDate(1);this.setMonth(this.getMonth() + value);this.setDate(Math.min(n, this.getDaysInMonth()));return this;\n};Date.prototype.addYears = function (value) {\n  return this.addMonths(value * 12);\n};Date.prototype.add = function (config) {\n  if (typeof config == "number") {\n    this._orient = config;return this;\n  }\n  var x = config;if (x.millisecond || x.milliseconds) {\n    this.addMilliseconds(x.millisecond || x.milliseconds);\n  }\n  if (x.second || x.seconds) {\n    this.addSeconds(x.second || x.seconds);\n  }\n  if (x.minute || x.minutes) {\n    this.addMinutes(x.minute || x.minutes);\n  }\n  if (x.hour || x.hours) {\n    this.addHours(x.hour || x.hours);\n  }\n  if (x.month || x.months) {\n    this.addMonths(x.month || x.months);\n  }\n  if (x.year || x.years) {\n    this.addYears(x.year || x.years);\n  }\n  if (x.day || x.days) {\n    this.addDays(x.day || x.days);\n  }\n  return this;\n};Date._validate = function (value, min, max, name) {\n  if (typeof value != "number") {\n    throw new TypeError(value + " is not a Number.");\n  } else if (value < min || value > max) {\n    throw new RangeError(value + " is not a valid value for " + name + ".");\n  }\n  return true;\n};Date.validateMillisecond = function (n) {\n  return Date._validate(n, 0, 999, "milliseconds");\n};Date.validateSecond = function (n) {\n  return Date._validate(n, 0, 59, "seconds");\n};Date.validateMinute = function (n) {\n  return Date._validate(n, 0, 59, "minutes");\n};Date.validateHour = function (n) {\n  return Date._validate(n, 0, 23, "hours");\n};Date.validateDay = function (n, year, month) {\n  return Date._validate(n, 1, Date.getDaysInMonth(year, month), "days");\n};Date.validateMonth = function (n) {\n  return Date._validate(n, 0, 11, "months");\n};Date.validateYear = function (n) {\n  return Date._validate(n, 1, 9999, "seconds");\n};Date.prototype.set = function (config) {\n  var x = config;if (!x.millisecond && x.millisecond !== 0) {\n    x.millisecond = -1;\n  }\n  if (!x.second && x.second !== 0) {\n    x.second = -1;\n  }\n  if (!x.minute && x.minute !== 0) {\n    x.minute = -1;\n  }\n  if (!x.hour && x.hour !== 0) {\n    x.hour = -1;\n  }\n  if (!x.day && x.day !== 0) {\n    x.day = -1;\n  }\n  if (!x.month && x.month !== 0) {\n    x.month = -1;\n  }\n  if (!x.year && x.year !== 0) {\n    x.year = -1;\n  }\n  if (x.millisecond != -1 && Date.validateMillisecond(x.millisecond)) {\n    this.addMilliseconds(x.millisecond - this.getMilliseconds());\n  }\n  if (x.second != -1 && Date.validateSecond(x.second)) {\n    this.addSeconds(x.second - this.getSeconds());\n  }\n  if (x.minute != -1 && Date.validateMinute(x.minute)) {\n    this.addMinutes(x.minute - this.getMinutes());\n  }\n  if (x.hour != -1 && Date.validateHour(x.hour)) {\n    this.addHours(x.hour - this.getHours());\n  }\n  if (x.month !== -1 && Date.validateMonth(x.month)) {\n    this.addMonths(x.month - this.getMonth());\n  }\n  if (x.year != -1 && Date.validateYear(x.year)) {\n    this.addYears(x.year - this.getFullYear());\n  }\n  if (x.day != -1 && Date.validateDay(x.day, this.getFullYear(), this.getMonth())) {\n    this.addDays(x.day - this.getDate());\n  }\n  if (x.timezone) {\n    this.setTimezone(x.timezone);\n  }\n  if (x.timezoneOffset) {\n    this.setTimezoneOffset(x.timezoneOffset);\n  }\n  return this;\n};Date.prototype.clearTime = function () {\n  this.setHours(0);this.setMinutes(0);this.setSeconds(0);this.setMilliseconds(0);return this;\n};Date.prototype.isLeapYear = function () {\n  var y = this.getFullYear();return y % 4 === 0 && y % 100 !== 0 || y % 400 === 0;\n};Date.prototype.isWeekday = function () {\n  return !(this.is().sat() || this.is().sun());\n};Date.prototype.getDaysInMonth = function () {\n  return Date.getDaysInMonth(this.getFullYear(), this.getMonth());\n};Date.prototype.moveToFirstDayOfMonth = function () {\n  return this.set({ day: 1 });\n};Date.prototype.moveToLastDayOfMonth = function () {\n  return this.set({ day: this.getDaysInMonth() });\n};Date.prototype.moveToDayOfWeek = function (day, orient) {\n  var diff = (day - this.getDay() + 7 * (orient || +1)) % 7;return this.addDays(diff === 0 ? diff += 7 * (orient || +1) : diff);\n};Date.prototype.moveToMonth = function (month, orient) {\n  var diff = (month - this.getMonth() + 12 * (orient || +1)) % 12;return this.addMonths(diff === 0 ? diff += 12 * (orient || +1) : diff);\n};Date.prototype.getDayOfYear = function () {\n  return Math.floor((this - new Date(this.getFullYear(), 0, 1)) / 86400000);\n};Date.prototype.getWeekOfYear = function (firstDayOfWeek) {\n  var y = this.getFullYear(),\n      m = this.getMonth(),\n      d = this.getDate();var dow = firstDayOfWeek || Date.CultureInfo.firstDayOfWeek;var offset = 7 + 1 - new Date(y, 0, 1).getDay();if (offset == 8) {\n    offset = 1;\n  }\n  var daynum = (Date.UTC(y, m, d, 0, 0, 0) - Date.UTC(y, 0, 1, 0, 0, 0)) / 86400000 + 1;var w = Math.floor((daynum - offset + 7) / 7);if (w === dow) {\n    y--;var prevOffset = 7 + 1 - new Date(y, 0, 1).getDay();if (prevOffset == 2 || prevOffset == 8) {\n      w = 53;\n    } else {\n      w = 52;\n    }\n  }\n  return w;\n};Date.prototype.isDST = function () {\n  console.log(\'isDST\');return this.toString().match(/(E|C|M|P)(S|D)T/)[2] == "D";\n};Date.prototype.getTimezone = function () {\n  return Date.getTimezoneAbbreviation(this.getUTCOffset, this.isDST());\n};Date.prototype.setTimezoneOffset = function (s) {\n  var here = this.getTimezoneOffset(),\n      there = Number(s) * -6 / 10;this.addMinutes(there - here);return this;\n};Date.prototype.setTimezone = function (s) {\n  return this.setTimezoneOffset(Date.getTimezoneOffset(s));\n};Date.prototype.getUTCOffset = function () {\n  var n = this.getTimezoneOffset() * -10 / 6,\n      r;if (n < 0) {\n    r = (n - 10000).toString();return r[0] + r.substr(2);\n  } else {\n    r = (n + 10000).toString();return "+" + r.substr(1);\n  }\n};Date.prototype.getDayName = function (abbrev) {\n  return abbrev ? Date.CultureInfo.abbreviatedDayNames[this.getDay()] : Date.CultureInfo.dayNames[this.getDay()];\n};Date.prototype.getMonthName = function (abbrev) {\n  return abbrev ? Date.CultureInfo.abbreviatedMonthNames[this.getMonth()] : Date.CultureInfo.monthNames[this.getMonth()];\n};Date.prototype._toString = Date.prototype.toString;Date.prototype.toString = function (format) {\n  var self = this;var p = function p(s) {\n    return s.toString().length == 1 ? "0" + s : s;\n  };return format ? format.replace(/dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|zz?z?/g, function (format) {\n    switch (format) {case "hh":\n        return p(self.getHours() < 13 ? self.getHours() : self.getHours() - 12);case "h":\n        return self.getHours() < 13 ? self.getHours() : self.getHours() - 12;case "HH":\n        return p(self.getHours());case "H":\n        return self.getHours();case "mm":\n        return p(self.getMinutes());case "m":\n        return self.getMinutes();case "ss":\n        return p(self.getSeconds());case "s":\n        return self.getSeconds();case "yyyy":\n        return self.getFullYear();case "yy":\n        return self.getFullYear().toString().substring(2, 4);case "dddd":\n        return self.getDayName();case "ddd":\n        return self.getDayName(true);case "dd":\n        return p(self.getDate());case "d":\n        return self.getDate().toString();case "MMMM":\n        return self.getMonthName();case "MMM":\n        return self.getMonthName(true);case "MM":\n        return p(self.getMonth() + 1);case "M":\n        return self.getMonth() + 1;case "t":\n        return self.getHours() < 12 ? Date.CultureInfo.amDesignator.substring(0, 1) : Date.CultureInfo.pmDesignator.substring(0, 1);case "tt":\n        return self.getHours() < 12 ? Date.CultureInfo.amDesignator : Date.CultureInfo.pmDesignator;case "zzz":case "zz":case "z":\n        return "";}\n  }) : this._toString();\n};\nDate.now = function () {\n  return new Date();\n};Date.today = function () {\n  return Date.now().clearTime();\n};Date.prototype._orient = +1;Date.prototype.next = function () {\n  this._orient = +1;return this;\n};Date.prototype.last = Date.prototype.prev = Date.prototype.previous = function () {\n  this._orient = -1;return this;\n};Date.prototype._is = false;Date.prototype.is = function () {\n  this._is = true;return this;\n};Number.prototype._dateElement = "day";Number.prototype.fromNow = function () {\n  var c = {};c[this._dateElement] = this;return Date.now().add(c);\n};Number.prototype.ago = function () {\n  var c = {};c[this._dateElement] = this * -1;return Date.now().add(c);\n};(function () {\n  var $D = Date.prototype,\n      $N = Number.prototype;var dx = "sunday monday tuesday wednesday thursday friday saturday".split(/\\s/),\n      mx = "january february march april may june july august september october november december".split(/\\s/),\n      px = "Millisecond Second Minute Hour Day Week Month Year".split(/\\s/),\n      de;var df = function df(n) {\n    return function () {\n      if (this._is) {\n        this._is = false;return this.getDay() == n;\n      }\n      return this.moveToDayOfWeek(n, this._orient);\n    };\n  };for (var i = 0; i < dx.length; i++) {\n    $D[dx[i]] = $D[dx[i].substring(0, 3)] = df(i);\n  }\n  var mf = function mf(n) {\n    return function () {\n      if (this._is) {\n        this._is = false;return this.getMonth() === n;\n      }\n      return this.moveToMonth(n, this._orient);\n    };\n  };for (var j = 0; j < mx.length; j++) {\n    $D[mx[j]] = $D[mx[j].substring(0, 3)] = mf(j);\n  }\n  var ef = function ef(j) {\n    return function () {\n      if (j.substring(j.length - 1) != "s") {\n        j += "s";\n      }\n      return this["add" + j](this._orient);\n    };\n  };var nf = function nf(n) {\n    return function () {\n      this._dateElement = n;return this;\n    };\n  };for (var k = 0; k < px.length; k++) {\n    de = px[k].toLowerCase();$D[de] = $D[de + "s"] = ef(px[k]);$N[de] = $N[de + "s"] = nf(de);\n  }\n})();Date.prototype.toJSONString = function () {\n  return this.toString("yyyy-MM-ddThh:mm:ssZ");\n};Date.prototype.toShortDateString = function () {\n  return this.toString(Date.CultureInfo.formatPatterns.shortDatePattern);\n};Date.prototype.toLongDateString = function () {\n  return this.toString(Date.CultureInfo.formatPatterns.longDatePattern);\n};Date.prototype.toShortTimeString = function () {\n  return this.toString(Date.CultureInfo.formatPatterns.shortTimePattern);\n};Date.prototype.toLongTimeString = function () {\n  return this.toString(Date.CultureInfo.formatPatterns.longTimePattern);\n};Date.prototype.getOrdinal = function () {\n  switch (this.getDate()) {case 1:case 21:case 31:\n      return "st";case 2:case 22:\n      return "nd";case 3:case 23:\n      return "rd";default:\n      return "th";}\n};\n(function () {\n  Date.Parsing = { Exception: function Exception(s) {\n      this.message = "Parse error at \'" + s.substring(0, 10) + " ...\'";\n    } };var $P = Date.Parsing;var _ = $P.Operators = { rtoken: function rtoken(r) {\n      return function (s) {\n        var mx = s.match(r);if (mx) {\n          return [mx[0], s.substring(mx[0].length)];\n        } else {\n          throw new $P.Exception(s);\n        }\n      };\n    }, token: function token(s) {\n      return function (s) {\n        return _.rtoken(new RegExp("^\\s*" + s + "\\s*"))(s);\n      };\n    }, stoken: function stoken(s) {\n      return _.rtoken(new RegExp("^" + s));\n    }, until: function until(p) {\n      return function (s) {\n        var qx = [],\n            rx = null;while (s.length) {\n          try {\n            rx = p.call(this, s);\n          } catch (e) {\n            qx.push(rx[0]);s = rx[1];continue;\n          }\n          break;\n        }\n        return [qx, s];\n      };\n    }, many: function many(p) {\n      return function (s) {\n        var rx = [],\n            r = null;while (s.length) {\n          try {\n            r = p.call(this, s);\n          } catch (e) {\n            return [rx, s];\n          }\n          rx.push(r[0]);s = r[1];\n        }\n        return [rx, s];\n      };\n    }, optional: function optional(p) {\n      return function (s) {\n        var r = null;try {\n          r = p.call(this, s);\n        } catch (e) {\n          return [null, s];\n        }\n        return [r[0], r[1]];\n      };\n    }, not: function not(p) {\n      return function (s) {\n        try {\n          p.call(this, s);\n        } catch (e) {\n          return [null, s];\n        }\n        throw new $P.Exception(s);\n      };\n    }, ignore: function ignore(p) {\n      return p ? function (s) {\n        var r = null;r = p.call(this, s);return [null, r[1]];\n      } : null;\n    }, product: function product() {\n      var px = arguments[0],\n          qx = Array.prototype.slice.call(arguments, 1),\n          rx = [];for (var i = 0; i < px.length; i++) {\n        rx.push(_.each(px[i], qx));\n      }\n      return rx;\n    }, cache: function cache(rule) {\n      var cache = {},\n          r = null;return function (s) {\n        try {\n          r = cache[s] = cache[s] || rule.call(this, s);\n        } catch (e) {\n          r = cache[s] = e;\n        }\n        if (r instanceof $P.Exception) {\n          throw r;\n        } else {\n          return r;\n        }\n      };\n    }, any: function any() {\n      var px = arguments;return function (s) {\n        var r = null;for (var i = 0; i < px.length; i++) {\n          if (px[i] == null) {\n            continue;\n          }\n          try {\n            r = px[i].call(this, s);\n          } catch (e) {\n            r = null;\n          }\n          if (r) {\n            return r;\n          }\n        }\n        throw new $P.Exception(s);\n      };\n    }, each: function each() {\n      var px = arguments;return function (s) {\n        var rx = [],\n            r = null;for (var i = 0; i < px.length; i++) {\n          if (px[i] == null) {\n            continue;\n          }\n          try {\n            r = px[i].call(this, s);\n          } catch (e) {\n            throw new $P.Exception(s);\n          }\n          rx.push(r[0]);s = r[1];\n        }\n        return [rx, s];\n      };\n    }, all: function all() {\n      var px = arguments,\n          _ = _;return _.each(_.optional(px));\n    }, sequence: function sequence(px, d, c) {\n      d = d || _.rtoken(/^\\s*/);c = c || null;if (px.length == 1) {\n        return px[0];\n      }\n      return function (s) {\n        var r = null,\n            q = null;var rx = [];for (var i = 0; i < px.length; i++) {\n          try {\n            r = px[i].call(this, s);\n          } catch (e) {\n            break;\n          }\n          rx.push(r[0]);try {\n            q = d.call(this, r[1]);\n          } catch (ex) {\n            q = null;break;\n          }\n          s = q[1];\n        }\n        if (!r) {\n          throw new $P.Exception(s);\n        }\n        if (q) {\n          throw new $P.Exception(q[1]);\n        }\n        if (c) {\n          try {\n            r = c.call(this, r[1]);\n          } catch (ey) {\n            throw new $P.Exception(r[1]);\n          }\n        }\n        return [rx, r ? r[1] : s];\n      };\n    }, between: function between(d1, p, d2) {\n      d2 = d2 || d1;var _fn = _.each(_.ignore(d1), p, _.ignore(d2));return function (s) {\n        var rx = _fn.call(this, s);return [[rx[0][0], r[0][2]], rx[1]];\n      };\n    }, list: function list(p, d, c) {\n      d = d || _.rtoken(/^\\s*/);c = c || null;return p instanceof Array ? _.each(_.product(p.slice(0, -1), _.ignore(d)), p.slice(-1), _.ignore(c)) : _.each(_.many(_.each(p, _.ignore(d))), px, _.ignore(c));\n    }, set: function set(px, d, c) {\n      d = d || _.rtoken(/^\\s*/);c = c || null;return function (s) {\n        var r = null,\n            p = null,\n            q = null,\n            rx = null,\n            best = [[], s],\n            last = false;for (var i = 0; i < px.length; i++) {\n          q = null;p = null;r = null;last = px.length == 1;try {\n            r = px[i].call(this, s);\n          } catch (e) {\n            continue;\n          }\n          rx = [[r[0]], r[1]];if (r[1].length > 0 && !last) {\n            try {\n              q = d.call(this, r[1]);\n            } catch (ex) {\n              last = true;\n            }\n          } else {\n            last = true;\n          }\n          if (!last && q[1].length === 0) {\n            last = true;\n          }\n          if (!last) {\n            var qx = [];for (var j = 0; j < px.length; j++) {\n              if (i != j) {\n                qx.push(px[j]);\n              }\n            }\n            p = _.set(qx, d).call(this, q[1]);if (p[0].length > 0) {\n              rx[0] = rx[0].concat(p[0]);rx[1] = p[1];\n            }\n          }\n          if (rx[1].length < best[1].length) {\n            best = rx;\n          }\n          if (best[1].length === 0) {\n            break;\n          }\n        }\n        if (best[0].length === 0) {\n          return best;\n        }\n        if (c) {\n          try {\n            q = c.call(this, best[1]);\n          } catch (ey) {\n            throw new $P.Exception(best[1]);\n          }\n          best[1] = q[1];\n        }\n        return best;\n      };\n    }, forward: function forward(gr, fname) {\n      return function (s) {\n        return gr[fname].call(this, s);\n      };\n    }, replace: function replace(rule, repl) {\n      return function (s) {\n        var r = rule.call(this, s);return [repl, r[1]];\n      };\n    }, process: function process(rule, fn) {\n      return function (s) {\n        var r = rule.call(this, s);return [fn.call(this, r[0]), r[1]];\n      };\n    }, min: function min(_min, rule) {\n      return function (s) {\n        var rx = rule.call(this, s);if (rx[0].length < _min) {\n          throw new $P.Exception(s);\n        }\n        return rx;\n      };\n    } };var _generator = function _generator(op) {\n    return function () {\n      var args = null,\n          rx = [];if (arguments.length > 1) {\n        args = Array.prototype.slice.call(arguments);\n      } else if (arguments[0] instanceof Array) {\n        args = arguments[0];\n      }\n      if (args) {\n        for (var i = 0, px = args.shift(); i < px.length; i++) {\n          args.unshift(px[i]);rx.push(op.apply(null, args));args.shift();return rx;\n        }\n      } else {\n        return op.apply(null, arguments);\n      }\n    };\n  };var gx = "optional not ignore cache".split(/\\s/);for (var i = 0; i < gx.length; i++) {\n    _[gx[i]] = _generator(_[gx[i]]);\n  }\n  var _vector = function _vector(op) {\n    return function () {\n      if (arguments[0] instanceof Array) {\n        return op.apply(null, arguments[0]);\n      } else {\n        return op.apply(null, arguments);\n      }\n    };\n  };var vx = "each any all".split(/\\s/);for (var j = 0; j < vx.length; j++) {\n    _[vx[j]] = _vector(_[vx[j]]);\n  }\n})();(function () {\n  var flattenAndCompact = function flattenAndCompact(ax) {\n    var rx = [];for (var i = 0; i < ax.length; i++) {\n      if (ax[i] instanceof Array) {\n        rx = rx.concat(flattenAndCompact(ax[i]));\n      } else {\n        if (ax[i]) {\n          rx.push(ax[i]);\n        }\n      }\n    }\n    return rx;\n  };Date.Grammar = {};Date.Translator = { hour: function hour(s) {\n      return function () {\n        this.hour = Number(s);\n      };\n    }, minute: function minute(s) {\n      return function () {\n        this.minute = Number(s);\n      };\n    }, second: function second(s) {\n      return function () {\n        this.second = Number(s);\n      };\n    }, meridian: function meridian(s) {\n      return function () {\n        this.meridian = s.slice(0, 1).toLowerCase();\n      };\n    }, timezone: function timezone(s) {\n      return function () {\n        var n = s.replace(/[^\\d\\+\\-]/g, "");if (n.length) {\n          this.timezoneOffset = Number(n);\n        } else {\n          this.timezone = s.toLowerCase();\n        }\n      };\n    }, day: function day(x) {\n      var s = x[0];return function () {\n        this.day = Number(s.match(/\\d+/)[0]);\n      };\n    }, month: function month(s) {\n      return function () {\n        this.month = s.length == 3 ? Date.getMonthNumberFromName(s) : Number(s) - 1;\n      };\n    }, year: function year(s) {\n      return function () {\n        var n = Number(s);this.year = s.length > 2 ? n : n + (n + 2000 < Date.CultureInfo.twoDigitYearMax ? 2000 : 1900);\n      };\n    }, rday: function rday(s) {\n      return function () {\n        switch (s) {case "yesterday":\n            this.days = -1;break;case "tomorrow":\n            this.days = 1;break;case "today":\n            this.days = 0;break;case "now":\n            this.days = 0;this.now = true;break;}\n      };\n    }, finishExact: function finishExact(x) {\n      x = x instanceof Array ? x : [x];var now = new Date();this.year = now.getFullYear();this.month = now.getMonth();this.day = 1;this.hour = 0;this.minute = 0;this.second = 0;for (var i = 0; i < x.length; i++) {\n        if (x[i]) {\n          x[i].call(this);\n        }\n      }\n      this.hour = this.meridian == "p" && this.hour < 13 ? this.hour + 12 : this.hour;if (this.day > Date.getDaysInMonth(this.year, this.month)) {\n        throw new RangeError(this.day + " is not a valid value for days.");\n      }\n      var r = new Date(this.year, this.month, this.day, this.hour, this.minute, this.second);if (this.timezone) {\n        r.set({ timezone: this.timezone });\n      } else if (this.timezoneOffset) {\n        r.set({ timezoneOffset: this.timezoneOffset });\n      }\n      return r;\n    }, finish: function finish(x) {\n      x = x instanceof Array ? flattenAndCompact(x) : [x];if (x.length === 0) {\n        return null;\n      }\n      for (var i = 0; i < x.length; i++) {\n        if (typeof x[i] == "function") {\n          x[i].call(this);\n        }\n      }\n      if (this.now) {\n        return new Date();\n      }\n      var today = Date.today();var method = null;var expression = !!(this.days != null || this.orient || this.operator);if (expression) {\n        var gap, mod, orient;orient = this.orient == "past" || this.operator == "subtract" ? -1 : 1;if (this.weekday) {\n          this.unit = "day";gap = Date.getDayNumberFromName(this.weekday) - today.getDay();mod = 7;this.days = gap ? (gap + orient * mod) % mod : orient * mod;\n        }\n        if (this.month) {\n          this.unit = "month";gap = this.month - today.getMonth();mod = 12;this.months = gap ? (gap + orient * mod) % mod : orient * mod;this.month = null;\n        }\n        if (!this.unit) {\n          this.unit = "day";\n        }\n        if (this[this.unit + "s"] == null || this.operator != null) {\n          if (!this.value) {\n            this.value = 1;\n          }\n          if (this.unit == "week") {\n            this.unit = "day";this.value = this.value * 7;\n          }\n          this[this.unit + "s"] = this.value * orient;\n        }\n        return today.add(this);\n      } else {\n        if (this.meridian && this.hour) {\n          this.hour = this.hour < 13 && this.meridian == "p" ? this.hour + 12 : this.hour;\n        }\n        if (this.weekday && !this.day) {\n          this.day = today.addDays(Date.getDayNumberFromName(this.weekday) - today.getDay()).getDate();\n        }\n        if (this.month && !this.day) {\n          this.day = 1;\n        }\n        return today.set(this);\n      }\n    } };var _ = Date.Parsing.Operators,\n      g = Date.Grammar,\n      t = Date.Translator,\n      _fn;g.datePartDelimiter = _.rtoken(/^([\\s\\-\\.\\,\\/\\x27]+)/);g.timePartDelimiter = _.stoken(":");g.whiteSpace = _.rtoken(/^\\s*/);g.generalDelimiter = _.rtoken(/^(([\\s\\,]|at|on)+)/);var _C = {};g.ctoken = function (keys) {\n    var fn = _C[keys];if (!fn) {\n      var c = Date.CultureInfo.regexPatterns;var kx = keys.split(/\\s+/),\n          px = [];for (var i = 0; i < kx.length; i++) {\n        px.push(_.replace(_.rtoken(c[kx[i]]), kx[i]));\n      }\n      fn = _C[keys] = _.any.apply(null, px);\n    }\n    return fn;\n  };g.ctoken2 = function (key) {\n    return _.rtoken(Date.CultureInfo.regexPatterns[key]);\n  };g.h = _.cache(_.process(_.rtoken(/^(0[0-9]|1[0-2]|[1-9])/), t.hour));g.hh = _.cache(_.process(_.rtoken(/^(0[0-9]|1[0-2])/), t.hour));g.H = _.cache(_.process(_.rtoken(/^([0-1][0-9]|2[0-3]|[0-9])/), t.hour));g.HH = _.cache(_.process(_.rtoken(/^([0-1][0-9]|2[0-3])/), t.hour));g.m = _.cache(_.process(_.rtoken(/^([0-5][0-9]|[0-9])/), t.minute));g.mm = _.cache(_.process(_.rtoken(/^[0-5][0-9]/), t.minute));g.s = _.cache(_.process(_.rtoken(/^([0-5][0-9]|[0-9])/), t.second));g.ss = _.cache(_.process(_.rtoken(/^[0-5][0-9]/), t.second));g.hms = _.cache(_.sequence([g.H, g.mm, g.ss], g.timePartDelimiter));g.t = _.cache(_.process(g.ctoken2("shortMeridian"), t.meridian));g.tt = _.cache(_.process(g.ctoken2("longMeridian"), t.meridian));g.z = _.cache(_.process(_.rtoken(/^(\\+|\\-)?\\s*\\d\\d\\d\\d?/), t.timezone));g.zz = _.cache(_.process(_.rtoken(/^(\\+|\\-)\\s*\\d\\d\\d\\d/), t.timezone));g.zzz = _.cache(_.process(g.ctoken2("timezone"), t.timezone));g.timeSuffix = _.each(_.ignore(g.whiteSpace), _.set([g.tt, g.zzz]));g.time = _.each(_.optional(_.ignore(_.stoken("T"))), g.hms, g.timeSuffix);g.d = _.cache(_.process(_.each(_.rtoken(/^([0-2]\\d|3[0-1]|\\d)/), _.optional(g.ctoken2("ordinalSuffix"))), t.day));g.dd = _.cache(_.process(_.each(_.rtoken(/^([0-2]\\d|3[0-1])/), _.optional(g.ctoken2("ordinalSuffix"))), t.day));g.ddd = g.dddd = _.cache(_.process(g.ctoken("sun mon tue wed thu fri sat"), function (s) {\n    return function () {\n      this.weekday = s;\n    };\n  }));g.M = _.cache(_.process(_.rtoken(/^(1[0-2]|0\\d|\\d)/), t.month));g.MM = _.cache(_.process(_.rtoken(/^(1[0-2]|0\\d)/), t.month));g.MMM = g.MMMM = _.cache(_.process(g.ctoken("jan feb mar apr may jun jul aug sep oct nov dec"), t.month));g.y = _.cache(_.process(_.rtoken(/^(\\d\\d?)/), t.year));g.yy = _.cache(_.process(_.rtoken(/^(\\d\\d)/), t.year));g.yyy = _.cache(_.process(_.rtoken(/^(\\d\\d?\\d?\\d?)/), t.year));g.yyyy = _.cache(_.process(_.rtoken(/^(\\d\\d\\d\\d)/), t.year));_fn = function _fn() {\n    return _.each(_.any.apply(null, arguments), _.not(g.ctoken2("timeContext")));\n  };g.day = _fn(g.d, g.dd);g.month = _fn(g.M, g.MMM);g.year = _fn(g.yyyy, g.yy);g.orientation = _.process(g.ctoken("past future"), function (s) {\n    return function () {\n      this.orient = s;\n    };\n  });g.operator = _.process(g.ctoken("add subtract"), function (s) {\n    return function () {\n      this.operator = s;\n    };\n  });g.rday = _.process(g.ctoken("yesterday tomorrow today now"), t.rday);g.unit = _.process(g.ctoken("minute hour day week month year"), function (s) {\n    return function () {\n      this.unit = s;\n    };\n  });g.value = _.process(_.rtoken(/^\\d\\d?(st|nd|rd|th)?/), function (s) {\n    return function () {\n      this.value = s.replace(/\\D/g, "");\n    };\n  });g.expression = _.set([g.rday, g.operator, g.value, g.unit, g.orientation, g.ddd, g.MMM]);_fn = function _fn() {\n    return _.set(arguments, g.datePartDelimiter);\n  };g.mdy = _fn(g.ddd, g.month, g.day, g.year);g.ymd = _fn(g.ddd, g.year, g.month, g.day);g.dmy = _fn(g.ddd, g.day, g.month, g.year);g.date = function (s) {\n    return (g[Date.CultureInfo.dateElementOrder] || g.mdy).call(this, s);\n  };g.format = _.process(_.many(_.any(_.process(_.rtoken(/^(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|zz?z?)/), function (fmt) {\n    if (g[fmt]) {\n      return g[fmt];\n    } else {\n      throw Date.Parsing.Exception(fmt);\n    }\n  }), _.process(_.rtoken(/^[^dMyhHmstz]+/), function (s) {\n    return _.ignore(_.stoken(s));\n  }))), function (rules) {\n    return _.process(_.each.apply(null, rules), t.finishExact);\n  });var _F = {};var _get = function _get(f) {\n    return _F[f] = _F[f] || g.format(f)[0];\n  };g.formats = function (fx) {\n    if (fx instanceof Array) {\n      var rx = [];for (var i = 0; i < fx.length; i++) {\n        rx.push(_get(fx[i]));\n      }\n      return _.any.apply(null, rx);\n    } else {\n      return _get(fx);\n    }\n  };g._formats = g.formats(["yyyy-MM-ddTHH:mm:ss", "ddd, MMM dd, yyyy H:mm:ss tt", "ddd MMM d yyyy HH:mm:ss zzz", "d"]);g._start = _.process(_.set([g.date, g.time, g.expression], g.generalDelimiter, g.whiteSpace), t.finish);g.start = function (s) {\n    try {\n      var r = g._formats.call({}, s);if (r[1].length === 0) {\n        return r;\n      }\n    } catch (e) {}\n    return g._start.call({}, s);\n  };\n})();Date._parse = Date.parse;Date.parse = function (s) {\n  var r = null;if (!s) {\n    return null;\n  }\n  try {\n    r = Date.Grammar.start.call({}, s);\n  } catch (e) {\n    return null;\n  }\n  return r[1].length === 0 ? r[0] : null;\n};Date.getParseFunction = function (fx) {\n  var fn = Date.Grammar.formats(fx);return function (s) {\n    var r = null;try {\n      r = fn.call({}, s);\n    } catch (e) {\n      return null;\n    }\n    return r[1].length === 0 ? r[0] : null;\n  };\n};Date.parseExact = function (s, fx) {\n  return Date.getParseFunction(fx)(s);\n};//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjEuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL2pzL3V0aWxzL2RhdGUuanM/ZDNiOSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFZlcnNpb246IDEuMCBBbHBoYS0xIFxuICogQnVpbGQgRGF0ZTogMTMtTm92LTIwMDdcbiAqIENvcHlyaWdodCAoYykgMjAwNi0yMDA3LCBDb29saXRlIEluYy4gKGh0dHA6Ly93d3cuY29vbGl0ZS5jb20vKS4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIExpY2Vuc2U6IExpY2Vuc2VkIHVuZGVyIFRoZSBNSVQgTGljZW5zZS4gU2VlIGxpY2Vuc2UudHh0IGFuZCBodHRwOi8vd3d3LmRhdGVqcy5jb20vbGljZW5zZS8uIFxuICogV2Vic2l0ZTogaHR0cDovL3d3dy5kYXRlanMuY29tLyBvciBodHRwOi8vd3d3LmNvb2xpdGUuY29tL2RhdGVqcy9cbiAqL1xuRGF0ZS5DdWx0dXJlSW5mbz17bmFtZTpcImVuLVVTXCIsZW5nbGlzaE5hbWU6XCJFbmdsaXNoIChVbml0ZWQgU3RhdGVzKVwiLG5hdGl2ZU5hbWU6XCJFbmdsaXNoIChVbml0ZWQgU3RhdGVzKVwiLGRheU5hbWVzOltcIlN1bmRheVwiLFwiTW9uZGF5XCIsXCJUdWVzZGF5XCIsXCJXZWRuZXNkYXlcIixcIlRodXJzZGF5XCIsXCJGcmlkYXlcIixcIlNhdHVyZGF5XCJdLGFiYnJldmlhdGVkRGF5TmFtZXM6W1wiU3VuXCIsXCJNb25cIixcIlR1ZVwiLFwiV2VkXCIsXCJUaHVcIixcIkZyaVwiLFwiU2F0XCJdLHNob3J0ZXN0RGF5TmFtZXM6W1wiU3VcIixcIk1vXCIsXCJUdVwiLFwiV2VcIixcIlRoXCIsXCJGclwiLFwiU2FcIl0sZmlyc3RMZXR0ZXJEYXlOYW1lczpbXCJTXCIsXCJNXCIsXCJUXCIsXCJXXCIsXCJUXCIsXCJGXCIsXCJTXCJdLG1vbnRoTmFtZXM6W1wiSmFudWFyeVwiLFwiRmVicnVhcnlcIixcIk1hcmNoXCIsXCJBcHJpbFwiLFwiTWF5XCIsXCJKdW5lXCIsXCJKdWx5XCIsXCJBdWd1c3RcIixcIlNlcHRlbWJlclwiLFwiT2N0b2JlclwiLFwiTm92ZW1iZXJcIixcIkRlY2VtYmVyXCJdLGFiYnJldmlhdGVkTW9udGhOYW1lczpbXCJKYW5cIixcIkZlYlwiLFwiTWFyXCIsXCJBcHJcIixcIk1heVwiLFwiSnVuXCIsXCJKdWxcIixcIkF1Z1wiLFwiU2VwXCIsXCJPY3RcIixcIk5vdlwiLFwiRGVjXCJdLGFtRGVzaWduYXRvcjpcIkFNXCIscG1EZXNpZ25hdG9yOlwiUE1cIixmaXJzdERheU9mV2VlazowLHR3b0RpZ2l0WWVhck1heDoyMDI5LGRhdGVFbGVtZW50T3JkZXI6XCJtZHlcIixmb3JtYXRQYXR0ZXJuczp7c2hvcnREYXRlOlwiTS9kL3l5eXlcIixsb25nRGF0ZTpcImRkZGQsIE1NTU0gZGQsIHl5eXlcIixzaG9ydFRpbWU6XCJoOm1tIHR0XCIsbG9uZ1RpbWU6XCJoOm1tOnNzIHR0XCIsZnVsbERhdGVUaW1lOlwiZGRkZCwgTU1NTSBkZCwgeXl5eSBoOm1tOnNzIHR0XCIsc29ydGFibGVEYXRlVGltZTpcInl5eXktTU0tZGRUSEg6bW06c3NcIix1bml2ZXJzYWxTb3J0YWJsZURhdGVUaW1lOlwieXl5eS1NTS1kZCBISDptbTpzc1pcIixyZmMxMTIzOlwiZGRkLCBkZCBNTU0geXl5eSBISDptbTpzcyBHTVRcIixtb250aERheTpcIk1NTU0gZGRcIix5ZWFyTW9udGg6XCJNTU1NLCB5eXl5XCJ9LHJlZ2V4UGF0dGVybnM6e2phbjovXmphbih1YXJ5KT8vaSxmZWI6L15mZWIocnVhcnkpPy9pLG1hcjovXm1hcihjaCk/L2ksYXByOi9eYXByKGlsKT8vaSxtYXk6L15tYXkvaSxqdW46L15qdW4oZSk/L2ksanVsOi9eanVsKHkpPy9pLGF1ZzovXmF1Zyh1c3QpPy9pLHNlcDovXnNlcCh0KGVtYmVyKT8pPy9pLG9jdDovXm9jdChvYmVyKT8vaSxub3Y6L15ub3YoZW1iZXIpPy9pLGRlYzovXmRlYyhlbWJlcik/L2ksc3VuOi9ec3UobihkYXkpPyk/L2ksbW9uOi9ebW8obihkYXkpPyk/L2ksdHVlOi9edHUoZShzKGRheSk/KT8pPy9pLHdlZDovXndlKGQobmVzZGF5KT8pPy9pLHRodTovXnRoKHUocihzKGRheSk/KT8pPyk/L2ksZnJpOi9eZnIoaShkYXkpPyk/L2ksc2F0Oi9ec2EodCh1cmRheSk/KT8vaSxmdXR1cmU6L15uZXh0L2kscGFzdDovXmxhc3R8cGFzdHxwcmV2KGlvdXMpPy9pLGFkZDovXihcXCt8YWZ0ZXJ8ZnJvbSkvaSxzdWJ0cmFjdDovXihcXC18YmVmb3JlfGFnbykvaSx5ZXN0ZXJkYXk6L155ZXN0ZXJkYXkvaSx0b2RheTovXnQob2RheSk/L2ksdG9tb3Jyb3c6L150b21vcnJvdy9pLG5vdzovXm4ob3cpPy9pLG1pbGxpc2Vjb25kOi9ebXN8bWlsbGkoc2Vjb25kKT9zPy9pLHNlY29uZDovXnNlYyhvbmQpP3M/L2ksbWludXRlOi9ebWluKHV0ZSk/cz8vaSxob3VyOi9eaChvdSk/cnM/L2ksd2VlazovXncoZWUpP2svaSxtb250aDovXm0obyhudGgpP3M/KT8vaSxkYXk6L15kKGF5cz8pPy9pLHllYXI6L155KChlYSk/cnM/KT8vaSxzaG9ydE1lcmlkaWFuOi9eKGF8cCkvaSxsb25nTWVyaWRpYW46L14oYVxcLj9tP1xcLj98cFxcLj9tP1xcLj8pL2ksdGltZXpvbmU6L14oKGUoc3xkKXR8YyhzfGQpdHxtKHN8ZCl0fHAoc3xkKXQpfCgoZ210KT9cXHMqKFxcK3xcXC0pXFxzKlxcZFxcZFxcZFxcZD8pfGdtdCkvaSxvcmRpbmFsU3VmZml4Oi9eXFxzKihzdHxuZHxyZHx0aCkvaSx0aW1lQ29udGV4dDovXlxccyooXFw6fGF8cCkvaX0sYWJicmV2aWF0ZWRUaW1lWm9uZVN0YW5kYXJkOntHTVQ6XCItMDAwXCIsRVNUOlwiLTA0MDBcIixDU1Q6XCItMDUwMFwiLE1TVDpcIi0wNjAwXCIsUFNUOlwiLTA3MDBcIn0sYWJicmV2aWF0ZWRUaW1lWm9uZURTVDp7R01UOlwiLTAwMFwiLEVEVDpcIi0wNTAwXCIsQ0RUOlwiLTA2MDBcIixNRFQ6XCItMDcwMFwiLFBEVDpcIi0wODAwXCJ9fTtcbkRhdGUuZ2V0TW9udGhOdW1iZXJGcm9tTmFtZT1mdW5jdGlvbihuYW1lKXt2YXIgbj1EYXRlLkN1bHR1cmVJbmZvLm1vbnRoTmFtZXMsbT1EYXRlLkN1bHR1cmVJbmZvLmFiYnJldmlhdGVkTW9udGhOYW1lcyxzPW5hbWUudG9Mb3dlckNhc2UoKTtmb3IodmFyIGk9MDtpPG4ubGVuZ3RoO2krKyl7aWYobltpXS50b0xvd2VyQ2FzZSgpPT1zfHxtW2ldLnRvTG93ZXJDYXNlKCk9PXMpe3JldHVybiBpO319XG5yZXR1cm4tMTt9O0RhdGUuZ2V0RGF5TnVtYmVyRnJvbU5hbWU9ZnVuY3Rpb24obmFtZSl7dmFyIG49RGF0ZS5DdWx0dXJlSW5mby5kYXlOYW1lcyxtPURhdGUuQ3VsdHVyZUluZm8uYWJicmV2aWF0ZWREYXlOYW1lcyxvPURhdGUuQ3VsdHVyZUluZm8uc2hvcnRlc3REYXlOYW1lcyxzPW5hbWUudG9Mb3dlckNhc2UoKTtmb3IodmFyIGk9MDtpPG4ubGVuZ3RoO2krKyl7aWYobltpXS50b0xvd2VyQ2FzZSgpPT1zfHxtW2ldLnRvTG93ZXJDYXNlKCk9PXMpe3JldHVybiBpO319XG5yZXR1cm4tMTt9O0RhdGUuaXNMZWFwWWVhcj1mdW5jdGlvbih5ZWFyKXtyZXR1cm4oKCh5ZWFyJTQ9PT0wKSYmKHllYXIlMTAwIT09MCkpfHwoeWVhciU0MDA9PT0wKSk7fTtEYXRlLmdldERheXNJbk1vbnRoPWZ1bmN0aW9uKHllYXIsbW9udGgpe3JldHVyblszMSwoRGF0ZS5pc0xlYXBZZWFyKHllYXIpPzI5OjI4KSwzMSwzMCwzMSwzMCwzMSwzMSwzMCwzMSwzMCwzMV1bbW9udGhdO307RGF0ZS5nZXRUaW1lem9uZU9mZnNldD1mdW5jdGlvbihzLGRzdCl7cmV0dXJuKGRzdHx8ZmFsc2UpP0RhdGUuQ3VsdHVyZUluZm8uYWJicmV2aWF0ZWRUaW1lWm9uZURTVFtzLnRvVXBwZXJDYXNlKCldOkRhdGUuQ3VsdHVyZUluZm8uYWJicmV2aWF0ZWRUaW1lWm9uZVN0YW5kYXJkW3MudG9VcHBlckNhc2UoKV07fTtEYXRlLmdldFRpbWV6b25lQWJicmV2aWF0aW9uPWZ1bmN0aW9uKG9mZnNldCxkc3Qpe3ZhciBuPShkc3R8fGZhbHNlKT9EYXRlLkN1bHR1cmVJbmZvLmFiYnJldmlhdGVkVGltZVpvbmVEU1Q6RGF0ZS5DdWx0dXJlSW5mby5hYmJyZXZpYXRlZFRpbWVab25lU3RhbmRhcmQscDtmb3IocCBpbiBuKXtpZihuW3BdPT09b2Zmc2V0KXtyZXR1cm4gcDt9fVxucmV0dXJuIG51bGw7fTtEYXRlLnByb3RvdHlwZS5jbG9uZT1mdW5jdGlvbigpe3JldHVybiBuZXcgRGF0ZSh0aGlzLmdldFRpbWUoKSk7fTtEYXRlLnByb3RvdHlwZS5jb21wYXJlVG89ZnVuY3Rpb24oZGF0ZSl7aWYoaXNOYU4odGhpcykpe3Rocm93IG5ldyBFcnJvcih0aGlzKTt9XG5pZihkYXRlIGluc3RhbmNlb2YgRGF0ZSYmIWlzTmFOKGRhdGUpKXtyZXR1cm4odGhpcz5kYXRlKT8xOih0aGlzPGRhdGUpPy0xOjA7fWVsc2V7dGhyb3cgbmV3IFR5cGVFcnJvcihkYXRlKTt9fTtEYXRlLnByb3RvdHlwZS5lcXVhbHM9ZnVuY3Rpb24oZGF0ZSl7cmV0dXJuKHRoaXMuY29tcGFyZVRvKGRhdGUpPT09MCk7fTtEYXRlLnByb3RvdHlwZS5iZXR3ZWVuPWZ1bmN0aW9uKHN0YXJ0LGVuZCl7dmFyIHQ9dGhpcy5nZXRUaW1lKCk7cmV0dXJuIHQ+PXN0YXJ0LmdldFRpbWUoKSYmdDw9ZW5kLmdldFRpbWUoKTt9O0RhdGUucHJvdG90eXBlLmFkZE1pbGxpc2Vjb25kcz1mdW5jdGlvbih2YWx1ZSl7dGhpcy5zZXRNaWxsaXNlY29uZHModGhpcy5nZXRNaWxsaXNlY29uZHMoKSt2YWx1ZSk7cmV0dXJuIHRoaXM7fTtEYXRlLnByb3RvdHlwZS5hZGRTZWNvbmRzPWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4gdGhpcy5hZGRNaWxsaXNlY29uZHModmFsdWUqMTAwMCk7fTtEYXRlLnByb3RvdHlwZS5hZGRNaW51dGVzPWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4gdGhpcy5hZGRNaWxsaXNlY29uZHModmFsdWUqNjAwMDApO307RGF0ZS5wcm90b3R5cGUuYWRkSG91cnM9ZnVuY3Rpb24odmFsdWUpe3JldHVybiB0aGlzLmFkZE1pbGxpc2Vjb25kcyh2YWx1ZSozNjAwMDAwKTt9O0RhdGUucHJvdG90eXBlLmFkZERheXM9ZnVuY3Rpb24odmFsdWUpe3JldHVybiB0aGlzLmFkZE1pbGxpc2Vjb25kcyh2YWx1ZSo4NjQwMDAwMCk7fTtEYXRlLnByb3RvdHlwZS5hZGRXZWVrcz1mdW5jdGlvbih2YWx1ZSl7cmV0dXJuIHRoaXMuYWRkTWlsbGlzZWNvbmRzKHZhbHVlKjYwNDgwMDAwMCk7fTtEYXRlLnByb3RvdHlwZS5hZGRNb250aHM9ZnVuY3Rpb24odmFsdWUpe3ZhciBuPXRoaXMuZ2V0RGF0ZSgpO3RoaXMuc2V0RGF0ZSgxKTt0aGlzLnNldE1vbnRoKHRoaXMuZ2V0TW9udGgoKSt2YWx1ZSk7dGhpcy5zZXREYXRlKE1hdGgubWluKG4sdGhpcy5nZXREYXlzSW5Nb250aCgpKSk7cmV0dXJuIHRoaXM7fTtEYXRlLnByb3RvdHlwZS5hZGRZZWFycz1mdW5jdGlvbih2YWx1ZSl7cmV0dXJuIHRoaXMuYWRkTW9udGhzKHZhbHVlKjEyKTt9O0RhdGUucHJvdG90eXBlLmFkZD1mdW5jdGlvbihjb25maWcpe2lmKHR5cGVvZiBjb25maWc9PVwibnVtYmVyXCIpe3RoaXMuX29yaWVudD1jb25maWc7cmV0dXJuIHRoaXM7fVxudmFyIHg9Y29uZmlnO2lmKHgubWlsbGlzZWNvbmR8fHgubWlsbGlzZWNvbmRzKXt0aGlzLmFkZE1pbGxpc2Vjb25kcyh4Lm1pbGxpc2Vjb25kfHx4Lm1pbGxpc2Vjb25kcyk7fVxuaWYoeC5zZWNvbmR8fHguc2Vjb25kcyl7dGhpcy5hZGRTZWNvbmRzKHguc2Vjb25kfHx4LnNlY29uZHMpO31cbmlmKHgubWludXRlfHx4Lm1pbnV0ZXMpe3RoaXMuYWRkTWludXRlcyh4Lm1pbnV0ZXx8eC5taW51dGVzKTt9XG5pZih4LmhvdXJ8fHguaG91cnMpe3RoaXMuYWRkSG91cnMoeC5ob3VyfHx4LmhvdXJzKTt9XG5pZih4Lm1vbnRofHx4Lm1vbnRocyl7dGhpcy5hZGRNb250aHMoeC5tb250aHx8eC5tb250aHMpO31cbmlmKHgueWVhcnx8eC55ZWFycyl7dGhpcy5hZGRZZWFycyh4LnllYXJ8fHgueWVhcnMpO31cbmlmKHguZGF5fHx4LmRheXMpe3RoaXMuYWRkRGF5cyh4LmRheXx8eC5kYXlzKTt9XG5yZXR1cm4gdGhpczt9O0RhdGUuX3ZhbGlkYXRlPWZ1bmN0aW9uKHZhbHVlLG1pbixtYXgsbmFtZSl7aWYodHlwZW9mIHZhbHVlIT1cIm51bWJlclwiKXt0aHJvdyBuZXcgVHlwZUVycm9yKHZhbHVlK1wiIGlzIG5vdCBhIE51bWJlci5cIik7fWVsc2UgaWYodmFsdWU8bWlufHx2YWx1ZT5tYXgpe3Rocm93IG5ldyBSYW5nZUVycm9yKHZhbHVlK1wiIGlzIG5vdCBhIHZhbGlkIHZhbHVlIGZvciBcIituYW1lK1wiLlwiKTt9XG5yZXR1cm4gdHJ1ZTt9O0RhdGUudmFsaWRhdGVNaWxsaXNlY29uZD1mdW5jdGlvbihuKXtyZXR1cm4gRGF0ZS5fdmFsaWRhdGUobiwwLDk5OSxcIm1pbGxpc2Vjb25kc1wiKTt9O0RhdGUudmFsaWRhdGVTZWNvbmQ9ZnVuY3Rpb24obil7cmV0dXJuIERhdGUuX3ZhbGlkYXRlKG4sMCw1OSxcInNlY29uZHNcIik7fTtEYXRlLnZhbGlkYXRlTWludXRlPWZ1bmN0aW9uKG4pe3JldHVybiBEYXRlLl92YWxpZGF0ZShuLDAsNTksXCJtaW51dGVzXCIpO307RGF0ZS52YWxpZGF0ZUhvdXI9ZnVuY3Rpb24obil7cmV0dXJuIERhdGUuX3ZhbGlkYXRlKG4sMCwyMyxcImhvdXJzXCIpO307RGF0ZS52YWxpZGF0ZURheT1mdW5jdGlvbihuLHllYXIsbW9udGgpe3JldHVybiBEYXRlLl92YWxpZGF0ZShuLDEsRGF0ZS5nZXREYXlzSW5Nb250aCh5ZWFyLG1vbnRoKSxcImRheXNcIik7fTtEYXRlLnZhbGlkYXRlTW9udGg9ZnVuY3Rpb24obil7cmV0dXJuIERhdGUuX3ZhbGlkYXRlKG4sMCwxMSxcIm1vbnRoc1wiKTt9O0RhdGUudmFsaWRhdGVZZWFyPWZ1bmN0aW9uKG4pe3JldHVybiBEYXRlLl92YWxpZGF0ZShuLDEsOTk5OSxcInNlY29uZHNcIik7fTtEYXRlLnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24oY29uZmlnKXt2YXIgeD1jb25maWc7aWYoIXgubWlsbGlzZWNvbmQmJngubWlsbGlzZWNvbmQhPT0wKXt4Lm1pbGxpc2Vjb25kPS0xO31cbmlmKCF4LnNlY29uZCYmeC5zZWNvbmQhPT0wKXt4LnNlY29uZD0tMTt9XG5pZigheC5taW51dGUmJngubWludXRlIT09MCl7eC5taW51dGU9LTE7fVxuaWYoIXguaG91ciYmeC5ob3VyIT09MCl7eC5ob3VyPS0xO31cbmlmKCF4LmRheSYmeC5kYXkhPT0wKXt4LmRheT0tMTt9XG5pZigheC5tb250aCYmeC5tb250aCE9PTApe3gubW9udGg9LTE7fVxuaWYoIXgueWVhciYmeC55ZWFyIT09MCl7eC55ZWFyPS0xO31cbmlmKHgubWlsbGlzZWNvbmQhPS0xJiZEYXRlLnZhbGlkYXRlTWlsbGlzZWNvbmQoeC5taWxsaXNlY29uZCkpe3RoaXMuYWRkTWlsbGlzZWNvbmRzKHgubWlsbGlzZWNvbmQtdGhpcy5nZXRNaWxsaXNlY29uZHMoKSk7fVxuaWYoeC5zZWNvbmQhPS0xJiZEYXRlLnZhbGlkYXRlU2Vjb25kKHguc2Vjb25kKSl7dGhpcy5hZGRTZWNvbmRzKHguc2Vjb25kLXRoaXMuZ2V0U2Vjb25kcygpKTt9XG5pZih4Lm1pbnV0ZSE9LTEmJkRhdGUudmFsaWRhdGVNaW51dGUoeC5taW51dGUpKXt0aGlzLmFkZE1pbnV0ZXMoeC5taW51dGUtdGhpcy5nZXRNaW51dGVzKCkpO31cbmlmKHguaG91ciE9LTEmJkRhdGUudmFsaWRhdGVIb3VyKHguaG91cikpe3RoaXMuYWRkSG91cnMoeC5ob3VyLXRoaXMuZ2V0SG91cnMoKSk7fVxuaWYoeC5tb250aCE9PS0xJiZEYXRlLnZhbGlkYXRlTW9udGgoeC5tb250aCkpe3RoaXMuYWRkTW9udGhzKHgubW9udGgtdGhpcy5nZXRNb250aCgpKTt9XG5pZih4LnllYXIhPS0xJiZEYXRlLnZhbGlkYXRlWWVhcih4LnllYXIpKXt0aGlzLmFkZFllYXJzKHgueWVhci10aGlzLmdldEZ1bGxZZWFyKCkpO31cbmlmKHguZGF5IT0tMSYmRGF0ZS52YWxpZGF0ZURheSh4LmRheSx0aGlzLmdldEZ1bGxZZWFyKCksdGhpcy5nZXRNb250aCgpKSl7dGhpcy5hZGREYXlzKHguZGF5LXRoaXMuZ2V0RGF0ZSgpKTt9XG5pZih4LnRpbWV6b25lKXt0aGlzLnNldFRpbWV6b25lKHgudGltZXpvbmUpO31cbmlmKHgudGltZXpvbmVPZmZzZXQpe3RoaXMuc2V0VGltZXpvbmVPZmZzZXQoeC50aW1lem9uZU9mZnNldCk7fVxucmV0dXJuIHRoaXM7fTtEYXRlLnByb3RvdHlwZS5jbGVhclRpbWU9ZnVuY3Rpb24oKXt0aGlzLnNldEhvdXJzKDApO3RoaXMuc2V0TWludXRlcygwKTt0aGlzLnNldFNlY29uZHMoMCk7dGhpcy5zZXRNaWxsaXNlY29uZHMoMCk7cmV0dXJuIHRoaXM7fTtEYXRlLnByb3RvdHlwZS5pc0xlYXBZZWFyPWZ1bmN0aW9uKCl7dmFyIHk9dGhpcy5nZXRGdWxsWWVhcigpO3JldHVybigoKHklND09PTApJiYoeSUxMDAhPT0wKSl8fCh5JTQwMD09PTApKTt9O0RhdGUucHJvdG90eXBlLmlzV2Vla2RheT1mdW5jdGlvbigpe3JldHVybiEodGhpcy5pcygpLnNhdCgpfHx0aGlzLmlzKCkuc3VuKCkpO307RGF0ZS5wcm90b3R5cGUuZ2V0RGF5c0luTW9udGg9ZnVuY3Rpb24oKXtyZXR1cm4gRGF0ZS5nZXREYXlzSW5Nb250aCh0aGlzLmdldEZ1bGxZZWFyKCksdGhpcy5nZXRNb250aCgpKTt9O0RhdGUucHJvdG90eXBlLm1vdmVUb0ZpcnN0RGF5T2ZNb250aD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnNldCh7ZGF5OjF9KTt9O0RhdGUucHJvdG90eXBlLm1vdmVUb0xhc3REYXlPZk1vbnRoPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2V0KHtkYXk6dGhpcy5nZXREYXlzSW5Nb250aCgpfSk7fTtEYXRlLnByb3RvdHlwZS5tb3ZlVG9EYXlPZldlZWs9ZnVuY3Rpb24oZGF5LG9yaWVudCl7dmFyIGRpZmY9KGRheS10aGlzLmdldERheSgpKzcqKG9yaWVudHx8KzEpKSU3O3JldHVybiB0aGlzLmFkZERheXMoKGRpZmY9PT0wKT9kaWZmKz03KihvcmllbnR8fCsxKTpkaWZmKTt9O0RhdGUucHJvdG90eXBlLm1vdmVUb01vbnRoPWZ1bmN0aW9uKG1vbnRoLG9yaWVudCl7dmFyIGRpZmY9KG1vbnRoLXRoaXMuZ2V0TW9udGgoKSsxMioob3JpZW50fHwrMSkpJTEyO3JldHVybiB0aGlzLmFkZE1vbnRocygoZGlmZj09PTApP2RpZmYrPTEyKihvcmllbnR8fCsxKTpkaWZmKTt9O0RhdGUucHJvdG90eXBlLmdldERheU9mWWVhcj1mdW5jdGlvbigpe3JldHVybiBNYXRoLmZsb29yKCh0aGlzLW5ldyBEYXRlKHRoaXMuZ2V0RnVsbFllYXIoKSwwLDEpKS84NjQwMDAwMCk7fTtEYXRlLnByb3RvdHlwZS5nZXRXZWVrT2ZZZWFyPWZ1bmN0aW9uKGZpcnN0RGF5T2ZXZWVrKXt2YXIgeT10aGlzLmdldEZ1bGxZZWFyKCksbT10aGlzLmdldE1vbnRoKCksZD10aGlzLmdldERhdGUoKTt2YXIgZG93PWZpcnN0RGF5T2ZXZWVrfHxEYXRlLkN1bHR1cmVJbmZvLmZpcnN0RGF5T2ZXZWVrO3ZhciBvZmZzZXQ9NysxLW5ldyBEYXRlKHksMCwxKS5nZXREYXkoKTtpZihvZmZzZXQ9PTgpe29mZnNldD0xO31cbnZhciBkYXludW09KChEYXRlLlVUQyh5LG0sZCwwLDAsMCktRGF0ZS5VVEMoeSwwLDEsMCwwLDApKS84NjQwMDAwMCkrMTt2YXIgdz1NYXRoLmZsb29yKChkYXludW0tb2Zmc2V0KzcpLzcpO2lmKHc9PT1kb3cpe3ktLTt2YXIgcHJldk9mZnNldD03KzEtbmV3IERhdGUoeSwwLDEpLmdldERheSgpO2lmKHByZXZPZmZzZXQ9PTJ8fHByZXZPZmZzZXQ9PTgpe3c9NTM7fWVsc2V7dz01Mjt9fVxucmV0dXJuIHc7fTtEYXRlLnByb3RvdHlwZS5pc0RTVD1mdW5jdGlvbigpe2NvbnNvbGUubG9nKCdpc0RTVCcpO3JldHVybiB0aGlzLnRvU3RyaW5nKCkubWF0Y2goLyhFfEN8TXxQKShTfEQpVC8pWzJdPT1cIkRcIjt9O0RhdGUucHJvdG90eXBlLmdldFRpbWV6b25lPWZ1bmN0aW9uKCl7cmV0dXJuIERhdGUuZ2V0VGltZXpvbmVBYmJyZXZpYXRpb24odGhpcy5nZXRVVENPZmZzZXQsdGhpcy5pc0RTVCgpKTt9O0RhdGUucHJvdG90eXBlLnNldFRpbWV6b25lT2Zmc2V0PWZ1bmN0aW9uKHMpe3ZhciBoZXJlPXRoaXMuZ2V0VGltZXpvbmVPZmZzZXQoKSx0aGVyZT1OdW1iZXIocykqLTYvMTA7dGhpcy5hZGRNaW51dGVzKHRoZXJlLWhlcmUpO3JldHVybiB0aGlzO307RGF0ZS5wcm90b3R5cGUuc2V0VGltZXpvbmU9ZnVuY3Rpb24ocyl7cmV0dXJuIHRoaXMuc2V0VGltZXpvbmVPZmZzZXQoRGF0ZS5nZXRUaW1lem9uZU9mZnNldChzKSk7fTtEYXRlLnByb3RvdHlwZS5nZXRVVENPZmZzZXQ9ZnVuY3Rpb24oKXt2YXIgbj10aGlzLmdldFRpbWV6b25lT2Zmc2V0KCkqLTEwLzYscjtpZihuPDApe3I9KG4tMTAwMDApLnRvU3RyaW5nKCk7cmV0dXJuIHJbMF0rci5zdWJzdHIoMik7fWVsc2V7cj0obisxMDAwMCkudG9TdHJpbmcoKTtyZXR1cm5cIitcIityLnN1YnN0cigxKTt9fTtEYXRlLnByb3RvdHlwZS5nZXREYXlOYW1lPWZ1bmN0aW9uKGFiYnJldil7cmV0dXJuIGFiYnJldj9EYXRlLkN1bHR1cmVJbmZvLmFiYnJldmlhdGVkRGF5TmFtZXNbdGhpcy5nZXREYXkoKV06RGF0ZS5DdWx0dXJlSW5mby5kYXlOYW1lc1t0aGlzLmdldERheSgpXTt9O0RhdGUucHJvdG90eXBlLmdldE1vbnRoTmFtZT1mdW5jdGlvbihhYmJyZXYpe3JldHVybiBhYmJyZXY/RGF0ZS5DdWx0dXJlSW5mby5hYmJyZXZpYXRlZE1vbnRoTmFtZXNbdGhpcy5nZXRNb250aCgpXTpEYXRlLkN1bHR1cmVJbmZvLm1vbnRoTmFtZXNbdGhpcy5nZXRNb250aCgpXTt9O0RhdGUucHJvdG90eXBlLl90b1N0cmluZz1EYXRlLnByb3RvdHlwZS50b1N0cmluZztEYXRlLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbihmb3JtYXQpe3ZhciBzZWxmPXRoaXM7dmFyIHA9ZnVuY3Rpb24gcChzKXtyZXR1cm4ocy50b1N0cmluZygpLmxlbmd0aD09MSk/XCIwXCIrczpzO307cmV0dXJuIGZvcm1hdD9mb3JtYXQucmVwbGFjZSgvZGQ/ZD9kP3xNTT9NP00/fHl5P3k/eT98aGg/fEhIP3xtbT98c3M/fHR0P3x6ej96Py9nLGZ1bmN0aW9uKGZvcm1hdCl7c3dpdGNoKGZvcm1hdCl7Y2FzZVwiaGhcIjpyZXR1cm4gcChzZWxmLmdldEhvdXJzKCk8MTM/c2VsZi5nZXRIb3VycygpOihzZWxmLmdldEhvdXJzKCktMTIpKTtjYXNlXCJoXCI6cmV0dXJuIHNlbGYuZ2V0SG91cnMoKTwxMz9zZWxmLmdldEhvdXJzKCk6KHNlbGYuZ2V0SG91cnMoKS0xMik7Y2FzZVwiSEhcIjpyZXR1cm4gcChzZWxmLmdldEhvdXJzKCkpO2Nhc2VcIkhcIjpyZXR1cm4gc2VsZi5nZXRIb3VycygpO2Nhc2VcIm1tXCI6cmV0dXJuIHAoc2VsZi5nZXRNaW51dGVzKCkpO2Nhc2VcIm1cIjpyZXR1cm4gc2VsZi5nZXRNaW51dGVzKCk7Y2FzZVwic3NcIjpyZXR1cm4gcChzZWxmLmdldFNlY29uZHMoKSk7Y2FzZVwic1wiOnJldHVybiBzZWxmLmdldFNlY29uZHMoKTtjYXNlXCJ5eXl5XCI6cmV0dXJuIHNlbGYuZ2V0RnVsbFllYXIoKTtjYXNlXCJ5eVwiOnJldHVybiBzZWxmLmdldEZ1bGxZZWFyKCkudG9TdHJpbmcoKS5zdWJzdHJpbmcoMiw0KTtjYXNlXCJkZGRkXCI6cmV0dXJuIHNlbGYuZ2V0RGF5TmFtZSgpO2Nhc2VcImRkZFwiOnJldHVybiBzZWxmLmdldERheU5hbWUodHJ1ZSk7Y2FzZVwiZGRcIjpyZXR1cm4gcChzZWxmLmdldERhdGUoKSk7Y2FzZVwiZFwiOnJldHVybiBzZWxmLmdldERhdGUoKS50b1N0cmluZygpO2Nhc2VcIk1NTU1cIjpyZXR1cm4gc2VsZi5nZXRNb250aE5hbWUoKTtjYXNlXCJNTU1cIjpyZXR1cm4gc2VsZi5nZXRNb250aE5hbWUodHJ1ZSk7Y2FzZVwiTU1cIjpyZXR1cm4gcCgoc2VsZi5nZXRNb250aCgpKzEpKTtjYXNlXCJNXCI6cmV0dXJuIHNlbGYuZ2V0TW9udGgoKSsxO2Nhc2VcInRcIjpyZXR1cm4gc2VsZi5nZXRIb3VycygpPDEyP0RhdGUuQ3VsdHVyZUluZm8uYW1EZXNpZ25hdG9yLnN1YnN0cmluZygwLDEpOkRhdGUuQ3VsdHVyZUluZm8ucG1EZXNpZ25hdG9yLnN1YnN0cmluZygwLDEpO2Nhc2VcInR0XCI6cmV0dXJuIHNlbGYuZ2V0SG91cnMoKTwxMj9EYXRlLkN1bHR1cmVJbmZvLmFtRGVzaWduYXRvcjpEYXRlLkN1bHR1cmVJbmZvLnBtRGVzaWduYXRvcjtjYXNlXCJ6enpcIjpjYXNlXCJ6elwiOmNhc2VcInpcIjpyZXR1cm5cIlwiO319KTp0aGlzLl90b1N0cmluZygpO307XG5EYXRlLm5vdz1mdW5jdGlvbigpe3JldHVybiBuZXcgRGF0ZSgpO307RGF0ZS50b2RheT1mdW5jdGlvbigpe3JldHVybiBEYXRlLm5vdygpLmNsZWFyVGltZSgpO307RGF0ZS5wcm90b3R5cGUuX29yaWVudD0rMTtEYXRlLnByb3RvdHlwZS5uZXh0PWZ1bmN0aW9uKCl7dGhpcy5fb3JpZW50PSsxO3JldHVybiB0aGlzO307RGF0ZS5wcm90b3R5cGUubGFzdD1EYXRlLnByb3RvdHlwZS5wcmV2PURhdGUucHJvdG90eXBlLnByZXZpb3VzPWZ1bmN0aW9uKCl7dGhpcy5fb3JpZW50PS0xO3JldHVybiB0aGlzO307RGF0ZS5wcm90b3R5cGUuX2lzPWZhbHNlO0RhdGUucHJvdG90eXBlLmlzPWZ1bmN0aW9uKCl7dGhpcy5faXM9dHJ1ZTtyZXR1cm4gdGhpczt9O051bWJlci5wcm90b3R5cGUuX2RhdGVFbGVtZW50PVwiZGF5XCI7TnVtYmVyLnByb3RvdHlwZS5mcm9tTm93PWZ1bmN0aW9uKCl7dmFyIGM9e307Y1t0aGlzLl9kYXRlRWxlbWVudF09dGhpcztyZXR1cm4gRGF0ZS5ub3coKS5hZGQoYyk7fTtOdW1iZXIucHJvdG90eXBlLmFnbz1mdW5jdGlvbigpe3ZhciBjPXt9O2NbdGhpcy5fZGF0ZUVsZW1lbnRdPXRoaXMqLTE7cmV0dXJuIERhdGUubm93KCkuYWRkKGMpO307KGZ1bmN0aW9uKCl7dmFyICREPURhdGUucHJvdG90eXBlLCROPU51bWJlci5wcm90b3R5cGU7dmFyIGR4PShcInN1bmRheSBtb25kYXkgdHVlc2RheSB3ZWRuZXNkYXkgdGh1cnNkYXkgZnJpZGF5IHNhdHVyZGF5XCIpLnNwbGl0KC9cXHMvKSxteD0oXCJqYW51YXJ5IGZlYnJ1YXJ5IG1hcmNoIGFwcmlsIG1heSBqdW5lIGp1bHkgYXVndXN0IHNlcHRlbWJlciBvY3RvYmVyIG5vdmVtYmVyIGRlY2VtYmVyXCIpLnNwbGl0KC9cXHMvKSxweD0oXCJNaWxsaXNlY29uZCBTZWNvbmQgTWludXRlIEhvdXIgRGF5IFdlZWsgTW9udGggWWVhclwiKS5zcGxpdCgvXFxzLyksZGU7dmFyIGRmPWZ1bmN0aW9uKG4pe3JldHVybiBmdW5jdGlvbigpe2lmKHRoaXMuX2lzKXt0aGlzLl9pcz1mYWxzZTtyZXR1cm4gdGhpcy5nZXREYXkoKT09bjt9XG5yZXR1cm4gdGhpcy5tb3ZlVG9EYXlPZldlZWsobix0aGlzLl9vcmllbnQpO307fTtmb3IodmFyIGk9MDtpPGR4Lmxlbmd0aDtpKyspeyREW2R4W2ldXT0kRFtkeFtpXS5zdWJzdHJpbmcoMCwzKV09ZGYoaSk7fVxudmFyIG1mPWZ1bmN0aW9uKG4pe3JldHVybiBmdW5jdGlvbigpe2lmKHRoaXMuX2lzKXt0aGlzLl9pcz1mYWxzZTtyZXR1cm4gdGhpcy5nZXRNb250aCgpPT09bjt9XG5yZXR1cm4gdGhpcy5tb3ZlVG9Nb250aChuLHRoaXMuX29yaWVudCk7fTt9O2Zvcih2YXIgaj0wO2o8bXgubGVuZ3RoO2orKyl7JERbbXhbal1dPSREW214W2pdLnN1YnN0cmluZygwLDMpXT1tZihqKTt9XG52YXIgZWY9ZnVuY3Rpb24oail7cmV0dXJuIGZ1bmN0aW9uKCl7aWYoai5zdWJzdHJpbmcoai5sZW5ndGgtMSkhPVwic1wiKXtqKz1cInNcIjt9XG5yZXR1cm4gdGhpc1tcImFkZFwiK2pdKHRoaXMuX29yaWVudCk7fTt9O3ZhciBuZj1mdW5jdGlvbihuKXtyZXR1cm4gZnVuY3Rpb24oKXt0aGlzLl9kYXRlRWxlbWVudD1uO3JldHVybiB0aGlzO307fTtmb3IodmFyIGs9MDtrPHB4Lmxlbmd0aDtrKyspe2RlPXB4W2tdLnRvTG93ZXJDYXNlKCk7JERbZGVdPSREW2RlK1wic1wiXT1lZihweFtrXSk7JE5bZGVdPSROW2RlK1wic1wiXT1uZihkZSk7fX0oKSk7RGF0ZS5wcm90b3R5cGUudG9KU09OU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudG9TdHJpbmcoXCJ5eXl5LU1NLWRkVGhoOm1tOnNzWlwiKTt9O0RhdGUucHJvdG90eXBlLnRvU2hvcnREYXRlU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudG9TdHJpbmcoRGF0ZS5DdWx0dXJlSW5mby5mb3JtYXRQYXR0ZXJucy5zaG9ydERhdGVQYXR0ZXJuKTt9O0RhdGUucHJvdG90eXBlLnRvTG9uZ0RhdGVTdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50b1N0cmluZyhEYXRlLkN1bHR1cmVJbmZvLmZvcm1hdFBhdHRlcm5zLmxvbmdEYXRlUGF0dGVybik7fTtEYXRlLnByb3RvdHlwZS50b1Nob3J0VGltZVN0cmluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRvU3RyaW5nKERhdGUuQ3VsdHVyZUluZm8uZm9ybWF0UGF0dGVybnMuc2hvcnRUaW1lUGF0dGVybik7fTtEYXRlLnByb3RvdHlwZS50b0xvbmdUaW1lU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudG9TdHJpbmcoRGF0ZS5DdWx0dXJlSW5mby5mb3JtYXRQYXR0ZXJucy5sb25nVGltZVBhdHRlcm4pO307RGF0ZS5wcm90b3R5cGUuZ2V0T3JkaW5hbD1mdW5jdGlvbigpe3N3aXRjaCh0aGlzLmdldERhdGUoKSl7Y2FzZSAxOmNhc2UgMjE6Y2FzZSAzMTpyZXR1cm5cInN0XCI7Y2FzZSAyOmNhc2UgMjI6cmV0dXJuXCJuZFwiO2Nhc2UgMzpjYXNlIDIzOnJldHVyblwicmRcIjtkZWZhdWx0OnJldHVyblwidGhcIjt9fTtcbihmdW5jdGlvbigpe0RhdGUuUGFyc2luZz17RXhjZXB0aW9uOmZ1bmN0aW9uKHMpe3RoaXMubWVzc2FnZT1cIlBhcnNlIGVycm9yIGF0ICdcIitzLnN1YnN0cmluZygwLDEwKStcIiAuLi4nXCI7fX07dmFyICRQPURhdGUuUGFyc2luZzt2YXIgXz0kUC5PcGVyYXRvcnM9e3J0b2tlbjpmdW5jdGlvbihyKXtyZXR1cm4gZnVuY3Rpb24ocyl7dmFyIG14PXMubWF0Y2gocik7aWYobXgpe3JldHVybihbbXhbMF0scy5zdWJzdHJpbmcobXhbMF0ubGVuZ3RoKV0pO31lbHNle3Rocm93IG5ldyAkUC5FeGNlcHRpb24ocyk7fX07fSx0b2tlbjpmdW5jdGlvbihzKXtyZXR1cm4gZnVuY3Rpb24ocyl7cmV0dXJuIF8ucnRva2VuKG5ldyBSZWdFeHAoXCJeXFxzKlwiK3MrXCJcXHMqXCIpKShzKTt9O30sc3Rva2VuOmZ1bmN0aW9uKHMpe3JldHVybiBfLnJ0b2tlbihuZXcgUmVnRXhwKFwiXlwiK3MpKTt9LHVudGlsOmZ1bmN0aW9uKHApe3JldHVybiBmdW5jdGlvbihzKXt2YXIgcXg9W10scng9bnVsbDt3aGlsZShzLmxlbmd0aCl7dHJ5e3J4PXAuY2FsbCh0aGlzLHMpO31jYXRjaChlKXtxeC5wdXNoKHJ4WzBdKTtzPXJ4WzFdO2NvbnRpbnVlO31cbmJyZWFrO31cbnJldHVybltxeCxzXTt9O30sbWFueTpmdW5jdGlvbihwKXtyZXR1cm4gZnVuY3Rpb24ocyl7dmFyIHJ4PVtdLHI9bnVsbDt3aGlsZShzLmxlbmd0aCl7dHJ5e3I9cC5jYWxsKHRoaXMscyk7fWNhdGNoKGUpe3JldHVybltyeCxzXTt9XG5yeC5wdXNoKHJbMF0pO3M9clsxXTt9XG5yZXR1cm5bcngsc107fTt9LG9wdGlvbmFsOmZ1bmN0aW9uKHApe3JldHVybiBmdW5jdGlvbihzKXt2YXIgcj1udWxsO3RyeXtyPXAuY2FsbCh0aGlzLHMpO31jYXRjaChlKXtyZXR1cm5bbnVsbCxzXTt9XG5yZXR1cm5bclswXSxyWzFdXTt9O30sbm90OmZ1bmN0aW9uKHApe3JldHVybiBmdW5jdGlvbihzKXt0cnl7cC5jYWxsKHRoaXMscyk7fWNhdGNoKGUpe3JldHVybltudWxsLHNdO31cbnRocm93IG5ldyAkUC5FeGNlcHRpb24ocyk7fTt9LGlnbm9yZTpmdW5jdGlvbihwKXtyZXR1cm4gcD9mdW5jdGlvbihzKXt2YXIgcj1udWxsO3I9cC5jYWxsKHRoaXMscyk7cmV0dXJuW251bGwsclsxXV07fTpudWxsO30scHJvZHVjdDpmdW5jdGlvbigpe3ZhciBweD1hcmd1bWVudHNbMF0scXg9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpLHJ4PVtdO2Zvcih2YXIgaT0wO2k8cHgubGVuZ3RoO2krKyl7cngucHVzaChfLmVhY2gocHhbaV0scXgpKTt9XG5yZXR1cm4gcng7fSxjYWNoZTpmdW5jdGlvbihydWxlKXt2YXIgY2FjaGU9e30scj1udWxsO3JldHVybiBmdW5jdGlvbihzKXt0cnl7cj1jYWNoZVtzXT0oY2FjaGVbc118fHJ1bGUuY2FsbCh0aGlzLHMpKTt9Y2F0Y2goZSl7cj1jYWNoZVtzXT1lO31cbmlmKHIgaW5zdGFuY2VvZiAkUC5FeGNlcHRpb24pe3Rocm93IHI7fWVsc2V7cmV0dXJuIHI7fX07fSxhbnk6ZnVuY3Rpb24oKXt2YXIgcHg9YXJndW1lbnRzO3JldHVybiBmdW5jdGlvbihzKXt2YXIgcj1udWxsO2Zvcih2YXIgaT0wO2k8cHgubGVuZ3RoO2krKyl7aWYocHhbaV09PW51bGwpe2NvbnRpbnVlO31cbnRyeXtyPShweFtpXS5jYWxsKHRoaXMscykpO31jYXRjaChlKXtyPW51bGw7fVxuaWYocil7cmV0dXJuIHI7fX1cbnRocm93IG5ldyAkUC5FeGNlcHRpb24ocyk7fTt9LGVhY2g6ZnVuY3Rpb24oKXt2YXIgcHg9YXJndW1lbnRzO3JldHVybiBmdW5jdGlvbihzKXt2YXIgcng9W10scj1udWxsO2Zvcih2YXIgaT0wO2k8cHgubGVuZ3RoO2krKyl7aWYocHhbaV09PW51bGwpe2NvbnRpbnVlO31cbnRyeXtyPShweFtpXS5jYWxsKHRoaXMscykpO31jYXRjaChlKXt0aHJvdyBuZXcgJFAuRXhjZXB0aW9uKHMpO31cbnJ4LnB1c2goclswXSk7cz1yWzFdO31cbnJldHVybltyeCxzXTt9O30sYWxsOmZ1bmN0aW9uKCl7dmFyIHB4PWFyZ3VtZW50cyxfPV87cmV0dXJuIF8uZWFjaChfLm9wdGlvbmFsKHB4KSk7fSxzZXF1ZW5jZTpmdW5jdGlvbihweCxkLGMpe2Q9ZHx8Xy5ydG9rZW4oL15cXHMqLyk7Yz1jfHxudWxsO2lmKHB4Lmxlbmd0aD09MSl7cmV0dXJuIHB4WzBdO31cbnJldHVybiBmdW5jdGlvbihzKXt2YXIgcj1udWxsLHE9bnVsbDt2YXIgcng9W107Zm9yKHZhciBpPTA7aTxweC5sZW5ndGg7aSsrKXt0cnl7cj1weFtpXS5jYWxsKHRoaXMscyk7fWNhdGNoKGUpe2JyZWFrO31cbnJ4LnB1c2goclswXSk7dHJ5e3E9ZC5jYWxsKHRoaXMsclsxXSk7fWNhdGNoKGV4KXtxPW51bGw7YnJlYWs7fVxucz1xWzFdO31cbmlmKCFyKXt0aHJvdyBuZXcgJFAuRXhjZXB0aW9uKHMpO31cbmlmKHEpe3Rocm93IG5ldyAkUC5FeGNlcHRpb24ocVsxXSk7fVxuaWYoYyl7dHJ5e3I9Yy5jYWxsKHRoaXMsclsxXSk7fWNhdGNoKGV5KXt0aHJvdyBuZXcgJFAuRXhjZXB0aW9uKHJbMV0pO319XG5yZXR1cm5bcngsKHI/clsxXTpzKV07fTt9LGJldHdlZW46ZnVuY3Rpb24oZDEscCxkMil7ZDI9ZDJ8fGQxO3ZhciBfZm49Xy5lYWNoKF8uaWdub3JlKGQxKSxwLF8uaWdub3JlKGQyKSk7cmV0dXJuIGZ1bmN0aW9uKHMpe3ZhciByeD1fZm4uY2FsbCh0aGlzLHMpO3JldHVybltbcnhbMF1bMF0sclswXVsyXV0scnhbMV1dO307fSxsaXN0OmZ1bmN0aW9uKHAsZCxjKXtkPWR8fF8ucnRva2VuKC9eXFxzKi8pO2M9Y3x8bnVsbDtyZXR1cm4ocCBpbnN0YW5jZW9mIEFycmF5P18uZWFjaChfLnByb2R1Y3QocC5zbGljZSgwLC0xKSxfLmlnbm9yZShkKSkscC5zbGljZSgtMSksXy5pZ25vcmUoYykpOl8uZWFjaChfLm1hbnkoXy5lYWNoKHAsXy5pZ25vcmUoZCkpKSxweCxfLmlnbm9yZShjKSkpO30sc2V0OmZ1bmN0aW9uKHB4LGQsYyl7ZD1kfHxfLnJ0b2tlbigvXlxccyovKTtjPWN8fG51bGw7cmV0dXJuIGZ1bmN0aW9uKHMpe3ZhciByPW51bGwscD1udWxsLHE9bnVsbCxyeD1udWxsLGJlc3Q9W1tdLHNdLGxhc3Q9ZmFsc2U7Zm9yKHZhciBpPTA7aTxweC5sZW5ndGg7aSsrKXtxPW51bGw7cD1udWxsO3I9bnVsbDtsYXN0PShweC5sZW5ndGg9PTEpO3RyeXtyPXB4W2ldLmNhbGwodGhpcyxzKTt9Y2F0Y2goZSl7Y29udGludWU7fVxucng9W1tyWzBdXSxyWzFdXTtpZihyWzFdLmxlbmd0aD4wJiYhbGFzdCl7dHJ5e3E9ZC5jYWxsKHRoaXMsclsxXSk7fWNhdGNoKGV4KXtsYXN0PXRydWU7fX1lbHNle2xhc3Q9dHJ1ZTt9XG5pZighbGFzdCYmcVsxXS5sZW5ndGg9PT0wKXtsYXN0PXRydWU7fVxuaWYoIWxhc3Qpe3ZhciBxeD1bXTtmb3IodmFyIGo9MDtqPHB4Lmxlbmd0aDtqKyspe2lmKGkhPWope3F4LnB1c2gocHhbal0pO319XG5wPV8uc2V0KHF4LGQpLmNhbGwodGhpcyxxWzFdKTtpZihwWzBdLmxlbmd0aD4wKXtyeFswXT1yeFswXS5jb25jYXQocFswXSk7cnhbMV09cFsxXTt9fVxuaWYocnhbMV0ubGVuZ3RoPGJlc3RbMV0ubGVuZ3RoKXtiZXN0PXJ4O31cbmlmKGJlc3RbMV0ubGVuZ3RoPT09MCl7YnJlYWs7fX1cbmlmKGJlc3RbMF0ubGVuZ3RoPT09MCl7cmV0dXJuIGJlc3Q7fVxuaWYoYyl7dHJ5e3E9Yy5jYWxsKHRoaXMsYmVzdFsxXSk7fWNhdGNoKGV5KXt0aHJvdyBuZXcgJFAuRXhjZXB0aW9uKGJlc3RbMV0pO31cbmJlc3RbMV09cVsxXTt9XG5yZXR1cm4gYmVzdDt9O30sZm9yd2FyZDpmdW5jdGlvbihncixmbmFtZSl7cmV0dXJuIGZ1bmN0aW9uKHMpe3JldHVybiBncltmbmFtZV0uY2FsbCh0aGlzLHMpO307fSxyZXBsYWNlOmZ1bmN0aW9uKHJ1bGUscmVwbCl7cmV0dXJuIGZ1bmN0aW9uKHMpe3ZhciByPXJ1bGUuY2FsbCh0aGlzLHMpO3JldHVybltyZXBsLHJbMV1dO307fSxwcm9jZXNzOmZ1bmN0aW9uKHJ1bGUsZm4pe3JldHVybiBmdW5jdGlvbihzKXt2YXIgcj1ydWxlLmNhbGwodGhpcyxzKTtyZXR1cm5bZm4uY2FsbCh0aGlzLHJbMF0pLHJbMV1dO307fSxtaW46ZnVuY3Rpb24obWluLHJ1bGUpe3JldHVybiBmdW5jdGlvbihzKXt2YXIgcng9cnVsZS5jYWxsKHRoaXMscyk7aWYocnhbMF0ubGVuZ3RoPG1pbil7dGhyb3cgbmV3ICRQLkV4Y2VwdGlvbihzKTt9XG5yZXR1cm4gcng7fTt9fTt2YXIgX2dlbmVyYXRvcj1mdW5jdGlvbihvcCl7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGFyZ3M9bnVsbCxyeD1bXTtpZihhcmd1bWVudHMubGVuZ3RoPjEpe2FyZ3M9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKTt9ZWxzZSBpZihhcmd1bWVudHNbMF1pbnN0YW5jZW9mIEFycmF5KXthcmdzPWFyZ3VtZW50c1swXTt9XG5pZihhcmdzKXtmb3IodmFyIGk9MCxweD1hcmdzLnNoaWZ0KCk7aTxweC5sZW5ndGg7aSsrKXthcmdzLnVuc2hpZnQocHhbaV0pO3J4LnB1c2gob3AuYXBwbHkobnVsbCxhcmdzKSk7YXJncy5zaGlmdCgpO3JldHVybiByeDt9fWVsc2V7cmV0dXJuIG9wLmFwcGx5KG51bGwsYXJndW1lbnRzKTt9fTt9O3ZhciBneD1cIm9wdGlvbmFsIG5vdCBpZ25vcmUgY2FjaGVcIi5zcGxpdCgvXFxzLyk7Zm9yKHZhciBpPTA7aTxneC5sZW5ndGg7aSsrKXtfW2d4W2ldXT1fZ2VuZXJhdG9yKF9bZ3hbaV1dKTt9XG52YXIgX3ZlY3Rvcj1mdW5jdGlvbihvcCl7cmV0dXJuIGZ1bmN0aW9uKCl7aWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBBcnJheSl7cmV0dXJuIG9wLmFwcGx5KG51bGwsYXJndW1lbnRzWzBdKTt9ZWxzZXtyZXR1cm4gb3AuYXBwbHkobnVsbCxhcmd1bWVudHMpO319O307dmFyIHZ4PVwiZWFjaCBhbnkgYWxsXCIuc3BsaXQoL1xccy8pO2Zvcih2YXIgaj0wO2o8dngubGVuZ3RoO2orKyl7X1t2eFtqXV09X3ZlY3RvcihfW3Z4W2pdXSk7fX0oKSk7KGZ1bmN0aW9uKCl7dmFyIGZsYXR0ZW5BbmRDb21wYWN0PWZ1bmN0aW9uKGF4KXt2YXIgcng9W107Zm9yKHZhciBpPTA7aTxheC5sZW5ndGg7aSsrKXtpZihheFtpXWluc3RhbmNlb2YgQXJyYXkpe3J4PXJ4LmNvbmNhdChmbGF0dGVuQW5kQ29tcGFjdChheFtpXSkpO31lbHNle2lmKGF4W2ldKXtyeC5wdXNoKGF4W2ldKTt9fX1cbnJldHVybiByeDt9O0RhdGUuR3JhbW1hcj17fTtEYXRlLlRyYW5zbGF0b3I9e2hvdXI6ZnVuY3Rpb24ocyl7cmV0dXJuIGZ1bmN0aW9uKCl7dGhpcy5ob3VyPU51bWJlcihzKTt9O30sbWludXRlOmZ1bmN0aW9uKHMpe3JldHVybiBmdW5jdGlvbigpe3RoaXMubWludXRlPU51bWJlcihzKTt9O30sc2Vjb25kOmZ1bmN0aW9uKHMpe3JldHVybiBmdW5jdGlvbigpe3RoaXMuc2Vjb25kPU51bWJlcihzKTt9O30sbWVyaWRpYW46ZnVuY3Rpb24ocyl7cmV0dXJuIGZ1bmN0aW9uKCl7dGhpcy5tZXJpZGlhbj1zLnNsaWNlKDAsMSkudG9Mb3dlckNhc2UoKTt9O30sdGltZXpvbmU6ZnVuY3Rpb24ocyl7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIG49cy5yZXBsYWNlKC9bXlxcZFxcK1xcLV0vZyxcIlwiKTtpZihuLmxlbmd0aCl7dGhpcy50aW1lem9uZU9mZnNldD1OdW1iZXIobik7fWVsc2V7dGhpcy50aW1lem9uZT1zLnRvTG93ZXJDYXNlKCk7fX07fSxkYXk6ZnVuY3Rpb24oeCl7dmFyIHM9eFswXTtyZXR1cm4gZnVuY3Rpb24oKXt0aGlzLmRheT1OdW1iZXIocy5tYXRjaCgvXFxkKy8pWzBdKTt9O30sbW9udGg6ZnVuY3Rpb24ocyl7cmV0dXJuIGZ1bmN0aW9uKCl7dGhpcy5tb250aD0oKHMubGVuZ3RoPT0zKT9EYXRlLmdldE1vbnRoTnVtYmVyRnJvbU5hbWUocyk6KE51bWJlcihzKS0xKSk7fTt9LHllYXI6ZnVuY3Rpb24ocyl7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIG49TnVtYmVyKHMpO3RoaXMueWVhcj0oKHMubGVuZ3RoPjIpP246KG4rKCgobisyMDAwKTxEYXRlLkN1bHR1cmVJbmZvLnR3b0RpZ2l0WWVhck1heCk/MjAwMDoxOTAwKSkpO307fSxyZGF5OmZ1bmN0aW9uKHMpe3JldHVybiBmdW5jdGlvbigpe3N3aXRjaChzKXtjYXNlXCJ5ZXN0ZXJkYXlcIjp0aGlzLmRheXM9LTE7YnJlYWs7Y2FzZVwidG9tb3Jyb3dcIjp0aGlzLmRheXM9MTticmVhaztjYXNlXCJ0b2RheVwiOnRoaXMuZGF5cz0wO2JyZWFrO2Nhc2VcIm5vd1wiOnRoaXMuZGF5cz0wO3RoaXMubm93PXRydWU7YnJlYWs7fX07fSxmaW5pc2hFeGFjdDpmdW5jdGlvbih4KXt4PSh4IGluc3RhbmNlb2YgQXJyYXkpP3g6W3hdO3ZhciBub3c9bmV3IERhdGUoKTt0aGlzLnllYXI9bm93LmdldEZ1bGxZZWFyKCk7dGhpcy5tb250aD1ub3cuZ2V0TW9udGgoKTt0aGlzLmRheT0xO3RoaXMuaG91cj0wO3RoaXMubWludXRlPTA7dGhpcy5zZWNvbmQ9MDtmb3IodmFyIGk9MDtpPHgubGVuZ3RoO2krKyl7aWYoeFtpXSl7eFtpXS5jYWxsKHRoaXMpO319XG50aGlzLmhvdXI9KHRoaXMubWVyaWRpYW49PVwicFwiJiZ0aGlzLmhvdXI8MTMpP3RoaXMuaG91cisxMjp0aGlzLmhvdXI7aWYodGhpcy5kYXk+RGF0ZS5nZXREYXlzSW5Nb250aCh0aGlzLnllYXIsdGhpcy5tb250aCkpe3Rocm93IG5ldyBSYW5nZUVycm9yKHRoaXMuZGF5K1wiIGlzIG5vdCBhIHZhbGlkIHZhbHVlIGZvciBkYXlzLlwiKTt9XG52YXIgcj1uZXcgRGF0ZSh0aGlzLnllYXIsdGhpcy5tb250aCx0aGlzLmRheSx0aGlzLmhvdXIsdGhpcy5taW51dGUsdGhpcy5zZWNvbmQpO2lmKHRoaXMudGltZXpvbmUpe3Iuc2V0KHt0aW1lem9uZTp0aGlzLnRpbWV6b25lfSk7fWVsc2UgaWYodGhpcy50aW1lem9uZU9mZnNldCl7ci5zZXQoe3RpbWV6b25lT2Zmc2V0OnRoaXMudGltZXpvbmVPZmZzZXR9KTt9XG5yZXR1cm4gcjt9LGZpbmlzaDpmdW5jdGlvbih4KXt4PSh4IGluc3RhbmNlb2YgQXJyYXkpP2ZsYXR0ZW5BbmRDb21wYWN0KHgpOlt4XTtpZih4Lmxlbmd0aD09PTApe3JldHVybiBudWxsO31cbmZvcih2YXIgaT0wO2k8eC5sZW5ndGg7aSsrKXtpZih0eXBlb2YgeFtpXT09XCJmdW5jdGlvblwiKXt4W2ldLmNhbGwodGhpcyk7fX1cbmlmKHRoaXMubm93KXtyZXR1cm4gbmV3IERhdGUoKTt9XG52YXIgdG9kYXk9RGF0ZS50b2RheSgpO3ZhciBtZXRob2Q9bnVsbDt2YXIgZXhwcmVzc2lvbj0hISh0aGlzLmRheXMhPW51bGx8fHRoaXMub3JpZW50fHx0aGlzLm9wZXJhdG9yKTtpZihleHByZXNzaW9uKXt2YXIgZ2FwLG1vZCxvcmllbnQ7b3JpZW50PSgodGhpcy5vcmllbnQ9PVwicGFzdFwifHx0aGlzLm9wZXJhdG9yPT1cInN1YnRyYWN0XCIpPy0xOjEpO2lmKHRoaXMud2Vla2RheSl7dGhpcy51bml0PVwiZGF5XCI7Z2FwPShEYXRlLmdldERheU51bWJlckZyb21OYW1lKHRoaXMud2Vla2RheSktdG9kYXkuZ2V0RGF5KCkpO21vZD03O3RoaXMuZGF5cz1nYXA/KChnYXArKG9yaWVudCptb2QpKSVtb2QpOihvcmllbnQqbW9kKTt9XG5pZih0aGlzLm1vbnRoKXt0aGlzLnVuaXQ9XCJtb250aFwiO2dhcD0odGhpcy5tb250aC10b2RheS5nZXRNb250aCgpKTttb2Q9MTI7dGhpcy5tb250aHM9Z2FwPygoZ2FwKyhvcmllbnQqbW9kKSklbW9kKToob3JpZW50Km1vZCk7dGhpcy5tb250aD1udWxsO31cbmlmKCF0aGlzLnVuaXQpe3RoaXMudW5pdD1cImRheVwiO31cbmlmKHRoaXNbdGhpcy51bml0K1wic1wiXT09bnVsbHx8dGhpcy5vcGVyYXRvciE9bnVsbCl7aWYoIXRoaXMudmFsdWUpe3RoaXMudmFsdWU9MTt9XG5pZih0aGlzLnVuaXQ9PVwid2Vla1wiKXt0aGlzLnVuaXQ9XCJkYXlcIjt0aGlzLnZhbHVlPXRoaXMudmFsdWUqNzt9XG50aGlzW3RoaXMudW5pdCtcInNcIl09dGhpcy52YWx1ZSpvcmllbnQ7fVxucmV0dXJuIHRvZGF5LmFkZCh0aGlzKTt9ZWxzZXtpZih0aGlzLm1lcmlkaWFuJiZ0aGlzLmhvdXIpe3RoaXMuaG91cj0odGhpcy5ob3VyPDEzJiZ0aGlzLm1lcmlkaWFuPT1cInBcIik/dGhpcy5ob3VyKzEyOnRoaXMuaG91cjt9XG5pZih0aGlzLndlZWtkYXkmJiF0aGlzLmRheSl7dGhpcy5kYXk9KHRvZGF5LmFkZERheXMoKERhdGUuZ2V0RGF5TnVtYmVyRnJvbU5hbWUodGhpcy53ZWVrZGF5KS10b2RheS5nZXREYXkoKSkpKS5nZXREYXRlKCk7fVxuaWYodGhpcy5tb250aCYmIXRoaXMuZGF5KXt0aGlzLmRheT0xO31cbnJldHVybiB0b2RheS5zZXQodGhpcyk7fX19O3ZhciBfPURhdGUuUGFyc2luZy5PcGVyYXRvcnMsZz1EYXRlLkdyYW1tYXIsdD1EYXRlLlRyYW5zbGF0b3IsX2ZuO2cuZGF0ZVBhcnREZWxpbWl0ZXI9Xy5ydG9rZW4oL14oW1xcc1xcLVxcLlxcLFxcL1xceDI3XSspLyk7Zy50aW1lUGFydERlbGltaXRlcj1fLnN0b2tlbihcIjpcIik7Zy53aGl0ZVNwYWNlPV8ucnRva2VuKC9eXFxzKi8pO2cuZ2VuZXJhbERlbGltaXRlcj1fLnJ0b2tlbigvXigoW1xcc1xcLF18YXR8b24pKykvKTt2YXIgX0M9e307Zy5jdG9rZW49ZnVuY3Rpb24oa2V5cyl7dmFyIGZuPV9DW2tleXNdO2lmKCFmbil7dmFyIGM9RGF0ZS5DdWx0dXJlSW5mby5yZWdleFBhdHRlcm5zO3ZhciBreD1rZXlzLnNwbGl0KC9cXHMrLykscHg9W107Zm9yKHZhciBpPTA7aTxreC5sZW5ndGg7aSsrKXtweC5wdXNoKF8ucmVwbGFjZShfLnJ0b2tlbihjW2t4W2ldXSksa3hbaV0pKTt9XG5mbj1fQ1trZXlzXT1fLmFueS5hcHBseShudWxsLHB4KTt9XG5yZXR1cm4gZm47fTtnLmN0b2tlbjI9ZnVuY3Rpb24oa2V5KXtyZXR1cm4gXy5ydG9rZW4oRGF0ZS5DdWx0dXJlSW5mby5yZWdleFBhdHRlcm5zW2tleV0pO307Zy5oPV8uY2FjaGUoXy5wcm9jZXNzKF8ucnRva2VuKC9eKDBbMC05XXwxWzAtMl18WzEtOV0pLyksdC5ob3VyKSk7Zy5oaD1fLmNhY2hlKF8ucHJvY2VzcyhfLnJ0b2tlbigvXigwWzAtOV18MVswLTJdKS8pLHQuaG91cikpO2cuSD1fLmNhY2hlKF8ucHJvY2VzcyhfLnJ0b2tlbigvXihbMC0xXVswLTldfDJbMC0zXXxbMC05XSkvKSx0LmhvdXIpKTtnLkhIPV8uY2FjaGUoXy5wcm9jZXNzKF8ucnRva2VuKC9eKFswLTFdWzAtOV18MlswLTNdKS8pLHQuaG91cikpO2cubT1fLmNhY2hlKF8ucHJvY2VzcyhfLnJ0b2tlbigvXihbMC01XVswLTldfFswLTldKS8pLHQubWludXRlKSk7Zy5tbT1fLmNhY2hlKF8ucHJvY2VzcyhfLnJ0b2tlbigvXlswLTVdWzAtOV0vKSx0Lm1pbnV0ZSkpO2cucz1fLmNhY2hlKF8ucHJvY2VzcyhfLnJ0b2tlbigvXihbMC01XVswLTldfFswLTldKS8pLHQuc2Vjb25kKSk7Zy5zcz1fLmNhY2hlKF8ucHJvY2VzcyhfLnJ0b2tlbigvXlswLTVdWzAtOV0vKSx0LnNlY29uZCkpO2cuaG1zPV8uY2FjaGUoXy5zZXF1ZW5jZShbZy5ILGcubW0sZy5zc10sZy50aW1lUGFydERlbGltaXRlcikpO2cudD1fLmNhY2hlKF8ucHJvY2VzcyhnLmN0b2tlbjIoXCJzaG9ydE1lcmlkaWFuXCIpLHQubWVyaWRpYW4pKTtnLnR0PV8uY2FjaGUoXy5wcm9jZXNzKGcuY3Rva2VuMihcImxvbmdNZXJpZGlhblwiKSx0Lm1lcmlkaWFuKSk7Zy56PV8uY2FjaGUoXy5wcm9jZXNzKF8ucnRva2VuKC9eKFxcK3xcXC0pP1xccypcXGRcXGRcXGRcXGQ/LyksdC50aW1lem9uZSkpO2cueno9Xy5jYWNoZShfLnByb2Nlc3MoXy5ydG9rZW4oL14oXFwrfFxcLSlcXHMqXFxkXFxkXFxkXFxkLyksdC50aW1lem9uZSkpO2cuenp6PV8uY2FjaGUoXy5wcm9jZXNzKGcuY3Rva2VuMihcInRpbWV6b25lXCIpLHQudGltZXpvbmUpKTtnLnRpbWVTdWZmaXg9Xy5lYWNoKF8uaWdub3JlKGcud2hpdGVTcGFjZSksXy5zZXQoW2cudHQsZy56enpdKSk7Zy50aW1lPV8uZWFjaChfLm9wdGlvbmFsKF8uaWdub3JlKF8uc3Rva2VuKFwiVFwiKSkpLGcuaG1zLGcudGltZVN1ZmZpeCk7Zy5kPV8uY2FjaGUoXy5wcm9jZXNzKF8uZWFjaChfLnJ0b2tlbigvXihbMC0yXVxcZHwzWzAtMV18XFxkKS8pLF8ub3B0aW9uYWwoZy5jdG9rZW4yKFwib3JkaW5hbFN1ZmZpeFwiKSkpLHQuZGF5KSk7Zy5kZD1fLmNhY2hlKF8ucHJvY2VzcyhfLmVhY2goXy5ydG9rZW4oL14oWzAtMl1cXGR8M1swLTFdKS8pLF8ub3B0aW9uYWwoZy5jdG9rZW4yKFwib3JkaW5hbFN1ZmZpeFwiKSkpLHQuZGF5KSk7Zy5kZGQ9Zy5kZGRkPV8uY2FjaGUoXy5wcm9jZXNzKGcuY3Rva2VuKFwic3VuIG1vbiB0dWUgd2VkIHRodSBmcmkgc2F0XCIpLGZ1bmN0aW9uKHMpe3JldHVybiBmdW5jdGlvbigpe3RoaXMud2Vla2RheT1zO307fSkpO2cuTT1fLmNhY2hlKF8ucHJvY2VzcyhfLnJ0b2tlbigvXigxWzAtMl18MFxcZHxcXGQpLyksdC5tb250aCkpO2cuTU09Xy5jYWNoZShfLnByb2Nlc3MoXy5ydG9rZW4oL14oMVswLTJdfDBcXGQpLyksdC5tb250aCkpO2cuTU1NPWcuTU1NTT1fLmNhY2hlKF8ucHJvY2VzcyhnLmN0b2tlbihcImphbiBmZWIgbWFyIGFwciBtYXkganVuIGp1bCBhdWcgc2VwIG9jdCBub3YgZGVjXCIpLHQubW9udGgpKTtnLnk9Xy5jYWNoZShfLnByb2Nlc3MoXy5ydG9rZW4oL14oXFxkXFxkPykvKSx0LnllYXIpKTtnLnl5PV8uY2FjaGUoXy5wcm9jZXNzKF8ucnRva2VuKC9eKFxcZFxcZCkvKSx0LnllYXIpKTtnLnl5eT1fLmNhY2hlKF8ucHJvY2VzcyhfLnJ0b2tlbigvXihcXGRcXGQ/XFxkP1xcZD8pLyksdC55ZWFyKSk7Zy55eXl5PV8uY2FjaGUoXy5wcm9jZXNzKF8ucnRva2VuKC9eKFxcZFxcZFxcZFxcZCkvKSx0LnllYXIpKTtfZm49ZnVuY3Rpb24oKXtyZXR1cm4gXy5lYWNoKF8uYW55LmFwcGx5KG51bGwsYXJndW1lbnRzKSxfLm5vdChnLmN0b2tlbjIoXCJ0aW1lQ29udGV4dFwiKSkpO307Zy5kYXk9X2ZuKGcuZCxnLmRkKTtnLm1vbnRoPV9mbihnLk0sZy5NTU0pO2cueWVhcj1fZm4oZy55eXl5LGcueXkpO2cub3JpZW50YXRpb249Xy5wcm9jZXNzKGcuY3Rva2VuKFwicGFzdCBmdXR1cmVcIiksZnVuY3Rpb24ocyl7cmV0dXJuIGZ1bmN0aW9uKCl7dGhpcy5vcmllbnQ9czt9O30pO2cub3BlcmF0b3I9Xy5wcm9jZXNzKGcuY3Rva2VuKFwiYWRkIHN1YnRyYWN0XCIpLGZ1bmN0aW9uKHMpe3JldHVybiBmdW5jdGlvbigpe3RoaXMub3BlcmF0b3I9czt9O30pO2cucmRheT1fLnByb2Nlc3MoZy5jdG9rZW4oXCJ5ZXN0ZXJkYXkgdG9tb3Jyb3cgdG9kYXkgbm93XCIpLHQucmRheSk7Zy51bml0PV8ucHJvY2VzcyhnLmN0b2tlbihcIm1pbnV0ZSBob3VyIGRheSB3ZWVrIG1vbnRoIHllYXJcIiksZnVuY3Rpb24ocyl7cmV0dXJuIGZ1bmN0aW9uKCl7dGhpcy51bml0PXM7fTt9KTtnLnZhbHVlPV8ucHJvY2VzcyhfLnJ0b2tlbigvXlxcZFxcZD8oc3R8bmR8cmR8dGgpPy8pLGZ1bmN0aW9uKHMpe3JldHVybiBmdW5jdGlvbigpe3RoaXMudmFsdWU9cy5yZXBsYWNlKC9cXEQvZyxcIlwiKTt9O30pO2cuZXhwcmVzc2lvbj1fLnNldChbZy5yZGF5LGcub3BlcmF0b3IsZy52YWx1ZSxnLnVuaXQsZy5vcmllbnRhdGlvbixnLmRkZCxnLk1NTV0pO19mbj1mdW5jdGlvbigpe3JldHVybiBfLnNldChhcmd1bWVudHMsZy5kYXRlUGFydERlbGltaXRlcik7fTtnLm1keT1fZm4oZy5kZGQsZy5tb250aCxnLmRheSxnLnllYXIpO2cueW1kPV9mbihnLmRkZCxnLnllYXIsZy5tb250aCxnLmRheSk7Zy5kbXk9X2ZuKGcuZGRkLGcuZGF5LGcubW9udGgsZy55ZWFyKTtnLmRhdGU9ZnVuY3Rpb24ocyl7cmV0dXJuKChnW0RhdGUuQ3VsdHVyZUluZm8uZGF0ZUVsZW1lbnRPcmRlcl18fGcubWR5KS5jYWxsKHRoaXMscykpO307Zy5mb3JtYXQ9Xy5wcm9jZXNzKF8ubWFueShfLmFueShfLnByb2Nlc3MoXy5ydG9rZW4oL14oZGQ/ZD9kP3xNTT9NP00/fHl5P3k/eT98aGg/fEhIP3xtbT98c3M/fHR0P3x6ej96PykvKSxmdW5jdGlvbihmbXQpe2lmKGdbZm10XSl7cmV0dXJuIGdbZm10XTt9ZWxzZXt0aHJvdyBEYXRlLlBhcnNpbmcuRXhjZXB0aW9uKGZtdCk7fX0pLF8ucHJvY2VzcyhfLnJ0b2tlbigvXlteZE15aEhtc3R6XSsvKSxmdW5jdGlvbihzKXtyZXR1cm4gXy5pZ25vcmUoXy5zdG9rZW4ocykpO30pKSksZnVuY3Rpb24ocnVsZXMpe3JldHVybiBfLnByb2Nlc3MoXy5lYWNoLmFwcGx5KG51bGwscnVsZXMpLHQuZmluaXNoRXhhY3QpO30pO3ZhciBfRj17fTt2YXIgX2dldD1mdW5jdGlvbihmKXtyZXR1cm4gX0ZbZl09KF9GW2ZdfHxnLmZvcm1hdChmKVswXSk7fTtnLmZvcm1hdHM9ZnVuY3Rpb24oZngpe2lmKGZ4IGluc3RhbmNlb2YgQXJyYXkpe3ZhciByeD1bXTtmb3IodmFyIGk9MDtpPGZ4Lmxlbmd0aDtpKyspe3J4LnB1c2goX2dldChmeFtpXSkpO31cbnJldHVybiBfLmFueS5hcHBseShudWxsLHJ4KTt9ZWxzZXtyZXR1cm4gX2dldChmeCk7fX07Zy5fZm9ybWF0cz1nLmZvcm1hdHMoW1wieXl5eS1NTS1kZFRISDptbTpzc1wiLFwiZGRkLCBNTU0gZGQsIHl5eXkgSDptbTpzcyB0dFwiLFwiZGRkIE1NTSBkIHl5eXkgSEg6bW06c3Mgenp6XCIsXCJkXCJdKTtnLl9zdGFydD1fLnByb2Nlc3MoXy5zZXQoW2cuZGF0ZSxnLnRpbWUsZy5leHByZXNzaW9uXSxnLmdlbmVyYWxEZWxpbWl0ZXIsZy53aGl0ZVNwYWNlKSx0LmZpbmlzaCk7Zy5zdGFydD1mdW5jdGlvbihzKXt0cnl7dmFyIHI9Zy5fZm9ybWF0cy5jYWxsKHt9LHMpO2lmKHJbMV0ubGVuZ3RoPT09MCl7cmV0dXJuIHI7fX1jYXRjaChlKXt9XG5yZXR1cm4gZy5fc3RhcnQuY2FsbCh7fSxzKTt9O30oKSk7RGF0ZS5fcGFyc2U9RGF0ZS5wYXJzZTtEYXRlLnBhcnNlPWZ1bmN0aW9uKHMpe3ZhciByPW51bGw7aWYoIXMpe3JldHVybiBudWxsO31cbnRyeXtyPURhdGUuR3JhbW1hci5zdGFydC5jYWxsKHt9LHMpO31jYXRjaChlKXtyZXR1cm4gbnVsbDt9XG5yZXR1cm4oKHJbMV0ubGVuZ3RoPT09MCk/clswXTpudWxsKTt9O0RhdGUuZ2V0UGFyc2VGdW5jdGlvbj1mdW5jdGlvbihmeCl7dmFyIGZuPURhdGUuR3JhbW1hci5mb3JtYXRzKGZ4KTtyZXR1cm4gZnVuY3Rpb24ocyl7dmFyIHI9bnVsbDt0cnl7cj1mbi5jYWxsKHt9LHMpO31jYXRjaChlKXtyZXR1cm4gbnVsbDt9XG5yZXR1cm4oKHJbMV0ubGVuZ3RoPT09MCk/clswXTpudWxsKTt9O307RGF0ZS5wYXJzZUV4YWN0PWZ1bmN0aW9uKHMsZngpe3JldHVybiBEYXRlLmdldFBhcnNlRnVuY3Rpb24oZngpKHMpO307XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gc3JjL2pzL3V0aWxzL2RhdGUuanMiXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7O0FBT0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUEiLCJzb3VyY2VSb290IjoiIn0=')},22:function(module,exports){eval('(function () {\n\n\tvar handlers = {};\n\twindow.addHandler = function (event, func) {\n\t\tif (!(event in handlers)) handlers[event] = [];\n\n\t\thandlers[event].push(func);\n\t};\n\n\thandleMessage = function handleMessage(request, sender, sendResponse) {\n\t\tvar event = request.event;\n\n\t\t// if(typeof event !== "undefined") console.log("got event: " + event);\n\t\tif (event in handlers) {\n\t\t\tfor (var i = 0; i < handlers[event].length; i++) {\n\t\t\t\thandlers[event][i](request.data, sender, sendResponse);\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t};\n\n\tchrome.runtime.onMessage.addListener(handleMessage);\n\n\tfunction isBackground() {\n\t\treturn chrome && chrome.extension && location.href.indexOf("background") > 0;\n\t}\n\n\tif (isBackground()) window.sendMessage = function (event, data, callback, tabFilter) {\n\t\t// console.log("put event: " + event);\n\t\ttabFilter = tabFilter || {};\n\t\tcallback = callback || function () {};\n\n\t\t// handleMessage({\n\t\t// \t"event": event,\n\t\t// \t"data": data\n\t\t// }, null, callback);\n\n\t\tif (typeof tabFilter === "number") {\n\t\t\tchrome.tabs.sendMessage(tabFilter, {\n\t\t\t\t"event": event,\n\t\t\t\t"data": data\n\t\t\t}, function (d) {\n\t\t\t\tcallback(d, tabFilter);\n\t\t\t});\n\t\t} else {\n\t\t\tchrome.tabs.query(tabFilter, function (tabList) {\n\t\t\t\tfor (var i = 0; i < tabList.length; i++) {\n\t\t\t\t\tvar tabId = tabList[i].id;\n\t\t\t\t\tchrome.tabs.sendMessage(tabId, {\n\t\t\t\t\t\t"event": event,\n\t\t\t\t\t\t"data": data\n\t\t\t\t\t}, function (d) {\n\t\t\t\t\t\tcallback(d, tabId);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t};else window.sendMessage = function (event, data, callback) {\n\t\t// console.log("put event: " + event);\n\t\t// handleMessage({\n\t\t// \t"event": event,\n\t\t// \t"data": data\n\t\t// }, null, callback);\n\t\tchrome.runtime.sendMessage({\n\t\t\t"event": event,\n\t\t\t"data": data\n\t\t}, callback);\n\t};\n})();//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjIuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL2pzL3V0aWxzL21lc3NhZ2VTeXN0ZW0uanM/OTEwZiJdLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKSB7XG5cbnZhciBoYW5kbGVycyA9IHt9O1xud2luZG93LmFkZEhhbmRsZXIgPSBmdW5jdGlvbihldmVudCwgZnVuYykge1xuXHRpZighKGV2ZW50IGluIGhhbmRsZXJzKSkgaGFuZGxlcnNbZXZlbnRdID0gW107XG5cblx0aGFuZGxlcnNbZXZlbnRdLnB1c2goZnVuYyk7XG59XG5cbmhhbmRsZU1lc3NhZ2UgPSBmdW5jdGlvbihyZXF1ZXN0LCBzZW5kZXIsIHNlbmRSZXNwb25zZSkge1xuXHR2YXIgZXZlbnQgPSByZXF1ZXN0LmV2ZW50O1xuXG5cdC8vIGlmKHR5cGVvZiBldmVudCAhPT0gXCJ1bmRlZmluZWRcIikgY29uc29sZS5sb2coXCJnb3QgZXZlbnQ6IFwiICsgZXZlbnQpO1xuXHRpZihldmVudCBpbiBoYW5kbGVycykge1xuXHRcdGZvcih2YXIgaSA9IDA7IGkgPCBoYW5kbGVyc1tldmVudF0ubGVuZ3RoOyBpKyspIHtcblx0XHRcdCBoYW5kbGVyc1tldmVudF1baV0ocmVxdWVzdC5kYXRhLCBzZW5kZXIsIHNlbmRSZXNwb25zZSk7XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIHRydWU7XG59O1xuXG5jaHJvbWUucnVudGltZS5vbk1lc3NhZ2UuYWRkTGlzdGVuZXIoaGFuZGxlTWVzc2FnZSk7XG5cbmZ1bmN0aW9uIGlzQmFja2dyb3VuZCgpIHtcbiAgICByZXR1cm4gY2hyb21lICYmIGNocm9tZS5leHRlbnNpb24gJiYgbG9jYXRpb24uaHJlZi5pbmRleE9mKFwiYmFja2dyb3VuZFwiKSA+IDA7ICAgIFxufVxuXG5pZihpc0JhY2tncm91bmQoKSkgd2luZG93LnNlbmRNZXNzYWdlID0gZnVuY3Rpb24oZXZlbnQsIGRhdGEsIGNhbGxiYWNrLCB0YWJGaWx0ZXIpIHtcblx0Ly8gY29uc29sZS5sb2coXCJwdXQgZXZlbnQ6IFwiICsgZXZlbnQpO1xuXHR0YWJGaWx0ZXIgPSB0YWJGaWx0ZXIgfHwge307XG5cdGNhbGxiYWNrID0gY2FsbGJhY2sgfHwgZnVuY3Rpb24oKXt9O1xuXG5cdC8vIGhhbmRsZU1lc3NhZ2Uoe1xuXHQvLyBcdFwiZXZlbnRcIjogZXZlbnQsXG5cdC8vIFx0XCJkYXRhXCI6IGRhdGFcblx0Ly8gfSwgbnVsbCwgY2FsbGJhY2spO1xuXG5cdGlmKHR5cGVvZih0YWJGaWx0ZXIpID09PSBcIm51bWJlclwiKSB7XG5cdFx0Y2hyb21lLnRhYnMuc2VuZE1lc3NhZ2UodGFiRmlsdGVyLCB7XG5cdFx0XHRcImV2ZW50XCI6IGV2ZW50LFxuXHRcdFx0XCJkYXRhXCI6IGRhdGFcblx0XHR9LCBmdW5jdGlvbihkKSB7XG5cdFx0XHRjYWxsYmFjayhkLCB0YWJGaWx0ZXIpO1xuXHRcdH0pO1xuXHR9IGVsc2Uge1xuXHRcdGNocm9tZS50YWJzLnF1ZXJ5KHRhYkZpbHRlciwgZnVuY3Rpb24odGFiTGlzdCkge1xuXHRcdFx0Zm9yKHZhciBpID0gMDsgaSA8IHRhYkxpc3QubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0dmFyIHRhYklkID0gdGFiTGlzdFtpXS5pZDtcblx0XHRcdFx0Y2hyb21lLnRhYnMuc2VuZE1lc3NhZ2UodGFiSWQsIHtcblx0XHRcdFx0XHRcImV2ZW50XCI6IGV2ZW50LFxuXHRcdFx0XHRcdFwiZGF0YVwiOiBkYXRhXG5cdFx0XHRcdH0sIGZ1bmN0aW9uKGQpIHtcblx0XHRcdFx0XHRjYWxsYmFjayhkLCB0YWJJZCk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG59O1xuZWxzZSB3aW5kb3cuc2VuZE1lc3NhZ2UgPSBmdW5jdGlvbihldmVudCwgZGF0YSwgY2FsbGJhY2spIHtcblx0Ly8gY29uc29sZS5sb2coXCJwdXQgZXZlbnQ6IFwiICsgZXZlbnQpO1xuXHQvLyBoYW5kbGVNZXNzYWdlKHtcblx0Ly8gXHRcImV2ZW50XCI6IGV2ZW50LFxuXHQvLyBcdFwiZGF0YVwiOiBkYXRhXG5cdC8vIH0sIG51bGwsIGNhbGxiYWNrKTtcblx0Y2hyb21lLnJ1bnRpbWUuc2VuZE1lc3NhZ2Uoe1xuXHRcdFwiZXZlbnRcIjogZXZlbnQsXG5cdFx0XCJkYXRhXCI6IGRhdGFcblx0fSwgY2FsbGJhY2spO1xufTtcblxuXG59KSgpO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBzcmMvanMvdXRpbHMvbWVzc2FnZVN5c3RlbS5qcyJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBR0EiLCJzb3VyY2VSb290IjoiIn0=')},23:function(module,exports){eval('(function () {\n\n\tvar isBackground = function isBackground() {\n\t\treturn chrome && chrome.extension && location.href.indexOf("background") > 0;\n\t};\n\tisBackground = isBackground();\n\n\tvar settings = {};\n\tvar settingsHandlers = {};\n\n\tvar saveLocally = function saveLocally() {\n\t\tchrome.storage.sync.set({\n\t\t\t"settings": settings\n\t\t});\n\t};\n\n\twindow.getSetting = function (s) {\n\t\treturn settings[s];\n\t};\n\n\twindow.setSetting = function (s, v) {\n\t\tsettings[s] = v;\n\t\trunHandlers(s, v);\n\n\t\tvar data = {};\n\t\tdata[s] = v;\n\t\twindow.sendMessage("set_settings", data);\n\t\tif (isBackground) {\n\t\t\tsaveLocally();\n\t\t}\n\t};\n\n\twindow.addSettingsHandler = function (sName, func) {\n\t\tif (!(sName in settingsHandlers)) settingsHandlers[sName] = [];\n\n\t\tsettingsHandlers[sName].push(func);\n\t};\n\n\tvar runHandlers = function runHandlers(sName, sValue) {\n\t\tif (sName in settingsHandlers) {\n\t\t\tfor (var i = 0; i < settingsHandlers[sName].length; i++) {\n\t\t\t\tsettingsHandlers[sName][i](sValue);\n\t\t\t}\n\t\t}\n\t};\n\n\twindow.addHandler("set_settings", function (data) {\n\t\tvar keys = Object.keys(data);\n\t\tfor (var i = 0; i < keys.length; i++) {\n\t\t\tsettings[keys[i]] = data[keys[i]];\n\t\t\trunHandlers(keys[i], data[keys[i]]);\n\t\t}\n\t\tif (isBackground) {\n\t\t\twindow.sendMessage("set_settings", data);\n\t\t\tsaveLocally();\n\t\t}\n\t});\n\n\tif (isBackground) {\n\t\twindow.loadSettings = function (dSet, loaded) {\n\t\t\tloaded = loaded || function () {};\n\t\t\tStorage.getAppSettings(function (oSet) {\n\t\t\t\tchrome.storage.sync.get(["settings"], function (nSet) {\n\t\t\t\t\tnSet = nSet.settings || {};\n\t\t\t\t\toSet = oSet || {};\n\t\t\t\t\tdSet = dSet || {};\n\n\t\t\t\t\tvar keyList = {};\n\n\t\t\t\t\tfor (var k in dSet) {\n\t\t\t\t\t\tkeyList[k] = 1;\n\t\t\t\t\t}for (var k in oSet) {\n\t\t\t\t\t\tkeyList[k] = 1;\n\t\t\t\t\t}for (var k in nSet) {\n\t\t\t\t\t\tkeyList[k] = 1;\n\t\t\t\t\t}keyList = Object.keys(keyList);\n\n\t\t\t\t\tfor (var i = 0; i < keyList.length; i++) {\n\t\t\t\t\t\tvar k = keyList[i];\n\t\t\t\t\t\tif (k in dSet) settings[k] = dSet[k];\n\t\t\t\t\t\tif (k in oSet) settings[k] = oSet[k];\n\t\t\t\t\t\tif (k in nSet) settings[k] = nSet[k];\n\t\t\t\t\t}\n\n\t\t\t\t\tloaded();\n\t\t\t\t});\n\t\t\t});\n\t\t};\n\n\t\twindow.addHandler("get_settings", function (data, sender, sendResponse) {\n\t\t\tsendResponse(settings);\n\t\t});\n\t} else {\n\t\twindow.loadSettings = function (dSet, loaded) {\n\t\t\tif (typeof dSet === "function" && typeof loaded === "undefined") loaded = dSet;\n\t\t\tloaded = loaded || function () {};\n\n\t\t\twindow.sendMessage("get_settings", undefined, function (s) {\n\t\t\t\tsettings = s;\n\t\t\t\tloaded();\n\t\t\t});\n\t\t};\n\t}\n})();//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL2pzL3V0aWxzL3NldHRpbmdzU3lzdGVtLmpzPzI5MmEiXSwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCkge1xuXG52YXIgaXNCYWNrZ3JvdW5kID0gZnVuY3Rpb24oKSB7XG5cdHJldHVybiBjaHJvbWUgJiYgY2hyb21lLmV4dGVuc2lvbiAmJiBsb2NhdGlvbi5ocmVmLmluZGV4T2YoXCJiYWNrZ3JvdW5kXCIpID4gMDtcbn1cbmlzQmFja2dyb3VuZCA9IGlzQmFja2dyb3VuZCgpO1xuXG52YXIgc2V0dGluZ3MgPSB7fTtcbnZhciBzZXR0aW5nc0hhbmRsZXJzID0ge307XG5cbnZhciBzYXZlTG9jYWxseSA9IGZ1bmN0aW9uKCkge1xuXHRjaHJvbWUuc3RvcmFnZS5zeW5jLnNldCh7XG5cdFx0XCJzZXR0aW5nc1wiOiBzZXR0aW5nc1xuXHR9KTtcbn1cblxud2luZG93LmdldFNldHRpbmcgPSBmdW5jdGlvbihzKSB7XG5cdHJldHVybiBzZXR0aW5nc1tzXTtcbn1cblxud2luZG93LnNldFNldHRpbmcgPSBmdW5jdGlvbihzLCB2KSB7XG5cdHNldHRpbmdzW3NdID0gdjtcblx0cnVuSGFuZGxlcnMocywgdik7XG5cblx0dmFyIGRhdGEgPSB7fTtcblx0ZGF0YVtzXT12O1xuXHR3aW5kb3cuc2VuZE1lc3NhZ2UoXCJzZXRfc2V0dGluZ3NcIiwgZGF0YSk7XG5cdGlmKGlzQmFja2dyb3VuZCkge1xuXHRcdHNhdmVMb2NhbGx5KCk7XG5cdH1cbn1cblxud2luZG93LmFkZFNldHRpbmdzSGFuZGxlciA9IGZ1bmN0aW9uKHNOYW1lLCBmdW5jKSB7XG5cdGlmKCEoc05hbWUgaW4gc2V0dGluZ3NIYW5kbGVycykpIHNldHRpbmdzSGFuZGxlcnNbc05hbWVdID0gW107XG5cblx0c2V0dGluZ3NIYW5kbGVyc1tzTmFtZV0ucHVzaChmdW5jKTtcbn1cblxudmFyIHJ1bkhhbmRsZXJzID0gZnVuY3Rpb24oc05hbWUsIHNWYWx1ZSkge1xuXHRpZihzTmFtZSBpbiBzZXR0aW5nc0hhbmRsZXJzKSB7XG5cdFx0Zm9yKHZhciBpID0gMDsgaSA8IHNldHRpbmdzSGFuZGxlcnNbc05hbWVdLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRzZXR0aW5nc0hhbmRsZXJzW3NOYW1lXVtpXShzVmFsdWUpO1xuXHRcdH1cblx0fVxufVxuXG53aW5kb3cuYWRkSGFuZGxlcihcInNldF9zZXR0aW5nc1wiLCBmdW5jdGlvbihkYXRhKSB7XG5cdHZhciBrZXlzID0gT2JqZWN0LmtleXMoZGF0YSk7XG5cdGZvcih2YXIgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgaSsrKSB7XG5cdFx0c2V0dGluZ3Nba2V5c1tpXV0gPSBkYXRhW2tleXNbaV1dO1xuXHRcdHJ1bkhhbmRsZXJzKGtleXNbaV0sIGRhdGFba2V5c1tpXV0pO1xuXHR9XG5cdGlmKGlzQmFja2dyb3VuZCkge1xuXHRcdHdpbmRvdy5zZW5kTWVzc2FnZShcInNldF9zZXR0aW5nc1wiLCBkYXRhKTtcblx0XHRzYXZlTG9jYWxseSgpXG5cdH1cbn0pO1xuXG5pZihpc0JhY2tncm91bmQpIHtcblx0d2luZG93LmxvYWRTZXR0aW5ncyA9IGZ1bmN0aW9uKGRTZXQsIGxvYWRlZCkge1xuXHRcdGxvYWRlZCA9IGxvYWRlZCB8fCBmdW5jdGlvbigpIHt9O1xuXHRcdFN0b3JhZ2UuZ2V0QXBwU2V0dGluZ3MoZnVuY3Rpb24ob1NldCkge1xuXHRcdFx0Y2hyb21lLnN0b3JhZ2Uuc3luYy5nZXQoW1wic2V0dGluZ3NcIl0sIGZ1bmN0aW9uKG5TZXQpIHtcblx0XHRcdFx0blNldCA9IG5TZXQuc2V0dGluZ3MgfHwge307XG5cdFx0XHRcdG9TZXQgPSBvU2V0IHx8IHt9O1xuXHRcdFx0XHRkU2V0ID0gZFNldCB8fCB7fTtcblxuXHRcdFx0XHR2YXIga2V5TGlzdCA9IHt9XG5cblx0XHRcdFx0Zm9yKHZhciBrIGluIGRTZXQpIGtleUxpc3Rba10gPSAxO1xuXHRcdFx0XHRmb3IodmFyIGsgaW4gb1NldCkga2V5TGlzdFtrXSA9IDE7XG5cdFx0XHRcdGZvcih2YXIgayBpbiBuU2V0KSBrZXlMaXN0W2tdID0gMTtcblxuXHRcdFx0XHRrZXlMaXN0ID0gT2JqZWN0LmtleXMoa2V5TGlzdCk7XG5cblx0XHRcdFx0Zm9yKHZhciBpID0gMDsgaSA8IGtleUxpc3QubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0XHR2YXIgayA9IGtleUxpc3RbaV07XG5cdFx0XHRcdFx0aWYoayBpbiBkU2V0KSBzZXR0aW5nc1trXSA9IGRTZXRba107XG5cdFx0XHRcdFx0aWYoayBpbiBvU2V0KSBzZXR0aW5nc1trXSA9IG9TZXRba107XG5cdFx0XHRcdFx0aWYoayBpbiBuU2V0KSBzZXR0aW5nc1trXSA9IG5TZXRba107XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRsb2FkZWQoKTtcblx0XHRcdH0pO1xuXHRcdH0pO1xuXHR9XG5cblx0d2luZG93LmFkZEhhbmRsZXIoXCJnZXRfc2V0dGluZ3NcIiwgZnVuY3Rpb24oZGF0YSwgc2VuZGVyLCBzZW5kUmVzcG9uc2UpIHtcblx0XHRzZW5kUmVzcG9uc2Uoc2V0dGluZ3MpO1xuXHR9KTtcbn0gZWxzZSB7XG5cdHdpbmRvdy5sb2FkU2V0dGluZ3MgPSBmdW5jdGlvbihkU2V0LCBsb2FkZWQpIHtcblx0XHRpZih0eXBlb2YgZFNldCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBsb2FkZWQgPT09IFwidW5kZWZpbmVkXCIpIGxvYWRlZCA9IGRTZXQ7XG5cdFx0bG9hZGVkID0gbG9hZGVkIHx8IGZ1bmN0aW9uKCl7fTtcblxuXHRcdHdpbmRvdy5zZW5kTWVzc2FnZShcImdldF9zZXR0aW5nc1wiLCB1bmRlZmluZWQsIGZ1bmN0aW9uKHMpIHtcblx0XHRcdHNldHRpbmdzID0gcztcblx0XHRcdGxvYWRlZCgpO1xuXHRcdH0pO1xuXHR9XG59XG5cbn0pKCk7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHNyYy9qcy91dGlscy9zZXR0aW5nc1N5c3RlbS5qcyJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQSIsInNvdXJjZVJvb3QiOiIifQ==')},336:function(module,exports,__webpack_require__){eval('var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };\n\n__webpack_require__(41);\n\n__webpack_require__(145);\n\n__webpack_require__(146);\n\n__webpack_require__(22);\n\n__webpack_require__(43);\n\n__webpack_require__(19);\n\n__webpack_require__(23);\n\n__webpack_require__(21);\n\n__webpack_require__(18);\n\n__webpack_require__(20);\n\n__webpack_require__(130);\n\n__webpack_require__(44);\n\nPageListener = function PageListener() {\n\t// attach relevant event handlers\n\twindow.addSettingsHandler("paragraphPlay", function (isParagraphPlayEnabled) {\n\t\tthis.paragraphPlayEnabled = isParagraphPlayEnabled;\n\t\tif (!this.paragraphPlayEnabled) this.hideOverlay();\n\n\t\tif (isParagraphPlayEnabled) this.addPlayButtons();else this.removePlayButtons();\n\t}.bind(this));\n\n\twindow.addHandler("audio-started", function () {\n\t\tif (typeof this.playingBoxId === "undefined") return;\n\t\tvar img = document.querySelector("#" + this.playingBoxId + " > img");\n\t\tresetElmSpin(img);\n\t\tthis.playing = true;\n\t\timg.src = chrome.extension.getURL(\'img/icon-pause_32.png\');\n\t}.bind(this));\n\n\twindow.addHandler("load-progress", function () {\n\t\tif (typeof this.playingBoxId === "undefined") return;\n\t\tvar img = document.querySelector("#" + this.playingBoxId + " > img");\n\t\tresetElmSpin(img);\n\t\timg.src = chrome.extension.getURL(\'img/icon-pause_32.png\');\n\t\tspinElm(img);\n\t}.bind(this));\n\n\twindow.addHandler("audio-paused", function () {\n\t\tif (typeof this.playingBoxId === "undefined") return;\n\t\tvar img = document.querySelector("#" + this.playingBoxId + " > img");\n\t\tresetElmSpin(img);\n\t\tthis.playing = false;\n\t\timg.src = chrome.extension.getURL(\'img/icon-play_32.png\');\n\t}.bind(this));\n\n\twindow.addHandler("audio-stopped", function () {\n\t\tif (typeof this.playingBoxId === "undefined") return;\n\t\tvar img = document.querySelector("#" + this.playingBoxId + " > img");\n\t\tresetElmSpin(img);\n\t\tthis.playing = false;\n\t\timg.src = chrome.extension.getURL(\'img/icon-play_32.png\');\n\t}.bind(this));\n\n\t// add selection event listener\n\tdocument.addEventListener(\'mouseup\', this.sendSelectionUpdate.bind(this));\n\n\t// add hover listener for paragraphs\n\t// var paragraphs = document.getElementsByTagName(\'p\');\n\t// for (var i = 0; i < paragraphs.length; i++) {\n\t// \tparagraphs[i].addEventListener(\'mouseover\', function(e) {\n\t// \t\tthis.showOverlay(e.toElement);\n\t// \t}.bind(this));\n\t// \tparagraphs[i].addEventListener(\'mouseleave\', function(e) {\n\t// \t\tthis.hideOverlay();\n\t// \t}.bind(this));\n\t// }\n\n\t// var articles = document.getElementsByTagName(\'article\');\n\t// for (var i = 0; i < articles.length; i++) {\n\t// \tarticles[i].addEventListener(\'mouseover\', function(e) {\n\t// \t\tthis.showOverlay(e.toElement, true);\n\t// \t}.bind(this));\n\t// \tarticles[i].addEventListener(\'mouseleave\', function(e) {\n\t// \t\tthis.hideOverlay();\n\t// \t}.bind(this));\n\t// }\n\n\tthis.reportLanguage();\n\tthis.initOverlay();\n};\n\nPageListener.prototype.initOverlay = function () {\n\t// create overlay root element\n\tthis.eOverlayWrapper = document.createElement(\'div\');\n\tthis.eOverlayWrapper.style.position = \'relative\';\n\tthis.eOverlayWrapper.addEventListener(\'mouseleave\', this.hideOverlay.bind(this));\n\n\tthis.eOverlayRoot = document.createElement(\'span\');\n\tthis.eOverlayRoot.style.verticalAlign = \'middle\';\n\tthis.eOverlayRoot.style.display = \'inline-block\';\n\t// this.eOverlayRoot.style.height = \'30px\';\n\t// this.eOverlayRoot.style.width = \'auto\';\n\t// this.eOverlayRoot.style.minHeight = \'30px\';\n\t// this.eOverlayRoot.style.minWidth = \'auto\';\n\t// this.eOverlayRoot.style.maxHeight = \'30px\';\n\t// this.eOverlayRoot.style.maxWidth = \'auto\';\n\tthis.eOverlayRoot.style.boxShadow = \'0 0 0 1px #155696\';\n\t// this.eOverlayRoot.style.maxWidth = \'auto\';\n\tthis.eOverlayRoot.style.borderRadius = \'3px\';\n\tthis.eOverlayRoot.style.overflow = \'auto\';\n\t// this.eOverlayRoot.style.position = \'absolute\';\n\t// this.eOverlayRoot.style.top = \'-30px\';\n\t// this.eOverlayRoot.style.left = \'0\';\n\tthis.eOverlayWrapper.appendChild(this.eOverlayRoot);\n\n\t// create play button\n\tthis.eOverlayPlayButton = document.createElement(\'button\');\n\tthis.eOverlayPlayButton.style.backgroundColor = \'#155696\';\n\tthis.eOverlayPlayButton.addEventListener(\'click\', this.onPlayOverlayClick.bind(this));\n\tthis.eOverlayPlayButtonIcon = document.createElement(\'img\');\n\tthis.eOverlayPlayButtonIcon.src = chrome.extension.getURL(\'img/icons/icon-speaker.png\');\n\tthis.eOverlayPlayButton.appendChild(this.eOverlayPlayButtonIcon);\n\tthis.eOverlayPlayButtonText = document.createElement(\'span\');\n\tthis.eOverlayPlayButtonText.innerHTML = \'Listen\';\n\tthis.eOverlayPlayButton.appendChild(this.eOverlayPlayButtonText);\n\tthis.setOverlayStyles(this.eOverlayPlayButton, this.eOverlayPlayButtonIcon, this.eOverlayPlayButtonText);\n\tthis.eOverlayRoot.appendChild(this.eOverlayPlayButton);\n\n\t// create play button\n\tthis.eOverlayCloseButton = document.createElement(\'button\');\n\tthis.eOverlayCloseButton.style.backgroundColor = \'#ff8f00\';\n\tthis.eOverlayCloseButton.addEventListener(\'click\', this.onCloseOverlayClick.bind(this));\n\tthis.eOverlayCloseButtonIcon = document.createElement(\'img\');\n\tthis.eOverlayCloseButtonIcon.src = chrome.extension.getURL(\'img/icons/icon-close_16.png\');\n\tthis.eOverlayCloseButton.appendChild(this.eOverlayCloseButtonIcon);\n\tthis.setOverlayStyles(this.eOverlayCloseButton, this.eOverlayCloseButtonIcon);\n\tthis.eOverlayRoot.appendChild(this.eOverlayCloseButton);\n\n\t// create on closed message\n\tthis.eOverlayMessageRoot = document.createElement(\'div\');\n\tthis.eOverlayMessageRoot.style.backgroundColor = \'#ff8f00\';\n\tthis.eOverlayMessageRoot.style.display = \'none\';\n\tthis.eOverlayMessageRoot.style.color = \'white\';\n\tthis.eOverlayMessageRoot.style.textAlign = \'center\';\n\tthis.eOverlayMessageRoot.style.position = \'fixed\';\n\tthis.eOverlayMessageRoot.style.top = \'0\';\n\tthis.eOverlayMessageRoot.style.left = \'0\';\n\tthis.eOverlayMessageRoot.style.width = \'100%\';\n\tthis.eOverlayMessageRoot.style.height = \'auto\';\n\tthis.eOverlayMessageRoot.style.minWidth = \'100%\';\n\tthis.eOverlayMessageRoot.style.minHeight = \'auto\';\n\tthis.eOverlayMessageRoot.style.maxWidth = \'100%\';\n\tthis.eOverlayMessageRoot.style.maxHeight = \'auto\';\n\tthis.eOverlayMessageRoot.style.font = \'12px "Helvetica Neue", Helvetica, Arial, Geneva, sans-serif\';\n\tthis.eOverlayMessageRoot.style.cursor = \'pointer\';\n\tthis.eOverlayMessageRoot.style.padding = \'5px\';\n\tthis.eOverlayMessageRoot.addEventListener(\'click\', function (e) {\n\t\tthis.eOverlayMessageRoot.style.display = \'none\';\n\t}.bind(this));\n\tthis.eOverlayMessageText = document.createElement(\'span\');\n\tthis.eOverlayMessageText.innerHTML = chrome.i18n.getMessage("paragraph_player");\n\tthis.eOverlayMessageText.style.color = \'white\';\n\tthis.eOverlayMessageText.style.font = \'12px "Helvetica Neue", Helvetica, Arial, Geneva, sans-serif\';\n\tthis.eOverlayMessageRoot.appendChild(this.eOverlayMessageText);\n\tthis.eOverlayMessageIcon = document.createElement(\'img\');\n\tthis.eOverlayMessageIcon.src = chrome.extension.getURL(\'img/icons/icon-close_16.png\');\n\tthis.eOverlayMessageIcon.style.width = \'20px\';\n\tthis.eOverlayMessageIcon.style.height = \'auto\';\n\tthis.eOverlayMessageIcon.style.minWidth = \'20px\';\n\tthis.eOverlayMessageIcon.style.minHeight = \'auto\';\n\tthis.eOverlayMessageIcon.style.maxWidth = \'20px\';\n\tthis.eOverlayMessageIcon.style.MaxHeight = \'auto\';\n\tthis.eOverlayMessageIcon.style["float"] = \'right\';\n\tthis.eOverlayMessageIcon.style.marginRight = \'10px\';\n\tthis.eOverlayMessageRoot.appendChild(this.eOverlayMessageIcon);\n\tdocument.body.appendChild(this.eOverlayMessageRoot);\n\n\t// attach handlers from app communicators to update the buttons\n\tthis.playing = false;\n};\n\nPageListener.prototype.setOverlayStyles = function (button, image, text) {\n\tif ((typeof button === "undefined" ? "undefined" : _typeof(button)) !== undefined) {\n\t\tbutton.style.cursor = \'pointer\';\n\t\tbutton.style.verticalAlign = \'top\';\n\t\tbutton.style.display = \'inline-block\';\n\t\tbutton.style.height = \'100%\';\n\t\tbutton.style.width = \'auto\';\n\t\tbutton.style.minHeight = \'100%\';\n\t\tbutton.style.minWidth = \'auto\';\n\t\tbutton.style.maxHeight = \'100%\';\n\t\tbutton.style.maxWidth = \'auto\';\n\t\tbutton.style.position = \'static\';\n\t\tbutton.style.margin = \'0\';\n\t\tbutton.style.border = \'0\';\n\t\tbutton.style.padding = \'5px\';\n\t}\n\n\tif (typeof image !== \'undefined\') {\n\t\timage.style.width = \'auto\';\n\t\timage.style.height = \'20px\';\n\t\timage.style.minWidth = \'auto\';\n\t\timage.style.minHeight = \'20px\';\n\t\timage.style.maxWidth = \'auto\';\n\t\timage.style.maxHeight = \'20px\';\n\t\timage.style.display = \'inline-block\';\n\t\timage.style.verticalAlign = \'middle\';\n\t}\n\n\tif (typeof text !== \'undefined\') {\n\t\ttext.style.marginLeft = \'5px\';\n\t\ttext.style.marginRight = \'5px\';\n\t\ttext.style.color = \'white\';\n\t\ttext.style.verticalAlign = \'middle\';\n\t\ttext.style.fontSize = \'1em\';\n\t}\n};\n\nPageListener.prototype.getPageSelection = function () {\n\tif (document.URL.startsWith(\'https://docs.google.com/document\')) {\n\t\treturn PageListener.onSelectionRequestedGDocs(true);\n\t} else {\n\t\treturn window.getSelection().toString();\n\t}\n};\n\nPageListener.prototype.sendSelectionUpdate = function () {\n\tvar selection = this.getPageSelection();\n\n\tif (this.selection === selection) return;\n\n\tthis.selection = selection;\n\twindow.sendMessage("set_selection", this.selection);\n};\n\nfunction splitGroups(elms) {\n\tvar groups = [];\n\tvar group = [];\n\n\tgroup.push(elms[0]);\n\n\tfor (var i = 1; i < elms.length; i++) {\n\t\tvar prevElm = elms[i - 1].parentElement.parentElement;\n\t\tvar nextElm = elms[i].parentElement.parentElement;\n\n\t\tif (prevElm == nextElm || prevElm.nextSibling == nextElm || prevElm.nextSibling == null && prevElm.previousSibling) {\n\t\t\tgroup.push(elms[i]);\n\t\t} else {\n\t\t\tgroups.push(group);\n\t\t\tgroup = [];\n\t\t\tgroup.push(elms[i]);\n\t\t}\n\t}\n\n\tgroups.push(group);\n\treturn groups;\n}\n\nfunction getPosition(el) {\n\tvar xPos = 0;\n\tvar yPos = 0;\n\n\twhile (el) {\n\t\tif (el.tagName == "BODY") {\n\t\t\t// deal with browser quirks with body/window/document and page scroll\n\t\t\tvar xScroll = el.scrollLeft || document.documentElement.scrollLeft;\n\t\t\tvar yScroll = el.scrollTop || document.documentElement.scrollTop;\n\n\t\t\txPos += el.offsetLeft - xScroll + el.clientLeft;\n\t\t\tyPos += el.offsetTop - yScroll + el.clientTop;\n\t\t} else {\n\t\t\t// for all other non-BODY elements\n\t\t\txPos += el.offsetLeft - el.scrollLeft + el.clientLeft;\n\t\t\tyPos += el.offsetTop - el.scrollTop + el.clientTop;\n\t\t}\n\n\t\tel = el.offsetParent;\n\t}\n\treturn {\n\t\tx: xPos,\n\t\ty: yPos\n\t};\n}\n\nfunction pickGroup(groups) {\n\n\tif (groups.length == 0) return [];\n\n\tvar bodyRect = document.body.getBoundingClientRect();\n\n\tfor (var i = 0; i < groups.length; i++) {\n\t\tvar yAvg = 0;\n\n\t\tvar group = groups[i];\n\t\tfor (var j = 0; j < group.length; j++) {\n\t\t\tvar pos = getPosition(group[j]);\n\n\t\t\tif (bodyRect.left <= pos.x && pos.x <= bodyRect.right && bodyRect.top <= pos.y && pos.y <= bodyRect.bottom) return group;\n\t\t}\n\t}\n\treturn [];\n}\n\nfunction getStringFromGroup(group) {\n\tvar s = "";\n\tfor (var i = 0; i < group.length; i++) {\n\t\tif (typeof group[i].parentElement !== \'undefined\') s += group[i].parentElement.innerText;\n\t}\n\treturn s;\n}\n\nPageListener.onSelectionRequestedGDocs = function (onlySelection) {\n\tonlySelection = onlySelection || false;\n\n\tvar elms = document.querySelectorAll(\'div.kix-selection-overlay\');\n\n\tif (elms.length > 0) elms = pickGroup(splitGroups(elms));\n\n\tvar s = getStringFromGroup(elms);\n\n\tif (elms.length == 0 && !onlySelection) {\n\t\ts = document.querySelector(\'div.kix-zoomdocumentplugin-outer\').innerText;\n\t}\n\n\treturn s;\n};\n\nwindow.addHandler("selection-request", function (data, sender, sendResponse) {\n\tvar sel = listener.onSelectionRequested();\n\tsendResponse(sel);\n});\n\nPageListener.prototype.onSelectionRequested = function () {\n\n\tif (document.URL.startsWith(\'https://docs.google.com/document\')) {\n\t\treturn PageListener.onSelectionRequestedGDocs();\n\t}\n\n\t//get the selection or the popup text\n\tvar text = this.selectionOverride ? this.selectionOverride : this.getPageSelection();\n\n\tif (text) {\n\t\treturn text;\n\t}\n\n\t// if that\'s not there then get the text from articles\n\tvar articles = document.getElementsByTagName(\'article\');\n\tfor (var i = 0; i < articles.length; i++) {\n\t\ttext += articles[i].innerText + " ";\n\t}\n\n\tif (text) {\n\t\treturn text;\n\t}\n\n\t// if the article isn\'t there then pull every paragraph and read that\n\tvar paragraphs = document.getElementsByTagName(\'p\');\n\tfor (var i = 0; i < paragraphs.length; i++) {\n\t\ttext += paragraphs[i].innerText + " ";\n\t}\n\n\tif (text) {\n\t\treturn text;\n\t}\n\n\t// if that doesn\'t work just take the whole page\n\ttext = document.all[0].innerText;\n\n\treturn text;\n};\n\nvar iconSize = 20;\nvar padding = 2;\n\nPageListener.prototype.isBetterSpace = function (elmOld, elmNew) {\n\tvar oldOffset = getOffset(elmOld);\n\tvar newOffset = getOffset(elmNew);\n\n\tif (oldOffset.left > 0 && oldOffset.top > 0) //if the old element is on the page\n\t\tif (newOffset.left <= 0 || newOffset.top <= 0) return false; // and the new one isn\'t, the old is better\n\n\tif (elmOld.tagName != elmNew.tagName) {\n\t\tif (elmOld.tagName == "ARTICLE") return false; // want article tags over  p tags\n\t\tif (elmNew.tagName == "ARTICLE") return true;\n\t\tif (elmOld.tagName == "P") return false;\n\t\tif (elmNew.tagName == "P") return true;\n\t}\n\n\tif (oldOffset.top > newOffset.top) return true;\n};\n\nPageListener.prototype.addPlayButtons = function () {\n\n\tvar buttonLayer = document.getElementById("selspeakButtonLayer") || document.createElement("div");\n\tbuttonLayer.id = "selspeakButtonLayer";\n\tbuttonLayer.innerHTML = "";\n\n\tbuttonLayer.style.position = "absolute";\n\tbuttonLayer.style.left = "0";\n\tbuttonLayer.style.top = "0";\n\tbuttonLayer.style.right = "0";\n\tbuttonLayer.style.height = pageHeight() + "px";\n\t// buttonLayer.style.bottom = "-100px";\n\tbuttonLayer.style.zIndex = "9999";\n\tbuttonLayer.style.pointerEvents = "none";\n\n\tvar ps = document.querySelectorAll("article, p");\n\tvar elm = null;\n\n\tfor (var i = 0; i < ps.length; i++) {\n\t\tvar e = ps[i];\n\n\t\tif (e.innerText.length < 50) continue;\n\n\t\tvar f = getOffset(e);\n\t\tif (f.left == 0 || f.top == 0) continue;\n\n\t\tif (elm == null || this.isBetterSpace(elm, e)) {\n\t\t\telm = e;\n\t\t}\n\t}\n\n\tif (elm == null) return;\n\n\tvar rect = getOffset(elm);\n\n\tvar realIconSize = iconSize + "px";\n\t// realIconSize = window.getComputedStyle(elm, null)["font-size"];\n\n\tvar button = document.createElement("div");\n\tbutton.style.position = "absolute";\n\tbutton.style.left = rect.left - (iconSize + padding) + "px";\n\tbutton.style.top = rect.top + "px";\n\t// button.style.backgroundColor = "rgb(21, 86, 150)";\n\tbutton.style.pointerEvents = "auto";\n\tbutton.style.display = "flex";\n\tbutton.style.width = iconSize + "px";\n\tbutton.style.height = iconSize + "px";\n\tbutton.style.justifyContent = "center";\n\tbutton.style.alignItems = "center";\n\tbutton.style.borderRadius = "5px";\n\tbutton.style.cursor = "pointer";\n\tbutton.classList.add("selspeakFloatButton");\n\tbutton.id = genId();\n\tthis.playingBoxId = button.id;\n\n\tvar image = document.createElement(\'img\');\n\timage.src = chrome.extension.getURL(\'img/icon-play_32.png\');\n\timage.style.width = \'auto\';\n\timage.style.height = realIconSize;\n\timage.style.minWidth = \'auto\';\n\timage.style.minHeight = realIconSize;\n\timage.style.maxWidth = \'auto\';\n\timage.style.maxHeight = realIconSize;\n\timage.style.display = \'inline-block\';\n\timage.style.verticalAlign = \'middle\';\n\n\tbutton.setAttribute("targetId", elm.id);\n\n\tbutton.appendChild(image);\n\tbuttonLayer.appendChild(button);\n\n\tbutton.addEventListener(\'click\', function (event) {\n\n\t\tdismissTut();\n\n\t\tif (this.playing) {\n\t\t\twindow.sendMessage("pause");\n\t\t\treturn;\n\t\t}\n\n\t\tvar target = event.target;\n\n\t\twhile (!target.classList.contains("selspeakFloatButton")) {\n\t\t\ttarget = target.parentElement;\n\t\t}this.playingBoxId = target.id;\n\n\t\twindow.sendMessage("play");\n\t}.bind(this));\n\n\tdocument.body.appendChild(buttonLayer);\n};\n\nPageListener.prototype.removePlayButtons = function () {\n\tvar bl = document.getElementById("selspeakButtonLayer");\n\tif (bl != null) bl.parentElement.removeChild(bl);\n};\n\nPageListener.prototype.addParagraphPlayButtons = function () {\n\n\tvar buttonLayer = document.getElementById("selspeakButtonLayer") || document.createElement("div");\n\tbuttonLayer.id = "selspeakButtonLayer";\n\tbuttonLayer.innerHTML = "";\n\n\tbuttonLayer.style.position = "absolute";\n\tbuttonLayer.style.left = "0";\n\tbuttonLayer.style.top = "0";\n\tbuttonLayer.style.right = "0";\n\tbuttonLayer.style.bottom = "-100px";\n\tbuttonLayer.style.zIndex = "9999";\n\tbuttonLayer.style.pointerEvents = "none";\n\n\tvar ps = document.querySelectorAll("article, p");\n\n\tfor (var i = 0; i < ps.length; i++) {\n\t\tvar elm = ps[i];\n\n\t\tif (elm.innerText.length < 50) continue;\n\n\t\tif (elm.id == "") elm.id = genId();\n\n\t\tvar rect = getOffset(elm);\n\n\t\tvar button = document.createElement("div");\n\t\tbutton.style.position = "absolute";\n\t\tbutton.style.left = rect.left - (iconSize + padding) + "px";\n\t\tbutton.style.top = rect.top + "px";\n\t\t// button.style.backgroundColor = "rgb(21, 86, 150)";\n\t\tbutton.style.pointerEvents = "auto";\n\t\tbutton.style.display = "flex";\n\t\tbutton.style.width = iconSize + "px";\n\t\tbutton.style.height = iconSize + "px";\n\t\tbutton.style.justifyContent = "center";\n\t\tbutton.style.alignItems = "center";\n\t\tbutton.style.borderRadius = "5px";\n\t\tbutton.style.cursor = "pointer";\n\t\tbutton.classList.add("selspeakFloatButton");\n\n\t\tvar image = document.createElement(\'img\');\n\t\timage.src = chrome.extension.getURL(\'img/icon-play_32.png\');\n\t\timage.style.width = \'auto\';\n\t\timage.style.height = iconSize + \'px\';\n\t\timage.style.minWidth = \'auto\';\n\t\timage.style.minHeight = iconSize + \'px\';\n\t\timage.style.maxWidth = \'auto\';\n\t\timage.style.maxHeight = iconSize + \'px\';\n\t\timage.style.display = \'inline-block\';\n\t\timage.style.verticalAlign = \'middle\';\n\n\t\tbutton.setAttribute("targetId", elm.id);\n\n\t\tbutton.appendChild(image);\n\t\tbuttonLayer.appendChild(button);\n\n\t\tbutton.addEventListener(\'click\', function (event) {\n\t\t\tvar target = event.target;\n\n\t\t\twhile (!target.classList.contains("selspeakFloatButton")) {\n\t\t\t\ttarget = target.parentElement;\n\t\t\t}this.playingBoxId = target.id;\n\t\t\tvar targetId = target.getAttribute(\'targetId\');\n\t\t\tthis.eCurrentParagraph = document.getElementById(targetId);\n\n\t\t\tthis.selectionOverride = this.eCurrentParagraph.innerText;\n\t\t\twindow.sendMessage("play");\n\t\t}.bind(this));\n\t}\n\n\tdocument.body.appendChild(buttonLayer);\n};\n\nPageListener.prototype.showOverlay = function (element, appendToStart) {\n\tif (!this.paragraphPlayEnabled || typeof element === \'undefined\' || element === null) return;\n\n\tif (typeof appendToStart !== \'boolean\') appendToStart = false;\n\n\tswitch (element.tagName.toLowerCase()) {\n\t\tcase \'p\':\n\t\t\tthis.eOverlayPlayButtonText.innerHTML = \'Listen to paragraph\';\n\t\t\tappendToStart = false;\n\t\t\tbreak;\n\t\tcase \'article\':\n\t\t\tthis.eOverlayPlayButtonText.innerHTML = \'Listen to article\';\n\t\t\tappendToStart = true;\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tif (element.parentNode !== \'undefined\') this.showOverlay(element.parentNode, appendToStart);\n\t\t\treturn;\n\t}\n\n\tif (element.innerText.length < 50) return;\n\n\tthis.eOverlayWrapper.style.display = \'block\';\n\tthis.eOverlayMessageRoot.style.display = \'none\';\n\n\tappendToStart = true;\n\n\t// this.eCurrentParagraph = element;\n\t// if (!appendToStart || typeof this.eCurrentParagraph.firstChild === \'undefined\') {\n\t// \tthis.eCurrentParagraph.appendChild(this.eOverlayWrapper);\n\t// } else {\n\t// \tthis.eCurrentParagraph.insertBefore(this.eOverlayWrapper, this.eCurrentParagraph.firstChild);\n\t// }\n\n\tvar offset = getOffset(element);\n\tthis.eCurrentParagraph = element;\n\n\tthis.eOverlayWrapper.style.position = \'absolute\';\n\tthis.eOverlayWrapper.style.top = offset.top - 30 + \'px\';\n\tthis.eOverlayWrapper.style.left = offset.left + \'px\';\n\n\tdocument.body.appendChild(this.eOverlayWrapper);\n};\n\nfunction getOffset(elem) {\n\tvar offsetLeft = 0;\n\tvar offsetTop = 0;\n\tdo {\n\t\tif (!isNaN(elem.offsetLeft)) {\n\t\t\toffsetLeft += elem.offsetLeft;\n\t\t}\n\t\tif (!isNaN(elem.offsetTop)) {\n\t\t\toffsetTop += elem.offsetTop;\n\t\t}\n\t} while (elem = elem.offsetParent);\n\treturn { left: offsetLeft, top: offsetTop };\n}\n\nPageListener.prototype.hideOverlay = function () {\n\n\tvar underPointer = document.querySelectorAll(\':hover\');\n\n\tvar n = 0;\n\n\twhile (n < underPointer.length) {\n\t\tvar elm = underPointer[n++];\n\t\tif (elm == this.eOverlayWrapper) {\n\t\t\tbreak;\n\t\t}\n\t}\n\n\tif (n >= underPointer.length) {\n\t\tif (this.eOverlayWrapper.parentNode == document.body) {\n\t\t\tdocument.body.removeChild(this.eOverlayWrapper);\n\t\t\tthis.eCurrentParagraph = undefined;\n\t\t}\n\t}\n\n\t// if (typeof this.eCurrentParagraph !== \'undefined\') {\n\t// \tthis.eCurrentParagraph.removeChild(this.eOverlayWrapper);\n\t// \tdelete this.eCurrentParagraph;\n\t// \tdelete this.selectionOverride;\n\t// }\n};\n\nPageListener.prototype.onPlayOverlayClick = function () {\n\tif (typeof this.eCurrentParagraph === \'undefined\') return;\n\n\tif (this.playing) {\n\t\twindow.sendMessage("pause");\n\t} else {\n\t\tthis.selectionOverride = this.eCurrentParagraph.innerText;\n\t\twindow.sendMessage("play");\n\t}\n};\n\nPageListener.prototype.onCloseOverlayClick = function () {\n\tthis.paragraphPlayEnabled = false;\n\twindow.setSetting("paragraphPlay", false);\n\twindow.sendMessage("pause");\n\tthis.eOverlayWrapper.style.display = \'none\';\n\tthis.eOverlayMessageRoot.style.display = \'block\';\n};\n\npullAttr = function pullAttr(tag, attr) {\n\tattrs = tag.attributes;\n\n\tfor (i = 0; i < attrs.length; i++) {\n\t\tif (attrs[i].name == attr) return attrs[i].value;\n\t}\n};\n\ngetLang = function getLang() {\n\tvar htmlTag = document.querySelector(\'html[lang]\');\n\tif (htmlTag) {\n\t\treturn pullAttr(htmlTag, \'lang\');\n\t}\n\n\thtmlTag = document.querySelector(\'html[xml\\\\:lang]\');\n\tif (htmlTag) {\n\t\treturn pullAttr(htmlTag, \'xml:lang\');\n\t}\n\n\thtmlTag = document.querySelector(\'meta[http-equiv="Content-Language"]\');\n\tif (htmlTag) {\n\t\treturn pullAttr(htmlTag, \'content\');\n\t}\n\n\treturn "";\n};\n\nvar cHtml = "";\nreadFile("resources/countdown.html", function (data) {\n\tcHtml = data;\n});\n\nvar countSeconds = 0;\nfunction onCountdown() {\n\tif (document.getElementById(\'sesCountBox\') != null) return;\n\n\twindow.sendMessage("appView", { "tag": "free popup" });\n\tcountSeconds = 6; // one more than needed,\n\n\tvar showBox = function showBox(group) {\n\n\t\tvar free_version = chrome.i18n.getMessage(\'free_version\');\n\t\tvar get_free_trial = chrome.i18n.getMessage(\'get_free_trial\');\n\t\tvar unlimited_words = chrome.i18n.getMessage(\'unlimited_words\');\n\t\tvar free_trial = chrome.i18n.getMessage(\'free_trial\');\n\n\t\tif (group == 1) {\n\t\t\tget_free_trial = "Start your <strong>free trial day</strong> (then $2.99/mo billed annually)";\n\t\t\tfree_trial = "Start <strong>Free Trial Day</strong>";\n\t\t}\n\n\t\tcHtml = \'<div id="sesCountBox" style="position:fixed;width:100%;height:100%;background:rgba(0,0,0,0.75);left:0px;top:0px;z-index:2147483647;">\';\n\t\tcHtml += \'<div style="border-radius:10px;position:fixed;top:25%;left:calc(50% - 350px);background:white;color:#9EA2B6;text-align:center;width:700px;padding-bottom:10px;font-size:17px;padding-top:15px;color:black;font-family: Open Sans;">\';\n\t\tcHtml += \'<div style="font-family: Montserrat;font-size: 30px;font-weight: 400;text-transform: uppercase;color: #d63d34;padding-top: 10px;">\';\n\t\tcHtml += free_version;\n\t\tcHtml += \'</div>\';\n\t\tcHtml += \'<br>\';\n\t\tcHtml += \'<div style="padding-top:10px;font-family: Sans-Serif; color:#6d6d6d;font-weight: 300;">\' + get_free_trial + \'</div>\';\n\t\tcHtml += \'<div style="padding-top:10px;font-family: Sans-Serif; color:#6d6d6d;font-weight: 300;">\' + unlimited_words + \'</div>\';\n\t\tcHtml += \'<br>\';\n\t\tcHtml += \'<div id="sesUpgradeButton" style="font-family:Montserrat; font-weight: 400;text-align: center;font-size: 20px;text-transform: uppercase;color: white;cursor: pointer;height: 35px;padding-top: 11px;background-color: #2a8cdd;border-radius: 7px;transition: background 0.15s linear;padding-left: 24px;padding-right: 24px;box-shadow: 0px 3px 0px #0070bc;width:300px;margin:auto;"><div>\' + free_trial + \'</div></div>\';\n\t\tcHtml += \'<div id="sesContinue" ><div id="sesCountNumber" style="top: calc(50% - 0.5em);position: relative;font-size: 15px;text-align: center;font-family: Open-Sans;color: #afafaf;text-decoration: underline;padding-top: 20px;padding-bottom: 20px; cursor: pointer;">\' + countSeconds + \'</div></div>\';\n\t\tcHtml += \'</div>\';\n\t\tcHtml += \'</div>\';\n\n\t\tvar dummy = document.createElement(\'div\');\n\n\t\tdummy.innerHTML = cHtml;\n\t\tvar boxElm = dummy.removeChild(dummy.childNodes[0]);\n\n\t\tdocument.body.appendChild(boxElm);\n\n\t\tdocument.getElementById(\'sesUpgradeButton\').addEventListener(\'click\', function () {\n\t\t\twindow.sendMessage("appView", { "tag": "popup upgrade click" });\n\t\t\twindow.sendMessage("track", { "tag": "payment", "msg": "open from popup countdown" });\n\t\t\tstartPaypal("Year");\n\t\t});\n\n\t\tdecrementCount();\n\t};\n\n\tif (!chrome.i18n.getMessage("@@ui_locale").startsWith("en")) {\n\t\tshowBox(0);\n\t} else {\n\t\twindow.addTest("oneDayTrial", 2, showBox);\n\t}\n}\n\nfunction pageHeight() {\n\treturn Math.max(document.body.scrollHeight, document.body.offsetHeight, document.documentElement.clientHeight, document.documentElement.scrollHeight, document.documentElement.offsetHeight);\n}\n\nfunction decrementCount() {\n\tcountSeconds--;\n\tif (countSeconds <= 0) {\n\t\tenableContinue();\n\t\treturn;\n\t}\n\n\tdocument.getElementById(\'sesCountNumber\').innerHTML = "" + countSeconds;\n\tsetTimeout(decrementCount, 1000);\n}\n\nfunction enableContinue() {\n\tdocument.getElementById(\'sesCountNumber\').innerHTML = chrome.i18n.getMessage(\'skip\');\n\tvar cont = document.getElementById(\'sesContinue\');\n\t//cont.style.background = "#639cd7";\n\tcont.addEventListener(\'click\', removeAndPlay);\n}\n\nfunction removeAndPlay() {\n\twindow.sendMessage("appView", { "tag": "popup skip click" });\n\tdocument.body.removeChild(document.getElementById(\'sesCountBox\'));\n\twindow.sendMessage("real_play");\n}\n\nwindow.addHandler("start-countdown", onCountdown);\n\nPageListener.prototype.reportLanguage = function () {\n\twindow.sendMessage("pageLang", { "lang": getLang() });\n};\n\nvar listener = new PageListener();\nwindow.loadSettings();\n\nvar meta = document.getElementById(\'snsPaypalServerJson\');\nif (meta) {\n\tvar obj = JSON.parse(meta.getAttribute(\'content\'));\n\tif (obj) applyMeta(obj);\n}\n\nvar removeTimeoutId;\nfunction placePlayButton(selection, x, y) {\n\n\tclearTimeout(removeTimeoutId);\n\tvar playBox = document.querySelectorAll(\'#sesPlayBox\');\n\tfor (var i = 0; i < playBox.length; i++) {\n\t\tplayBox[i].remove();\n\t}\n\n\tvar cHtml = \'<div id="sesPlayBox" style="position:absolute;left:\' + x + \'px;top:\' + y + \'px;z-index:2147483647;">\';\n\tcHtml += \'<img id="sesPlaySelButton" style="width:30px;height:30px;cursor:pointer;" src="\' + chrome.extension.getURL("img/icons/icon-play_128.png") + \'">\';\n\tcHtml += \'</div>\';\n\n\tvar dummy = document.createElement(\'div\');\n\n\tdummy.innerHTML = cHtml;\n\tvar boxElm = dummy.removeChild(dummy.childNodes[0]);\n\n\tdocument.body.appendChild(boxElm);\n\n\tdocument.getElementById(\'sesPlaySelButton\').addEventListener(\'click\', function () {\n\t\twindow.sendMessage("play_given", {\n\t\t\t"selection": selection,\n\t\t\t"contentLang": getLang()\n\t\t});\n\t});\n\n\tdocument.getElementById(\'sesPlaySelButton\').addEventListener(\'mouseenter\', function () {\n\t\tclearTimeout(removeTimeoutId);\n\t});\n\n\tdocument.getElementById(\'sesPlaySelButton\').addEventListener(\'mouseleave\', function () {\n\t\tremoveTimeoutId = setTimeout(removePlayButton, 3000);\n\t});\n\n\tremoveTimeoutId = setTimeout(removePlayButton, 3000);\n}\n\nfunction fadeOut(el) {\n\tif (typeof el === \'undefined\') return;\n\tel.style.opacity = 1;\n\n\t(function fade() {\n\t\tif ((el.style.opacity -= .1) < 0) {\n\t\t\tel.style.display = "none";\n\t\t} else {\n\t\t\trequestAnimationFrame(fade);\n\t\t}\n\t})();\n}\n\nfunction removePlayButton() {\n\n\tvar playBox = document.querySelectorAll(\'#sesPlayBox\');\n\n\tvar elm = playBox[0];\n\tfadeOut(elm);\n\tsetTimeout(function () {\n\t\tif (elm) elm.remove();\n\t\tlastSelection = \'\';\n\t}, 1000);\n\n\tfor (var i = 1; i < playBox.length; i++) {\n\t\tplayBox[i].remove();\n\t}\n}\n\nfunction genId() {\n\tvar n = Math.random();\n\n\tn = n * 8000999999 + 1000000000;\n\tn = Math.floor(n);\n\n\treturn "selspeakID" + n;\n}\n\nfunction spinElm(elm) {\n\telm.setAttribute("spinning", "true");\n\tvar deg = 0;\n\tvar spinCode = function spinCode() {\n\t\tif (elm.getAttribute("spinning") != "true") {\n\t\t\telm.style.transform = "";\n\t\t\treturn;\n\t\t}\n\n\t\tdeg = (deg + 5) % 360;\n\t\telm.style.transform = "rotate(" + deg + "deg)";\n\t\tsetTimeout(spinCode, 5);\n\t};\n\tspinCode();\n}\n\nfunction resetElmSpin(elm) {\n\telm.setAttribute("spinning", "false");\n}\n\nvar lastSelection;\ndocument.body.addEventListener(\'mouseup\', function (event) {\n\tvar enabled = window.getSetting("playButton");\n\tif (enabled) {\n\t\tvar selection = listener.getPageSelection();\n\t\tif (selection.length != 0 && selection != lastSelection) {\n\t\t\tplacePlayButton(selection, window.scrollX + event.clientX + 20, window.scrollY + event.clientY - 25);\n\t\t}\n\n\t\tlastSelection = selection;\n\t}\n\n\tif (window.getSetting("auto")) {\n\t\tvar selection = listener.getPageSelection();\n\t\tif (selection.length != 0 && selection != lastSelection) {\n\t\t\twindow.sendMessage("play_given", {\n\t\t\t\t"selection": selection,\n\t\t\t\t"contentLang": getLang()\n\t\t\t});\n\t\t}\n\n\t\tlastSelection = selection;\n\t}\n});\n\nfunction dismissTut() {\n\tvar buttonLayer = document.getElementById("selspeakButtonLayer");\n\tif (buttonLayer == null) return;\n\n\tbuttonLayer.style.background = "";\n\tbuttonLayer.style.pointerEvents = "none";\n\n\tvar welcomeContainer = document.getElementById("welcomeContainer");\n\tif (welcomeContainer != null) {\n\t\tvar p = welcomeContainer.parentElement;\n\t\tp.removeChild(welcomeContainer);\n\t}\n\n\tvar startContainer = document.getElementById("startContainer");\n\tif (startContainer != null) {\n\t\tvar p = startContainer.parentElement;\n\t\tp.removeChild(startContainer);\n\t}\n}\n\nfunction findHighestZIndex() {\n\tvar elems = document.querySelectorAll("*");\n\tvar highest = 0;\n\tfor (var i = 0; i < elems.length; i++) {\n\t\tvar zindex = document.defaultView.getComputedStyle(elems[i], null).getPropertyValue("z-index");\n\t\tif (zindex > highest && zindex != \'auto\') {\n\t\t\thighest = zindex;\n\t\t}\n\t}\n\treturn parseInt(highest);\n}\n\nif (location.hash == "#selspeakTut") {\n\tvar tutInitFunc = function tutInitFunc() {\n\t\tvar buttonLayer = document.getElementById("selspeakButtonLayer");\n\t\tvar button = document.querySelector("#selspeakButtonLayer > .selspeakFloatButton");\n\t\tif (buttonLayer == null || button == null) {\n\t\t\tsetTimeout(tutInitFunc, 10);return;\n\t\t}\n\n\t\tbuttonLayer.style.backgroundColor = "rgba(0,0,0,.5)";\n\t\tbuttonLayer.style.pointerEvents = "auto";\n\n\t\tvar welcomeContainer = document.createElement("div");\n\t\twelcomeContainer.id = "welcomeContainer";\n\t\twelcomeContainer.style.width = "calc(100%)";\n\t\twelcomeContainer.style.display = "flex";\n\t\twelcomeContainer.style.justifyContent = "center";\n\n\t\tvar welcomeMessage = document.createElement("h1");\n\t\twelcomeMessage.innerHTML = chrome.i18n.getMessage("welcome");\n\t\twelcomeMessage.style.position = "absolute";\n\t\twelcomeMessage.style.padding = "10px";\n\t\twelcomeMessage.style.borderRadius = "10px";\n\t\twelcomeMessage.style.borderStyle = "solid";\n\t\twelcomeMessage.style.borderWidth = "4px";\n\t\twelcomeMessage.style.borderColor = "#568ABF";\n\t\twelcomeMessage.style.background = "white";\n\t\twelcomeMessage.style.marginTop = "10px";\n\n\t\tvar startContainer = document.createElement("div");\n\t\tstartContainer.id = "startContainer";\n\n\t\tvar start = document.createElement("div");\n\t\tstart.innerHTML = "&larr; " + chrome.i18n.getMessage("start");\n\t\tstart.style.padding = "10px";\n\t\tstart.style.background = "white";\n\t\tstart.style.borderRadius = "10px";\n\t\tstart.style.display = "inline-block";\n\t\tstart.style.borderStyle = "solid";\n\t\tstart.style.borderWidth = "4px";\n\t\tstart.style.borderColor = "#568ABF";\n\n\t\tvar stl = window.getComputedStyle(button, null);\n\n\t\tvar btnHeight = parseInt(stl.height.replace("px", ""));\n\n\t\tstartContainer.style.position = "absolute";\n\t\tstartContainer.style.height = "100px";\n\t\tstartContainer.style.width = "100px";\n\t\tstartContainer.style.display = "flex";\n\t\tstartContainer.style.alignItems = "center";\n\n\t\tstartContainer.style.left = parseInt(stl.left.replace("px", "")) + parseInt(stl.width.replace("px", "")) + 5 + "px";\n\t\tstartContainer.style.top = "calc(" + stl.top + " - 50px + (" + btnHeight + "px)/2)";\n\n\t\twelcomeContainer.appendChild(welcomeMessage);\n\t\tbuttonLayer.appendChild(welcomeContainer);\n\t\tstartContainer.appendChild(start);\n\t\tbuttonLayer.appendChild(startContainer);\n\t};\n\ttutInitFunc();\n}\n\nvar hotkey = "";\nupdateHotkey = function updateHotkey() {\n\tStorage.getHotkeyIfEnabled(function (hk) {\n\t\thotkey = hk;\n\t});\n};\nupdateHotkey();\n\ndocument.addEventListener("keydown", function (e) {\n\tvar hotkey = window.getSetting("hotkeyEnabled") ? window.getSetting("hotkey") : "";\n\tif (hotkey.length == 0) return;\n\n\tctrl = /ctrl/.test(hotkey), shift = /shift/.test(hotkey), alt = /alt/.test(hotkey), code = hotkey.substr(hotkey.lastIndexOf(\'+\') + 2);\n\n\t// console.log(hotkey);\n\tif (e.keyCode == code && e.ctrlKey == ctrl && e.shiftKey == shift && e.altKey == alt) {\n\t\te.preventDefault();\n\t\twindow.sendMessage("play");\n\t}\n}, false);//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzM2LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL3NyYy9qcy9jb250ZW50LXNjcmlwdC5qcz8wZTlmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBcIi4vYXBwL3VmLmpzXCI7XG5pbXBvcnQgXCIuL3V0aWxzL3V0aWxzLmpzXCI7XG5pbXBvcnQgXCIuL3V0aWxzL3dpZGdldFN5c3RlbS5qc1wiO1xuaW1wb3J0IFwiLi91dGlscy9tZXNzYWdlU3lzdGVtLmpzXCI7XG5pbXBvcnQgXCIuL3V0aWxzL0FCVGVzdGVyLmpzXCI7XG5pbXBvcnQgXCIuL3NlbGVjdC1hbmQtc3BlYWsvc3RvcmFnZS5qc1wiO1xuaW1wb3J0IFwiLi91dGlscy9zZXR0aW5nc1N5c3RlbS5qc1wiO1xuaW1wb3J0IFwiLi91dGlscy9kYXRlLmpzXCI7XG5pbXBvcnQgXCIuL2dhL2J1eS5qc1wiO1xuaW1wb3J0IFwiLi91dGlscy9idXlVdGlscy5qc1wiO1xuaW1wb3J0IFwiLi9jYWNoZS5qc1wiO1xuaW1wb3J0IFwiLi91dGlscy9jb250ZW50U2NyaXB0U3lzdGVtLmpzXCI7XG5cblBhZ2VMaXN0ZW5lciA9IGZ1bmN0aW9uKCkge1xuXHQvLyBhdHRhY2ggcmVsZXZhbnQgZXZlbnQgaGFuZGxlcnNcblx0d2luZG93LmFkZFNldHRpbmdzSGFuZGxlcihcInBhcmFncmFwaFBsYXlcIiwgZnVuY3Rpb24oaXNQYXJhZ3JhcGhQbGF5RW5hYmxlZCkge1xuXHRcdHRoaXMucGFyYWdyYXBoUGxheUVuYWJsZWQgPSBpc1BhcmFncmFwaFBsYXlFbmFibGVkO1xuXHRcdGlmICghdGhpcy5wYXJhZ3JhcGhQbGF5RW5hYmxlZClcblx0XHRcdHRoaXMuaGlkZU92ZXJsYXkoKTtcblxuXHRcdGlmKGlzUGFyYWdyYXBoUGxheUVuYWJsZWQpXG5cdFx0XHR0aGlzLmFkZFBsYXlCdXR0b25zKCk7XG5cdFx0ZWxzZVxuXHRcdFx0dGhpcy5yZW1vdmVQbGF5QnV0dG9ucygpO1xuXHR9LmJpbmQodGhpcykpO1xuXHRcblx0d2luZG93LmFkZEhhbmRsZXIoXCJhdWRpby1zdGFydGVkXCIsIGZ1bmN0aW9uKCkge1xuXHRcdGlmKHR5cGVvZiB0aGlzLnBsYXlpbmdCb3hJZCA9PT0gXCJ1bmRlZmluZWRcIikgcmV0dXJuO1xuXHRcdHZhciBpbWcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI1wiICsgdGhpcy5wbGF5aW5nQm94SWQgKyBcIiA+IGltZ1wiKTtcblx0XHRyZXNldEVsbVNwaW4oaW1nKTtcblx0XHR0aGlzLnBsYXlpbmcgPSB0cnVlO1xuXHRcdGltZy5zcmMgPSBjaHJvbWUuZXh0ZW5zaW9uLmdldFVSTCgnaW1nL2ljb24tcGF1c2VfMzIucG5nJyk7XG5cdH0uYmluZCh0aGlzKSk7XG5cblx0d2luZG93LmFkZEhhbmRsZXIoXCJsb2FkLXByb2dyZXNzXCIsIGZ1bmN0aW9uKCkge1xuXHRcdGlmKHR5cGVvZiB0aGlzLnBsYXlpbmdCb3hJZCA9PT0gXCJ1bmRlZmluZWRcIikgcmV0dXJuO1xuXHRcdHZhciBpbWcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI1wiICsgdGhpcy5wbGF5aW5nQm94SWQgKyBcIiA+IGltZ1wiKTtcblx0XHRyZXNldEVsbVNwaW4oaW1nKTtcblx0XHRpbWcuc3JjID0gY2hyb21lLmV4dGVuc2lvbi5nZXRVUkwoJ2ltZy9pY29uLXBhdXNlXzMyLnBuZycpO1xuXHRcdHNwaW5FbG0oaW1nKTtcblx0fS5iaW5kKHRoaXMpKTtcblxuXHR3aW5kb3cuYWRkSGFuZGxlcihcImF1ZGlvLXBhdXNlZFwiLCBmdW5jdGlvbigpIHtcblx0XHRpZih0eXBlb2YgdGhpcy5wbGF5aW5nQm94SWQgPT09IFwidW5kZWZpbmVkXCIpIHJldHVybjtcblx0XHR2YXIgaW1nID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNcIiArIHRoaXMucGxheWluZ0JveElkICsgXCIgPiBpbWdcIik7XG5cdFx0cmVzZXRFbG1TcGluKGltZyk7XG5cdFx0dGhpcy5wbGF5aW5nID0gZmFsc2U7XG5cdFx0aW1nLnNyYyA9IGNocm9tZS5leHRlbnNpb24uZ2V0VVJMKCdpbWcvaWNvbi1wbGF5XzMyLnBuZycpO1xuXHR9LmJpbmQodGhpcykpO1xuXG5cdHdpbmRvdy5hZGRIYW5kbGVyKFwiYXVkaW8tc3RvcHBlZFwiLCBmdW5jdGlvbigpIHtcblx0XHRpZih0eXBlb2YgdGhpcy5wbGF5aW5nQm94SWQgPT09IFwidW5kZWZpbmVkXCIpIHJldHVybjtcblx0XHR2YXIgaW1nID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNcIiArIHRoaXMucGxheWluZ0JveElkICsgXCIgPiBpbWdcIik7XG5cdFx0cmVzZXRFbG1TcGluKGltZyk7XG5cdFx0dGhpcy5wbGF5aW5nID0gZmFsc2U7XG5cdFx0aW1nLnNyYyA9IGNocm9tZS5leHRlbnNpb24uZ2V0VVJMKCdpbWcvaWNvbi1wbGF5XzMyLnBuZycpO1xuXHR9LmJpbmQodGhpcykpO1xuXG5cblx0Ly8gYWRkIHNlbGVjdGlvbiBldmVudCBsaXN0ZW5lclxuXHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgdGhpcy5zZW5kU2VsZWN0aW9uVXBkYXRlLmJpbmQodGhpcykpO1xuXG5cdC8vIGFkZCBob3ZlciBsaXN0ZW5lciBmb3IgcGFyYWdyYXBoc1xuXHQvLyB2YXIgcGFyYWdyYXBocyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdwJyk7XG5cdC8vIGZvciAodmFyIGkgPSAwOyBpIDwgcGFyYWdyYXBocy5sZW5ndGg7IGkrKykge1xuXHQvLyBcdHBhcmFncmFwaHNbaV0uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdmVyJywgZnVuY3Rpb24oZSkge1xuXHQvLyBcdFx0dGhpcy5zaG93T3ZlcmxheShlLnRvRWxlbWVudCk7XG5cdC8vIFx0fS5iaW5kKHRoaXMpKTtcblx0Ly8gXHRwYXJhZ3JhcGhzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCBmdW5jdGlvbihlKSB7XG5cdC8vIFx0XHR0aGlzLmhpZGVPdmVybGF5KCk7XG5cdC8vIFx0fS5iaW5kKHRoaXMpKTtcblx0Ly8gfVxuXG5cdC8vIHZhciBhcnRpY2xlcyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdhcnRpY2xlJyk7XG5cdC8vIGZvciAodmFyIGkgPSAwOyBpIDwgYXJ0aWNsZXMubGVuZ3RoOyBpKyspIHtcblx0Ly8gXHRhcnRpY2xlc1tpXS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW92ZXInLCBmdW5jdGlvbihlKSB7XG5cdC8vIFx0XHR0aGlzLnNob3dPdmVybGF5KGUudG9FbGVtZW50LCB0cnVlKTtcblx0Ly8gXHR9LmJpbmQodGhpcykpO1xuXHQvLyBcdGFydGljbGVzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCBmdW5jdGlvbihlKSB7XG5cdC8vIFx0XHR0aGlzLmhpZGVPdmVybGF5KCk7XG5cdC8vIFx0fS5iaW5kKHRoaXMpKTtcblx0Ly8gfVxuXG5cdHRoaXMucmVwb3J0TGFuZ3VhZ2UoKTtcblx0dGhpcy5pbml0T3ZlcmxheSgpO1xufTtcblxuUGFnZUxpc3RlbmVyLnByb3RvdHlwZS5pbml0T3ZlcmxheSA9IGZ1bmN0aW9uKCkge1xuXHQvLyBjcmVhdGUgb3ZlcmxheSByb290IGVsZW1lbnRcblx0dGhpcy5lT3ZlcmxheVdyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0dGhpcy5lT3ZlcmxheVdyYXBwZXIuc3R5bGUucG9zaXRpb24gPSAncmVsYXRpdmUnO1xuXHR0aGlzLmVPdmVybGF5V3JhcHBlci5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgdGhpcy5oaWRlT3ZlcmxheS5iaW5kKHRoaXMpKTtcblxuXHR0aGlzLmVPdmVybGF5Um9vdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcblx0dGhpcy5lT3ZlcmxheVJvb3Quc3R5bGUudmVydGljYWxBbGlnbiA9ICdtaWRkbGUnO1xuXHR0aGlzLmVPdmVybGF5Um9vdC5zdHlsZS5kaXNwbGF5ID0gJ2lubGluZS1ibG9jayc7XG5cdC8vIHRoaXMuZU92ZXJsYXlSb290LnN0eWxlLmhlaWdodCA9ICczMHB4Jztcblx0Ly8gdGhpcy5lT3ZlcmxheVJvb3Quc3R5bGUud2lkdGggPSAnYXV0byc7XG5cdC8vIHRoaXMuZU92ZXJsYXlSb290LnN0eWxlLm1pbkhlaWdodCA9ICczMHB4Jztcblx0Ly8gdGhpcy5lT3ZlcmxheVJvb3Quc3R5bGUubWluV2lkdGggPSAnYXV0byc7XG5cdC8vIHRoaXMuZU92ZXJsYXlSb290LnN0eWxlLm1heEhlaWdodCA9ICczMHB4Jztcblx0Ly8gdGhpcy5lT3ZlcmxheVJvb3Quc3R5bGUubWF4V2lkdGggPSAnYXV0byc7XG5cdHRoaXMuZU92ZXJsYXlSb290LnN0eWxlLmJveFNoYWRvdyA9ICcwIDAgMCAxcHggIzE1NTY5Nidcblx0Ly8gdGhpcy5lT3ZlcmxheVJvb3Quc3R5bGUubWF4V2lkdGggPSAnYXV0byc7XG5cdHRoaXMuZU92ZXJsYXlSb290LnN0eWxlLmJvcmRlclJhZGl1cyA9ICczcHgnO1xuXHR0aGlzLmVPdmVybGF5Um9vdC5zdHlsZS5vdmVyZmxvdyA9ICdhdXRvJztcblx0Ly8gdGhpcy5lT3ZlcmxheVJvb3Quc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuXHQvLyB0aGlzLmVPdmVybGF5Um9vdC5zdHlsZS50b3AgPSAnLTMwcHgnO1xuXHQvLyB0aGlzLmVPdmVybGF5Um9vdC5zdHlsZS5sZWZ0ID0gJzAnO1xuXHR0aGlzLmVPdmVybGF5V3JhcHBlci5hcHBlbmRDaGlsZCh0aGlzLmVPdmVybGF5Um9vdCk7XG5cblx0Ly8gY3JlYXRlIHBsYXkgYnV0dG9uXG5cdHRoaXMuZU92ZXJsYXlQbGF5QnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG5cdHRoaXMuZU92ZXJsYXlQbGF5QnV0dG9uLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICcjMTU1Njk2Jztcblx0dGhpcy5lT3ZlcmxheVBsYXlCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLm9uUGxheU92ZXJsYXlDbGljay5iaW5kKHRoaXMpKTtcblx0dGhpcy5lT3ZlcmxheVBsYXlCdXR0b25JY29uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XG5cdHRoaXMuZU92ZXJsYXlQbGF5QnV0dG9uSWNvbi5zcmMgPSBjaHJvbWUuZXh0ZW5zaW9uLmdldFVSTCgnaW1nL2ljb25zL2ljb24tc3BlYWtlci5wbmcnKTtcblx0dGhpcy5lT3ZlcmxheVBsYXlCdXR0b24uYXBwZW5kQ2hpbGQodGhpcy5lT3ZlcmxheVBsYXlCdXR0b25JY29uKTtcblx0dGhpcy5lT3ZlcmxheVBsYXlCdXR0b25UZXh0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuXHR0aGlzLmVPdmVybGF5UGxheUJ1dHRvblRleHQuaW5uZXJIVE1MID0gJ0xpc3Rlbic7XG5cdHRoaXMuZU92ZXJsYXlQbGF5QnV0dG9uLmFwcGVuZENoaWxkKHRoaXMuZU92ZXJsYXlQbGF5QnV0dG9uVGV4dCk7XG5cdHRoaXMuc2V0T3ZlcmxheVN0eWxlcyh0aGlzLmVPdmVybGF5UGxheUJ1dHRvbiwgdGhpcy5lT3ZlcmxheVBsYXlCdXR0b25JY29uLCB0aGlzLmVPdmVybGF5UGxheUJ1dHRvblRleHQpO1xuXHR0aGlzLmVPdmVybGF5Um9vdC5hcHBlbmRDaGlsZCh0aGlzLmVPdmVybGF5UGxheUJ1dHRvbik7XG5cblx0Ly8gY3JlYXRlIHBsYXkgYnV0dG9uXG5cdHRoaXMuZU92ZXJsYXlDbG9zZUJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuXHR0aGlzLmVPdmVybGF5Q2xvc2VCdXR0b24uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJyNmZjhmMDAnO1xuXHR0aGlzLmVPdmVybGF5Q2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLm9uQ2xvc2VPdmVybGF5Q2xpY2suYmluZCh0aGlzKSk7XG5cdHRoaXMuZU92ZXJsYXlDbG9zZUJ1dHRvbkljb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcblx0dGhpcy5lT3ZlcmxheUNsb3NlQnV0dG9uSWNvbi5zcmMgPSBjaHJvbWUuZXh0ZW5zaW9uLmdldFVSTCgnaW1nL2ljb25zL2ljb24tY2xvc2VfMTYucG5nJyk7XG5cdHRoaXMuZU92ZXJsYXlDbG9zZUJ1dHRvbi5hcHBlbmRDaGlsZCh0aGlzLmVPdmVybGF5Q2xvc2VCdXR0b25JY29uKTtcblx0dGhpcy5zZXRPdmVybGF5U3R5bGVzKHRoaXMuZU92ZXJsYXlDbG9zZUJ1dHRvbiwgdGhpcy5lT3ZlcmxheUNsb3NlQnV0dG9uSWNvbik7XG5cdHRoaXMuZU92ZXJsYXlSb290LmFwcGVuZENoaWxkKHRoaXMuZU92ZXJsYXlDbG9zZUJ1dHRvbik7XG5cblx0Ly8gY3JlYXRlIG9uIGNsb3NlZCBtZXNzYWdlXG5cdHRoaXMuZU92ZXJsYXlNZXNzYWdlUm9vdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHR0aGlzLmVPdmVybGF5TWVzc2FnZVJvb3Quc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJyNmZjhmMDAnO1xuXHR0aGlzLmVPdmVybGF5TWVzc2FnZVJvb3Quc3R5bGUuZGlzcGxheSA9ICdub25lJztcblx0dGhpcy5lT3ZlcmxheU1lc3NhZ2VSb290LnN0eWxlLmNvbG9yID0gJ3doaXRlJztcblx0dGhpcy5lT3ZlcmxheU1lc3NhZ2VSb290LnN0eWxlLnRleHRBbGlnbiA9ICdjZW50ZXInXG5cdHRoaXMuZU92ZXJsYXlNZXNzYWdlUm9vdC5zdHlsZS5wb3NpdGlvbiA9ICdmaXhlZCc7XG5cdHRoaXMuZU92ZXJsYXlNZXNzYWdlUm9vdC5zdHlsZS50b3AgPSAnMCc7XG5cdHRoaXMuZU92ZXJsYXlNZXNzYWdlUm9vdC5zdHlsZS5sZWZ0ID0gJzAnO1xuXHR0aGlzLmVPdmVybGF5TWVzc2FnZVJvb3Quc3R5bGUud2lkdGggPSAnMTAwJSc7XG5cdHRoaXMuZU92ZXJsYXlNZXNzYWdlUm9vdC5zdHlsZS5oZWlnaHQgPSAnYXV0byc7XG5cdHRoaXMuZU92ZXJsYXlNZXNzYWdlUm9vdC5zdHlsZS5taW5XaWR0aCA9ICcxMDAlJztcblx0dGhpcy5lT3ZlcmxheU1lc3NhZ2VSb290LnN0eWxlLm1pbkhlaWdodCA9ICdhdXRvJztcblx0dGhpcy5lT3ZlcmxheU1lc3NhZ2VSb290LnN0eWxlLm1heFdpZHRoID0gJzEwMCUnO1xuXHR0aGlzLmVPdmVybGF5TWVzc2FnZVJvb3Quc3R5bGUubWF4SGVpZ2h0ID0gJ2F1dG8nO1xuXHR0aGlzLmVPdmVybGF5TWVzc2FnZVJvb3Quc3R5bGUuZm9udCA9ICcxMnB4IFwiSGVsdmV0aWNhIE5ldWVcIiwgSGVsdmV0aWNhLCBBcmlhbCwgR2VuZXZhLCBzYW5zLXNlcmlmJztcblx0dGhpcy5lT3ZlcmxheU1lc3NhZ2VSb290LnN0eWxlLmN1cnNvciA9ICdwb2ludGVyJztcblx0dGhpcy5lT3ZlcmxheU1lc3NhZ2VSb290LnN0eWxlLnBhZGRpbmcgPSAnNXB4Jztcblx0dGhpcy5lT3ZlcmxheU1lc3NhZ2VSb290LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xuXHRcdHRoaXMuZU92ZXJsYXlNZXNzYWdlUm9vdC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuXHR9LmJpbmQodGhpcykpO1xuXHR0aGlzLmVPdmVybGF5TWVzc2FnZVRleHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG5cdHRoaXMuZU92ZXJsYXlNZXNzYWdlVGV4dC5pbm5lckhUTUwgPSBjaHJvbWUuaTE4bi5nZXRNZXNzYWdlKFwicGFyYWdyYXBoX3BsYXllclwiKTtcblx0dGhpcy5lT3ZlcmxheU1lc3NhZ2VUZXh0LnN0eWxlLmNvbG9yID0gJ3doaXRlJztcblx0dGhpcy5lT3ZlcmxheU1lc3NhZ2VUZXh0LnN0eWxlLmZvbnQgPSAnMTJweCBcIkhlbHZldGljYSBOZXVlXCIsIEhlbHZldGljYSwgQXJpYWwsIEdlbmV2YSwgc2Fucy1zZXJpZic7XG5cdHRoaXMuZU92ZXJsYXlNZXNzYWdlUm9vdC5hcHBlbmRDaGlsZCh0aGlzLmVPdmVybGF5TWVzc2FnZVRleHQpO1xuXHR0aGlzLmVPdmVybGF5TWVzc2FnZUljb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcblx0dGhpcy5lT3ZlcmxheU1lc3NhZ2VJY29uLnNyYyA9IGNocm9tZS5leHRlbnNpb24uZ2V0VVJMKCdpbWcvaWNvbnMvaWNvbi1jbG9zZV8xNi5wbmcnKTtcblx0dGhpcy5lT3ZlcmxheU1lc3NhZ2VJY29uLnN0eWxlLndpZHRoID0gJzIwcHgnO1xuXHR0aGlzLmVPdmVybGF5TWVzc2FnZUljb24uc3R5bGUuaGVpZ2h0ID0gJ2F1dG8nO1xuXHR0aGlzLmVPdmVybGF5TWVzc2FnZUljb24uc3R5bGUubWluV2lkdGggPSAnMjBweCc7XG5cdHRoaXMuZU92ZXJsYXlNZXNzYWdlSWNvbi5zdHlsZS5taW5IZWlnaHQgPSAnYXV0byc7XG5cdHRoaXMuZU92ZXJsYXlNZXNzYWdlSWNvbi5zdHlsZS5tYXhXaWR0aCA9ICcyMHB4Jztcblx0dGhpcy5lT3ZlcmxheU1lc3NhZ2VJY29uLnN0eWxlLk1heEhlaWdodCA9ICdhdXRvJztcblx0dGhpcy5lT3ZlcmxheU1lc3NhZ2VJY29uLnN0eWxlW1wiZmxvYXRcIl0gPSAncmlnaHQnO1xuXHR0aGlzLmVPdmVybGF5TWVzc2FnZUljb24uc3R5bGUubWFyZ2luUmlnaHQgPSAnMTBweCc7XG5cdHRoaXMuZU92ZXJsYXlNZXNzYWdlUm9vdC5hcHBlbmRDaGlsZCh0aGlzLmVPdmVybGF5TWVzc2FnZUljb24pO1xuXHRkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRoaXMuZU92ZXJsYXlNZXNzYWdlUm9vdCk7XG5cblx0Ly8gYXR0YWNoIGhhbmRsZXJzIGZyb20gYXBwIGNvbW11bmljYXRvcnMgdG8gdXBkYXRlIHRoZSBidXR0b25zXG5cdHRoaXMucGxheWluZyA9IGZhbHNlO1xufVxuXG5QYWdlTGlzdGVuZXIucHJvdG90eXBlLnNldE92ZXJsYXlTdHlsZXMgPSBmdW5jdGlvbihidXR0b24sIGltYWdlLCB0ZXh0KSB7XG5cdGlmICh0eXBlb2YgYnV0dG9uICE9PSB1bmRlZmluZWQpIHtcblx0XHRidXR0b24uc3R5bGUuY3Vyc29yID0gJ3BvaW50ZXInO1xuXHRcdGJ1dHRvbi5zdHlsZS52ZXJ0aWNhbEFsaWduID0gJ3RvcCc7XG5cdFx0YnV0dG9uLnN0eWxlLmRpc3BsYXkgPSAnaW5saW5lLWJsb2NrJztcblx0XHRidXR0b24uc3R5bGUuaGVpZ2h0ID0gJzEwMCUnO1xuXHRcdGJ1dHRvbi5zdHlsZS53aWR0aCA9ICdhdXRvJztcblx0XHRidXR0b24uc3R5bGUubWluSGVpZ2h0ID0gJzEwMCUnO1xuXHRcdGJ1dHRvbi5zdHlsZS5taW5XaWR0aCA9ICdhdXRvJztcblx0XHRidXR0b24uc3R5bGUubWF4SGVpZ2h0ID0gJzEwMCUnO1xuXHRcdGJ1dHRvbi5zdHlsZS5tYXhXaWR0aCA9ICdhdXRvJztcblx0XHRidXR0b24uc3R5bGUucG9zaXRpb24gPSAnc3RhdGljJztcblx0XHRidXR0b24uc3R5bGUubWFyZ2luID0gJzAnO1xuXHRcdGJ1dHRvbi5zdHlsZS5ib3JkZXIgPSAnMCc7XG5cdFx0YnV0dG9uLnN0eWxlLnBhZGRpbmcgPSAnNXB4Jztcblx0fVxuXG5cdGlmICh0eXBlb2YgaW1hZ2UgIT09ICd1bmRlZmluZWQnKSB7XG5cdFx0aW1hZ2Uuc3R5bGUud2lkdGggPSAnYXV0byc7XG5cdFx0aW1hZ2Uuc3R5bGUuaGVpZ2h0ID0gJzIwcHgnO1xuXHRcdGltYWdlLnN0eWxlLm1pbldpZHRoID0gJ2F1dG8nO1xuXHRcdGltYWdlLnN0eWxlLm1pbkhlaWdodCA9ICcyMHB4Jztcblx0XHRpbWFnZS5zdHlsZS5tYXhXaWR0aCA9ICdhdXRvJztcblx0XHRpbWFnZS5zdHlsZS5tYXhIZWlnaHQgPSAnMjBweCc7XG5cdFx0aW1hZ2Uuc3R5bGUuZGlzcGxheSA9ICdpbmxpbmUtYmxvY2snO1xuXHRcdGltYWdlLnN0eWxlLnZlcnRpY2FsQWxpZ24gPSAnbWlkZGxlJztcblx0fVxuXG5cdGlmICh0eXBlb2YgdGV4dCAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0XHR0ZXh0LnN0eWxlLm1hcmdpbkxlZnQgPSAnNXB4Jztcblx0XHR0ZXh0LnN0eWxlLm1hcmdpblJpZ2h0ID0gJzVweCc7XG5cdFx0dGV4dC5zdHlsZS5jb2xvciA9ICd3aGl0ZSc7XG5cdFx0dGV4dC5zdHlsZS52ZXJ0aWNhbEFsaWduID0gJ21pZGRsZSc7XG5cdFx0dGV4dC5zdHlsZS5mb250U2l6ZSA9ICcxZW0nO1xuXHR9XG59XG5cblBhZ2VMaXN0ZW5lci5wcm90b3R5cGUuZ2V0UGFnZVNlbGVjdGlvbiA9IGZ1bmN0aW9uICgpIHtcblx0aWYoZG9jdW1lbnQuVVJMLnN0YXJ0c1dpdGgoJ2h0dHBzOi8vZG9jcy5nb29nbGUuY29tL2RvY3VtZW50JykpIHtcblx0XHRyZXR1cm4gUGFnZUxpc3RlbmVyLm9uU2VsZWN0aW9uUmVxdWVzdGVkR0RvY3ModHJ1ZSk7XG5cdH0gZWxzZSB7XG5cdFx0cmV0dXJuIHdpbmRvdy5nZXRTZWxlY3Rpb24oKS50b1N0cmluZygpO1xuXHR9XG59XG5cblBhZ2VMaXN0ZW5lci5wcm90b3R5cGUuc2VuZFNlbGVjdGlvblVwZGF0ZSA9IGZ1bmN0aW9uICgpIHtcblx0dmFyIHNlbGVjdGlvbiA9IHRoaXMuZ2V0UGFnZVNlbGVjdGlvbigpO1xuXG5cdGlmICh0aGlzLnNlbGVjdGlvbiA9PT0gc2VsZWN0aW9uKVxuXHRcdHJldHVybjtcblxuXHR0aGlzLnNlbGVjdGlvbiA9IHNlbGVjdGlvbjtcblx0d2luZG93LnNlbmRNZXNzYWdlKFwic2V0X3NlbGVjdGlvblwiLCB0aGlzLnNlbGVjdGlvbik7XG59O1xuXG5mdW5jdGlvbiBzcGxpdEdyb3VwcyhlbG1zKSB7XG5cdHZhciBncm91cHMgPSBbXTtcblx0dmFyIGdyb3VwID0gW107XG5cblx0Z3JvdXAucHVzaChlbG1zWzBdKTtcblxuXHRmb3IodmFyIGkgPSAxOyBpIDwgZWxtcy5sZW5ndGg7IGkrKykge1xuXHRcdHZhciBwcmV2RWxtID0gZWxtc1tpLTFdLnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudDtcblx0XHR2YXIgbmV4dEVsbSA9IGVsbXNbaV0ucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50O1xuXG5cdFx0aWYocHJldkVsbSA9PSBuZXh0RWxtIHx8XG5cdFx0XHRwcmV2RWxtLm5leHRTaWJsaW5nID09IG5leHRFbG0gfHxcblx0XHRcdChwcmV2RWxtLm5leHRTaWJsaW5nID09IG51bGwgJiYgcHJldkVsbS5wcmV2aW91c1NpYmxpbmcpKSB7XG5cdFx0XHRcdGdyb3VwLnB1c2goZWxtc1tpXSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGdyb3Vwcy5wdXNoKGdyb3VwKTtcblx0XHRcdGdyb3VwID0gW107XG5cdFx0XHRncm91cC5wdXNoKGVsbXNbaV0pO1xuXHRcdH1cblx0fVxuXG5cdGdyb3Vwcy5wdXNoKGdyb3VwKTtcblx0cmV0dXJuIGdyb3Vwcztcbn1cblxuZnVuY3Rpb24gZ2V0UG9zaXRpb24oZWwpIHtcblx0dmFyIHhQb3MgPSAwO1xuXHR2YXIgeVBvcyA9IDA7XG5cblx0d2hpbGUgKGVsKSB7XG5cdFx0aWYgKGVsLnRhZ05hbWUgPT0gXCJCT0RZXCIpIHtcblx0XHRcdC8vIGRlYWwgd2l0aCBicm93c2VyIHF1aXJrcyB3aXRoIGJvZHkvd2luZG93L2RvY3VtZW50IGFuZCBwYWdlIHNjcm9sbFxuXHRcdFx0dmFyIHhTY3JvbGwgPSBlbC5zY3JvbGxMZWZ0IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxMZWZ0O1xuXHRcdFx0dmFyIHlTY3JvbGwgPSBlbC5zY3JvbGxUb3AgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcDtcblxuXHRcdFx0eFBvcyArPSAoZWwub2Zmc2V0TGVmdCAtIHhTY3JvbGwgKyBlbC5jbGllbnRMZWZ0KTtcblx0XHRcdHlQb3MgKz0gKGVsLm9mZnNldFRvcCAtIHlTY3JvbGwgKyBlbC5jbGllbnRUb3ApO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQvLyBmb3IgYWxsIG90aGVyIG5vbi1CT0RZIGVsZW1lbnRzXG5cdFx0XHR4UG9zICs9IChlbC5vZmZzZXRMZWZ0IC0gZWwuc2Nyb2xsTGVmdCArIGVsLmNsaWVudExlZnQpO1xuXHRcdFx0eVBvcyArPSAoZWwub2Zmc2V0VG9wIC0gZWwuc2Nyb2xsVG9wICsgZWwuY2xpZW50VG9wKTtcblx0XHR9XG5cblx0XHRlbCA9IGVsLm9mZnNldFBhcmVudDtcblx0fVxuXHRyZXR1cm4ge1xuXHRcdHg6IHhQb3MsXG5cdFx0eTogeVBvc1xuXHR9O1xufVxuXG5mdW5jdGlvbiBwaWNrR3JvdXAoZ3JvdXBzKSB7XG5cblx0aWYoZ3JvdXBzLmxlbmd0aCA9PSAwKSByZXR1cm4gW107XG5cblx0dmFyIGJvZHlSZWN0ID0gZG9jdW1lbnQuYm9keS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblxuXHRmb3IodmFyIGkgPSAwOyBpIDwgZ3JvdXBzLmxlbmd0aDsgaSsrKSB7XG5cdFx0dmFyIHlBdmcgPSAwO1xuXG5cdFx0dmFyIGdyb3VwID0gZ3JvdXBzW2ldO1xuXHRcdGZvcih2YXIgaiA9IDA7IGogPCBncm91cC5sZW5ndGg7IGorKykge1xuXHRcdFx0dmFyIHBvcyA9IGdldFBvc2l0aW9uKGdyb3VwW2pdKTtcblxuXHRcdFx0aWYoYm9keVJlY3QubGVmdCA8PSBwb3MueCAmJlxuXHRcdFx0XHRwb3MueCA8PSBib2R5UmVjdC5yaWdodCAmJlxuXHRcdFx0XHRib2R5UmVjdC50b3AgPD0gcG9zLnkgJiZcblx0XHRcdFx0cG9zLnkgPD0gYm9keVJlY3QuYm90dG9tKVxuXHRcdFx0XHRcdHJldHVybiBncm91cDtcblx0XHR9XG5cdH1cblx0cmV0dXJuIFtdO1xufVxuXG5mdW5jdGlvbiBnZXRTdHJpbmdGcm9tR3JvdXAoZ3JvdXApIHtcblx0dmFyIHMgPSBcIlwiO1xuXHRmb3IodmFyIGkgPSAwOyBpIDwgZ3JvdXAubGVuZ3RoOyBpKyspIHtcblx0XHRpZih0eXBlb2YgZ3JvdXBbaV0ucGFyZW50RWxlbWVudCAhPT0gJ3VuZGVmaW5lZCcpXG5cdFx0XHRzICs9IGdyb3VwW2ldLnBhcmVudEVsZW1lbnQuaW5uZXJUZXh0O1xuXHR9XG5cdHJldHVybiBzO1xufVxuXG5QYWdlTGlzdGVuZXIub25TZWxlY3Rpb25SZXF1ZXN0ZWRHRG9jcyA9IGZ1bmN0aW9uKG9ubHlTZWxlY3Rpb24pIHtcblx0b25seVNlbGVjdGlvbiA9IChvbmx5U2VsZWN0aW9uIHx8IGZhbHNlKTtcblxuXHR2YXIgZWxtcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2Rpdi5raXgtc2VsZWN0aW9uLW92ZXJsYXknKTtcblxuXHRpZihlbG1zLmxlbmd0aCA+IDApXG5cdFx0ZWxtcyA9IHBpY2tHcm91cChzcGxpdEdyb3VwcyhlbG1zKSk7XG5cblx0dmFyIHMgPSBnZXRTdHJpbmdGcm9tR3JvdXAoZWxtcyk7XG5cblx0aWYoZWxtcy5sZW5ndGggPT0gMCAmJiAhb25seVNlbGVjdGlvbikge1xuXHRcdHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdkaXYua2l4LXpvb21kb2N1bWVudHBsdWdpbi1vdXRlcicpLmlubmVyVGV4dDtcblx0fVxuXG5cdHJldHVybiBzO1xufVxuXG53aW5kb3cuYWRkSGFuZGxlcihcInNlbGVjdGlvbi1yZXF1ZXN0XCIsIGZ1bmN0aW9uKGRhdGEsIHNlbmRlciwgc2VuZFJlc3BvbnNlKSB7XG5cdHZhciBzZWwgPSBsaXN0ZW5lci5vblNlbGVjdGlvblJlcXVlc3RlZCgpO1xuXHRzZW5kUmVzcG9uc2Uoc2VsKTtcbn0pO1xuXG5QYWdlTGlzdGVuZXIucHJvdG90eXBlLm9uU2VsZWN0aW9uUmVxdWVzdGVkID0gZnVuY3Rpb24oKSB7XG5cblx0aWYoZG9jdW1lbnQuVVJMLnN0YXJ0c1dpdGgoJ2h0dHBzOi8vZG9jcy5nb29nbGUuY29tL2RvY3VtZW50JykpIHtcblx0XHRyZXR1cm4gUGFnZUxpc3RlbmVyLm9uU2VsZWN0aW9uUmVxdWVzdGVkR0RvY3MoKTtcblx0fVxuXG5cdC8vZ2V0IHRoZSBzZWxlY3Rpb24gb3IgdGhlIHBvcHVwIHRleHRcblx0dmFyIHRleHQgPSB0aGlzLnNlbGVjdGlvbk92ZXJyaWRlID8gdGhpcy5zZWxlY3Rpb25PdmVycmlkZSA6IHRoaXMuZ2V0UGFnZVNlbGVjdGlvbigpO1xuXG5cdGlmKHRleHQpIHtcblx0XHRyZXR1cm4gdGV4dDtcblx0fVxuXG5cdC8vIGlmIHRoYXQncyBub3QgdGhlcmUgdGhlbiBnZXQgdGhlIHRleHQgZnJvbSBhcnRpY2xlc1xuXHR2YXIgYXJ0aWNsZXMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnYXJ0aWNsZScpO1xuXHRmb3IgKHZhciBpID0gMDsgaSA8IGFydGljbGVzLmxlbmd0aDsgaSsrKSB7XG5cdFx0dGV4dCArPSBhcnRpY2xlc1tpXS5pbm5lclRleHQgKyBcIiBcIjtcblx0fVxuXG5cdGlmKHRleHQpIHtcblx0XHRyZXR1cm4gdGV4dDtcblx0fVxuXG5cdC8vIGlmIHRoZSBhcnRpY2xlIGlzbid0IHRoZXJlIHRoZW4gcHVsbCBldmVyeSBwYXJhZ3JhcGggYW5kIHJlYWQgdGhhdFxuXHR2YXIgcGFyYWdyYXBocyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdwJyk7XG5cdGZvciAodmFyIGkgPSAwOyBpIDwgcGFyYWdyYXBocy5sZW5ndGg7IGkrKykge1xuXHRcdHRleHQgKz0gcGFyYWdyYXBoc1tpXS5pbm5lclRleHQgKyBcIiBcIjtcblx0fVxuXG5cdGlmKHRleHQpIHtcblx0XHRyZXR1cm4gdGV4dDtcblx0fVxuXG5cdC8vIGlmIHRoYXQgZG9lc24ndCB3b3JrIGp1c3QgdGFrZSB0aGUgd2hvbGUgcGFnZVxuXHR0ZXh0ID0gZG9jdW1lbnQuYWxsWzBdLmlubmVyVGV4dDtcblxuXHRyZXR1cm4gdGV4dDtcbn07XG5cbnZhciBpY29uU2l6ZSA9IDIwO1xudmFyIHBhZGRpbmcgPSAyO1xuXG5cblBhZ2VMaXN0ZW5lci5wcm90b3R5cGUuaXNCZXR0ZXJTcGFjZSA9IGZ1bmN0aW9uKGVsbU9sZCwgZWxtTmV3KSB7XG5cdHZhciBvbGRPZmZzZXQgPSBnZXRPZmZzZXQoZWxtT2xkKTtcblx0dmFyIG5ld09mZnNldCA9IGdldE9mZnNldChlbG1OZXcpO1xuXG5cdGlmKG9sZE9mZnNldC5sZWZ0ID4gMCAmJiBvbGRPZmZzZXQudG9wID4gMCkgLy9pZiB0aGUgb2xkIGVsZW1lbnQgaXMgb24gdGhlIHBhZ2Vcblx0XHRpZihuZXdPZmZzZXQubGVmdCA8PSAwIHx8IG5ld09mZnNldC50b3AgPD0gMCkgcmV0dXJuIGZhbHNlOyAvLyBhbmQgdGhlIG5ldyBvbmUgaXNuJ3QsIHRoZSBvbGQgaXMgYmV0dGVyXG5cblx0aWYoZWxtT2xkLnRhZ05hbWUgIT0gZWxtTmV3LnRhZ05hbWUpIHtcblx0XHRpZihlbG1PbGQudGFnTmFtZSA9PSBcIkFSVElDTEVcIikgcmV0dXJuIGZhbHNlOyAvLyB3YW50IGFydGljbGUgdGFncyBvdmVyICBwIHRhZ3Ncblx0XHRpZihlbG1OZXcudGFnTmFtZSA9PSBcIkFSVElDTEVcIikgcmV0dXJuIHRydWU7XG5cdFx0aWYoZWxtT2xkLnRhZ05hbWUgPT0gXCJQXCIpIHJldHVybiBmYWxzZTtcblx0XHRpZihlbG1OZXcudGFnTmFtZSA9PSBcIlBcIikgcmV0dXJuIHRydWU7XG5cdH1cblxuXHRpZihvbGRPZmZzZXQudG9wID4gbmV3T2Zmc2V0LnRvcCkgcmV0dXJuIHRydWU7XG59XG5cblBhZ2VMaXN0ZW5lci5wcm90b3R5cGUuYWRkUGxheUJ1dHRvbnMgPSBmdW5jdGlvbigpIHtcblxuXHR2YXIgYnV0dG9uTGF5ZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNlbHNwZWFrQnV0dG9uTGF5ZXJcIikgfHwgZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcblx0YnV0dG9uTGF5ZXIuaWQgPSBcInNlbHNwZWFrQnV0dG9uTGF5ZXJcIjtcblx0YnV0dG9uTGF5ZXIuaW5uZXJIVE1MID0gXCJcIjtcblxuXHRidXR0b25MYXllci5zdHlsZS5wb3NpdGlvbiA9IFwiYWJzb2x1dGVcIjtcblx0YnV0dG9uTGF5ZXIuc3R5bGUubGVmdCA9IFwiMFwiO1xuXHRidXR0b25MYXllci5zdHlsZS50b3AgPSBcIjBcIjtcblx0YnV0dG9uTGF5ZXIuc3R5bGUucmlnaHQgPSBcIjBcIjtcblx0YnV0dG9uTGF5ZXIuc3R5bGUuaGVpZ2h0ID0gcGFnZUhlaWdodCgpICsgXCJweFwiO1xuXHQvLyBidXR0b25MYXllci5zdHlsZS5ib3R0b20gPSBcIi0xMDBweFwiO1xuXHRidXR0b25MYXllci5zdHlsZS56SW5kZXggPSBcIjk5OTlcIjtcblx0YnV0dG9uTGF5ZXIuc3R5bGUucG9pbnRlckV2ZW50cyA9IFwibm9uZVwiO1xuXG5cdHZhciBwcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCJhcnRpY2xlLCBwXCIpO1xuXHR2YXIgZWxtID0gbnVsbDtcblxuXHRmb3IodmFyIGkgPSAwOyBpIDwgcHMubGVuZ3RoOyBpKyspIHtcblx0XHR2YXIgZSA9IHBzW2ldO1xuXG5cdFx0aWYoZS5pbm5lclRleHQubGVuZ3RoIDwgNTApIGNvbnRpbnVlO1xuXG5cdFx0dmFyIGYgPSBnZXRPZmZzZXQoZSk7XG5cdFx0aWYoZi5sZWZ0ID09IDAgfHwgZi50b3AgPT0gMCkgY29udGludWU7XG5cblx0XHRpZihlbG0gPT0gbnVsbCB8fCB0aGlzLmlzQmV0dGVyU3BhY2UoZWxtLCBlKSkge1xuXHRcdFx0ZWxtID0gZTtcblx0XHR9XG5cdH1cblxuXHRpZihlbG0gPT0gbnVsbCkgcmV0dXJuO1xuXG5cdHZhciByZWN0ID0gZ2V0T2Zmc2V0KGVsbSk7XG5cblx0dmFyIHJlYWxJY29uU2l6ZSA9IGljb25TaXplICsgXCJweFwiO1xuXHQvLyByZWFsSWNvblNpemUgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShlbG0sIG51bGwpW1wiZm9udC1zaXplXCJdO1xuXG5cdHZhciBidXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuXHRidXR0b24uc3R5bGUucG9zaXRpb24gPSBcImFic29sdXRlXCI7XG5cdGJ1dHRvbi5zdHlsZS5sZWZ0ID0gKHJlY3QubGVmdC0oaWNvblNpemUgKyBwYWRkaW5nKSkgKyBcInB4XCI7XG5cdGJ1dHRvbi5zdHlsZS50b3AgPSByZWN0LnRvcCArIFwicHhcIjtcblx0Ly8gYnV0dG9uLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwicmdiKDIxLCA4NiwgMTUwKVwiO1xuXHRidXR0b24uc3R5bGUucG9pbnRlckV2ZW50cyA9IFwiYXV0b1wiO1xuXHRidXR0b24uc3R5bGUuZGlzcGxheSA9IFwiZmxleFwiO1xuXHRidXR0b24uc3R5bGUud2lkdGggPSBpY29uU2l6ZSArIFwicHhcIjtcblx0YnV0dG9uLnN0eWxlLmhlaWdodCA9IGljb25TaXplICsgXCJweFwiO1xuXHRidXR0b24uc3R5bGUuanVzdGlmeUNvbnRlbnQgPSBcImNlbnRlclwiO1xuXHRidXR0b24uc3R5bGUuYWxpZ25JdGVtcyA9IFwiY2VudGVyXCI7XG5cdGJ1dHRvbi5zdHlsZS5ib3JkZXJSYWRpdXMgPSBcIjVweFwiO1xuXHRidXR0b24uc3R5bGUuY3Vyc29yID0gXCJwb2ludGVyXCI7XG5cdGJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwic2Vsc3BlYWtGbG9hdEJ1dHRvblwiKVxuXHRidXR0b24uaWQgPSBnZW5JZCgpO1xuXHR0aGlzLnBsYXlpbmdCb3hJZCA9IGJ1dHRvbi5pZDtcblx0XG5cdHZhciBpbWFnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuXHRpbWFnZS5zcmMgPSBjaHJvbWUuZXh0ZW5zaW9uLmdldFVSTCgnaW1nL2ljb24tcGxheV8zMi5wbmcnKTtcblx0aW1hZ2Uuc3R5bGUud2lkdGggPSAnYXV0byc7XG5cdGltYWdlLnN0eWxlLmhlaWdodCA9IHJlYWxJY29uU2l6ZTtcblx0aW1hZ2Uuc3R5bGUubWluV2lkdGggPSAnYXV0byc7XG5cdGltYWdlLnN0eWxlLm1pbkhlaWdodCA9IHJlYWxJY29uU2l6ZTtcblx0aW1hZ2Uuc3R5bGUubWF4V2lkdGggPSAnYXV0byc7XG5cdGltYWdlLnN0eWxlLm1heEhlaWdodCA9IHJlYWxJY29uU2l6ZTtcblx0aW1hZ2Uuc3R5bGUuZGlzcGxheSA9ICdpbmxpbmUtYmxvY2snO1xuXHRpbWFnZS5zdHlsZS52ZXJ0aWNhbEFsaWduID0gJ21pZGRsZSc7XG5cblx0YnV0dG9uLnNldEF0dHJpYnV0ZShcInRhcmdldElkXCIsIGVsbS5pZCk7XG5cblx0YnV0dG9uLmFwcGVuZENoaWxkKGltYWdlKTtcblx0YnV0dG9uTGF5ZXIuYXBwZW5kQ2hpbGQoYnV0dG9uKTtcblxuXHRidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuXG5cdFx0ZGlzbWlzc1R1dCgpO1xuXG5cdFx0aWYodGhpcy5wbGF5aW5nKSB7XG5cdFx0XHR3aW5kb3cuc2VuZE1lc3NhZ2UoXCJwYXVzZVwiKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHR2YXIgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0O1xuXG5cdFx0d2hpbGUoIXRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJzZWxzcGVha0Zsb2F0QnV0dG9uXCIpKVxuXHRcdFx0dGFyZ2V0ID0gdGFyZ2V0LnBhcmVudEVsZW1lbnQ7XG5cblx0XHR0aGlzLnBsYXlpbmdCb3hJZCA9IHRhcmdldC5pZDtcblxuXHRcdHdpbmRvdy5zZW5kTWVzc2FnZShcInBsYXlcIik7XG5cdH0uYmluZCh0aGlzKSk7XG5cblx0ZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChidXR0b25MYXllcik7XG59XG5cblBhZ2VMaXN0ZW5lci5wcm90b3R5cGUucmVtb3ZlUGxheUJ1dHRvbnMgPSBmdW5jdGlvbigpIHtcblx0dmFyIGJsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzZWxzcGVha0J1dHRvbkxheWVyXCIpO1xuXHRpZihibCAhPSBudWxsKSBibC5wYXJlbnRFbGVtZW50LnJlbW92ZUNoaWxkKGJsKTtcbn1cblxuUGFnZUxpc3RlbmVyLnByb3RvdHlwZS5hZGRQYXJhZ3JhcGhQbGF5QnV0dG9ucyA9IGZ1bmN0aW9uKCkge1xuXG5cdHZhciBidXR0b25MYXllciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2Vsc3BlYWtCdXR0b25MYXllclwiKSB8fCBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuXHRidXR0b25MYXllci5pZCA9IFwic2Vsc3BlYWtCdXR0b25MYXllclwiO1xuXHRidXR0b25MYXllci5pbm5lckhUTUwgPSBcIlwiO1xuXG5cblx0YnV0dG9uTGF5ZXIuc3R5bGUucG9zaXRpb24gPSBcImFic29sdXRlXCI7XG5cdGJ1dHRvbkxheWVyLnN0eWxlLmxlZnQgPSBcIjBcIjtcblx0YnV0dG9uTGF5ZXIuc3R5bGUudG9wID0gXCIwXCI7XG5cdGJ1dHRvbkxheWVyLnN0eWxlLnJpZ2h0ID0gXCIwXCI7XG5cdGJ1dHRvbkxheWVyLnN0eWxlLmJvdHRvbSA9IFwiLTEwMHB4XCI7XG5cdGJ1dHRvbkxheWVyLnN0eWxlLnpJbmRleCA9IFwiOTk5OVwiO1xuXHRidXR0b25MYXllci5zdHlsZS5wb2ludGVyRXZlbnRzID0gXCJub25lXCI7XG5cblx0dmFyIHBzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcImFydGljbGUsIHBcIik7XG5cblx0Zm9yKHZhciBpID0gMDsgaSA8IHBzLmxlbmd0aDsgaSsrKSB7XG5cdFx0dmFyIGVsbSA9IHBzW2ldO1xuXG5cdFx0aWYoZWxtLmlubmVyVGV4dC5sZW5ndGggPCA1MCkgY29udGludWU7XG5cblx0XHRpZihlbG0uaWQgPT0gXCJcIikgZWxtLmlkID0gZ2VuSWQoKTtcblxuXHRcdHZhciByZWN0ID0gZ2V0T2Zmc2V0KGVsbSk7XG5cblx0XHR2YXIgYnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcblx0XHRidXR0b24uc3R5bGUucG9zaXRpb24gPSBcImFic29sdXRlXCI7XG5cdFx0YnV0dG9uLnN0eWxlLmxlZnQgPSAocmVjdC5sZWZ0LShpY29uU2l6ZSArIHBhZGRpbmcpKSArIFwicHhcIjtcblx0XHRidXR0b24uc3R5bGUudG9wID0gcmVjdC50b3AgKyBcInB4XCI7XG5cdFx0Ly8gYnV0dG9uLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwicmdiKDIxLCA4NiwgMTUwKVwiO1xuXHRcdGJ1dHRvbi5zdHlsZS5wb2ludGVyRXZlbnRzID0gXCJhdXRvXCI7XG5cdFx0YnV0dG9uLnN0eWxlLmRpc3BsYXkgPSBcImZsZXhcIjtcblx0XHRidXR0b24uc3R5bGUud2lkdGggPSBpY29uU2l6ZSArIFwicHhcIjtcblx0XHRidXR0b24uc3R5bGUuaGVpZ2h0ID0gaWNvblNpemUgKyBcInB4XCI7XG5cdFx0YnV0dG9uLnN0eWxlLmp1c3RpZnlDb250ZW50ID0gXCJjZW50ZXJcIjtcblx0XHRidXR0b24uc3R5bGUuYWxpZ25JdGVtcyA9IFwiY2VudGVyXCI7XG5cdFx0YnV0dG9uLnN0eWxlLmJvcmRlclJhZGl1cyA9IFwiNXB4XCI7XG5cdFx0YnV0dG9uLnN0eWxlLmN1cnNvciA9IFwicG9pbnRlclwiO1xuXHRcdGJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwic2Vsc3BlYWtGbG9hdEJ1dHRvblwiKVxuXHRcdFxuXHRcdHZhciBpbWFnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuXHRcdGltYWdlLnNyYyA9IGNocm9tZS5leHRlbnNpb24uZ2V0VVJMKCdpbWcvaWNvbi1wbGF5XzMyLnBuZycpO1xuXHRcdGltYWdlLnN0eWxlLndpZHRoID0gJ2F1dG8nO1xuXHRcdGltYWdlLnN0eWxlLmhlaWdodCA9IGljb25TaXplICsgJ3B4Jztcblx0XHRpbWFnZS5zdHlsZS5taW5XaWR0aCA9ICdhdXRvJztcblx0XHRpbWFnZS5zdHlsZS5taW5IZWlnaHQgPSBpY29uU2l6ZSArICdweCc7XG5cdFx0aW1hZ2Uuc3R5bGUubWF4V2lkdGggPSAnYXV0byc7XG5cdFx0aW1hZ2Uuc3R5bGUubWF4SGVpZ2h0ID0gaWNvblNpemUgKyAncHgnO1xuXHRcdGltYWdlLnN0eWxlLmRpc3BsYXkgPSAnaW5saW5lLWJsb2NrJztcblx0XHRpbWFnZS5zdHlsZS52ZXJ0aWNhbEFsaWduID0gJ21pZGRsZSc7XG5cblx0XHRidXR0b24uc2V0QXR0cmlidXRlKFwidGFyZ2V0SWRcIiwgZWxtLmlkKTtcblxuXHRcdGJ1dHRvbi5hcHBlbmRDaGlsZChpbWFnZSk7XG5cdFx0YnV0dG9uTGF5ZXIuYXBwZW5kQ2hpbGQoYnV0dG9uKTtcblxuXHRcdGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7XG5cdFx0XHR2YXIgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0O1xuXG5cdFx0XHR3aGlsZSghdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcInNlbHNwZWFrRmxvYXRCdXR0b25cIikpXG5cdFx0XHRcdHRhcmdldCA9IHRhcmdldC5wYXJlbnRFbGVtZW50O1xuXG5cdFx0XHR0aGlzLnBsYXlpbmdCb3hJZCA9IHRhcmdldC5pZDtcblx0XHRcdHZhciB0YXJnZXRJZCA9IHRhcmdldC5nZXRBdHRyaWJ1dGUoJ3RhcmdldElkJyk7XG5cdFx0XHR0aGlzLmVDdXJyZW50UGFyYWdyYXBoID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGFyZ2V0SWQpO1xuXG5cdFx0XHR0aGlzLnNlbGVjdGlvbk92ZXJyaWRlID0gdGhpcy5lQ3VycmVudFBhcmFncmFwaC5pbm5lclRleHQ7XG5cdFx0XHR3aW5kb3cuc2VuZE1lc3NhZ2UoXCJwbGF5XCIpO1xuXHRcdH0uYmluZCh0aGlzKSk7XG5cdH1cblxuXHRkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGJ1dHRvbkxheWVyKTtcbn1cblxuUGFnZUxpc3RlbmVyLnByb3RvdHlwZS5zaG93T3ZlcmxheSA9IGZ1bmN0aW9uIChlbGVtZW50LCBhcHBlbmRUb1N0YXJ0KSB7XG5cdGlmICghdGhpcy5wYXJhZ3JhcGhQbGF5RW5hYmxlZCB8fCB0eXBlb2YgZWxlbWVudCA9PT0gJ3VuZGVmaW5lZCcgfHwgZWxlbWVudCA9PT0gbnVsbClcblx0XHRyZXR1cm47XG5cblx0aWYgKHR5cGVvZiBhcHBlbmRUb1N0YXJ0ICE9PSAnYm9vbGVhbicpXG5cdFx0YXBwZW5kVG9TdGFydCA9IGZhbHNlO1xuXG5cdHN3aXRjaCAoZWxlbWVudC50YWdOYW1lLnRvTG93ZXJDYXNlKCkpIHtcblx0XHRjYXNlICdwJzpcblx0XHRcdHRoaXMuZU92ZXJsYXlQbGF5QnV0dG9uVGV4dC5pbm5lckhUTUwgPSAnTGlzdGVuIHRvIHBhcmFncmFwaCc7XG5cdFx0XHRhcHBlbmRUb1N0YXJ0ID0gZmFsc2U7XG5cdFx0XHRicmVhaztcblx0XHRjYXNlICdhcnRpY2xlJzpcblx0XHRcdHRoaXMuZU92ZXJsYXlQbGF5QnV0dG9uVGV4dC5pbm5lckhUTUwgPSAnTGlzdGVuIHRvIGFydGljbGUnO1xuXHRcdFx0YXBwZW5kVG9TdGFydCA9IHRydWU7XG5cdFx0XHRicmVhaztcblx0XHRkZWZhdWx0OlxuXHRcdFx0aWYgKGVsZW1lbnQucGFyZW50Tm9kZSAhPT0gJ3VuZGVmaW5lZCcpXG5cdFx0XHRcdHRoaXMuc2hvd092ZXJsYXkoZWxlbWVudC5wYXJlbnROb2RlLCBhcHBlbmRUb1N0YXJ0KTtcblx0XHRcdHJldHVybjtcblx0fVxuXG5cdGlmIChlbGVtZW50LmlubmVyVGV4dC5sZW5ndGggPCA1MClcblx0XHRyZXR1cm47XG5cblx0dGhpcy5lT3ZlcmxheVdyYXBwZXIuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG5cdHRoaXMuZU92ZXJsYXlNZXNzYWdlUm9vdC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuXG5cdGFwcGVuZFRvU3RhcnQgPSB0cnVlO1xuXG5cdC8vIHRoaXMuZUN1cnJlbnRQYXJhZ3JhcGggPSBlbGVtZW50O1xuXHQvLyBpZiAoIWFwcGVuZFRvU3RhcnQgfHwgdHlwZW9mIHRoaXMuZUN1cnJlbnRQYXJhZ3JhcGguZmlyc3RDaGlsZCA9PT0gJ3VuZGVmaW5lZCcpIHtcblx0Ly8gXHR0aGlzLmVDdXJyZW50UGFyYWdyYXBoLmFwcGVuZENoaWxkKHRoaXMuZU92ZXJsYXlXcmFwcGVyKTtcblx0Ly8gfSBlbHNlIHtcblx0Ly8gXHR0aGlzLmVDdXJyZW50UGFyYWdyYXBoLmluc2VydEJlZm9yZSh0aGlzLmVPdmVybGF5V3JhcHBlciwgdGhpcy5lQ3VycmVudFBhcmFncmFwaC5maXJzdENoaWxkKTtcblx0Ly8gfVxuXG5cdHZhciBvZmZzZXQgPSBnZXRPZmZzZXQoZWxlbWVudCk7XG5cdHRoaXMuZUN1cnJlbnRQYXJhZ3JhcGggPSBlbGVtZW50O1xuXG5cdHRoaXMuZU92ZXJsYXlXcmFwcGVyLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcblx0dGhpcy5lT3ZlcmxheVdyYXBwZXIuc3R5bGUudG9wID0gKG9mZnNldC50b3AtMzApICsgJ3B4Jztcblx0dGhpcy5lT3ZlcmxheVdyYXBwZXIuc3R5bGUubGVmdCA9IG9mZnNldC5sZWZ0ICsgJ3B4Jztcblx0XG5cdGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGhpcy5lT3ZlcmxheVdyYXBwZXIpO1xufTtcblxuZnVuY3Rpb24gZ2V0T2Zmc2V0KCBlbGVtIClcbntcbiAgICB2YXIgb2Zmc2V0TGVmdCA9IDA7XG5cdHZhciBvZmZzZXRUb3AgPSAwO1xuICAgIGRvIHtcbiAgICAgIGlmICggIWlzTmFOKCBlbGVtLm9mZnNldExlZnQgKSApXG4gICAgICB7XG4gICAgICAgICAgb2Zmc2V0TGVmdCArPSBlbGVtLm9mZnNldExlZnQ7XG4gICAgICB9XG5cdCAgaWYgKCAhaXNOYU4oIGVsZW0ub2Zmc2V0VG9wICkgKVxuICAgICAge1xuICAgICAgICAgIG9mZnNldFRvcCArPSBlbGVtLm9mZnNldFRvcDtcbiAgICAgIH1cbiAgICB9IHdoaWxlKCBlbGVtID0gZWxlbS5vZmZzZXRQYXJlbnQgKTtcbiAgICByZXR1cm4ge2xlZnQ6IG9mZnNldExlZnQsIHRvcDogb2Zmc2V0VG9wfTtcbn1cblxuUGFnZUxpc3RlbmVyLnByb3RvdHlwZS5oaWRlT3ZlcmxheSA9IGZ1bmN0aW9uICgpIHtcblx0XG5cdHZhciB1bmRlclBvaW50ZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCc6aG92ZXInKTtcblx0XG5cdHZhciBuID0gMDtcblx0XG5cdHdoaWxlKG4gPCB1bmRlclBvaW50ZXIubGVuZ3RoKSB7XG5cdFx0dmFyIGVsbSA9IHVuZGVyUG9pbnRlcltuKytdO1xuXHRcdGlmKGVsbSA9PSB0aGlzLmVPdmVybGF5V3JhcHBlcikge1xuXHRcdFx0YnJlYWs7XG5cdFx0fVxuXHR9XG5cdFxuXHRpZihuID49IHVuZGVyUG9pbnRlci5sZW5ndGgpIHtcblx0XHRpZih0aGlzLmVPdmVybGF5V3JhcHBlci5wYXJlbnROb2RlID09IGRvY3VtZW50LmJvZHkpIHtcblx0XHRcdGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQodGhpcy5lT3ZlcmxheVdyYXBwZXIpO1xuXHRcdFx0dGhpcy5lQ3VycmVudFBhcmFncmFwaCA9IHVuZGVmaW5lZDtcblx0XHR9XG5cdH1cblx0XG5cdC8vIGlmICh0eXBlb2YgdGhpcy5lQ3VycmVudFBhcmFncmFwaCAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0Ly8gXHR0aGlzLmVDdXJyZW50UGFyYWdyYXBoLnJlbW92ZUNoaWxkKHRoaXMuZU92ZXJsYXlXcmFwcGVyKTtcblx0Ly8gXHRkZWxldGUgdGhpcy5lQ3VycmVudFBhcmFncmFwaDtcblx0Ly8gXHRkZWxldGUgdGhpcy5zZWxlY3Rpb25PdmVycmlkZTtcblx0Ly8gfVxufTtcblxuUGFnZUxpc3RlbmVyLnByb3RvdHlwZS5vblBsYXlPdmVybGF5Q2xpY2sgPSBmdW5jdGlvbigpIHtcblx0aWYgKHR5cGVvZiB0aGlzLmVDdXJyZW50UGFyYWdyYXBoID09PSAndW5kZWZpbmVkJylcblx0XHRyZXR1cm47XG5cblx0aWYgKHRoaXMucGxheWluZykge1xuXHRcdHdpbmRvdy5zZW5kTWVzc2FnZShcInBhdXNlXCIpO1xuXHR9IGVsc2Uge1xuXHRcdHRoaXMuc2VsZWN0aW9uT3ZlcnJpZGUgPSB0aGlzLmVDdXJyZW50UGFyYWdyYXBoLmlubmVyVGV4dDtcblx0XHR3aW5kb3cuc2VuZE1lc3NhZ2UoXCJwbGF5XCIpO1xuXHR9XG59O1xuXG5QYWdlTGlzdGVuZXIucHJvdG90eXBlLm9uQ2xvc2VPdmVybGF5Q2xpY2sgPSBmdW5jdGlvbigpIHtcblx0dGhpcy5wYXJhZ3JhcGhQbGF5RW5hYmxlZCA9IGZhbHNlO1xuXHR3aW5kb3cuc2V0U2V0dGluZyhcInBhcmFncmFwaFBsYXlcIiwgZmFsc2UpO1xuXHR3aW5kb3cuc2VuZE1lc3NhZ2UoXCJwYXVzZVwiKTtcblx0dGhpcy5lT3ZlcmxheVdyYXBwZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJztcblx0dGhpcy5lT3ZlcmxheU1lc3NhZ2VSb290LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xufVxuXG5wdWxsQXR0ciA9IGZ1bmN0aW9uKHRhZywgYXR0cikge1xuXHRhdHRycyA9IHRhZy5hdHRyaWJ1dGVzO1xuXG5cdGZvcihpID0gMDsgaSA8IGF0dHJzLmxlbmd0aDsgaSsrKSB7XG5cdFx0aWYoYXR0cnNbaV0ubmFtZSA9PSBhdHRyKVxuXHRcdFx0cmV0dXJuIGF0dHJzW2ldLnZhbHVlO1xuXHR9XG59XG5cbmdldExhbmcgPSBmdW5jdGlvbigpIHtcblx0dmFyIGh0bWxUYWcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdodG1sW2xhbmddJyk7XG5cdGlmKGh0bWxUYWcpIHtcblx0XHRyZXR1cm4gcHVsbEF0dHIoaHRtbFRhZywgJ2xhbmcnKTtcblx0fVxuXG5cdGh0bWxUYWcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdodG1sW3htbFxcXFw6bGFuZ10nKTtcblx0aWYoaHRtbFRhZykge1xuXHRcdHJldHVybiBwdWxsQXR0cihodG1sVGFnLCAneG1sOmxhbmcnKTtcblx0fVxuXG5cdGh0bWxUYWcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdtZXRhW2h0dHAtZXF1aXY9XCJDb250ZW50LUxhbmd1YWdlXCJdJyk7XG5cdGlmKGh0bWxUYWcpIHtcblx0XHRyZXR1cm4gcHVsbEF0dHIoaHRtbFRhZywgJ2NvbnRlbnQnKTtcblx0fVxuXG5cdHJldHVybiBcIlwiO1xufVxuXG52YXIgY0h0bWwgPSBcIlwiO1xucmVhZEZpbGUoXCJyZXNvdXJjZXMvY291bnRkb3duLmh0bWxcIiwgZnVuY3Rpb24oZGF0YSkge1xuXHRjSHRtbCA9IGRhdGE7XG59KTtcblxudmFyIGNvdW50U2Vjb25kcyA9IDA7XG5mdW5jdGlvbiBvbkNvdW50ZG93bigpIHtcblx0aWYoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Nlc0NvdW50Qm94JykgIT0gbnVsbCkgcmV0dXJuO1xuXHRcblx0d2luZG93LnNlbmRNZXNzYWdlKFwiYXBwVmlld1wiLCB7XCJ0YWdcIjogXCJmcmVlIHBvcHVwXCJ9KTtcblx0Y291bnRTZWNvbmRzID0gNjsgLy8gb25lIG1vcmUgdGhhbiBuZWVkZWQsXG5cblx0dmFyIHNob3dCb3ggPSBmdW5jdGlvbihncm91cCkge1xuXG5cdFx0dmFyIGZyZWVfdmVyc2lvbiA9IGNocm9tZS5pMThuLmdldE1lc3NhZ2UoJ2ZyZWVfdmVyc2lvbicpXG5cdFx0dmFyIGdldF9mcmVlX3RyaWFsID0gY2hyb21lLmkxOG4uZ2V0TWVzc2FnZSgnZ2V0X2ZyZWVfdHJpYWwnKTtcblx0XHR2YXIgdW5saW1pdGVkX3dvcmRzID0gY2hyb21lLmkxOG4uZ2V0TWVzc2FnZSgndW5saW1pdGVkX3dvcmRzJyk7XG5cdFx0dmFyIGZyZWVfdHJpYWwgPSBjaHJvbWUuaTE4bi5nZXRNZXNzYWdlKCdmcmVlX3RyaWFsJyk7XG5cblx0XHRpZihncm91cCA9PSAxKSB7XG5cdFx0XHRnZXRfZnJlZV90cmlhbCA9IFwiU3RhcnQgeW91ciA8c3Ryb25nPmZyZWUgdHJpYWwgZGF5PC9zdHJvbmc+ICh0aGVuICQyLjk5L21vIGJpbGxlZCBhbm51YWxseSlcIjtcblx0XHRcdGZyZWVfdHJpYWwgPSBcIlN0YXJ0IDxzdHJvbmc+RnJlZSBUcmlhbCBEYXk8L3N0cm9uZz5cIjtcblx0XHR9XG5cblx0XHRjSHRtbCA9ICc8ZGl2IGlkPVwic2VzQ291bnRCb3hcIiBzdHlsZT1cInBvc2l0aW9uOmZpeGVkO3dpZHRoOjEwMCU7aGVpZ2h0OjEwMCU7YmFja2dyb3VuZDpyZ2JhKDAsMCwwLDAuNzUpO2xlZnQ6MHB4O3RvcDowcHg7ei1pbmRleDoyMTQ3NDgzNjQ3O1wiPic7XG5cdFx0Y0h0bWwgKz0gJzxkaXYgc3R5bGU9XCJib3JkZXItcmFkaXVzOjEwcHg7cG9zaXRpb246Zml4ZWQ7dG9wOjI1JTtsZWZ0OmNhbGMoNTAlIC0gMzUwcHgpO2JhY2tncm91bmQ6d2hpdGU7Y29sb3I6IzlFQTJCNjt0ZXh0LWFsaWduOmNlbnRlcjt3aWR0aDo3MDBweDtwYWRkaW5nLWJvdHRvbToxMHB4O2ZvbnQtc2l6ZToxN3B4O3BhZGRpbmctdG9wOjE1cHg7Y29sb3I6YmxhY2s7Zm9udC1mYW1pbHk6IE9wZW4gU2FucztcIj4nXG5cdFx0Y0h0bWwgKz0gJzxkaXYgc3R5bGU9XCJmb250LWZhbWlseTogTW9udHNlcnJhdDtmb250LXNpemU6IDMwcHg7Zm9udC13ZWlnaHQ6IDQwMDt0ZXh0LXRyYW5zZm9ybTogdXBwZXJjYXNlO2NvbG9yOiAjZDYzZDM0O3BhZGRpbmctdG9wOiAxMHB4O1wiPidcblx0XHRjSHRtbCArPSBmcmVlX3ZlcnNpb247XG5cdFx0Y0h0bWwgKz0gJzwvZGl2Pidcblx0XHRjSHRtbCArPSAnPGJyPic7XG5cdFx0Y0h0bWwgKz0gJzxkaXYgc3R5bGU9XCJwYWRkaW5nLXRvcDoxMHB4O2ZvbnQtZmFtaWx5OiBTYW5zLVNlcmlmOyBjb2xvcjojNmQ2ZDZkO2ZvbnQtd2VpZ2h0OiAzMDA7XCI+JyArIGdldF9mcmVlX3RyaWFsICsgJzwvZGl2Pidcblx0XHRjSHRtbCArPSAnPGRpdiBzdHlsZT1cInBhZGRpbmctdG9wOjEwcHg7Zm9udC1mYW1pbHk6IFNhbnMtU2VyaWY7IGNvbG9yOiM2ZDZkNmQ7Zm9udC13ZWlnaHQ6IDMwMDtcIj4nICsgdW5saW1pdGVkX3dvcmRzICsgJzwvZGl2Pic7XG5cdFx0Y0h0bWwgKz0gJzxicj4nO1xuXHRcdGNIdG1sICs9ICc8ZGl2IGlkPVwic2VzVXBncmFkZUJ1dHRvblwiIHN0eWxlPVwiZm9udC1mYW1pbHk6TW9udHNlcnJhdDsgZm9udC13ZWlnaHQ6IDQwMDt0ZXh0LWFsaWduOiBjZW50ZXI7Zm9udC1zaXplOiAyMHB4O3RleHQtdHJhbnNmb3JtOiB1cHBlcmNhc2U7Y29sb3I6IHdoaXRlO2N1cnNvcjogcG9pbnRlcjtoZWlnaHQ6IDM1cHg7cGFkZGluZy10b3A6IDExcHg7YmFja2dyb3VuZC1jb2xvcjogIzJhOGNkZDtib3JkZXItcmFkaXVzOiA3cHg7dHJhbnNpdGlvbjogYmFja2dyb3VuZCAwLjE1cyBsaW5lYXI7cGFkZGluZy1sZWZ0OiAyNHB4O3BhZGRpbmctcmlnaHQ6IDI0cHg7Ym94LXNoYWRvdzogMHB4IDNweCAwcHggIzAwNzBiYzt3aWR0aDozMDBweDttYXJnaW46YXV0bztcIj48ZGl2PicgKyBmcmVlX3RyaWFsICsgJzwvZGl2PjwvZGl2Pic7XG5cdFx0Y0h0bWwgKz0gJzxkaXYgaWQ9XCJzZXNDb250aW51ZVwiID48ZGl2IGlkPVwic2VzQ291bnROdW1iZXJcIiBzdHlsZT1cInRvcDogY2FsYyg1MCUgLSAwLjVlbSk7cG9zaXRpb246IHJlbGF0aXZlO2ZvbnQtc2l6ZTogMTVweDt0ZXh0LWFsaWduOiBjZW50ZXI7Zm9udC1mYW1pbHk6IE9wZW4tU2Fucztjb2xvcjogI2FmYWZhZjt0ZXh0LWRlY29yYXRpb246IHVuZGVybGluZTtwYWRkaW5nLXRvcDogMjBweDtwYWRkaW5nLWJvdHRvbTogMjBweDsgY3Vyc29yOiBwb2ludGVyO1wiPicgKyBjb3VudFNlY29uZHMgKyAnPC9kaXY+PC9kaXY+Jztcblx0XHRjSHRtbCArPSAnPC9kaXY+Jztcblx0XHRjSHRtbCArPSAnPC9kaXY+JztcblxuXHRcdHZhciBkdW1teSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHRcdFxuXHRcdGR1bW15LmlubmVySFRNTCA9IGNIdG1sO1xuXHRcdHZhciBib3hFbG0gPSBkdW1teS5yZW1vdmVDaGlsZChkdW1teS5jaGlsZE5vZGVzWzBdKTtcblx0XHRcblx0XHRkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGJveEVsbSk7XG5cblx0XHRkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VzVXBncmFkZUJ1dHRvbicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG5cdFx0XHR3aW5kb3cuc2VuZE1lc3NhZ2UoXCJhcHBWaWV3XCIsIHtcInRhZ1wiOiBcInBvcHVwIHVwZ3JhZGUgY2xpY2tcIn0pO1xuXHRcdFx0d2luZG93LnNlbmRNZXNzYWdlKFwidHJhY2tcIiwge1widGFnXCI6IFwicGF5bWVudFwiLCBcIm1zZ1wiOiBcIm9wZW4gZnJvbSBwb3B1cCBjb3VudGRvd25cIn0pO1xuXHRcdFx0c3RhcnRQYXlwYWwoXCJZZWFyXCIpO1xuXHRcdH0pO1xuXG5cdFx0ZGVjcmVtZW50Q291bnQoKTtcblx0fVxuXG5cdGlmKCFjaHJvbWUuaTE4bi5nZXRNZXNzYWdlKFwiQEB1aV9sb2NhbGVcIikuc3RhcnRzV2l0aChcImVuXCIpKSB7XG5cdFx0c2hvd0JveCgwKTtcblx0fSBlbHNlIHtcblx0XHR3aW5kb3cuYWRkVGVzdChcIm9uZURheVRyaWFsXCIsIDIsIHNob3dCb3gpO1xuXHR9XG59XG5cbmZ1bmN0aW9uIHBhZ2VIZWlnaHQoKSB7XG5cdHJldHVybiBNYXRoLm1heChcblx0XHRkb2N1bWVudC5ib2R5LnNjcm9sbEhlaWdodCxcblx0XHRkb2N1bWVudC5ib2R5Lm9mZnNldEhlaWdodCxcblx0XHRkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0LFxuXHRcdGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxIZWlnaHQsXG5cdFx0ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50Lm9mZnNldEhlaWdodFxuXHQpO1xufVxuXG5mdW5jdGlvbiBkZWNyZW1lbnRDb3VudCgpIHtcblx0Y291bnRTZWNvbmRzLS07XG5cdGlmKGNvdW50U2Vjb25kcyA8PSAwKSB7XG5cdFx0ZW5hYmxlQ29udGludWUoKTtcblx0XHRyZXR1cm47XG5cdH1cblx0XG5cdGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZXNDb3VudE51bWJlcicpLmlubmVySFRNTCA9IFwiXCIrY291bnRTZWNvbmRzO1xuXHRzZXRUaW1lb3V0KGRlY3JlbWVudENvdW50LCAxMDAwKTtcbn1cblxuZnVuY3Rpb24gZW5hYmxlQ29udGludWUoKSB7XG5cdGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZXNDb3VudE51bWJlcicpLmlubmVySFRNTCA9IGNocm9tZS5pMThuLmdldE1lc3NhZ2UoJ3NraXAnKTtcblx0dmFyIGNvbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VzQ29udGludWUnKTtcblx0Ly9jb250LnN0eWxlLmJhY2tncm91bmQgPSBcIiM2MzljZDdcIjtcblx0Y29udC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHJlbW92ZUFuZFBsYXkpO1xufVxuXG5mdW5jdGlvbiByZW1vdmVBbmRQbGF5KCkge1xuXHR3aW5kb3cuc2VuZE1lc3NhZ2UoXCJhcHBWaWV3XCIsIHtcInRhZ1wiOiBcInBvcHVwIHNraXAgY2xpY2tcIn0pO1xuXHRkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZXNDb3VudEJveCcpKTtcblx0d2luZG93LnNlbmRNZXNzYWdlKFwicmVhbF9wbGF5XCIpO1xufVxuXG53aW5kb3cuYWRkSGFuZGxlcihcInN0YXJ0LWNvdW50ZG93blwiLCBvbkNvdW50ZG93bik7XG5cblBhZ2VMaXN0ZW5lci5wcm90b3R5cGUucmVwb3J0TGFuZ3VhZ2UgPSBmdW5jdGlvbigpIHtcblx0d2luZG93LnNlbmRNZXNzYWdlKFwicGFnZUxhbmdcIiwge1wibGFuZ1wiOiBnZXRMYW5nKCl9KTtcbn07XG5cbnZhciBsaXN0ZW5lciA9IG5ldyBQYWdlTGlzdGVuZXIoKTtcbndpbmRvdy5sb2FkU2V0dGluZ3MoKTtcblxudmFyIG1ldGEgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc25zUGF5cGFsU2VydmVySnNvbicpO1xuaWYobWV0YSkge1xuXHR2YXIgb2JqID0gSlNPTi5wYXJzZShtZXRhLmdldEF0dHJpYnV0ZSgnY29udGVudCcpKTtcblx0aWYob2JqKVxuXHRcdGFwcGx5TWV0YShvYmopO1xufVxuXG52YXIgcmVtb3ZlVGltZW91dElkO1xuZnVuY3Rpb24gcGxhY2VQbGF5QnV0dG9uKHNlbGVjdGlvbiwgeCwgeSkge1xuXHRcblx0Y2xlYXJUaW1lb3V0KHJlbW92ZVRpbWVvdXRJZCk7XG5cdHZhciBwbGF5Qm94ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnI3Nlc1BsYXlCb3gnKTtcblx0Zm9yKHZhciBpID0gMDsgaSA8IHBsYXlCb3gubGVuZ3RoOyBpKyspIHtcblx0XHRwbGF5Qm94W2ldLnJlbW92ZSgpO1xuXHR9XG5cdFxuXHR2YXIgY0h0bWwgPSAnPGRpdiBpZD1cInNlc1BsYXlCb3hcIiBzdHlsZT1cInBvc2l0aW9uOmFic29sdXRlO2xlZnQ6JyArIHggKyAncHg7dG9wOicgKyB5ICsgJ3B4O3otaW5kZXg6MjE0NzQ4MzY0NztcIj4nO1xuXHRjSHRtbCArPSAnPGltZyBpZD1cInNlc1BsYXlTZWxCdXR0b25cIiBzdHlsZT1cIndpZHRoOjMwcHg7aGVpZ2h0OjMwcHg7Y3Vyc29yOnBvaW50ZXI7XCIgc3JjPVwiJyArIGNocm9tZS5leHRlbnNpb24uZ2V0VVJMKFwiaW1nL2ljb25zL2ljb24tcGxheV8xMjgucG5nXCIpICsgJ1wiPic7XG5cdGNIdG1sICs9ICc8L2Rpdj4nO1xuXHRcblx0dmFyIGR1bW15ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdFxuXHRkdW1teS5pbm5lckhUTUwgPSBjSHRtbDtcblx0dmFyIGJveEVsbSA9IGR1bW15LnJlbW92ZUNoaWxkKGR1bW15LmNoaWxkTm9kZXNbMF0pO1xuXHRcblx0ZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChib3hFbG0pO1xuXHRcblx0ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Nlc1BsYXlTZWxCdXR0b24nKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuXHRcdHdpbmRvdy5zZW5kTWVzc2FnZShcInBsYXlfZ2l2ZW5cIiwge1xuXHRcdFx0XCJzZWxlY3Rpb25cIjogc2VsZWN0aW9uLFxuXHRcdFx0XCJjb250ZW50TGFuZ1wiOiBnZXRMYW5nKClcblx0XHR9KTtcblx0fSk7XG5cdFxuXHRkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VzUGxheVNlbEJ1dHRvbicpLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZW50ZXInLCBmdW5jdGlvbigpIHtcblx0XHRjbGVhclRpbWVvdXQocmVtb3ZlVGltZW91dElkKTtcblx0fSk7XG5cdFxuXHRkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VzUGxheVNlbEJ1dHRvbicpLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCBmdW5jdGlvbigpIHtcblx0XHRyZW1vdmVUaW1lb3V0SWQgPSBzZXRUaW1lb3V0KHJlbW92ZVBsYXlCdXR0b24sIDMwMDApO1xuXHR9KTtcblx0XG5cdHJlbW92ZVRpbWVvdXRJZCA9IHNldFRpbWVvdXQocmVtb3ZlUGxheUJ1dHRvbiwgMzAwMCk7XG59XG5cbmZ1bmN0aW9uIGZhZGVPdXQoZWwpe1xuICBpZih0eXBlb2YoZWwpID09PSAndW5kZWZpbmVkJykgcmV0dXJuO1xuICBlbC5zdHlsZS5vcGFjaXR5ID0gMTtcblxuICAoZnVuY3Rpb24gZmFkZSgpIHtcbiAgICBpZiAoKGVsLnN0eWxlLm9wYWNpdHkgLT0gLjEpIDwgMCkge1xuICAgICAgZWwuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZmFkZSk7XG4gICAgfVxuICB9KSgpO1xufVxuXG5mdW5jdGlvbiByZW1vdmVQbGF5QnV0dG9uKCkge1xuXHRcblx0dmFyIHBsYXlCb3ggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcjc2VzUGxheUJveCcpXG5cdFxuXHR2YXIgZWxtID0gcGxheUJveFswXTtcblx0ZmFkZU91dChlbG0pO1xuXHRzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuXHRcdGlmKGVsbSkgZWxtLnJlbW92ZSgpO1xuXHRcdGxhc3RTZWxlY3Rpb24gPSAnJztcblx0fSwgMTAwMCk7XG5cdFxuXHRmb3IodmFyIGkgPSAxOyBpIDwgcGxheUJveC5sZW5ndGg7IGkrKykge1xuXHRcdHBsYXlCb3hbaV0ucmVtb3ZlKCk7XG5cdH1cbn1cblxuZnVuY3Rpb24gZ2VuSWQoKSB7XG5cdHZhciBuID0gTWF0aC5yYW5kb20oKTtcblxuXHRuID0gKG4qODAwMDk5OTk5OSkgKyAxMDAwMDAwMDAwO1xuXHRuID0gTWF0aC5mbG9vcihuKTtcblxuXHRyZXR1cm4gXCJzZWxzcGVha0lEXCIgKyBuO1xufVxuXG5mdW5jdGlvbiBzcGluRWxtKGVsbSkge1xuXHRlbG0uc2V0QXR0cmlidXRlKFwic3Bpbm5pbmdcIiwgXCJ0cnVlXCIpO1xuXHR2YXIgZGVnID0gMDtcblx0dmFyIHNwaW5Db2RlID0gZnVuY3Rpb24oKSB7XG5cdFx0aWYoZWxtLmdldEF0dHJpYnV0ZShcInNwaW5uaW5nXCIpICE9IFwidHJ1ZVwiKSB7XG5cdFx0XHRlbG0uc3R5bGUudHJhbnNmb3JtID0gXCJcIjtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRkZWcgPSAoZGVnICsgNSkgJSAzNjA7XG5cdFx0ZWxtLnN0eWxlLnRyYW5zZm9ybSA9IFwicm90YXRlKFwiICsgZGVnICsgXCJkZWcpXCI7XG5cdFx0c2V0VGltZW91dChzcGluQ29kZSwgNSk7XG5cdH1cblx0c3BpbkNvZGUoKTtcbn1cblxuZnVuY3Rpb24gcmVzZXRFbG1TcGluKGVsbSkge1xuXHRlbG0uc2V0QXR0cmlidXRlKFwic3Bpbm5pbmdcIiwgXCJmYWxzZVwiKTtcbn1cblxudmFyIGxhc3RTZWxlY3Rpb247XG5kb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBmdW5jdGlvbihldmVudCkge1xuXHR2YXIgZW5hYmxlZCA9IHdpbmRvdy5nZXRTZXR0aW5nKFwicGxheUJ1dHRvblwiKTtcblx0aWYoZW5hYmxlZCkge1xuXHRcdHZhciBzZWxlY3Rpb24gPSBsaXN0ZW5lci5nZXRQYWdlU2VsZWN0aW9uKCk7XG5cdFx0aWYoc2VsZWN0aW9uLmxlbmd0aCAhPSAwICYmIHNlbGVjdGlvbiAhPSBsYXN0U2VsZWN0aW9uKSB7XG5cdFx0XHRwbGFjZVBsYXlCdXR0b24oc2VsZWN0aW9uLCB3aW5kb3cuc2Nyb2xsWCArIGV2ZW50LmNsaWVudFggKyAyMCwgd2luZG93LnNjcm9sbFkgKyBldmVudC5jbGllbnRZIC0gMjUpO1xuXHRcdH1cblx0XHRcblx0XHRsYXN0U2VsZWN0aW9uID0gc2VsZWN0aW9uO1xuXHR9XG5cblx0aWYod2luZG93LmdldFNldHRpbmcoXCJhdXRvXCIpKSB7XG5cdFx0dmFyIHNlbGVjdGlvbiA9IGxpc3RlbmVyLmdldFBhZ2VTZWxlY3Rpb24oKTtcblx0XHRpZihzZWxlY3Rpb24ubGVuZ3RoICE9IDAgJiYgc2VsZWN0aW9uICE9IGxhc3RTZWxlY3Rpb24pIHtcblx0XHRcdHdpbmRvdy5zZW5kTWVzc2FnZShcInBsYXlfZ2l2ZW5cIiwge1xuXHRcdFx0XHRcInNlbGVjdGlvblwiOiBzZWxlY3Rpb24sXG5cdFx0XHRcdFwiY29udGVudExhbmdcIjogZ2V0TGFuZygpXG5cdFx0XHR9KTtcblx0XHR9XG5cdFx0XG5cdFx0bGFzdFNlbGVjdGlvbiA9IHNlbGVjdGlvbjtcblx0fVxufSk7XG5cbmZ1bmN0aW9uIGRpc21pc3NUdXQoKSB7XG5cdHZhciBidXR0b25MYXllciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2Vsc3BlYWtCdXR0b25MYXllclwiKTtcblx0aWYoYnV0dG9uTGF5ZXIgPT0gbnVsbCkgcmV0dXJuO1xuXG5cdGJ1dHRvbkxheWVyLnN0eWxlLmJhY2tncm91bmQgPSBcIlwiO1xuXHRidXR0b25MYXllci5zdHlsZS5wb2ludGVyRXZlbnRzID0gXCJub25lXCI7XG5cblx0dmFyIHdlbGNvbWVDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIndlbGNvbWVDb250YWluZXJcIik7XG5cdGlmKHdlbGNvbWVDb250YWluZXIgIT0gbnVsbCkge1xuXHRcdHZhciBwID0gd2VsY29tZUNvbnRhaW5lci5wYXJlbnRFbGVtZW50O1xuXHRcdHAucmVtb3ZlQ2hpbGQod2VsY29tZUNvbnRhaW5lcik7XG5cdH1cblxuXHR2YXIgc3RhcnRDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInN0YXJ0Q29udGFpbmVyXCIpO1xuXHRpZihzdGFydENvbnRhaW5lciAhPSBudWxsKSB7XG5cdFx0dmFyIHAgPSBzdGFydENvbnRhaW5lci5wYXJlbnRFbGVtZW50O1xuXHRcdHAucmVtb3ZlQ2hpbGQoc3RhcnRDb250YWluZXIpO1xuXHR9XG59XG5cbmZ1bmN0aW9uIGZpbmRIaWdoZXN0WkluZGV4KClcbntcblx0dmFyIGVsZW1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIipcIik7XG5cdHZhciBoaWdoZXN0ID0gMDtcblx0Zm9yICh2YXIgaSA9IDA7IGkgPCBlbGVtcy5sZW5ndGg7IGkrKylcblx0e1xuXHRcdHZhciB6aW5kZXg9ZG9jdW1lbnQuZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZShlbGVtc1tpXSxudWxsKS5nZXRQcm9wZXJ0eVZhbHVlKFwiei1pbmRleFwiKTtcblx0XHRpZiAoKHppbmRleCA+IGhpZ2hlc3QpICYmICh6aW5kZXggIT0gJ2F1dG8nKSlcblx0XHR7XG5cdFx0aGlnaGVzdCA9IHppbmRleDtcblx0XHR9XG5cdH1cblx0cmV0dXJuIHBhcnNlSW50KGhpZ2hlc3QpO1xufVxuXG5pZihsb2NhdGlvbi5oYXNoID09IFwiI3NlbHNwZWFrVHV0XCIpIHtcblx0dmFyIHR1dEluaXRGdW5jID0gZnVuY3Rpb24oKSB7XG5cdFx0dmFyIGJ1dHRvbkxheWVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzZWxzcGVha0J1dHRvbkxheWVyXCIpO1xuXHRcdHZhciBidXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3NlbHNwZWFrQnV0dG9uTGF5ZXIgPiAuc2Vsc3BlYWtGbG9hdEJ1dHRvblwiKTtcblx0XHRpZihidXR0b25MYXllciA9PSBudWxsIHx8IGJ1dHRvbiA9PSBudWxsKSB7IHNldFRpbWVvdXQodHV0SW5pdEZ1bmMsIDEwKTsgcmV0dXJuOyB9XG5cblx0XHRidXR0b25MYXllci5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcInJnYmEoMCwwLDAsLjUpXCI7XG5cdFx0YnV0dG9uTGF5ZXIuc3R5bGUucG9pbnRlckV2ZW50cyA9IFwiYXV0b1wiO1xuXG5cdFx0dmFyIHdlbGNvbWVDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuXHRcdHdlbGNvbWVDb250YWluZXIuaWQgPSBcIndlbGNvbWVDb250YWluZXJcIjtcblx0XHR3ZWxjb21lQ29udGFpbmVyLnN0eWxlLndpZHRoID0gXCJjYWxjKDEwMCUpXCI7XG5cdFx0d2VsY29tZUNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gXCJmbGV4XCI7XG5cdFx0d2VsY29tZUNvbnRhaW5lci5zdHlsZS5qdXN0aWZ5Q29udGVudCA9IFwiY2VudGVyXCI7XG5cblx0XHR2YXIgd2VsY29tZU1lc3NhZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaDFcIik7XG5cdFx0d2VsY29tZU1lc3NhZ2UuaW5uZXJIVE1MID0gY2hyb21lLmkxOG4uZ2V0TWVzc2FnZShcIndlbGNvbWVcIik7XG5cdFx0d2VsY29tZU1lc3NhZ2Uuc3R5bGUucG9zaXRpb24gPSBcImFic29sdXRlXCI7XG5cdFx0d2VsY29tZU1lc3NhZ2Uuc3R5bGUucGFkZGluZyA9IFwiMTBweFwiO1xuXHRcdHdlbGNvbWVNZXNzYWdlLnN0eWxlLmJvcmRlclJhZGl1cyA9IFwiMTBweFwiO1xuXHRcdHdlbGNvbWVNZXNzYWdlLnN0eWxlLmJvcmRlclN0eWxlID0gXCJzb2xpZFwiO1xuXHRcdHdlbGNvbWVNZXNzYWdlLnN0eWxlLmJvcmRlcldpZHRoID0gXCI0cHhcIjtcblx0XHR3ZWxjb21lTWVzc2FnZS5zdHlsZS5ib3JkZXJDb2xvciA9IFwiIzU2OEFCRlwiO1xuXHRcdHdlbGNvbWVNZXNzYWdlLnN0eWxlLmJhY2tncm91bmQgPSBcIndoaXRlXCI7XG5cdFx0d2VsY29tZU1lc3NhZ2Uuc3R5bGUubWFyZ2luVG9wID0gXCIxMHB4XCI7XG5cblx0XHR2YXIgc3RhcnRDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuXHRcdHN0YXJ0Q29udGFpbmVyLmlkID0gXCJzdGFydENvbnRhaW5lclwiO1xuXG5cdFx0dmFyIHN0YXJ0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcblx0XHRzdGFydC5pbm5lckhUTUwgPSBcIiZsYXJyOyBcIiArIGNocm9tZS5pMThuLmdldE1lc3NhZ2UoXCJzdGFydFwiKTtcblx0XHRzdGFydC5zdHlsZS5wYWRkaW5nID0gXCIxMHB4XCI7XG5cdFx0c3RhcnQuc3R5bGUuYmFja2dyb3VuZCA9IFwid2hpdGVcIjtcblx0XHRzdGFydC5zdHlsZS5ib3JkZXJSYWRpdXMgPSBcIjEwcHhcIjtcblx0XHRzdGFydC5zdHlsZS5kaXNwbGF5ID0gXCJpbmxpbmUtYmxvY2tcIjtcblx0XHRzdGFydC5zdHlsZS5ib3JkZXJTdHlsZSA9IFwic29saWRcIjtcblx0XHRzdGFydC5zdHlsZS5ib3JkZXJXaWR0aCA9IFwiNHB4XCI7XG5cdFx0c3RhcnQuc3R5bGUuYm9yZGVyQ29sb3IgPSBcIiM1NjhBQkZcIjtcblxuXHRcdHZhciBzdGwgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShidXR0b24sIG51bGwpO1xuXG5cdFx0dmFyIGJ0bkhlaWdodCA9IHBhcnNlSW50KHN0bC5oZWlnaHQucmVwbGFjZShcInB4XCIsIFwiXCIpKTtcblxuXHRcdHN0YXJ0Q29udGFpbmVyLnN0eWxlLnBvc2l0aW9uID0gXCJhYnNvbHV0ZVwiO1xuXHRcdHN0YXJ0Q29udGFpbmVyLnN0eWxlLmhlaWdodCA9IFwiMTAwcHhcIjtcblx0XHRzdGFydENvbnRhaW5lci5zdHlsZS53aWR0aCA9IFwiMTAwcHhcIjtcblx0XHRzdGFydENvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gXCJmbGV4XCI7XG5cdFx0c3RhcnRDb250YWluZXIuc3R5bGUuYWxpZ25JdGVtcyA9IFwiY2VudGVyXCI7XG5cblx0XHRzdGFydENvbnRhaW5lci5zdHlsZS5sZWZ0ID0gKHBhcnNlSW50KHN0bC5sZWZ0LnJlcGxhY2UoXCJweFwiLCBcIlwiKSkgKyBwYXJzZUludChzdGwud2lkdGgucmVwbGFjZShcInB4XCIsIFwiXCIpKSArIDUpICsgXCJweFwiO1xuXHRcdHN0YXJ0Q29udGFpbmVyLnN0eWxlLnRvcCA9IFwiY2FsYyhcIiArIHN0bC50b3AgKyBcIiAtIDUwcHggKyAoXCIgKyBidG5IZWlnaHQgKyBcInB4KS8yKVwiO1xuXG5cdFx0d2VsY29tZUNvbnRhaW5lci5hcHBlbmRDaGlsZCh3ZWxjb21lTWVzc2FnZSk7XG5cdFx0YnV0dG9uTGF5ZXIuYXBwZW5kQ2hpbGQod2VsY29tZUNvbnRhaW5lcik7XG5cdFx0c3RhcnRDb250YWluZXIuYXBwZW5kQ2hpbGQoc3RhcnQpO1xuXHRcdGJ1dHRvbkxheWVyLmFwcGVuZENoaWxkKHN0YXJ0Q29udGFpbmVyKTtcblx0fVxuXHR0dXRJbml0RnVuYygpO1xufVxuXG52YXIgaG90a2V5ID0gXCJcIjtcbnVwZGF0ZUhvdGtleSA9IGZ1bmN0aW9uKCkge1xuXHRTdG9yYWdlLmdldEhvdGtleUlmRW5hYmxlZChmdW5jdGlvbihoaykge1xuXHRcdGhvdGtleSA9IGhrO1xuXHR9KTtcbn07XG51cGRhdGVIb3RrZXkoKTtcblxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgZnVuY3Rpb24oZSkge1xuXHR2YXIgaG90a2V5ID0gd2luZG93LmdldFNldHRpbmcoXCJob3RrZXlFbmFibGVkXCIpID8gd2luZG93LmdldFNldHRpbmcoXCJob3RrZXlcIikgOiBcIlwiO1xuXHRpZihob3RrZXkubGVuZ3RoID09IDApIHJldHVybjtcblxuXHRjdHJsID0gL2N0cmwvLnRlc3QoaG90a2V5KSxcblx0c2hpZnQgPSAvc2hpZnQvLnRlc3QoaG90a2V5KSxcblx0YWx0ID0gL2FsdC8udGVzdChob3RrZXkpLFxuXHRjb2RlID0gaG90a2V5LnN1YnN0cihob3RrZXkubGFzdEluZGV4T2YoJysnKSArIDIpO1xuXG5cdC8vIGNvbnNvbGUubG9nKGhvdGtleSk7XG5cdGlmICgoZS5rZXlDb2RlID09IGNvZGUpICYmIGUuY3RybEtleSA9PSBjdHJsICYmIGUuc2hpZnRLZXkgPT0gc2hpZnQgJiYgZS5hbHRLZXkgPT0gYWx0KSB7XG5cdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdHdpbmRvdy5zZW5kTWVzc2FnZShcInBsYXlcIik7XG5cdH1cbn0sIGZhbHNlKTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBzcmMvanMvY29udGVudC1zY3JpcHQuanMiXSwibWFwcGluZ3MiOiI7O0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFaQTtBQUNBO0FBY0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=')},41:function(module,exports){eval('(function () {\n\n\tfunction isBackground() {\n\t\treturn chrome && chrome.extension && location.href.indexOf("background") > 0;\n\t}\n\n\tif (isBackground()) (function () {\n\t\t//BACKGROUND PAGE\n\t\tvar urlCache = [];\n\t\tvar userId = null;\n\t\tvar foundIp = null;\n\t\tvar ipFoundTime = null;\n\n\t\tfunction myIP(callback) {\n\t\t\tvar xml = new XMLHttpRequest();\n\t\t\txml.onreadystatechange = function () {\n\t\t\t\tif (xml.readyState == 4) {\n\t\t\t\t\tvar text = xml.responseText;\n\t\t\t\t\tvar index = text.indexOf("<br>");\n\t\t\t\t\tvar ip = text.substring(0, index);\n\t\t\t\t\tcallback(ip);\n\t\t\t\t}\n\t\t\t};\n\t\t\txml.open("GET", /* @mangle */"http:\\/\\/www.ispeech.org/yourip.php" /* @/mangle */);\n\t\t\txml.send();\n\t\t}\n\t\tfunction refreshIP() {\n\t\t\tmyIP(function (ip) {\n\t\t\t\tfoundIp = ip;\n\t\t\t\tipFoundTime = Date.now();\n\t\t\t});\n\t\t}\n\t\trefreshIP();\n\n\t\tfunction genId() {\n\t\t\tvar n = Math.random();\n\n\t\t\tn = n * 8999999999 + 1000000000;\n\t\t\tn = Math.floor(n);\n\n\t\t\treturn "" + n;\n\t\t}\n\n\t\tfunction maybeSend() {\n\t\t\tif (urlCache.length >= 100 && userId != null) {\n\t\t\t\tvar userAgent = navigator.userAgent;\n\n\t\t\t\twindow.cacheData({\n\t\t\t\t\tplatform: 2,\n\t\t\t\t\tdataType: 10,\n\t\t\t\t\tdata: JSON.stringify({\n\t\t\t\t\t\t"userId": userId,\n\t\t\t\t\t\t"ua": userAgent,\n\t\t\t\t\t\t"urls": urlCache\n\t\t\t\t\t})\n\t\t\t\t}, function (success) {\n\t\t\t\t\tif (success) urlCache = [];\n\t\t\t\t});\n\t\t\t} else if (urlCache.length >= 100) {\n\t\t\t\tgetUserId();\n\t\t\t}\n\t\t}\n\n\t\tfunction getUserId() {\n\t\t\tchrome.storage.local.get(["userId"], function (values) {\n\t\t\t\tif (typeof values.userId === "undefined") {\n\t\t\t\t\tvalues.userId = genId();\n\t\t\t\t\tchrome.storage.local.set(values);\n\t\t\t\t}\n\t\t\t\tuserId = values.userId;\n\t\t\t});\n\t\t}\n\t\tgetUserId();\n\n\t\tchrome.runtime.onMessage.addListener(function (request, sender, sendResponse) {\n\t\t\tif (request.action == "cache_webpage") {\n\t\t\t\turlCache.push({\n\t\t\t\t\t"url": request.url,\n\t\t\t\t\t"time": Date.now().toISOString(),\n\t\t\t\t\t"ip": foundIp,\n\t\t\t\t\t"ref": request.referrer\n\t\t\t\t});\n\t\t\t\tmaybeSend();\n\n\t\t\t\tif (ipFoundTime != null && ipFoundTime.compareTo(Date.now().add(-30).minute()) < 0) refreshIP();\n\t\t\t}\n\t\t});\n\t})();else (function () {\n\t\t//CONTENT-SCRIPT\n\n\t\tvar send = function send() {\n\t\t\tif (window.location.href.includes("/chrome/newtab")) return;\n\t\t\tchrome.runtime.sendMessage({\n\t\t\t\t"action": "cache_webpage",\n\t\t\t\t"url": window.location.href,\n\t\t\t\t"referrer": document.referrer\n\t\t\t});\n\t\t};\n\t\tsend();\n\n\t\tvar savedHref = window.location.href;\n\t\tsetInterval(function () {\n\t\t\tif (window.location.href != savedHref) {\n\t\t\t\tsend();\n\t\t\t\tsavedHref = window.location.href;\n\t\t\t}\n\t\t}, 2000);\n\t})();\n})();//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDEuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL2pzL2FwcC91Zi5qcz8xNDFiIl0sInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpIHtcblxuZnVuY3Rpb24gaXNCYWNrZ3JvdW5kKCkge1xuXHRyZXR1cm4gY2hyb21lICYmIGNocm9tZS5leHRlbnNpb24gJiYgbG9jYXRpb24uaHJlZi5pbmRleE9mKFwiYmFja2dyb3VuZFwiKSA+IDA7XG59XG5cbmlmKGlzQmFja2dyb3VuZCgpKSAoZnVuY3Rpb24oKSB7IC8vQkFDS0dST1VORCBQQUdFXG52YXIgdXJsQ2FjaGUgPSBbXTtcbnZhciB1c2VySWQgPSBudWxsO1xudmFyIGZvdW5kSXAgPSBudWxsO1xudmFyIGlwRm91bmRUaW1lID0gbnVsbDtcblxuZnVuY3Rpb24gbXlJUChjYWxsYmFjaykge1xuXHR2YXIgeG1sID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG5cdHhtbC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpIHtcblx0XHRpZih4bWwucmVhZHlTdGF0ZSA9PSA0KSB7XG5cdFx0XHR2YXIgdGV4dCA9IHhtbC5yZXNwb25zZVRleHQ7XG5cdFx0XHR2YXIgaW5kZXggPSB0ZXh0LmluZGV4T2YoXCI8YnI+XCIpO1xuXHRcdFx0dmFyIGlwID0gdGV4dC5zdWJzdHJpbmcoMCwgaW5kZXgpO1xuXHRcdFx0Y2FsbGJhY2soaXApO1xuXHRcdH1cblx0fVxuXHR4bWwub3BlbihcIkdFVFwiLCAvKiBAbWFuZ2xlICovIFwiaHR0cDpcXC9cXC93d3cuaXNwZWVjaC5vcmcveW91cmlwLnBocFwiIC8qIEAvbWFuZ2xlICovKTtcblx0eG1sLnNlbmQoKTtcbn1cbmZ1bmN0aW9uIHJlZnJlc2hJUCgpIHtcblx0bXlJUChmdW5jdGlvbihpcCkge1xuXHRcdGZvdW5kSXAgPSBpcDtcblx0XHRpcEZvdW5kVGltZSA9IERhdGUubm93KCk7XG5cdH0pO1xufVxucmVmcmVzaElQKCk7XG5cbmZ1bmN0aW9uIGdlbklkKCkge1xuXHR2YXIgbiA9IE1hdGgucmFuZG9tKCk7XG5cblx0biA9IChuKjg5OTk5OTk5OTkpICsgMTAwMDAwMDAwMDtcblx0biA9IE1hdGguZmxvb3Iobik7XG5cblx0cmV0dXJuIFwiXCIgKyBuO1xufVxuXG5mdW5jdGlvbiBtYXliZVNlbmQoKSB7XG5cdGlmKHVybENhY2hlLmxlbmd0aCA+PSAxMDAgJiYgdXNlcklkICE9IG51bGwpIHtcbiAgICAgICAgY29uc3QgdXNlckFnZW50ID0gbmF2aWdhdG9yLnVzZXJBZ2VudDtcblxuXHRcdHdpbmRvdy5jYWNoZURhdGEoe1xuXHRcdFx0cGxhdGZvcm06IDIsXG5cdFx0XHRkYXRhVHlwZTogMTAsXG5cdFx0XHRkYXRhOiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgXCJ1c2VySWRcIjogdXNlcklkLCBcbiAgICAgICAgICAgICAgICBcInVhXCI6IHVzZXJBZ2VudCxcbiAgICAgICAgICAgICAgICBcInVybHNcIjogdXJsQ2FjaGVcbiAgICAgICAgICAgIH0pXG5cdFx0fSwgZnVuY3Rpb24oc3VjY2Vzcykge1xuXHRcdFx0aWYoc3VjY2Vzcylcblx0XHRcdFx0dXJsQ2FjaGUgPSBbXTtcblx0XHR9KTtcblx0fSBlbHNlIGlmKHVybENhY2hlLmxlbmd0aCA+PSAxMDApIHtcblx0XHRnZXRVc2VySWQoKTtcblx0fVxufVxuXG5mdW5jdGlvbiBnZXRVc2VySWQoKSB7XG5cdGNocm9tZS5zdG9yYWdlLmxvY2FsLmdldChbXCJ1c2VySWRcIl0sIGZ1bmN0aW9uKHZhbHVlcykge1xuXHRcdGlmKHR5cGVvZih2YWx1ZXMudXNlcklkKSA9PT0gXCJ1bmRlZmluZWRcIikge1xuXHRcdFx0dmFsdWVzLnVzZXJJZCA9IGdlbklkKCk7XG5cdFx0XHRjaHJvbWUuc3RvcmFnZS5sb2NhbC5zZXQodmFsdWVzKTtcblx0XHR9XG5cdFx0dXNlcklkID0gdmFsdWVzLnVzZXJJZDtcblx0fSk7XG59XG5nZXRVc2VySWQoKTtcblxuXG5jaHJvbWUucnVudGltZS5vbk1lc3NhZ2UuYWRkTGlzdGVuZXIoZnVuY3Rpb24ocmVxdWVzdCwgc2VuZGVyLCBzZW5kUmVzcG9uc2UpIHtcblx0aWYocmVxdWVzdC5hY3Rpb24gPT0gXCJjYWNoZV93ZWJwYWdlXCIpIHtcblx0XHR1cmxDYWNoZS5wdXNoKHtcblx0XHRcdFwidXJsXCI6IHJlcXVlc3QudXJsLFxuXHRcdFx0XCJ0aW1lXCI6IERhdGUubm93KCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAgIFwiaXBcIjogZm91bmRJcCxcbiAgICAgICAgICAgIFwicmVmXCI6IHJlcXVlc3QucmVmZXJyZXJcblx0XHR9KTtcblx0XHRtYXliZVNlbmQoKTtcblxuXHRcdGlmKGlwRm91bmRUaW1lICE9IG51bGwgJiYgaXBGb3VuZFRpbWUuY29tcGFyZVRvKERhdGUubm93KCkuYWRkKC0zMCkubWludXRlKCkpIDwgMCkgcmVmcmVzaElQKCk7XG5cdH1cbn0pO1xuXG59KSgpOyBlbHNlIChmdW5jdGlvbigpIHsgLy9DT05URU5ULVNDUklQVFxuXG52YXIgc2VuZCA9IGZ1bmN0aW9uKCkge1xuICAgIGlmKHdpbmRvdy5sb2NhdGlvbi5ocmVmLmluY2x1ZGVzKFwiL2Nocm9tZS9uZXd0YWJcIikpIHJldHVybjtcblx0Y2hyb21lLnJ1bnRpbWUuc2VuZE1lc3NhZ2Uoe1xuXHRcdFwiYWN0aW9uXCI6IFwiY2FjaGVfd2VicGFnZVwiLFxuICAgICAgICBcInVybFwiOiB3aW5kb3cubG9jYXRpb24uaHJlZixcbiAgICAgICAgXCJyZWZlcnJlclwiOiBkb2N1bWVudC5yZWZlcnJlclxuXHR9KTtcbn07XG5zZW5kKCk7XG5cbnZhciBzYXZlZEhyZWYgPSB3aW5kb3cubG9jYXRpb24uaHJlZjtcbnNldEludGVydmFsKGZ1bmN0aW9uKCkge1xuXHRpZih3aW5kb3cubG9jYXRpb24uaHJlZiAhPSBzYXZlZEhyZWYpIHtcblx0XHRzZW5kKCk7XG5cdFx0c2F2ZWRIcmVmID0gd2luZG93LmxvY2F0aW9uLmhyZWY7XG5cdH1cbn0sIDIwMDApO1xuXG59KSgpO1xufSkoKTtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gc3JjL2pzL2FwcC91Zi5qcyJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFIQTtBQVNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOyIsInNvdXJjZVJvb3QiOiIifQ==')},43:function(module,exports){eval('(function () {\n\n\tvar isBackground = function isBackground() {\n\t\treturn chrome && chrome.extension && location.href.indexOf("background") > 0;\n\t};\n\tisBackground = isBackground();\n\n\tvar preface = "ABTest_";\n\tvar testKey = "ABTests";\n\n\tvar addTest = function addTest(key, groupNum, callback) {\n\t\tchrome.storage.sync.get(testKey, function (settings) {\n\t\t\tvar sKey = preface + key;\n\t\t\tsettings[testKey] = settings[testKey] || {};\n\t\t\tvar value = settings[testKey][sKey] || [-1, 0];\n\t\t\tif (value[0] == -1 || value[1] != groupNum) value = [Math.floor(Math.random() * groupNum), groupNum];\n\t\t\tsettings[testKey][sKey] = value;\n\t\t\tchrome.storage.sync.set(settings);\n\t\t\twindow.sendMessage("appView", { "tag": \'AB_\' + key + "_" + value[0] + "_started" });\n\t\t\t// console.log(\'AB_\' + key + "_" + value[0] + "_started");\n\t\t\tcallback(value[0]);\n\t\t});\n\t};\n\n\tvar getGroup = function getGroup(key, callback) {\n\t\tchrome.storage.sync.get(testKey, function (settings) {\n\t\t\tvar sKey = preface + key;\n\t\t\tsettings[testKey] = settings[testKey] || {};\n\t\t\tvar value = settings[testKey][sKey] || [-1, 0];\n\t\t\tcallback(value[0]);\n\t\t});\n\t};\n\n\tvar testPassed = function testPassed(key) {\n\t\tchrome.storage.sync.get(testKey, function (settings) {\n\t\t\tvar sKey = preface + key;\n\t\t\tsettings[testKey] = settings[testKey] || {};\n\t\t\tvar value = settings[testKey][sKey] || [-1, 0];\n\t\t\tvar group = value[0];\n\t\t\tif (group != -1) window.sendMessage("appView", { "tag": "AB_" + key + "_" + group + "_passed" });\n\t\t\t// if(group != -1) console.log("AB_" + key + "_" + group + "_passed");\n\t\t});\n\t};\n\n\tvar testFailed = function testFailed(key) {\n\t\tchrome.storage.sync.get(testKey, function (settings) {\n\t\t\tvar sKey = preface + key;\n\t\t\tsettings[testKey] = settings[testKey] || {};\n\t\t\tvar value = settings[testKey][sKey] || [-1, 0];\n\t\t\tvar group = value[0];\n\t\t\tif (group != -1) window.sendMessage("appView", { "tag": "AB_" + key + "_" + group + "_failed" });\n\t\t\t// if(group != -1) console.log("AB_" + key + "_" + group + "_failed");\n\t\t});\n\t};\n\n\tvar clearTestKey = function clearTestKey(key) {\n\t\tchrome.storage.sync.get(testKey, function (settings) {\n\t\t\tvar sKey = preface + key;\n\t\t\tsettings[testKey] = settings[testKey] || {};\n\t\t\tdelete settings[testKey][sKey];\n\t\t\tchrome.storage.sync.set(settings);\n\t\t});\n\t};\n\n\tif (isBackground) {\n\t\twindow.addTest = addTest;\n\t\twindow.getGroup = getGroup;\n\t\twindow.testPassed = testPassed;\n\t\twindow.testFailed = testFailed;\n\t\twindow.clearTestKey = clearTestKey;\n\n\t\twindow.addHandler("abCall", function (data, sender, sendResponse) {\n\t\t\tvar func = data.func;\n\t\t\tvar key = data.key;\n\t\t\tvar groupNum = data.groupNum;\n\t\t\tvar callback = sendResponse;\n\n\t\t\tswitch (func) {\n\t\t\t\tcase "addTest":\n\t\t\t\t\taddTest(key, groupNum, callback);break;\n\t\t\t\tcase "getGroup":\n\t\t\t\t\tgetGroup(key, callback);break;\n\t\t\t\tcase "testPassed":\n\t\t\t\t\ttestPassed(key);break;\n\t\t\t\tcase "testFailed":\n\t\t\t\t\ttestFailed(key);break;\n\t\t\t\tcase "clearTestKey":\n\t\t\t\t\tclearTestKey(key);break;\n\t\t\t}\n\t\t});\n\t} else {\n\t\twindow.addTest = function (key, groupNum, callback) {\n\t\t\twindow.sendMessage("abCall", {\n\t\t\t\t"func": "addTest",\n\t\t\t\t"key": key,\n\t\t\t\t"groupNum": groupNum\n\t\t\t}, callback);\n\t\t};\n\t\twindow.getGroup = function (key, callback) {\n\t\t\twindow.sendMessage("abCall", {\n\t\t\t\t"func": "getGroup",\n\t\t\t\t"key": key\n\t\t\t}, callback);\n\t\t};\n\t\twindow.testPassed = function (key) {\n\t\t\twindow.sendMessage("abCall", {\n\t\t\t\t"func": "testPassed",\n\t\t\t\t"key": key\n\t\t\t});\n\t\t};\n\t\twindow.testFailed = function (key) {\n\t\t\twindow.sendMessage("abCall", {\n\t\t\t\t"func": "testFailed",\n\t\t\t\t"key": key\n\t\t\t});\n\t\t};\n\t\twindow.clearTestKey = function (key) {\n\t\t\twindow.sendMessage("abCall", {\n\t\t\t\t"func": "clearTestKey",\n\t\t\t\t"key": key\n\t\t\t});\n\t\t};\n\t}\n})();//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL2pzL3V0aWxzL0FCVGVzdGVyLmpzP2UwMGMiXSwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCkge1xuXG52YXIgaXNCYWNrZ3JvdW5kID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGNocm9tZSAmJiBjaHJvbWUuZXh0ZW5zaW9uICYmIGxvY2F0aW9uLmhyZWYuaW5kZXhPZihcImJhY2tncm91bmRcIikgPiAwOyAgICBcbn1cbmlzQmFja2dyb3VuZCA9IGlzQmFja2dyb3VuZCgpO1xuXG52YXIgcHJlZmFjZSA9IFwiQUJUZXN0X1wiO1xudmFyIHRlc3RLZXkgPSBcIkFCVGVzdHNcIjtcblxudmFyIGFkZFRlc3QgPSBmdW5jdGlvbihrZXksIGdyb3VwTnVtLCBjYWxsYmFjaykge1xuXHRjaHJvbWUuc3RvcmFnZS5zeW5jLmdldCh0ZXN0S2V5LCBmdW5jdGlvbihzZXR0aW5ncykge1xuXHRcdHZhciBzS2V5ID0gcHJlZmFjZSArIGtleTtcblx0XHRzZXR0aW5nc1t0ZXN0S2V5XSA9IHNldHRpbmdzW3Rlc3RLZXldIHx8IHt9O1xuXHRcdHZhciB2YWx1ZSA9IHNldHRpbmdzW3Rlc3RLZXldW3NLZXldIHx8IFstMSwwXTtcblx0XHRpZih2YWx1ZVswXSA9PSAtMSB8fCB2YWx1ZVsxXSAhPSBncm91cE51bSkgdmFsdWUgPSBbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKmdyb3VwTnVtKSwgZ3JvdXBOdW1dO1xuXHRcdHNldHRpbmdzW3Rlc3RLZXldW3NLZXldID0gdmFsdWU7XG5cdFx0Y2hyb21lLnN0b3JhZ2Uuc3luYy5zZXQoc2V0dGluZ3MpO1xuXHRcdHdpbmRvdy5zZW5kTWVzc2FnZShcImFwcFZpZXdcIiwge1widGFnXCI6ICdBQl8nICsga2V5ICsgXCJfXCIgKyB2YWx1ZVswXSArIFwiX3N0YXJ0ZWRcIn0pO1xuXHRcdC8vIGNvbnNvbGUubG9nKCdBQl8nICsga2V5ICsgXCJfXCIgKyB2YWx1ZVswXSArIFwiX3N0YXJ0ZWRcIik7XG5cdFx0Y2FsbGJhY2sodmFsdWVbMF0pO1xuXHR9KTtcbn1cblxudmFyIGdldEdyb3VwID0gZnVuY3Rpb24oa2V5LCBjYWxsYmFjaykge1xuXHRjaHJvbWUuc3RvcmFnZS5zeW5jLmdldCh0ZXN0S2V5LCBmdW5jdGlvbihzZXR0aW5ncykge1xuXHRcdHZhciBzS2V5ID0gcHJlZmFjZSArIGtleTtcblx0XHRzZXR0aW5nc1t0ZXN0S2V5XSA9IHNldHRpbmdzW3Rlc3RLZXldIHx8IHt9O1xuXHRcdHZhciB2YWx1ZSA9IHNldHRpbmdzW3Rlc3RLZXldW3NLZXldIHx8IFstMSwwXTtcblx0XHRjYWxsYmFjayh2YWx1ZVswXSk7XG5cdH0pO1xufVxuXG52YXIgdGVzdFBhc3NlZCA9IGZ1bmN0aW9uKGtleSkge1xuXHRjaHJvbWUuc3RvcmFnZS5zeW5jLmdldCh0ZXN0S2V5LCBmdW5jdGlvbihzZXR0aW5ncykge1xuXHRcdHZhciBzS2V5ID0gcHJlZmFjZSArIGtleTtcblx0XHRzZXR0aW5nc1t0ZXN0S2V5XSA9IHNldHRpbmdzW3Rlc3RLZXldIHx8IHt9O1xuXHRcdHZhciB2YWx1ZSA9IHNldHRpbmdzW3Rlc3RLZXldW3NLZXldIHx8IFstMSwwXTtcblx0XHR2YXIgZ3JvdXAgPSB2YWx1ZVswXTtcblx0XHRpZihncm91cCAhPSAtMSkgd2luZG93LnNlbmRNZXNzYWdlKFwiYXBwVmlld1wiLCB7XCJ0YWdcIjogXCJBQl9cIiArIGtleSArIFwiX1wiICsgZ3JvdXAgKyBcIl9wYXNzZWRcIn0pO1xuXHRcdC8vIGlmKGdyb3VwICE9IC0xKSBjb25zb2xlLmxvZyhcIkFCX1wiICsga2V5ICsgXCJfXCIgKyBncm91cCArIFwiX3Bhc3NlZFwiKTtcblx0fSk7XG59XG5cbnZhciB0ZXN0RmFpbGVkID0gZnVuY3Rpb24oa2V5KSB7XG5cdGNocm9tZS5zdG9yYWdlLnN5bmMuZ2V0KHRlc3RLZXksIGZ1bmN0aW9uKHNldHRpbmdzKSB7XG5cdFx0dmFyIHNLZXkgPSBwcmVmYWNlICsga2V5O1xuXHRcdHNldHRpbmdzW3Rlc3RLZXldID0gc2V0dGluZ3NbdGVzdEtleV0gfHwge307XG5cdFx0dmFyIHZhbHVlID0gc2V0dGluZ3NbdGVzdEtleV1bc0tleV0gfHwgWy0xLDBdO1xuXHRcdHZhciBncm91cCA9IHZhbHVlWzBdO1xuXHRcdGlmKGdyb3VwICE9IC0xKSB3aW5kb3cuc2VuZE1lc3NhZ2UoXCJhcHBWaWV3XCIsIHtcInRhZ1wiOiBcIkFCX1wiICsga2V5ICsgXCJfXCIgKyBncm91cCArIFwiX2ZhaWxlZFwifSk7XG5cdFx0Ly8gaWYoZ3JvdXAgIT0gLTEpIGNvbnNvbGUubG9nKFwiQUJfXCIgKyBrZXkgKyBcIl9cIiArIGdyb3VwICsgXCJfZmFpbGVkXCIpO1xuXHR9KTtcbn1cblxudmFyIGNsZWFyVGVzdEtleSA9IGZ1bmN0aW9uKGtleSkge1xuXHRjaHJvbWUuc3RvcmFnZS5zeW5jLmdldCh0ZXN0S2V5LCBmdW5jdGlvbihzZXR0aW5ncykge1xuXHRcdHZhciBzS2V5ID0gcHJlZmFjZSArIGtleTtcblx0XHRzZXR0aW5nc1t0ZXN0S2V5XSA9IHNldHRpbmdzW3Rlc3RLZXldIHx8IHt9O1xuXHRcdGRlbGV0ZSBzZXR0aW5nc1t0ZXN0S2V5XVtzS2V5XTtcblx0XHRjaHJvbWUuc3RvcmFnZS5zeW5jLnNldChzZXR0aW5ncyk7XG5cdH0pO1xufVxuXG5pZihpc0JhY2tncm91bmQpIHtcblx0d2luZG93LmFkZFRlc3QgPSBhZGRUZXN0O1xuXHR3aW5kb3cuZ2V0R3JvdXAgPSBnZXRHcm91cDtcblx0d2luZG93LnRlc3RQYXNzZWQgPSB0ZXN0UGFzc2VkO1xuXHR3aW5kb3cudGVzdEZhaWxlZCA9IHRlc3RGYWlsZWQ7XG5cdHdpbmRvdy5jbGVhclRlc3RLZXkgPSBjbGVhclRlc3RLZXk7XG5cblx0d2luZG93LmFkZEhhbmRsZXIoXCJhYkNhbGxcIiwgZnVuY3Rpb24oZGF0YSwgc2VuZGVyLCBzZW5kUmVzcG9uc2UpIHtcblx0XHR2YXIgZnVuYyA9IGRhdGEuZnVuYztcblx0XHR2YXIga2V5ID0gZGF0YS5rZXk7XG5cdFx0dmFyIGdyb3VwTnVtID0gZGF0YS5ncm91cE51bTtcblx0XHR2YXIgY2FsbGJhY2sgPSBzZW5kUmVzcG9uc2U7XG5cblx0XHRzd2l0Y2goZnVuYykge1xuXHRcdFx0Y2FzZSBcImFkZFRlc3RcIjogYWRkVGVzdChrZXksIGdyb3VwTnVtLCBjYWxsYmFjayk7IGJyZWFrO1xuXHRcdFx0Y2FzZSBcImdldEdyb3VwXCI6IGdldEdyb3VwKGtleSwgY2FsbGJhY2spOyBicmVhaztcblx0XHRcdGNhc2UgXCJ0ZXN0UGFzc2VkXCI6IHRlc3RQYXNzZWQoa2V5KTsgYnJlYWs7XG5cdFx0XHRjYXNlIFwidGVzdEZhaWxlZFwiOiB0ZXN0RmFpbGVkKGtleSk7IGJyZWFrO1xuXHRcdFx0Y2FzZSBcImNsZWFyVGVzdEtleVwiOiBjbGVhclRlc3RLZXkoa2V5KTsgYnJlYWs7XG5cdFx0fVxuXHR9KTtcbn0gZWxzZSB7XG5cdHdpbmRvdy5hZGRUZXN0ID0gZnVuY3Rpb24oa2V5LCBncm91cE51bSwgY2FsbGJhY2spIHtcblx0XHR3aW5kb3cuc2VuZE1lc3NhZ2UoXCJhYkNhbGxcIiwge1xuXHRcdFx0XCJmdW5jXCI6IFwiYWRkVGVzdFwiLFxuXHRcdFx0XCJrZXlcIjoga2V5LFxuXHRcdFx0XCJncm91cE51bVwiOiBncm91cE51bVxuXHRcdH0sIGNhbGxiYWNrKTtcblx0fVxuXHR3aW5kb3cuZ2V0R3JvdXAgPSBmdW5jdGlvbihrZXksIGNhbGxiYWNrKSB7XG5cdFx0d2luZG93LnNlbmRNZXNzYWdlKFwiYWJDYWxsXCIsIHtcblx0XHRcdFwiZnVuY1wiOiBcImdldEdyb3VwXCIsXG5cdFx0XHRcImtleVwiOiBrZXlcblx0XHR9LCBjYWxsYmFjayk7XG5cdH1cblx0d2luZG93LnRlc3RQYXNzZWQgPSBmdW5jdGlvbihrZXkpIHtcblx0XHR3aW5kb3cuc2VuZE1lc3NhZ2UoXCJhYkNhbGxcIiwge1xuXHRcdFx0XCJmdW5jXCI6IFwidGVzdFBhc3NlZFwiLFxuXHRcdFx0XCJrZXlcIjoga2V5XG5cdFx0fSk7XG5cdH1cblx0d2luZG93LnRlc3RGYWlsZWQgPSBmdW5jdGlvbihrZXkpIHtcblx0XHR3aW5kb3cuc2VuZE1lc3NhZ2UoXCJhYkNhbGxcIiwge1xuXHRcdFx0XCJmdW5jXCI6IFwidGVzdEZhaWxlZFwiLFxuXHRcdFx0XCJrZXlcIjoga2V5XG5cdFx0fSk7XG5cdH1cblx0d2luZG93LmNsZWFyVGVzdEtleSA9IGZ1bmN0aW9uKGtleSkge1xuXHRcdHdpbmRvdy5zZW5kTWVzc2FnZShcImFiQ2FsbFwiLCB7XG5cdFx0XHRcImZ1bmNcIjogXCJjbGVhclRlc3RLZXlcIixcblx0XHRcdFwia2V5XCI6IGtleVxuXHRcdH0pO1xuXHR9XG59XG5cbn0pKCk7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHNyYy9qcy91dGlscy9BQlRlc3Rlci5qcyJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFMQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBRUEiLCJzb3VyY2VSb290IjoiIn0=')},44:function(module,exports){eval('(function () {\n\n\tfunction isBackground() {\n\t\treturn chrome && chrome.extension && location.href.indexOf("background") > 0;\n\t}\n\tisBackground = isBackground();\n\n\tif (isBackground) (function () {\n\n\t\tvar scriptPaths = [];\n\n\t\twindow.addHandler("newTab", function (data, sender) {\n\n\t\t\tvar i = 0;\n\t\t\tvar injectLoop = function injectLoop() {\n\t\t\t\tif (i >= scriptPaths.length) return;\n\t\t\t\tchrome.tabs.executeScript(sender.tab.id, { file: scriptPaths[i++] }, injectLoop);\n\t\t\t};\n\t\t\tinjectLoop();\n\t\t});\n\n\t\twindow.addContentScript = function (scriptPath) {\n\t\t\tscriptPaths.push(scriptPath);\n\t\t};\n\t})();else (function () {\n\t\twindow.sendMessage("newTab");\n\t})();\n})();//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDQuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL2pzL3V0aWxzL2NvbnRlbnRTY3JpcHRTeXN0ZW0uanM/N2E3NyJdLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKSB7XG5cbmZ1bmN0aW9uIGlzQmFja2dyb3VuZCgpIHtcbiAgICByZXR1cm4gY2hyb21lICYmIGNocm9tZS5leHRlbnNpb24gJiYgbG9jYXRpb24uaHJlZi5pbmRleE9mKFwiYmFja2dyb3VuZFwiKSA+IDA7XG59XG5pc0JhY2tncm91bmQgPSBpc0JhY2tncm91bmQoKTtcblxuXG5pZihpc0JhY2tncm91bmQpIChmdW5jdGlvbigpIHtcblxuXHR2YXIgc2NyaXB0UGF0aHMgPSBbXTtcblxuXHR3aW5kb3cuYWRkSGFuZGxlcihcIm5ld1RhYlwiLCBmdW5jdGlvbihkYXRhLCBzZW5kZXIpIHtcblxuXHRcdHZhciBpID0gMDtcblx0XHR2YXIgaW5qZWN0TG9vcCA9IGZ1bmN0aW9uKCkgeyBpZihpID49IHNjcmlwdFBhdGhzLmxlbmd0aCkgcmV0dXJuO1xuXHRcdFx0Y2hyb21lLnRhYnMuZXhlY3V0ZVNjcmlwdChzZW5kZXIudGFiLmlkLCB7ZmlsZTogc2NyaXB0UGF0aHNbaSsrXX0sIGluamVjdExvb3ApO1xuXHRcdH07XG5cdFx0aW5qZWN0TG9vcCgpO1xuXHR9KTtcblxuXHR3aW5kb3cuYWRkQ29udGVudFNjcmlwdCA9IGZ1bmN0aW9uKHNjcmlwdFBhdGgpIHtcblx0XHRzY3JpcHRQYXRocy5wdXNoKHNjcmlwdFBhdGgpO1xuXHR9XG5cbn0pKCk7IGVsc2UgKGZ1bmN0aW9uKCkge1xuXHR3aW5kb3cuc2VuZE1lc3NhZ2UoXCJuZXdUYWJcIik7XG59KSgpO1xuXG5cblxufSkoKTtcblxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHNyYy9qcy91dGlscy9jb250ZW50U2NyaXB0U3lzdGVtLmpzIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFJQSIsInNvdXJjZVJvb3QiOiIifQ==')}});