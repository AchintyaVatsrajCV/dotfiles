/*! For license information please see background.js.LICENSE.txt */
(()=>{var t={6987:(t,e,n)=>{"use strict";n.d(e,{Z:()=>w});var r=function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},r.apply(this,arguments)};Object.create,Object.create;var i,o,s=n(4850),a=n(2604),u=n(100),c=((i={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",i["bad-app-name"]="Illegal App name: '{$appName}",i["duplicate-app"]="Firebase App named '{$appName}' already exists",i["app-deleted"]="Firebase App named '{$appName}' already deleted",i["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",i["invalid-log-argument"]="First argument to `onLog` must be null or a function.",i),h=new s.LL("app","Firebase",c),l="@firebase/app",f="[DEFAULT]",p=((o={})[l]="fire-core",o["@firebase/analytics"]="fire-analytics",o["@firebase/app-check"]="fire-app-check",o["@firebase/auth"]="fire-auth",o["@firebase/database"]="fire-rtdb",o["@firebase/functions"]="fire-fn",o["@firebase/installations"]="fire-iid",o["@firebase/messaging"]="fire-fcm",o["@firebase/performance"]="fire-perf",o["@firebase/remote-config"]="fire-rc",o["@firebase/storage"]="fire-gcs",o["@firebase/firestore"]="fire-fst",o["fire-js"]="fire-js",o["firebase-wrapper"]="fire-js-all",o),d=new u.Yd("@firebase/app"),g=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=(0,s.p$)(t),this.container=new a.H0(e.name),this._addComponent(new a.wA("app",(function(){return r}),"PUBLIC")),this.firebase_.INTERNAL.components.forEach((function(t){return r._addComponent(t)}))}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){var n;void 0===e&&(e=f),this.checkDestroyed_();var r=this.container.getProvider(t);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=f),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){d.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw h.create("app-deleted",{appName:this.name_})},t}();g.prototype.name&&g.prototype.options||g.prototype.delete||console.log("dc");var v=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=f);var a=o.name;if("string"!=typeof a||!a)throw h.create("bad-app-name",{appName:String(a)});if((0,s.r3)(e,a))throw h.create("duplicate-app",{appName:a});var u=new t(n,o,r);return e[a]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=p[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),u=e.match(/\s|\//);if(s||u){var c=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&c.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&u&&c.push("and"),u&&c.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void d.warn(c.join(" "))}o(new a.wA(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:u.Ub,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw h.create("invalid-log-argument");(0,u.Am)(t,e)},apps:null,SDK_VERSION:"8.10.0",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(t=t||f,!(0,s.r3)(e,t))throw h.create("no-app",{appName:t});return e[t]}function o(o){var a=o.name;if(n.has(a))return d.debug("There were multiple attempts to register component "+a+"."),"PUBLIC"===o.type?r[a]:null;if(n.set(a,o),"PUBLIC"===o.type){var u=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[a])throw h.create("invalid-app-argument",{appName:a});return t[a]()};void 0!==o.serviceProps&&(0,s.ZB)(u,o.serviceProps),r[a]=u,t.prototype[a]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,a).apply(this,o.multipleInstances?t:[])}}for(var c=0,l=Object.keys(e);c<l.length;c++){var f=l[c];e[f]._addComponent(o)}return"PUBLIC"===o.type?r[a]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}(g);return e.INTERNAL=r(r({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){(0,s.ZB)(e,t)},createSubscribe:s.ne,ErrorFactory:s.LL,deepExtend:s.ZB}),e}(),m=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();if((0,s.jU)()&&void 0!==self.firebase){d.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var y=self.firebase.SDK_VERSION;y&&y.indexOf("LITE")>=0&&d.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var _=v.initializeApp;v.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,s.UG)()&&d.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),_.apply(void 0,t)};var b=v;!function(t,e){t.INTERNAL.registerComponent(new a.wA("platform-logger",(function(t){return new m(t)}),"PRIVATE")),t.registerVersion(l,"0.6.30",void 0),t.registerVersion("fire-js","")}(b);const w=b},2604:(t,e,n)=>{"use strict";function r(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function i(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function o(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}n.d(e,{wA:()=>a,H0:()=>h,zt:()=>c}),Object.create,Object.create;var s=n(4850),a=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),u="[DEFAULT]",c=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return t.prototype.get=function(t){var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new s.BH;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(t){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e,n=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),r=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(t){if(r)return null;throw t}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:u})}catch(t){}try{for(var o=r(this.instancesDeferred.entries()),s=o.next();!s.done;s=o.next()){var a=i(s.value,2),c=a[0],h=a[1],l=this.normalizeInstanceIdentifier(c);try{var f=this.getOrInitializeService({instanceIdentifier:l});h.resolve(f)}catch(t){}}}catch(t){e={error:t}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t=u),this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return t=this,e=void 0,r=function(){var t;return function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(o(o([],i(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})))),i(t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()})))))];case 1:return e.sent(),[2]}}))},new((n=void 0)||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}));var t,e,n,r},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=u),this.instances.has(t)},t.prototype.getOptions=function(t){return void 0===t&&(t=u),this.instancesOptions.get(t)||{}},t.prototype.initialize=function(t){var e,n;void 0===t&&(t={});var o=t.options,s=void 0===o?{}:o,a=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(a))throw Error(this.name+"("+a+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var u=this.getOrInitializeService({instanceIdentifier:a,options:s});try{for(var c=r(this.instancesDeferred.entries()),h=c.next();!h.done;h=c.next()){var l=i(h.value,2),f=l[0],p=l[1];a===this.normalizeInstanceIdentifier(f)&&p.resolve(u)}}catch(t){e={error:t}}finally{try{h&&!h.done&&(n=c.return)&&n.call(c)}finally{if(e)throw e.error}}return u},t.prototype.onInit=function(t,e){var n,r=this.normalizeInstanceIdentifier(e),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(t),this.onInitCallbacks.set(r,i);var o=this.instances.get(r);return o&&t(o,r),function(){i.delete(t)}},t.prototype.invokeOnInitCallbacks=function(t,e){var n,i,o=this.onInitCallbacks.get(e);if(o)try{for(var s=r(o),a=s.next();!a.done;a=s.next()){var u=a.value;try{u(t,e)}catch(t){}}}catch(t){n={error:t}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,e===u?void 0:e),options:i}),this.instances.set(n,o),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(o,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch(t){}return o||null},t.prototype.normalizeInstanceIdentifier=function(t){return void 0===t&&(t=u),this.component?this.component.multipleInstances?t:u:t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}(),h=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new c(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},3003:(t,e,n)=>{"use strict";var r=n(6987),i=n(2604),o=n(4850),s=function(t,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},s(t,e)};function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var u=function(){return u=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},u.apply(this,arguments)};function c(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function h(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function l(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}Object.create,Object.create;var f=n(100);t=n.hmd(t);var p="";function d(t){p=t}var g,v=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),(0,o.Pz)(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:(0,o.cI)(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),m=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return(0,o.r3)(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),y=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new v(e)}}catch(t){}return new m},_=y("localStorage"),b=y("sessionStorage"),w=new f.Yd("@firebase/database"),I=(g=1,function(){return g++}),E=function(t){var e=(0,o.dS)(t),n=new o.gQ;n.update(e);var r=n.digest();return o.US.encodeByteArray(r)},T=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var i=t[r];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?n+=T.apply(null,i):n+="object"==typeof i?(0,o.Pz)(i):i,n+=" "}return n},A=null,S=!0,k=function(t,e){(0,o.hu)(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(w.logLevel=f.in.VERBOSE,A=w.log.bind(w),e&&b.set("logging_enabled",!0)):"function"==typeof t?A=t:(A=null,b.remove("logging_enabled"))},N=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===S&&(S=!1,null===A&&!0===b.get("logging_enabled")&&k(!0)),A){var n=T.apply(null,t);A(n)}},C=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];N.apply(void 0,l([t],h(e)))}},O=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+T.apply(void 0,l([],h(t)));w.error(n)},x=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+T.apply(void 0,l([],h(t)));throw w.error(n),new Error(n)},R=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+T.apply(void 0,l([],h(t)));w.warn(n)},D=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},P="[MIN_NAME]",L="[MAX_NAME]",M=function(t,e){if(t===e)return 0;if(t===P||e===L)return-1;if(e===P||t===L)return 1;var n=H(t),r=H(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},U=function(t,e){return t===e?0:t<e?-1:1},F=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+(0,o.Pz)(e))},j=function(t){if("object"!=typeof t||null===t)return(0,o.Pz)(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r="{",i=0;i<e.length;i++)0!==i&&(r+=","),r+=(0,o.Pz)(e[i]),r+=":",r+=j(t[e[i]]);return r+"}"},q=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function B(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}var V=function(t){(0,o.hu)(!D(t),"Invalid JSON number");var e,n,r,i,s;0===t?(n=0,r=0,e=1/t==-1/0?1:0):(e=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,r=Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(t/Math.pow(2,-1074))));var a=[];for(s=52;s;s-=1)a.push(r%2?1:0),r=Math.floor(r/2);for(s=11;s;s-=1)a.push(n%2?1:0),n=Math.floor(n/2);a.push(e?1:0),a.reverse();var u=a.join(""),c="";for(s=0;s<64;s+=8){var h=parseInt(u.substr(s,8),2).toString(16);1===h.length&&(h="0"+h),c+=h}return c.toLowerCase()},G=new RegExp("^-?(0*)\\d{1,10}$"),H=function(t){if(G.test(t)){var e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},W=function(t){try{t()}catch(t){setTimeout((function(){var e=t.stack||"";throw R("Exception was thrown by user callback.",e),t}),Math.floor(0))}},z=function(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n},K=function(){function t(t,e){var n=this;this.appName_=t,this.appCheckProvider=e,this.appCheck=null==e?void 0:e.getImmediate({optional:!0}),this.appCheck||null==e||e.get().then((function(t){return n.appCheck=t}))}return t.prototype.getToken=function(t){var e=this;return this.appCheck?this.appCheck.getToken(t):new Promise((function(n,r){setTimeout((function(){e.appCheck?e.getToken(t).then(n,r):n(null)}),0)}))},t.prototype.addTokenChangeListener=function(t){var e;null===(e=this.appCheckProvider)||void 0===e||e.get().then((function(e){return e.addTokenListener(t)}))},t.prototype.notifyForInvalidToken=function(){R('Provided AppCheck credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly.')},t}(),$=function(){function t(t,e,n){var r=this;this.appName_=t,this.firebaseOptions_=e,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit((function(t){return r.auth_=t}))}return t.prototype.getToken=function(t){var e=this;return this.auth_?this.auth_.getToken(t).catch((function(t){return t&&"auth/token-not-initialized"===t.code?(N("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)})):new Promise((function(n,r){setTimeout((function(){e.auth_?e.getToken(t).then(n,r):n(null)}),0)}))},t.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then((function(e){return e.addAuthTokenListener(t)}))},t.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then((function(e){return e.removeAuthTokenListener(t)}))},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',R(t)},t}(),Y=function(){function t(t){this.accessToken=t}return t.prototype.getToken=function(t){return Promise.resolve({accessToken:this.accessToken})},t.prototype.addTokenChangeListener=function(t){t(this.accessToken)},t.prototype.removeTokenChangeListener=function(t){},t.prototype.notifyForInvalidToken=function(){},t.OWNER="owner",t}(),Q=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,X="websocket",J="long_polling",Z=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===s&&(s=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=_.get("host:"+t)||this._host}return t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain},Object.defineProperty(t.prototype,"host",{get:function(){return this._host},set:function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&_.set("host:"+this._host,this.internalHost))},enumerable:!1,configurable:!0}),t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){var t=this.secure?"https://":"http://",e=this.includeNamespaceInQueryParams?"?ns="+this.namespace:"";return""+t+this.host+"/"+e},t}();function tt(t,e,n){var r;if((0,o.hu)("string"==typeof e,"typeof type must == string"),(0,o.hu)("object"==typeof n,"typeof params must == object"),e===X)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else{if(e!==J)throw new Error("Unknown connection type: "+e);r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?"}(function(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams})(t)&&(n.ns=t.namespace);var i=[];return B(n,(function(t,e){i.push(t+"="+e)})),r+i.join("&")}var et=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),(0,o.r3)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return(0,o.p$)(this.counters_)},t}(),nt={},rt={};function it(t){var e=t.toString();return nt[e]||(nt[e]=new et),nt[e]}var ot=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var e=function(e){t[e]&&W((function(){n.onMessage_(t[e])}))},r=0;r<t.length;++r)e(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum]&&"break"!==r(););},t}(),st="start",at="close",ut=function(){function t(t,e,n,r,i,o,s){var a=this;this.connId=t,this.repoInfo=e,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=o,this.lastSessionId=s,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=C(t),this.stats_=it(e),this.urlFn=function(t){return a.appCheckToken&&(t.ac=a.appCheckToken),tt(e,J,t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new ot(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(t){if((0,o.Yr)()||"complete"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new ct((function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=h(t,5),i=r[0],o=r[1],s=r[2];if(r[3],r[4],n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===st)n.id=o,n.password=s;else{if(i!==at)throw new Error("Unrecognized command received: "+i);o?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(o,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=h(t,2),i=r[0],o=r[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,o)}),(function(){n.onClosed_()}),n.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=n.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",n.transportSessionId&&(t.s=n.transportSessionId),n.lastSessionId&&(t.ls=n.lastSessionId),n.applicationId&&(t.p=n.applicationId),n.appCheckToken&&(t.ac=n.appCheckToken),"undefined"!=typeof location&&location.hostname&&Q.test(location.hostname)&&(t.r="f");var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,(function(){}))}}))},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return!((0,o.Yr)()||!t.forceAllow_&&(t.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=(0,o.Pz)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n=(0,o.h$)(e),r=q(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){if(!(0,o.Yr)()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},t.prototype.incrementIncomingBytes_=function(t){var e=(0,o.Pz)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),ct=function(){function t(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,o.Yr)())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=I(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(s='<script>document.domain="'+document.domain+'";<\/script>');var a="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(t){N("frame writing exception"),t.stack&&N(t.stack),N(t)}}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||N("No IE domain setting required")}catch(n){var e=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+e+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)}),Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return e+=n,this.addLongPollTag_(e,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);var r=function(){n.outstandingRequests.delete(e),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,(function(){clearTimeout(i),r()}))},t.prototype.addTag=function(t,e){var n=this;(0,o.Yr)()?this.doNodeLongPoll(t,e):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){N("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(t){}}),Math.floor(1))},t}(),ht=null;"undefined"!=typeof MozWebSocket?ht=MozWebSocket:"undefined"!=typeof WebSocket&&(ht=WebSocket);var lt=function(){function t(e,n,r,i,o,s,a){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=C(this.connId),this.stats_=it(n),this.connURL=t.connectionURL_(n,s,a,i),this.nodeAdmin=n.nodeAdmin}return t.connectionURL_=function(t,e,n,r){var i={v:"5"};return!(0,o.Yr)()&&"undefined"!=typeof location&&location.hostname&&Q.test(location.hostname)&&(i.r="f"),e&&(i.s=e),n&&(i.ls=n),r&&(i.ac=r),tt(t,X,i)},t.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,_.set("previous_websocket_failure",!0);try{if((0,o.Yr)()){var r=this.nodeAdmin?"AdminNode":"Node",i={headers:{"User-Agent":"Firebase/5/"+p+"/"+process.platform+"/"+r,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(i.headers.Authorization="Bearer "+this.authToken),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);var s={FIREBASE_API_KEY:"AIzaSyA_d2z_LMkARJysO5MINZc-W3DFE-ZHXT0",FIREBASE_AUTH_DOMAIN:"lmi-store.firebaseapp.com",FIREBASE_PROJECT_ID:"lmi-store",FIREBASE_STORAGE_BUCKET:"lmi-store.appspot.com",FIREBASE_MESSAGING_SENDER_ID:"724695490036",FIREBASE_APP_ID:"1:724695490036:web:74fdba648a47384d3b2da1",FIREBASE_MEASUREMENT_ID:"G-H88RV60D76",ENV_DOMAIN:"https://api.tldv.io",TLDV_LOGIN_URL:"https://tldv.io/app/login?autoClose=true",MIXPANEL_PLAN:"early-beta",MIXPANEL_KEY:"9119f2c3302030eaaee56e29fcf9b1bc",NODE_ENV:"production",ONBOARDING_URL:"https://tldv.io/app/chrome-extension-onboarding",APP_URL:"https://tldv.io/app",MAX_MEETING_DURATION_IN_HOURS:"3",UNINSTALL_URL:"https://tally.so/r/3jqNxm",SENTRY_DSN:"https://27e262052a324fec9473a47392ea1735@o1042962.ingest.sentry.io/6021256",GROWTHBOOK_ROOT_DOMAIN:"https://cdn.growthbook.io",GROWTHBOOK_API_KEY:"key_prod_78197814c430ea7f"},a=0===this.connURL.indexOf("wss://")?s.HTTPS_PROXY||s.https_proxy:s.HTTP_PROXY||s.http_proxy;a&&(i.proxy={origin:a}),this.mySock=new ht(this.connURL,[],i)}else i={headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}},this.mySock=new ht(this.connURL,[],i)}catch(t){this.log_("Error instantiating WebSocket.");var u=t.message||t.data;return u&&this.log_(u),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==ht&&!t.forceDisallow_},t.previouslyFailed=function(){return _.isInMemoryStorage||!0===_.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){_.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join("");this.frames=null;var n=(0,o.cI)(e);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},t.prototype.extractFrameCount_=function(t){if((0,o.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},t.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(t){this.resetKeepAlive();var e=(0,o.Pz)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=q(e,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()}),Math.floor(45e3))},t.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),ft=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[ut,lt]},enumerable:!1,configurable:!0}),t.prototype.initTransports_=function(e){var n,r,i=lt&&lt.isAvailable(),o=i&&!lt.previouslyFailed();if(e.webSocketOnly&&(i||R("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),o=!0),o)this.transports_=[lt];else{var s=this.transports_=[];try{for(var a=c(t.ALL_TRANSPORTS),u=a.next();!u.done;u=a.next()){var h=u.value;h&&h.isAvailable()&&s.push(h)}}catch(t){n={error:t}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),pt=function(){function t(t,e,n,r,i,o,s,a,u,c){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=o,this.onReady_=s,this.onDisconnect_=a,this.onKill_=u,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=C("c:"+this.id+":"),this.transportManager_=new ft(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){t.conn_&&t.conn_.open(n,r)}),Math.floor(0));var i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=z((function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>102400?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>10240?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))}),Math.floor(i)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){var e={t:"d",d:t};this.sendData_(e)},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=F("t",t),n=F("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=F("t",t),n=F("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=F("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?O("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):O("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&R("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),z((function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())}),Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):z((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(_.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),dt=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.refreshAppCheckToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),gt=function(){function t(t){this.allowedEvents_=t,this.listeners_={},(0,o.hu)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=l([],h(this.listeners_[t])),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(t){(0,o.hu)(this.allowedEvents_.find((function(e){return e===t})),"Unknown event: "+t)},t}(),vt=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||(0,o.uI)()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return a(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return(0,o.hu)("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(gt),mt=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t}();function yt(){return new mt("")}function _t(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function bt(t){return t.pieces_.length-t.pieceNum_}function wt(t){var e=t.pieceNum_;return e<t.pieces_.length&&e++,new mt(t.pieces_,e)}function It(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function Et(t,e){return void 0===e&&(e=0),t.pieces_.slice(t.pieceNum_+e)}function Tt(t){if(t.pieceNum_>=t.pieces_.length)return null;for(var e=[],n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new mt(e,0)}function At(t,e){for(var n=[],r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof mt)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{var i=e.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new mt(n,0)}function St(t){return t.pieceNum_>=t.pieces_.length}function kt(t,e){var n=_t(t),r=_t(e);if(null===n)return e;if(n===r)return kt(wt(t),wt(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function Nt(t,e){for(var n=Et(t,0),r=Et(e,0),i=0;i<n.length&&i<r.length;i++){var o=M(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1}function Ct(t,e){if(bt(t)!==bt(e))return!1;for(var n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Ot(t,e){var n=t.pieceNum_,r=e.pieceNum_;if(bt(t)>bt(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var xt=function(t,e){this.errorPrefix_=e,this.parts_=Et(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=(0,o.ug)(this.parts_[n]);Rt(this)};function Rt(t){if(t.byteLength_>768)throw new Error(t.errorPrefix_+"has a key path longer than 768 bytes ("+t.byteLength_+").");if(t.parts_.length>32)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Dt(t))}function Dt(t){return 0===t.parts_.length?"":"in property '"+t.parts_.join(".")+"'"}var Pt,Lt,Mt=function(t){function e(){var e,n,r=t.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",e="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,(function(){var t=!document[e];t!==r.visible_&&(r.visible_=t,r.trigger("visible",t))}),!1),r}return a(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return(0,o.hu)("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(gt),Ut=1e3,Ft=function(t){function e(n,r,i,s,a,u,c,h){var l=t.call(this)||this;if(l.repoInfo_=n,l.applicationId_=r,l.onDataUpdate_=i,l.onConnectStatus_=s,l.onServerInfoUpdate_=a,l.authTokenProvider_=u,l.appCheckTokenProvider_=c,l.authOverride_=h,l.id=e.nextPersistentConnectionId_++,l.log_=C("p:"+l.id+":"),l.interruptReasons_={},l.listens=new Map,l.outstandingPuts_=[],l.outstandingGets_=[],l.outstandingPutCount_=0,l.outstandingGetCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=Ut,l.maxReconnectDelay_=3e5,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.appCheckToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.invalidAppCheckTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,h&&!(0,o.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return Mt.getInstance().on("visible",l.onVisible_,l),-1===n.host.indexOf("fblocal")&&vt.getInstance().on("online",l.onOnline_,l),l}return a(e,t),e.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r,a:t,b:e};this.log_((0,o.Pz)(i)),(0,o.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},e.prototype.get=function(t){var e=this;this.initConnection_();var n=new o.BH,r={p:t._path.toString(),q:t._queryObject},i={action:"g",request:r,onComplete:function(t){var i=t.d;"ok"===t.s?(e.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;var s=this.outstandingGets_.length-1;return this.connected_||setTimeout((function(){var t=e.outstandingGets_[s];void 0!==t&&i===t&&(delete e.outstandingGets_[s],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),e.log_("get "+s+" timed out on connection"),n.reject(new Error("Client is offline.")))}),3e3),this.connected_&&this.sendGet_(s),n.promise},e.prototype.listen=function(t,e,n,r){this.initConnection_();var i=t._queryIdentifier,s=t._path.toString();this.log_("Listen called for "+s+" "+i),this.listens.has(s)||this.listens.set(s,new Map),(0,o.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,o.hu)(!this.listens.get(s).has(i),"listen() called twice for same path/queryId.");var a={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(s).set(i,a),this.connected_&&this.sendListen_(a)},e.prototype.sendGet_=function(t){var e=this,n=this.outstandingGets_[t];this.sendRequest("g",n.request,(function(r){delete e.outstandingGets_[t],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))},e.prototype.sendListen_=function(t){var n=this,r=t.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);var s={p:i};t.tag&&(s.q=r._queryObject,s.t=t.tag),s.h=t.hashFn(),this.sendRequest("q",s,(function(s){var a=s.d,u=s.s;e.warnOnListenWarnings_(a,r),(n.listens.get(i)&&n.listens.get(i).get(o))===t&&(n.log_("listen response",s),"ok"!==u&&n.removeListen_(i,o),t.onComplete&&t.onComplete(u,a))}))},e.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&(0,o.r3)(t,"w")){var n=(0,o.DV)(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e._queryParams.getIndex().toString()+'"',i=e._path.toString();R("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||(0,o.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},e.prototype.refreshAppCheckToken=function(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(function(){}))},e.prototype.tryAuth=function(){var t=this;if(this.connected_&&this.authToken_){var e=this.authToken_,n=(0,o.w9)(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";t.authToken_===e&&("ok"===r?t.invalidAuthTokenCount_=0:t.onAuthRevoked_(r,i))}))}},e.prototype.tryAppCheck=function(){var t=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(function(e){var n=e.s,r=e.d||"error";"ok"===n?t.invalidAppCheckTokenCount_=0:t.onAppCheckRevoked_(n,r)}))},e.prototype.unlisten=function(t,e){var n=t._path.toString(),r=t._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),(0,o.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t._queryObject,e)},e.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},e.prototype.onDisconnectPut=function(t,e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,(function(t){r&&setTimeout((function(){r(t.s,t.d)}),Math.floor(0))}))},e.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},e.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},e.prototype.putInternal=function(t,e,n,r,i){this.initConnection_();var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++;var s=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(s):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,(function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r.s,r.d)}))},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,(function(t){if("ok"!==t.s){var n=t.d;e.log_("reportStats","Error sending stats: "+n)}}))}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+(0,o.Pz)(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"apc"===t?this.onAppCheckRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):O("Unrecognized action received from server: "+(0,o.Pz)(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;(0,o.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){e.establishConnectionTimer_=null,e.establishConnection_()}),Math.floor(t))},e.prototype.initConnection_=function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ut,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Ut,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Ut),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){return t=this,n=void 0,i=function(){var t,n,r,i,s,a,u,c,l,f,p,d,g,v,m=this;return function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,(function(y){switch(y.label){case 0:if(!this.shouldReconnect_())return[3,4];this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+e.nextConnectionId_++,s=this.lastSessionId,a=!1,u=null,c=function(){u?u.close():(a=!0,r())},l=function(t){(0,o.hu)(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(t)},this.realtime_={close:c,sendRequest:l},f=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,y.label=1;case 1:return y.trys.push([1,3,,4]),[4,Promise.all([this.authTokenProvider_.getToken(f),this.appCheckTokenProvider_.getToken(f)])];case 2:return p=h.apply(void 0,[y.sent(),2]),d=p[0],g=p[1],a?N("getToken() completed but was canceled"):(N("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=g&&g.token,u=new pt(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,n,r,(function(t){R(t+" ("+m.repoInfo_.toString()+")"),m.interrupt("server_kill")}),s)),[3,4];case 3:return v=y.sent(),this.log_("Failed to get token: "+v),a||(this.repoInfo_.nodeAdmin&&R(v),c()),[3,4];case 4:return[2]}}))},new((r=void 0)||(r=Promise))((function(e,o){function s(t){try{u(i.next(t))}catch(t){o(t)}}function a(t){try{u(i.throw(t))}catch(t){o(t)}}function u(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r((function(t){t(n)}))).then(s,a)}u((i=i.apply(t,n||[])).next())}));var t,n,r,i},e.prototype.interrupt=function(t){N("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){N("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,o.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Ut,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map((function(t){return j(t)})).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,r=new mt(t).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(e),i.delete(e),0===i.size&&this.listens.delete(r)}else n=void 0;return n},e.prototype.onAuthRevoked_=function(t,e){N("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onAppCheckRevoked_=function(t,e){N("App check token revoked: "+t+"/"+e),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth(),this.tryAppCheck();try{for(var i=c(this.listens.values()),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var a=(n=void 0,c(s.values())),u=a.next();!u.done;u=a.next()){var h=u.value;this.sendListen_(h)}}catch(t){n={error:t}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}for(var l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){var f=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(f.action,f.pathString,f.data,f.onComplete)}for(l=0;l<this.outstandingGets_.length;l++)this.outstandingGets_[l]&&this.sendGet_(l)},e.prototype.sendConnectStats_=function(){var t={},e="js";(0,o.Yr)()&&(e=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+e+"."+p.replace(/\./g,"-")]=1,(0,o.uI)()?t["framework.cordova"]=1:(0,o.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=vt.getInstance().currentlyOnline();return(0,o.xb)(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(dt),jt=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),qt=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new jt(P,t),r=new jt(P,e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return jt.MIN},t}(),Bt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return Pt},set:function(t){Pt=t},enumerable:!1,configurable:!0}),e.prototype.compare=function(t,e){return M(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw(0,o.g5)("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return jt.MIN},e.prototype.maxPost=function(){return new jt(L,Pt)},e.prototype.makePost=function(t,e){return(0,o.hu)("string"==typeof t,"KeyIndex indexValue must always be a string."),new jt(t,Pt)},e.prototype.toString=function(){return".key"},e}(qt),Vt=new Bt,Gt=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),Ht=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:zt.EMPTY_NODE,this.right=null!=o?o:zt.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return zt.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},t.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return zt.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),Wt=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Ht(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),zt=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Ht.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ht.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new Gt(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new Gt(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new Gt(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new Gt(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new Wt,t}();function Kt(t,e){return M(t.name,e.name)}function $t(t,e){return M(t,e)}var Yt,Qt,Xt,Jt,Zt,te=function(t){return"number"==typeof t?"number:"+V(t):"string:"+t},ee=function(t){if(t.isLeafNode()){var e=t.val();(0,o.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,o.r3)(e,".sv"),"Priority must be a string or number.")}else(0,o.hu)(t===Lt||t.isEmpty(),"priority of unexpected type.");(0,o.hu)(t===Lt||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},ne=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,(0,o.hu)(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),ee(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return Yt},set:function(t){Yt=t},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return St(e)?this:".priority"===_t(e)?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var r=_t(e);return null===r?n:n.isEmpty()&&".priority"!==r?this:((0,o.hu)(".priority"!==r||1===bt(e),".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(wt(e),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+te(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?V(this.value_):this.value_,this.lazyHash_=E(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:((0,o.hu)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,r=typeof this.value_,i=t.VALUE_TYPE_ORDER.indexOf(n),s=t.VALUE_TYPE_ORDER.indexOf(r);return(0,o.hu)(i>=0,"Unknown leaf type: "+n),(0,o.hu)(s>=0,"Unknown leaf type: "+r),i===s?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode()){var e=t;return this.value_===e.value_&&this.priorityNode_.equals(e.priorityNode_)}return!1},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}(),re=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?M(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return jt.MIN},e.prototype.maxPost=function(){return new jt(L,new ne("[PRIORITY-POST]",Xt))},e.prototype.makePost=function(t,e){var n=Qt(t);return new jt(e,new ne("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(qt)),ie=Math.log(2),oe=function(){function t(t){var e;this.count=(e=t+1,parseInt(Math.log(e)/ie,10)),this.current_=this.count-1;var n,r=(n=this.count,parseInt(Array(n+1).join("1"),2));this.bits_=t+1&r}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),se=function(t,e,n,r){t.sort(e);var i=function(e,r){var o,s,a=r-e;if(0===a)return null;if(1===a)return o=t[e],s=n?n(o):o,new Ht(s,o.node,Ht.BLACK,null,null);var u=parseInt(a/2,10)+e,c=i(e,u),h=i(u+1,r);return o=t[u],s=n?n(o):o,new Ht(s,o.node,Ht.BLACK,c,h)},o=function(e){for(var r=null,o=null,s=t.length,a=function(e,r){var o=s-e,a=s;s-=e;var c=i(o+1,a),h=t[o],l=n?n(h):h;u(new Ht(l,h.node,r,null,c))},u=function(t){r?(r.left=t,r=t):(o=t,r=t)},c=0;c<e.count;++c){var h=e.nextBitIsOne(),l=Math.pow(2,e.count-(c+1));h?a(l,Ht.BLACK):(a(l,Ht.BLACK),a(l,Ht.RED))}return o}(new oe(t.length));return new zt(r||e,o)},ae={},ue=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return(0,o.hu)(ae&&re,"ChildrenNode.ts has not been loaded"),Jt=Jt||new t({".priority":ae},{".priority":re})},enumerable:!1,configurable:!0}),t.prototype.get=function(t){var e=(0,o.DV)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof zt?e:null},t.prototype.hasIndex=function(t){return(0,o.r3)(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){(0,o.hu)(e!==Vt,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],s=!1,a=n.getIterator(jt.Wrap),c=a.getNext();c;)s=s||e.isDefinedOn(c.node),i.push(c),c=a.getNext();r=s?se(i,e.getCompare()):ae;var h=e.toString(),l=u({},this.indexSet_);l[h]=e;var f=u({},this.indexes_);return f[h]=r,new t(f,l)},t.prototype.addToIndexes=function(e,n){var r=this;return new t((0,o.UI)(this.indexes_,(function(t,i){var s=(0,o.DV)(r.indexSet_,i);if((0,o.hu)(s,"Missing index implementation for "+i),t===ae){if(s.isDefinedOn(e.node)){for(var a=[],u=n.getIterator(jt.Wrap),c=u.getNext();c;)c.name!==e.name&&a.push(c),c=u.getNext();return a.push(e),se(a,s.getCompare())}return ae}var h=n.get(e.name),l=t;return h&&(l=l.remove(new jt(e.name,h))),l.insert(e,e.node)})),this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){return new t((0,o.UI)(this.indexes_,(function(t){if(t===ae)return t;var r=n.get(e.name);return r?t.remove(new jt(e.name,r)):t})),this.indexSet_)},t}(),ce=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&ee(this.priorityNode_),this.children_.isEmpty()&&(0,o.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return Zt||(Zt=new t(new zt($t),null,ue.Default))},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||Zt},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?Zt:e},t.prototype.getChild=function(t){var e=_t(t);return null===e?this:this.getImmediateChild(e).getChild(wt(t))},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if((0,o.hu)(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var r=new jt(e,n),i=void 0,s=void 0;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));var a=i.isEmpty()?Zt:this.priorityNode_;return new t(i,a,s)},t.prototype.updateChild=function(t,e){var n=_t(t);if(null===n)return e;(0,o.hu)(".priority"!==_t(t)||1===bt(t),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(wt(t),e);return this.updateImmediateChild(n,r)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(re,(function(s,a){n[s]=a.val(e),r++,o&&t.INTEGER_REGEXP_.test(s)?i=Math.max(i,Number(s)):o=!1})),!e&&o&&i<2*r){var s=[];for(var a in n)s[a]=n[a];return s}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+te(this.getPriority().val())+":"),this.forEachChild(re,(function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)})),this.lazyHash_=""===t?"":E(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new jt(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new jt(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new jt(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal((function(t){return e(t.name,t.node)})):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getIteratorFrom(t.name,jt.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getReverseIteratorFrom(t.name,jt.Wrap),i=r.peek();null!=i&&e.compare(i,t)>0;)r.getNext(),i=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===he?-1:0},t.prototype.withIndex=function(e){if(e===Vt||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===Vt||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator(re),r=e.getIterator(re),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===Vt?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),he=new(function(t){function e(){return t.call(this,new zt($t),ce.EMPTY_NODE,ue.Default)||this}return a(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return ce.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(ce));function le(t,e){if(void 0===e&&(e=null),null===t)return ce.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),(0,o.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new ne(t,le(e));if(t instanceof Array){var n=ce.EMPTY_NODE;return B(t,(function(e,r){if((0,o.r3)(t,e)&&"."!==e.substring(0,1)){var i=le(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(e,i))}})),n.updatePriority(le(e))}var r=[],i=!1;if(B(t,(function(t,e){if("."!==t.substring(0,1)){var n=le(e);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new jt(t,n)))}})),0===r.length)return ce.EMPTY_NODE;var s=se(r,Kt,(function(t){return t.name}),$t);if(i){var a=se(r,re.getCompare());return new ce(s,le(e),new ue({".priority":a},{".priority":re}))}return new ce(s,le(e),ue.Default)}Object.defineProperties(jt,{MIN:{value:new jt(P,ce.EMPTY_NODE)},MAX:{value:new jt(L,he)}}),Bt.__EMPTY_NODE=ce.EMPTY_NODE,ne.__childrenNodeConstructor=ce,Lt=he,Xt=he,function(t){Qt=t}(le);var fe,pe,de=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,(0,o.hu)(!St(e)&&".priority"!==_t(e),"Can't create PathIndex with empty path or .priority key"),n}return a(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?M(t.name,e.name):i},e.prototype.makePost=function(t,e){var n=le(t),r=ce.EMPTY_NODE.updateChild(this.indexPath_,n);return new jt(e,r)},e.prototype.maxPost=function(){var t=ce.EMPTY_NODE.updateChild(this.indexPath_,he);return new jt(L,t)},e.prototype.toString=function(){return Et(this.indexPath_,0).join("/")},e}(qt),ge=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?M(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return jt.MIN},e.prototype.maxPost=function(){return jt.MAX},e.prototype.makePost=function(t,e){var n=le(t);return new jt(e,n)},e.prototype.toString=function(){return".value"},e}(qt)),ve="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",me=(fe=0,pe=[],function(t){var e,n=t===fe;fe=t;var r=new Array(8);for(e=7;e>=0;e--)r[e]=ve.charAt(t%64),t=Math.floor(t/64);(0,o.hu)(0===t,"Cannot push at time == 0");var i=r.join("");if(n){for(e=11;e>=0&&63===pe[e];e--)pe[e]=0;pe[e]++}else for(e=0;e<12;e++)pe[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)i+=ve.charAt(pe[e]);return(0,o.hu)(20===i.length,"nextPushId: Length should be 20."),i}),ye=function(t){if("2147483647"===t)return"-";var e=H(t);if(null!=e)return""+(e+1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);if(n.length<786)return n.push("-"),n.join("");for(var i=n.length-1;i>=0&&"z"===n[i];)i--;if(-1===i)return L;var o=n[i],s=ve.charAt(ve.indexOf(o)+1);return n[i]=s,n.slice(0,i+1).join("")},_e=function(t){if("-2147483648"===t)return P;var e=H(t);if(null!=e)return""+(e-1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);return"-"===n[n.length-1]?1===n.length?"2147483647":(delete n[n.length-1],n.join("")):(n[n.length-1]=ve.charAt(ve.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))};function be(t){return{type:"value",snapshotNode:t}}function we(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Ie(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Ee(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}var Te=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,i,s){(0,o.hu)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=t.getImmediateChild(e);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()?t:(null!=s&&(n.isEmpty()?t.hasChild(e)?s.trackChildChange(Ie(e,a)):(0,o.hu)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(we(e,n)):s.trackChildChange(Ee(e,n,a))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(re,(function(t,r){e.hasChild(t)||n.trackChildChange(Ie(t,r))})),e.isLeafNode()||e.forEachChild(re,(function(e,r){if(t.hasChild(e)){var i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(Ee(e,r,i))}else n.trackChildChange(we(e,r))}))),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?ce.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),Ae=function(){function t(e){this.indexedFilter_=new Te(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new jt(e,n))||(n=ce.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=ce.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(ce.EMPTY_NODE);var i=this;return e.forEachChild(re,(function(t,e){i.matches(new jt(t,e))||(r=r.updateImmediateChild(t,ce.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),Se=function(){function t(t){this.rangedFilter_=new Ae(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new jt(e,n))||(n=ce.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=ce.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=ce.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var s=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(s.name,s.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(ce.EMPTY_NODE);var a=void 0,u=void 0,c=void 0;if(i=void 0,this.reverse_){i=r.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var h=this.index_.getCompare();c=function(t,e){return h(e,t)}}else i=r.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var l=!1;i.hasNext();)s=i.getNext(),!l&&c(a,s)<=0&&(l=!0),l&&o<this.limit_&&c(s,u)<=0?o++:r=r.updateImmediateChild(s.name,ce.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var s;if(this.reverse_){var a=this.index_.getCompare();s=function(t,e){return a(e,t)}}else s=this.index_.getCompare();var u=t;(0,o.hu)(u.numChildren()===this.limit_,"");var c=new jt(e,n),h=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),l=this.rangedFilter_.matches(c);if(u.hasChild(e)){for(var f=u.getImmediateChild(e),p=r.getChildAfterChild(this.index_,h,this.reverse_);null!=p&&(p.name===e||u.hasChild(p.name));)p=r.getChildAfterChild(this.index_,p,this.reverse_);var d=null==p?1:s(p,c);if(l&&!n.isEmpty()&&d>=0)return null!=i&&i.trackChildChange(Ee(e,n,f)),u.updateImmediateChild(e,n);null!=i&&i.trackChildChange(Ie(e,f));var g=u.updateImmediateChild(e,ce.EMPTY_NODE);return null!=p&&this.rangedFilter_.matches(p)?(null!=i&&i.trackChildChange(we(p.name,p.node)),g.updateImmediateChild(p.name,p.node)):g}return n.isEmpty()?t:l&&s(h,c)>=0?(null!=i&&(i.trackChildChange(Ie(h.name,h.node)),i.trackChildChange(we(e,n))),u.updateImmediateChild(e,n).updateImmediateChild(h.name,ce.EMPTY_NODE)):t},t}(),ke=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=re}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.hasStartAfter=function(){return this.startAfterSet_},t.prototype.hasEndBefore=function(){return this.endBeforeSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_},t.prototype.getIndexStartValue=function(){return(0,o.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return(0,o.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:P},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return(0,o.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return(0,o.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:L},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return(0,o.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===re},t.prototype.copy=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t}();function Ne(t,e,n){var r=t.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function Ce(t,e,n){var r=t.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function Oe(t,e){var n=t.copy();return n.index_=e,n}function xe(t){var e,n={};return t.isDefault()||(t.index_===re?e="$priority":t.index_===ge?e="$value":t.index_===Vt?e="$key":((0,o.hu)(t.index_ instanceof de,"Unrecognized index type!"),e=t.index_.toString()),n.orderBy=(0,o.Pz)(e),t.startSet_&&(n.startAt=(0,o.Pz)(t.indexStartValue_),t.startNameSet_&&(n.startAt+=","+(0,o.Pz)(t.indexStartName_))),t.endSet_&&(n.endAt=(0,o.Pz)(t.indexEndValue_),t.endNameSet_&&(n.endAt+=","+(0,o.Pz)(t.indexEndName_))),t.limitSet_&&(t.isViewFromLeft()?n.limitToFirst=t.limit_:n.limitToLast=t.limit_)),n}function Re(t){var e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_)),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_)),t.limitSet_){e.l=t.limit_;var n=t.viewFrom_;""===n&&(n=t.isViewFromLeft()?"l":"r"),e.vf=n}return t.index_!==re&&(e.i=t.index_.toString()),e}var De=function(t){function e(e,n,r,i){var o=t.call(this)||this;return o.repoInfo_=e,o.onDataUpdate_=n,o.authTokenProvider_=r,o.appCheckTokenProvider_=i,o.log_=C("p:rest:"),o.listens_={},o}return a(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:((0,o.hu)(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())},e.prototype.listen=function(t,n,r,i){var s=this,a=t._path.toString();this.log_("Listen called for "+a+" "+t._queryIdentifier);var u=e.getListenId_(t,r),c={};this.listens_[u]=c;var h=xe(t._queryParams);this.restRequest_(a+".json",h,(function(t,e){var n=e;404===t&&(n=null,t=null),null===t&&s.onDataUpdate_(a,n,!1,r),(0,o.DV)(s.listens_,u)===c&&i(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)}))},e.prototype.unlisten=function(t,n){var r=e.getListenId_(t,n);delete this.listens_[r]},e.prototype.get=function(t){var e=this,n=xe(t._queryParams),r=t._path.toString(),i=new o.BH;return this.restRequest_(r+".json",n,(function(t,n){var o=n;404===t&&(o=null,t=null),null===t?(e.onDataUpdate_(r,o,!1,null),i.resolve(o)):i.reject(new Error(o))})),i.promise},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var r=this;return void 0===e&&(e={}),e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((function(i){var s=h(i,2),a=s[0],u=s[1];a&&a.accessToken&&(e.auth=a.accessToken),u&&u.token&&(e.ac=u.token);var c=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+(0,o.xO)(e);r.log_("Sending REST request for "+c);var l=new XMLHttpRequest;l.onreadystatechange=function(){if(n&&4===l.readyState){r.log_("REST Response for "+c+" received. status:",l.status,"response:",l.responseText);var t=null;if(l.status>=200&&l.status<300){try{t=(0,o.cI)(l.responseText)}catch(t){R("Failed to parse JSON response for "+c+": "+l.responseText)}n(null,t)}else 401!==l.status&&404!==l.status&&R("Got unsuccessful REST response for "+c+" Status: "+l.status),n(l.status);n=null}},l.open("GET",c,!0),l.send()}))},e}(dt),Pe=function(){function t(){this.rootNode_=ce.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}();function Le(){return{value:null,children:new Map}}function Me(t,e,n){if(St(e))t.value=n,t.children.clear();else if(null!==t.value)t.value=t.value.updateChild(e,n);else{var r=_t(e);t.children.has(r)||t.children.set(r,Le()),Me(t.children.get(r),e=wt(e),n)}}function Ue(t,e){if(St(e))return t.value=null,t.children.clear(),!0;if(null!==t.value){if(t.value.isLeafNode())return!1;var n=t.value;return t.value=null,n.forEachChild(re,(function(e,n){Me(t,new mt(e),n)})),Ue(t,e)}if(t.children.size>0){var r=_t(e);return e=wt(e),t.children.has(r)&&Ue(t.children.get(r),e)&&t.children.delete(r),0===t.children.size}return!0}function Fe(t,e,n){null!==t.value?n(e,t.value):function(t,e){t.children.forEach((function(t,n){e(n,t)}))}(t,(function(t,r){Fe(r,new mt(e.toString()+"/"+t),n)}))}var je,qe=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=u({},t);return this.last_&&B(this.last_,(function(t,n){e[t]=e[t]-n})),this.last_=t,e},t}(),Be=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new qe(t);var n=1e4+2e4*Math.random();z(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;B(e,(function(e,i){i>0&&(0,o.r3)(t.statsToReport_,e)&&(n[e]=i,r=!0)})),r&&this.server_.reportStats(n),z(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}();function Ve(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}!function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(je||(je={}));var Ge,He=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=je.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return t.prototype.operationForChild=function(e){if(St(this.path)){if(null!=this.affectedTree.value)return(0,o.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new mt(e));return new t(yt(),n,this.revert)}return(0,o.hu)(_t(this.path)===e,"operationForChild called for unrelated child."),new t(wt(this.path),this.affectedTree,this.revert)},t}(),We=function(){function t(t,e){this.source=t,this.path=e,this.type=je.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return St(this.path)?new t(this.source,yt()):new t(this.source,wt(this.path))},t}(),ze=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=je.OVERWRITE}return t.prototype.operationForChild=function(e){return St(this.path)?new t(this.source,yt(),this.snap.getImmediateChild(e)):new t(this.source,wt(this.path),this.snap)},t}(),Ke=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=je.MERGE}return t.prototype.operationForChild=function(e){if(St(this.path)){var n=this.children.subtree(new mt(e));return n.isEmpty()?null:n.value?new ze(this.source,yt(),n.value):new t(this.source,yt(),n)}return(0,o.hu)(_t(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,wt(this.path),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),$e=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(St(t))return this.isFullyInitialized()&&!this.filtered_;var e=_t(t);return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),Ye=function(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()};function Qe(t,e,n,r,i,s){var a=r.filter((function(t){return t.type===n}));a.sort((function(e,n){return function(t,e,n){if(null==e.childName||null==n.childName)throw(0,o.g5)("Should only compare child_ events.");var r=new jt(e.childName,e.snapshotNode),i=new jt(n.childName,n.snapshotNode);return t.index_.compare(r,i)}(t,e,n)})),a.forEach((function(n){var r=function(t,e,n){return"value"===e.type||"child_removed"===e.type||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}(t,n,s);i.forEach((function(i){i.respondsTo(n.type)&&e.push(i.createEvent(r,t.query_))}))}))}function Xe(t,e){return{eventCache:t,serverCache:e}}function Je(t,e,n,r){return Xe(new $e(e,n,r),t.serverCache)}function Ze(t,e,n,r){return Xe(t.eventCache,new $e(e,n,r))}function tn(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function en(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var nn=function(){function t(t,e){void 0===e&&(Ge||(Ge=new zt(U)),e=Ge),this.value=t,this.children=e}return t.fromObject=function(e){var n=new t(null);return B(e,(function(t,e){n=n.set(new mt(t),e)})),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:yt(),value:this.value};if(St(t))return null;var n=_t(t),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(wt(t),e);return null!=i?{path:At(new mt(n),i.path),value:i.value}:null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,(function(){return!0}))},t.prototype.subtree=function(e){if(St(e))return this;var n=_t(e),r=this.children.get(n);return null!==r?r.subtree(wt(e)):new t(null)},t.prototype.set=function(e,n){if(St(e))return new t(n,this.children);var r=_t(e),i=(this.children.get(r)||new t(null)).set(wt(e),n),o=this.children.insert(r,i);return new t(this.value,o)},t.prototype.remove=function(e){if(St(e))return this.children.isEmpty()?new t(null):new t(null,this.children);var n=_t(e),r=this.children.get(n);if(r){var i=r.remove(wt(e)),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?new t(null):new t(this.value,o)}return this},t.prototype.get=function(t){if(St(t))return this.value;var e=_t(t),n=this.children.get(e);return n?n.get(wt(t)):null},t.prototype.setTree=function(e,n){if(St(e))return n;var r,i=_t(e),o=(this.children.get(i)||new t(null)).setTree(wt(e),n);return r=o.isEmpty()?this.children.remove(i):this.children.insert(i,o),new t(this.value,r)},t.prototype.fold=function(t){return this.fold_(yt(),t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(At(t,r),e)})),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,yt(),e)},t.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(St(t))return null;var i=_t(t),o=this.children.get(i);return o?o.findOnPath_(wt(t),At(e,i),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,yt(),e)},t.prototype.foreachOnPath_=function(e,n,r){if(St(e))return this;this.value&&r(n,this.value);var i=_t(e),o=this.children.get(i);return o?o.foreachOnPath_(wt(e),At(n,i),r):new t(null)},t.prototype.foreach=function(t){this.foreach_(yt(),t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal((function(n,r){r.foreach_(At(t,n),e)})),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal((function(e,n){n.value&&t(e,n.value)}))},t}(),rn=function(){function t(t){this.writeTree_=t}return t.empty=function(){return new t(new nn(null))},t}();function on(t,e,n){if(St(e))return new rn(new nn(n));var r=t.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,s=kt(i,e);return o=o.updateChild(s,n),new rn(t.writeTree_.set(i,o))}var a=new nn(n),u=t.writeTree_.setTree(e,a);return new rn(u)}function sn(t,e,n){var r=t;return B(n,(function(t,n){r=on(r,At(e,t),n)})),r}function an(t,e){if(St(e))return rn.empty();var n=t.writeTree_.setTree(e,new nn(null));return new rn(n)}function un(t,e){return null!=cn(t,e)}function cn(t,e){var n=t.writeTree_.findRootMostValueAndPath(e);return null!=n?t.writeTree_.get(n.path).getChild(kt(n.path,e)):null}function hn(t){var e=[],n=t.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(re,(function(t,n){e.push(new jt(t,n))})):t.writeTree_.children.inorderTraversal((function(t,n){null!=n.value&&e.push(new jt(t,n.value))})),e}function ln(t,e){if(St(e))return t;var n=cn(t,e);return new rn(null!=n?new nn(n):t.writeTree_.subtree(e))}function fn(t){return t.writeTree_.isEmpty()}function pn(t,e){return dn(yt(),t.writeTree_,e)}function dn(t,e,n){if(null!=e.value)return n.updateChild(t,e.value);var r=null;return e.children.inorderTraversal((function(e,i){".priority"===e?((0,o.hu)(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=dn(At(t,e),i,n)})),n.getChild(t).isEmpty()||null===r||(n=n.updateChild(At(t,".priority"),r)),n}function gn(t,e){return Sn(e,t)}function vn(t,e){if(t.snap)return Ot(t.path,e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&Ot(At(t.path,n),e))return!0;return!1}function mn(t){return t.visible}function yn(t,e,n){for(var r=rn.empty(),i=0;i<t.length;++i){var s=t[i];if(e(s)){var a=s.path,u=void 0;if(s.snap)Ot(n,a)?r=on(r,u=kt(n,a),s.snap):Ot(a,n)&&(u=kt(a,n),r=on(r,yt(),s.snap.getChild(u)));else{if(!s.children)throw(0,o.g5)("WriteRecord should have .snap or .children");if(Ot(n,a))r=sn(r,u=kt(n,a),s.children);else if(Ot(a,n))if(St(u=kt(a,n)))r=sn(r,yt(),s.children);else{var c=(0,o.DV)(s.children,_t(u));if(c){var h=c.getChild(wt(u));r=on(r,yt(),h)}}}}}return r}function _n(t,e,n,r,i){if(r||i){var o=ln(t.visibleWrites,e);return!i&&fn(o)?n:i||null!=n||un(o,yt())?pn(yn(t.allWrites,(function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(Ot(t.path,e)||Ot(e,t.path))}),e),n||ce.EMPTY_NODE):null}var s=cn(t.visibleWrites,e);if(null!=s)return s;var a=ln(t.visibleWrites,e);return fn(a)?n:null!=n||un(a,yt())?pn(a,n||ce.EMPTY_NODE):null}function bn(t,e,n,r){return _n(t.writeTree,t.treePath,e,n,r)}function wn(t,e){return function(t,e,n){var r=ce.EMPTY_NODE,i=cn(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(re,(function(t,e){r=r.updateImmediateChild(t,e)})),r;if(n){var o=ln(t.visibleWrites,e);return n.forEachChild(re,(function(t,e){var n=pn(ln(o,new mt(t)),e);r=r.updateImmediateChild(t,n)})),hn(o).forEach((function(t){r=r.updateImmediateChild(t.name,t.node)})),r}return hn(ln(t.visibleWrites,e)).forEach((function(t){r=r.updateImmediateChild(t.name,t.node)})),r}(t.writeTree,t.treePath,e)}function In(t,e,n,r){return function(t,e,n,r,i){(0,o.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");var s=At(e,n);if(un(t.visibleWrites,s))return null;var a=ln(t.visibleWrites,s);return fn(a)?i.getChild(n):pn(a,i.getChild(n))}(t.writeTree,t.treePath,e,n,r)}function En(t,e){return function(t,e){return cn(t.visibleWrites,e)}(t.writeTree,At(t.treePath,e))}function Tn(t,e,n){return function(t,e,n,r){var i=At(e,n),o=cn(t.visibleWrites,i);return null!=o?o:r.isCompleteForChild(n)?pn(ln(t.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(t.writeTree,t.treePath,e,n)}function An(t,e){return Sn(At(t.treePath,e),t.writeTree)}function Sn(t,e){return{treePath:t,writeTree:e}}var kn=function(){function t(){this.changeMap=new Map}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;(0,o.hu)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),(0,o.hu)(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===e&&"child_removed"===i)this.changeMap.set(n,Ee(n,t.snapshotNode,r.snapshotNode));else if("child_removed"===e&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===e&&"child_changed"===i)this.changeMap.set(n,Ie(n,r.oldSnap));else if("child_changed"===e&&"child_added"===i)this.changeMap.set(n,we(n,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==i)throw(0,o.g5)("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,Ee(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},t.prototype.getChanges=function(){return Array.from(this.changeMap.values())},t}(),Nn=new(function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}()),Cn=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new $e(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Tn(this.writes_,t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:en(this.viewCache_),i=function(t,e,n,r,i,o){return function(t,e,n,r,i,o,s){var a,u=ln(t.visibleWrites,e),c=cn(u,yt());if(null!=c)a=c;else{if(null==n)return[];a=pn(u,n)}if((a=a.withIndex(s)).isEmpty()||a.isLeafNode())return[];for(var h=[],l=s.getCompare(),f=o?a.getReverseIteratorFrom(r,s):a.getIteratorFrom(r,s),p=f.getNext();p&&h.length<i;)0!==l(p,r)&&h.push(p),p=f.getNext();return h}(t.writeTree,t.treePath,e,n,r,i,o)}(this.writes_,r,e,1,n,t);return 0===i.length?null:i[0]},t}();function On(t,e,n,r,i,s){var a=e.eventCache;if(null!=En(r,n))return e;var u=void 0,c=void 0;if(St(n))if((0,o.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){var h=en(e),l=wn(r,h instanceof ce?h:ce.EMPTY_NODE);u=t.filter.updateFullNode(e.eventCache.getNode(),l,s)}else{var f=bn(r,en(e));u=t.filter.updateFullNode(e.eventCache.getNode(),f,s)}else{var p=_t(n);if(".priority"===p){(0,o.hu)(1===bt(n),"Can't have a priority with additional path components");var d=a.getNode(),g=In(r,n,d,c=e.serverCache.getNode());u=null!=g?t.filter.updatePriority(d,g):a.getNode()}else{var v=wt(n),m=void 0;if(a.isCompleteForChild(p)){c=e.serverCache.getNode();var y=In(r,n,a.getNode(),c);m=null!=y?a.getNode().getImmediateChild(p).updateChild(v,y):a.getNode().getImmediateChild(p)}else m=Tn(r,p,e.serverCache);u=null!=m?t.filter.updateChild(a.getNode(),p,m,v,i,s):a.getNode()}}return Je(e,u,a.isFullyInitialized()||St(n),t.filter.filtersNodes())}function xn(t,e,n,r,i,o,s,a){var u,c=e.serverCache,h=s?t.filter:t.filter.getIndexedFilter();if(St(n))u=h.updateFullNode(c.getNode(),r,null);else if(h.filtersNodes()&&!c.isFiltered()){var l=c.getNode().updateChild(n,r);u=h.updateFullNode(c.getNode(),l,null)}else{var f=_t(n);if(!c.isCompleteForPath(n)&&bt(n)>1)return e;var p=wt(n),d=c.getNode().getImmediateChild(f).updateChild(p,r);u=".priority"===f?h.updatePriority(c.getNode(),d):h.updateChild(c.getNode(),f,d,p,Nn,null)}var g=Ze(e,u,c.isFullyInitialized()||St(n),h.filtersNodes());return On(t,g,n,i,new Cn(i,g,o),a)}function Rn(t,e,n,r,i,o,s){var a,u,c=e.eventCache,h=new Cn(i,e,o);if(St(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,s),a=Je(e,u,!0,t.filter.filtersNodes());else{var l=_t(n);if(".priority"===l)u=t.filter.updatePriority(e.eventCache.getNode(),r),a=Je(e,u,c.isFullyInitialized(),c.isFiltered());else{var f=wt(n),p=c.getNode().getImmediateChild(l),d=void 0;if(St(f))d=r;else{var g=h.getCompleteChild(l);d=null!=g?".priority"===It(f)&&g.getChild(Tt(f)).isEmpty()?g:g.updateChild(f,r):ce.EMPTY_NODE}a=p.equals(d)?e:Je(e,t.filter.updateChild(c.getNode(),l,d,f,h,s),c.isFullyInitialized(),t.filter.filtersNodes())}}return a}function Dn(t,e){return t.eventCache.isCompleteForChild(e)}function Pn(t,e,n){return n.foreach((function(t,n){e=e.updateChild(t,n)})),e}function Ln(t,e,n,r,i,o,s,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;var u,c=e;u=St(n)?r:new nn(null).setTree(n,r);var h=e.serverCache.getNode();return u.children.inorderTraversal((function(n,r){if(h.hasChild(n)){var u=Pn(0,e.serverCache.getNode().getImmediateChild(n),r);c=xn(t,c,new mt(n),u,i,o,s,a)}})),u.children.inorderTraversal((function(n,r){var u=!e.serverCache.isCompleteForChild(n)&&void 0===r.value;if(!h.hasChild(n)&&!u){var l=Pn(0,e.serverCache.getNode().getImmediateChild(n),r);c=xn(t,c,new mt(n),l,i,o,s,a)}})),c}var Mn,Un=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n,r=this.query_._queryParams,i=new Te(r.getIndex()),o=(n=r).loadsAllData()?new Te(n.getIndex()):n.hasLimit()?new Se(n):new Ae(n);this.processor_=function(t){return{filter:t}}(o);var s=e.serverCache,a=e.eventCache,u=i.updateFullNode(ce.EMPTY_NODE,s.getNode(),null),c=o.updateFullNode(ce.EMPTY_NODE,a.getNode(),null),h=new $e(u,s.isFullyInitialized(),i.filtersNodes()),l=new $e(c,a.isFullyInitialized(),o.filtersNodes());this.viewCache_=Xe(l,h),this.eventGenerator_=new Ye(this.query_)}return Object.defineProperty(t.prototype,"query",{get:function(){return this.query_},enumerable:!1,configurable:!0}),t}();function Fn(t,e){var n=en(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!St(e)&&!n.getImmediateChild(_t(e)).isEmpty())?n.getChild(e):null}function jn(t){return 0===t.eventRegistrations_.length}function qn(t,e,n){var r=[];if(n){(0,o.hu)(null==e,"A cancel should cancel all event registrations.");var i=t.query._path;t.eventRegistrations_.forEach((function(t){var e=t.createCancelEvent(n,i);e&&r.push(e)}))}if(e){for(var s=[],a=0;a<t.eventRegistrations_.length;++a){var u=t.eventRegistrations_[a];if(u.matches(e)){if(e.hasAnyCallback()){s=s.concat(t.eventRegistrations_.slice(a+1));break}}else s.push(u)}t.eventRegistrations_=s}else t.eventRegistrations_=[];return r}function Bn(t,e,n,r){e.type===je.MERGE&&null!==e.source.queryId&&((0,o.hu)(en(t.viewCache_),"We should always have a full cache before handling merges"),(0,o.hu)(tn(t.viewCache_),"Missing event cache, even though we have a server cache"));var i,s,a=t.viewCache_,u=function(t,e,n,r,i){var s,a,u=new kn;if(n.type===je.OVERWRITE){var c=n;c.source.fromUser?s=Rn(t,e,c.path,c.snap,r,i,u):((0,o.hu)(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!St(c.path),s=xn(t,e,c.path,c.snap,r,i,a,u))}else if(n.type===je.MERGE){var h=n;h.source.fromUser?s=function(t,e,n,r,i,o,s){var a=e;return r.foreach((function(r,u){var c=At(n,r);Dn(e,_t(c))&&(a=Rn(t,a,c,u,i,o,s))})),r.foreach((function(r,u){var c=At(n,r);Dn(e,_t(c))||(a=Rn(t,a,c,u,i,o,s))})),a}(t,e,h.path,h.children,r,i,u):((0,o.hu)(h.source.fromServer,"Unknown source."),a=h.source.tagged||e.serverCache.isFiltered(),s=Ln(t,e,h.path,h.children,r,i,a,u))}else if(n.type===je.ACK_USER_WRITE){var l=n;s=l.revert?function(t,e,n,r,i,s){var a;if(null!=En(r,n))return e;var u=new Cn(r,e,i),c=e.eventCache.getNode(),h=void 0;if(St(n)||".priority"===_t(n)){var l=void 0;if(e.serverCache.isFullyInitialized())l=bn(r,en(e));else{var f=e.serverCache.getNode();(0,o.hu)(f instanceof ce,"serverChildren would be complete if leaf node"),l=wn(r,f)}l=l,h=t.filter.updateFullNode(c,l,s)}else{var p=_t(n),d=Tn(r,p,e.serverCache);null==d&&e.serverCache.isCompleteForChild(p)&&(d=c.getImmediateChild(p)),(h=null!=d?t.filter.updateChild(c,p,d,wt(n),u,s):e.eventCache.getNode().hasChild(p)?t.filter.updateChild(c,p,ce.EMPTY_NODE,wt(n),u,s):c).isEmpty()&&e.serverCache.isFullyInitialized()&&(a=bn(r,en(e))).isLeafNode()&&(h=t.filter.updateFullNode(h,a,s))}return a=e.serverCache.isFullyInitialized()||null!=En(r,yt()),Je(e,h,a,t.filter.filtersNodes())}(t,e,l.path,r,i,u):function(t,e,n,r,i,o,s){if(null!=En(i,n))return e;var a=e.serverCache.isFiltered(),u=e.serverCache;if(null!=r.value){if(St(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return xn(t,e,n,u.getNode().getChild(n),i,o,a,s);if(St(n)){var c=new nn(null);return u.getNode().forEachChild(Vt,(function(t,e){c=c.set(new mt(t),e)})),Ln(t,e,n,c,i,o,a,s)}return e}var h=new nn(null);return r.foreach((function(t,e){var r=At(n,t);u.isCompleteForPath(r)&&(h=h.set(t,u.getNode().getChild(r)))})),Ln(t,e,n,h,i,o,a,s)}(t,e,l.path,l.affectedTree,r,i,u)}else{if(n.type!==je.LISTEN_COMPLETE)throw(0,o.g5)("Unknown operation type: "+n.type);s=function(t,e,n,r,i){var o=e.serverCache;return On(t,Ze(e,o.getNode(),o.isFullyInitialized()||St(n),o.isFiltered()),n,r,Nn,i)}(t,e,n.path,r,u)}var f=u.getChanges();return function(t,e,n){var r=e.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=tn(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(be(tn(e)))}}(e,s,f),{viewCache:s,changes:f}}(t.processor_,a,e,n,r);return i=t.processor_,s=u.viewCache,(0,o.hu)(s.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),(0,o.hu)(s.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),(0,o.hu)(u.viewCache.serverCache.isFullyInitialized()||!a.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=u.viewCache,Vn(t,u.changes,u.viewCache.eventCache.getNode(),null)}function Vn(t,e,n,r){var i=r?[r]:t.eventRegistrations_;return function(t,e,n,r){var i=[],o=[];return e.forEach((function(e){var n;"child_changed"===e.type&&t.index_.indexedValueChanged(e.oldSnap,e.snapshotNode)&&o.push((n=e.childName,{type:"child_moved",snapshotNode:e.snapshotNode,childName:n}))})),Qe(t,i,"child_removed",e,r,n),Qe(t,i,"child_added",e,r,n),Qe(t,i,"child_moved",o,r,n),Qe(t,i,"child_changed",e,r,n),Qe(t,i,"value",e,r,n),i}(t.eventGenerator_,e,n,i)}var Gn,Hn=function(){this.views=new Map};function Wn(t,e,n,r){var i,s,a=e.source.queryId;if(null!==a){var u=t.views.get(a);return(0,o.hu)(null!=u,"SyncTree gave us an op for an invalid query."),Bn(u,e,n,r)}var h=[];try{for(var l=c(t.views.values()),f=l.next();!f.done;f=l.next())u=f.value,h=h.concat(Bn(u,e,n,r))}catch(t){i={error:t}}finally{try{f&&!f.done&&(s=l.return)&&s.call(l)}finally{if(i)throw i.error}}return h}function zn(t,e,n,r,i){var o=e._queryIdentifier,s=t.views.get(o);if(!s){var a=bn(n,i?r:null),u=!1;a?u=!0:r instanceof ce?(a=wn(n,r),u=!1):(a=ce.EMPTY_NODE,u=!1);var c=Xe(new $e(a,u,!1),new $e(r,i,!1));return new Un(e,c)}return s}function Kn(t){var e,n,r=[];try{for(var i=c(t.views.values()),o=i.next();!o.done;o=i.next()){var s=o.value;s.query._queryParams.loadsAllData()||r.push(s)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}function $n(t,e){var n,r,i=null;try{for(var o=c(t.views.values()),s=o.next();!s.done;s=o.next()){var a=s.value;i=i||Fn(a,e)}}catch(t){n={error:t}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i}function Yn(t,e){if(e._queryParams.loadsAllData())return Jn(t);var n=e._queryIdentifier;return t.views.get(n)}function Qn(t,e){return null!=Yn(t,e)}function Xn(t){return null!=Jn(t)}function Jn(t){var e,n;try{for(var r=c(t.views.values()),i=r.next();!i.done;i=r.next()){var o=i.value;if(o.query._queryParams.loadsAllData())return o}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return null}var Zn=1,tr=function(t){this.listenProvider_=t,this.syncPointTree_=new nn(null),this.pendingWriteTree_={visibleWrites:rn.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map};function er(t,e,n,r,i){return function(t,e,n,r,i){(0,o.hu)(r>t.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=on(t.visibleWrites,e,n)),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r,i),i?ar(t,new ze({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,n)):[]}function nr(t,e,n){void 0===n&&(n=!1);var r=function(t,e){for(var n=0;n<t.allWrites.length;n++){var r=t.allWrites[n];if(r.writeId===e)return r}return null}(t.pendingWriteTree_,e);if(function(t,e){var n=t.allWrites.findIndex((function(t){return t.writeId===e}));(0,o.hu)(n>=0,"removeWrite called with nonexistent writeId.");var r=t.allWrites[n];t.allWrites.splice(n,1);for(var i=r.visible,s=!1,a=t.allWrites.length-1;i&&a>=0;){var u=t.allWrites[a];u.visible&&(a>=n&&vn(u,r.path)?i=!1:Ot(r.path,u.path)&&(s=!0)),a--}return!!i&&(s?(function(t){t.visibleWrites=yn(t.allWrites,mn,yt()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}(t),!0):(r.snap?t.visibleWrites=an(t.visibleWrites,r.path):B(r.children,(function(e){t.visibleWrites=an(t.visibleWrites,At(r.path,e))})),!0))}(t.pendingWriteTree_,e)){var i=new nn(null);return null!=r.snap?i=i.set(yt(),!0):B(r.children,(function(t){i=i.set(new mt(t),!0)})),ar(t,new He(r.path,i,n))}return[]}function rr(t,e,n){return ar(t,new ze({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,n))}function ir(t,e,n,r){var i=e._path,s=t.syncPointTree_.get(i),a=[];if(s&&("default"===e._queryIdentifier||Qn(s,e))){var u=function(t,e,n,r){var i,s,a=e._queryIdentifier,u=[],l=[],f=Xn(t);if("default"===a)try{for(var p=c(t.views.entries()),d=p.next();!d.done;d=p.next()){var g=h(d.value,2),v=g[0],m=g[1];l=l.concat(qn(m,n,r)),jn(m)&&(t.views.delete(v),m.query._queryParams.loadsAllData()||u.push(m.query))}}catch(t){i={error:t}}finally{try{d&&!d.done&&(s=p.return)&&s.call(p)}finally{if(i)throw i.error}}else(m=t.views.get(a))&&(l=l.concat(qn(m,n,r)),jn(m)&&(t.views.delete(a),m.query._queryParams.loadsAllData()||u.push(m.query)));return f&&!Xn(t)&&u.push(new((0,o.hu)(Mn,"Reference.ts has not been loaded"),Mn)(e._repo,e._path)),{removed:u,events:l}}(s,e,n,r);0===s.views.size&&(t.syncPointTree_=t.syncPointTree_.remove(i));var l=u.removed;a=u.events;var f=-1!==l.findIndex((function(t){return t._queryParams.loadsAllData()})),p=t.syncPointTree_.findOnPath(i,(function(t,e){return Xn(e)}));if(f&&!p){var d=t.syncPointTree_.subtree(i);if(!d.isEmpty())for(var g=function(t){return t.fold((function(t,e,n){if(e&&Xn(e))return[Jn(e)];var r=[];return e&&(r=Kn(e)),B(n,(function(t,e){r=r.concat(e)})),r}))}(d),v=0;v<g.length;++v){var m=g[v],y=m.query,_=hr(t,m);t.listenProvider_.startListening(vr(y),lr(t,y),_.hashFn,_.onComplete)}}!p&&l.length>0&&!r&&(f?t.listenProvider_.stopListening(vr(e),null):l.forEach((function(e){var n=t.queryToTagMap.get(fr(e));t.listenProvider_.stopListening(vr(e),n)}))),function(t,e){for(var n=0;n<e.length;++n){var r=e[n];if(!r._queryParams.loadsAllData()){var i=fr(r),o=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(o)}}}(t,l)}return a}function or(t,e,n){var r=e._path,i=null,s=!1;t.syncPointTree_.foreachOnPath(r,(function(t,e){var n=kt(t,r);i=i||$n(e,n),s=s||Xn(e)}));var a,u=t.syncPointTree_.get(r);u?(s=s||Xn(u),i=i||$n(u,yt())):(u=new Hn,t.syncPointTree_=t.syncPointTree_.set(r,u)),null!=i?a=!0:(a=!1,i=ce.EMPTY_NODE,t.syncPointTree_.subtree(r).foreachChild((function(t,e){var n=$n(e,yt());n&&(i=i.updateImmediateChild(t,n))})));var c=Qn(u,e);if(!c&&!e._queryParams.loadsAllData()){var h=fr(e);(0,o.hu)(!t.queryToTagMap.has(h),"View does not exist, but we have a tag");var l=Zn++;t.queryToTagMap.set(h,l),t.tagToQueryMap.set(l,h)}var f=function(t,e,n,r,i,o){var s=zn(t,e,r,i,o);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,s),function(t,e){t.eventRegistrations_.push(e)}(s,n),function(t,e){var n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(re,(function(t,e){r.push(we(t,e))})),n.isFullyInitialized()&&r.push(be(n.getNode())),Vn(t,r,n.getNode(),e)}(s,n)}(u,e,n,gn(t.pendingWriteTree_,r),i,a);if(!c&&!s){var p=Yn(u,e);f=f.concat(function(t,e,n){var r=e._path,i=lr(t,e),s=hr(t,n),a=t.listenProvider_.startListening(vr(e),i,s.hashFn,s.onComplete),u=t.syncPointTree_.subtree(r);if(i)(0,o.hu)(!Xn(u.value),"If we're adding a query, it shouldn't be shadowed");else for(var c=u.fold((function(t,e,n){if(!St(t)&&e&&Xn(e))return[Jn(e).query];var r=[];return e&&(r=r.concat(Kn(e).map((function(t){return t.query})))),B(n,(function(t,e){r=r.concat(e)})),r})),h=0;h<c.length;++h){var l=c[h];t.listenProvider_.stopListening(vr(l),lr(t,l))}return a}(t,e,p))}return f}function sr(t,e,n){var r=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,(function(t,n){var r=$n(n,kt(t,e));if(r)return r}));return _n(r,e,i,n,!0)}function ar(t,e){return ur(e,t.syncPointTree_,null,gn(t.pendingWriteTree_,yt()))}function ur(t,e,n,r){if(St(t.path))return cr(t,e,n,r);var i=e.get(yt());null==n&&null!=i&&(n=$n(i,yt()));var o=[],s=_t(t.path),a=t.operationForChild(s),u=e.children.get(s);if(u&&a){var c=n?n.getImmediateChild(s):null,h=An(r,s);o=o.concat(ur(a,u,c,h))}return i&&(o=o.concat(Wn(i,t,r,n))),o}function cr(t,e,n,r){var i=e.get(yt());null==n&&null!=i&&(n=$n(i,yt()));var o=[];return e.children.inorderTraversal((function(e,i){var s=n?n.getImmediateChild(e):null,a=An(r,e),u=t.operationForChild(e);u&&(o=o.concat(cr(u,i,s,a)))})),i&&(o=o.concat(Wn(i,t,r,n))),o}function hr(t,e){var n=e.query,r=lr(t,n);return{hashFn:function(){var t=function(t){return t.viewCache_.serverCache.getNode()}(e)||ce.EMPTY_NODE;return t.hash()},onComplete:function(e){if("ok"===e)return r?function(t,e,n){var r=pr(t,n);if(r){var i=dr(r),o=i.path,s=i.queryId,a=kt(o,e);return gr(t,o,new We(Ve(s),a))}return[]}(t,n._path,r):function(t,e){return ar(t,new We({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(t,n._path);var i=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}(e,n);return ir(t,n,null,i)}}}function lr(t,e){var n=fr(e);return t.queryToTagMap.get(n)}function fr(t){return t._path.toString()+"$"+t._queryIdentifier}function pr(t,e){return t.tagToQueryMap.get(e)}function dr(t){var e=t.indexOf("$");return(0,o.hu)(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new mt(t.substr(0,e))}}function gr(t,e,n){var r=t.syncPointTree_.get(e);return(0,o.hu)(r,"Missing sync point for query tag that we're tracking"),Wn(r,n,gn(t.pendingWriteTree_,e),null)}function vr(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new((0,o.hu)(Gn,"Reference.ts has not been loaded"),Gn)(t._repo,t._path):t}var mr=function(){function t(t){this.node_=t}return t.prototype.getImmediateChild=function(e){return new t(this.node_.getImmediateChild(e))},t.prototype.node=function(){return this.node_},t}(),yr=function(){function t(t,e){this.syncTree_=t,this.path_=e}return t.prototype.getImmediateChild=function(e){var n=At(this.path_,e);return new t(this.syncTree_,n)},t.prototype.node=function(){return sr(this.syncTree_,this.path_)},t}(),_r=function(t,e,n){return t&&"object"==typeof t?((0,o.hu)(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?br(t[".sv"],e,n):"object"==typeof t[".sv"]?wr(t[".sv"],e):void(0,o.hu)(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},br=function(t,e,n){if("timestamp"===t)return n.timestamp;(0,o.hu)(!1,"Unexpected server value: "+t)},wr=function(t,e,n){t.hasOwnProperty("increment")||(0,o.hu)(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var r=t.increment;"number"!=typeof r&&(0,o.hu)(!1,"Unexpected increment value: "+r);var i=e.node();if((0,o.hu)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var s=i.getValue();return"number"!=typeof s?r:s+r},Ir=function(t,e,n,r){return Tr(e,new yr(n,t),r)},Er=function(t,e,n){return Tr(t,new mr(e),n)};function Tr(t,e,n){var r,i=t.getPriority().val(),o=_r(i,e.getImmediateChild(".priority"),n);if(t.isLeafNode()){var s=t,a=_r(s.getValue(),e,n);return a!==s.getValue()||o!==s.getPriority().val()?new ne(a,le(o)):t}var u=t;return r=u,o!==u.getPriority().val()&&(r=r.updatePriority(new ne(o))),u.forEachChild(re,(function(t,i){var o=Tr(i,e.getImmediateChild(t),n);o!==i&&(r=r.updateImmediateChild(t,o))})),r}var Ar=function(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n={children:{},childCount:0}),this.name=t,this.parent=e,this.node=n};function Sr(t,e){for(var n=e instanceof mt?e:new mt(e),r=t,i=_t(n);null!==i;){var s=(0,o.DV)(r.node.children,i)||{children:{},childCount:0};r=new Ar(i,r,s),i=_t(n=wt(n))}return r}function kr(t){return t.node.value}function Nr(t,e){t.node.value=e,Dr(t)}function Cr(t){return t.node.childCount>0}function Or(t,e){B(t.node.children,(function(n,r){e(new Ar(n,t,r))}))}function xr(t,e,n,r){n&&!r&&e(t),Or(t,(function(t){xr(t,e,!0,r)})),n&&r&&e(t)}function Rr(t){return new mt(null===t.parent?t.name:Rr(t.parent)+"/"+t.name)}function Dr(t){null!==t.parent&&function(t,e,n){var r=function(t){return void 0===kr(t)&&!Cr(t)}(n),i=(0,o.r3)(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,Dr(t)):r||i||(t.node.children[e]=n.node,t.node.childCount++,Dr(t))}(t.parent,t.name,t)}var Pr=/[\[\].#$\/\u0000-\u001F\u007F]/,Lr=/[\[\].#$\u0000-\u001F\u007F]/,Mr=10485760,Ur=function(t){return"string"==typeof t&&0!==t.length&&!Pr.test(t)},Fr=function(t){return"string"==typeof t&&0!==t.length&&!Lr.test(t)},jr=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!D(t)||t&&"object"==typeof t&&(0,o.r3)(t,".sv")},qr=function(t,e,n,r){r&&void 0===e||Br((0,o.gK)(t,"value"),e,n)},Br=function(t,e,n){var r=n instanceof mt?new xt(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+Dt(r));if("function"==typeof e)throw new Error(t+"contains a function "+Dt(r)+" with contents = "+e.toString());if(D(e))throw new Error(t+"contains "+e.toString()+" "+Dt(r));if("string"==typeof e&&e.length>Mr/3&&(0,o.ug)(e)>Mr)throw new Error(t+"contains a string greater than 10485760 utf8 bytes "+Dt(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){var i=!1,s=!1;if(B(e,(function(e,n){if(".value"===e)i=!0;else if(".priority"!==e&&".sv"!==e&&(s=!0,!Ur(e)))throw new Error(t+" contains an invalid key ("+e+") "+Dt(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var a,u;!function(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=(0,o.ug)(e),Rt(t)}(r,e),Br(t,n,r),u=(a=r).parts_.pop(),a.byteLength_-=(0,o.ug)(u),a.parts_.length>0&&(a.byteLength_-=1)})),i&&s)throw new Error(t+' contains ".value" child '+Dt(r)+" in addition to actual children.")}},Vr=function(t,e,n,r){if(!r||void 0!==e){var i=(0,o.gK)(t,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");var s=[];B(e,(function(t,e){var r=new mt(t);if(Br(i,e,At(n,r)),".priority"===It(r)&&!jr(e))throw new Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(r)})),function(t,e){var n,r;for(n=0;n<e.length;n++)for(var i=Et(r=e[n]),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!Ur(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(Nt);var s=null;for(n=0;n<e.length;n++){if(r=e[n],null!==s&&Ot(s,r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}}(i,s)}},Gr=function(t,e,n){if(!n||void 0!==e){if(D(e))throw new Error((0,o.gK)(t,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!jr(e))throw new Error((0,o.gK)(t,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Hr=function(t,e,n){if(!n||void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,o.gK)(t,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},Wr=function(t,e,n,r){if(!(r&&void 0===n||Ur(n)))throw new Error((0,o.gK)(t,e)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},zr=function(t,e,n,r){if(!(r&&void 0===n||Fr(n)))throw new Error((0,o.gK)(t,e)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Kr=function(t,e){if(".info"===_t(e))throw new Error(t+" failed = Can't modify data under /.info/")},$r=function(t,e){var n=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!Ur(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==n.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Fr(t)}(n))throw new Error((0,o.gK)(t,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},Yr=function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error((0,o.gK)(t,e)+"must be a boolean.")},Qr=function(){this.eventLists_=[],this.recursionDepth_=0};function Xr(t,e){for(var n=null,r=0;r<e.length;r++){var i=e[r],o=i.getPath();null===n||Ct(o,n.path)||(t.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(i)}n&&t.eventLists_.push(n)}function Jr(t,e,n){Xr(t,n),ti(t,(function(t){return Ct(t,e)}))}function Zr(t,e,n){Xr(t,n),ti(t,(function(t){return Ot(t,e)||Ot(e,t)}))}function ti(t,e){t.recursionDepth_++;for(var n=!0,r=0;r<t.eventLists_.length;r++){var i=t.eventLists_[r];i&&(e(i.path)?(ei(t.eventLists_[r]),t.eventLists_[r]=null):n=!1)}n&&(t.eventLists_=[]),t.recursionDepth_--}function ei(t){for(var e=0;e<t.events.length;e++){var n=t.events[e];if(null!==n){t.events[e]=null;var r=n.getEventRunner();A&&N("event: "+n.toString()),W(r)}}}var ni="repo_interrupt",ri=function(){function t(t,e,n,r){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Qr,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Le(),this.transactionQueueTree_=new Ar,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t}();function ii(t){var e=t.infoData_.getNode(new mt(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function oi(t){return(e=(e={timestamp:ii(t)})||{}).timestamp=e.timestamp||(new Date).getTime(),e;var e}function si(t,e,n,r,i){t.dataUpdateCount++;var s=new mt(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;var a=[];if(i)if(r){var u=(0,o.UI)(n,(function(t){return le(t)}));a=function(t,e,n,r){var i=pr(t,r);if(i){var o=dr(i),s=o.path,a=o.queryId,u=kt(s,e),c=nn.fromObject(n);return gr(t,s,new Ke(Ve(a),u,c))}return[]}(t.serverSyncTree_,s,u,i)}else{var c=le(n);a=function(t,e,n,r){var i=pr(t,r);if(null!=i){var o=dr(i),s=o.path,a=o.queryId,u=kt(s,e);return gr(t,s,new ze(Ve(a),u,n))}return[]}(t.serverSyncTree_,s,c,i)}else if(r){var h=(0,o.UI)(n,(function(t){return le(t)}));a=function(t,e,n){var r=nn.fromObject(n);return ar(t,new Ke({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(t.serverSyncTree_,s,h)}else{var l=le(n);a=rr(t.serverSyncTree_,s,l)}var f=s;a.length>0&&(f=_i(t,s)),Zr(t.eventQueue_,f,a)}function ai(t,e){ui(t,"connected",e),!1===e&&function(t){gi(t,"onDisconnectEvents");var e=oi(t),n=Le();Fe(t.onDisconnect_,yt(),(function(r,i){var o=Ir(r,i,t.serverSyncTree_,e);Me(n,r,o)}));var r=[];Fe(n,yt(),(function(e,n){r=r.concat(rr(t.serverSyncTree_,e,n));var i=Ti(t,e);_i(t,i)})),t.onDisconnect_=Le(),Zr(t.eventQueue_,yt(),r)}(t)}function ui(t,e,n){var r=new mt("/.info/"+e),i=le(n);t.infoData_.updateSnapshot(r,i);var o=rr(t.infoSyncTree_,r,i);Zr(t.eventQueue_,r,o)}function ci(t){return t.nextWriteId_++}function hi(t,e,n,r,i){gi(t,"set",{path:e.toString(),value:n,priority:r});var o=oi(t),s=le(n,r),a=sr(t.serverSyncTree_,e),u=Er(s,a,o),c=ci(t),h=er(t.serverSyncTree_,e,u,c,!0);Xr(t.eventQueue_,h),t.server_.put(e.toString(),s.val(!0),(function(n,r){var o="ok"===n;o||R("set at "+e+" failed: "+n);var s=nr(t.serverSyncTree_,c,!o);Zr(t.eventQueue_,e,s),vi(0,i,n,r)}));var l=Ti(t,e);_i(t,l),Zr(t.eventQueue_,l,[])}function li(t,e,n){t.server_.onDisconnectCancel(e.toString(),(function(r,i){"ok"===r&&Ue(t.onDisconnect_,e),vi(0,n,r,i)}))}function fi(t,e,n,r){var i=le(n);t.server_.onDisconnectPut(e.toString(),i.val(!0),(function(n,o){"ok"===n&&Me(t.onDisconnect_,e,i),vi(0,r,n,o)}))}function pi(t,e,n){var r;r=".info"===_t(e._path)?ir(t.infoSyncTree_,e,n):ir(t.serverSyncTree_,e,n),Jr(t.eventQueue_,e._path,r)}function di(t){t.persistentConnection_&&t.persistentConnection_.interrupt(ni)}function gi(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r="";t.persistentConnection_&&(r=t.persistentConnection_.id+":"),N.apply(void 0,l([r],h(e)))}function vi(t,e,n,r){e&&W((function(){if("ok"===n)e(null);else{var t=(n||"error").toUpperCase(),i=t;r&&(i+=": "+r);var o=new Error(i);o.code=t,e(o)}}))}function mi(t,e,n){return sr(t.serverSyncTree_,e,n)||ce.EMPTY_NODE}function yi(t,e){if(void 0===e&&(e=t.transactionQueueTree_),e||Ei(t,e),kr(e)){var n=wi(t,e);(0,o.hu)(n.length>0,"Sending zero length transaction queue"),n.every((function(t){return 0===t.status}))&&function(t,e,n){for(var r=n.map((function(t){return t.currentWriteId})),i=mi(t,e,r),s=i,a=i.hash(),u=0;u<n.length;u++){var c=n[u];(0,o.hu)(0===c.status,"tryToSendTransactionQueue_: items in queue should all be run."),c.status=1,c.retryCount++;var h=kt(e,c.path);s=s.updateChild(h,c.currentOutputSnapshotRaw)}var l=s.val(!0),f=e;t.server_.put(f.toString(),l,(function(r){gi(t,"transaction put response",{path:f.toString(),status:r});var i=[];if("ok"===r){for(var o=[],s=function(e){n[e].status=2,i=i.concat(nr(t.serverSyncTree_,n[e].currentWriteId)),n[e].onComplete&&o.push((function(){return n[e].onComplete(null,!0,n[e].currentOutputSnapshotResolved)})),n[e].unwatcher()},a=0;a<n.length;a++)s(a);for(Ei(t,Sr(t.transactionQueueTree_,e)),yi(t,t.transactionQueueTree_),Zr(t.eventQueue_,e,i),a=0;a<o.length;a++)W(o[a])}else{if("datastale"===r)for(a=0;a<n.length;a++)3===n[a].status?n[a].status=4:n[a].status=0;else for(R("transaction at "+f.toString()+" failed: "+r),a=0;a<n.length;a++)n[a].status=4,n[a].abortReason=r;_i(t,e)}}),a)}(t,Rr(e),n)}else Cr(e)&&Or(e,(function(e){yi(t,e)}))}function _i(t,e){var n=bi(t,e),r=Rr(n);return function(t,e,n){if(0!==e.length){for(var r=[],i=[],s=e.filter((function(t){return 0===t.status})).map((function(t){return t.currentWriteId})),a=function(a){var u,c,h=e[a],l=kt(n,h.path),f=!1;if((0,o.hu)(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===h.status)f=!0,u=h.abortReason,i=i.concat(nr(t.serverSyncTree_,h.currentWriteId,!0));else if(0===h.status)if(h.retryCount>=25)f=!0,u="maxretry",i=i.concat(nr(t.serverSyncTree_,h.currentWriteId,!0));else{var p=mi(t,h.path,s);h.currentInputSnapshot=p;var d=e[a].update(p.val());if(void 0!==d){Br("transaction failed: Data returned ",d,h.path);var g=le(d);"object"==typeof d&&null!=d&&(0,o.r3)(d,".priority")||(g=g.updatePriority(p.getPriority()));var v=h.currentWriteId,m=oi(t),y=Er(g,p,m);h.currentOutputSnapshotRaw=g,h.currentOutputSnapshotResolved=y,h.currentWriteId=ci(t),s.splice(s.indexOf(v),1),i=(i=i.concat(er(t.serverSyncTree_,h.path,y,h.currentWriteId,h.applyLocally))).concat(nr(t.serverSyncTree_,v,!0))}else f=!0,u="nodata",i=i.concat(nr(t.serverSyncTree_,h.currentWriteId,!0))}Zr(t.eventQueue_,n,i),i=[],f&&(e[a].status=2,c=e[a].unwatcher,setTimeout(c,Math.floor(0)),e[a].onComplete&&("nodata"===u?r.push((function(){return e[a].onComplete(null,!1,e[a].currentInputSnapshot)})):r.push((function(){return e[a].onComplete(new Error(u),!1,null)}))))},u=0;u<e.length;u++)a(u);for(Ei(t,t.transactionQueueTree_),u=0;u<r.length;u++)W(r[u]);yi(t,t.transactionQueueTree_)}}(t,wi(t,n),r),r}function bi(t,e){var n,r=t.transactionQueueTree_;for(n=_t(e);null!==n&&void 0===kr(r);)r=Sr(r,n),n=_t(e=wt(e));return r}function wi(t,e){var n=[];return Ii(t,e,n),n.sort((function(t,e){return t.order-e.order})),n}function Ii(t,e,n){var r=kr(e);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);Or(e,(function(e){Ii(t,e,n)}))}function Ei(t,e){var n=kr(e);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,Nr(e,n.length>0?n:void 0)}Or(e,(function(e){Ei(t,e)}))}function Ti(t,e){var n=Rr(bi(t,e)),r=Sr(t.transactionQueueTree_,e);return function(t,e,n){for(var r=t.parent;null!==r;){if(e(r))return!0;r=r.parent}}(r,(function(e){Ai(t,e)})),Ai(t,r),xr(r,(function(e){Ai(t,e)})),n}function Ai(t,e){var n=kr(e);if(n){for(var r=[],i=[],s=-1,a=0;a<n.length;a++)3===n[a].status||(1===n[a].status?((0,o.hu)(s===a-1,"All SENT items should be at beginning of queue."),s=a,n[a].status=3,n[a].abortReason="set"):((0,o.hu)(0===n[a].status,"Unexpected transaction status in abort"),n[a].unwatcher(),i=i.concat(nr(t.serverSyncTree_,n[a].currentWriteId,!0)),n[a].onComplete&&r.push(n[a].onComplete.bind(null,new Error("set"),!1,null))));for(-1===s?Nr(e,void 0):n.length=s+1,Zr(t.eventQueue_,Rr(e),i),a=0;a<r.length;a++)W(r[a])}}var Si=function(t,e){var n=ki(t),r=n.namespace;"firebase.com"===n.domain&&x(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||x("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&R("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new Z(n.host,n.secure,r,e,i,"",r!==n.subdomain),path:new mt(n.pathString)}},ki=function(t){var e="",n="",r="",i="",o="",s=!0,a="https",u=443;if("string"==typeof t){var h=t.indexOf("//");h>=0&&(a=t.substring(0,h-1),t=t.substring(h+2));var l=t.indexOf("/");-1===l&&(l=t.length);var f=t.indexOf("?");-1===f&&(f=t.length),e=t.substring(0,Math.min(l,f)),l<f&&(i=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(t){}e+="/"+i}return e}(t.substring(l,f)));var p=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var i=c(t.split("&")),o=i.next();!o.done;o=i.next()){var s=o.value;if(0!==s.length){var a=s.split("=");2===a.length?r[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):R("Invalid query segment '"+s+"' in query '"+t+"'")}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,f)));(h=e.indexOf(":"))>=0?(s="https"===a||"wss"===a,u=parseInt(e.substring(h+1),10)):h=e.length;var d=e.slice(0,h);if("localhost"===d.toLowerCase())n="localhost";else if(d.split(".").length<=2)n=d;else{var g=e.indexOf(".");r=e.substring(0,g).toLowerCase(),n=e.substring(g+1),o=r}"ns"in p&&(o=p.ns)}return{host:e,port:u,domain:n,subdomain:r,secure:s,scheme:a,pathString:i,namespace:o}},Ni=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.ref;return"value"===this.eventType?t._path:t.parent._path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+(0,o.Pz)(this.snapshot.exportVal())},t}(),Ci=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),Oi=function(){function t(t,e){this.snapshotCallback=t,this.cancelCallback=e}return t.prototype.onValue=function(t,e){this.snapshotCallback.call(null,t,e)},t.prototype.onCancel=function(t){return(0,o.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)},Object.defineProperty(t.prototype,"hasCancelCallback",{get:function(){return!!this.cancelCallback},enumerable:!1,configurable:!0}),t.prototype.matches=function(t){return this.snapshotCallback===t.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context},t}(),xi=function(){function t(t,e){this._repo=t,this._path=e}return t.prototype.cancel=function(){var t=new o.BH;return li(this._repo,this._path,t.wrapCallback((function(){}))),t.promise},t.prototype.remove=function(){Kr("OnDisconnect.remove",this._path);var t=new o.BH;return fi(this._repo,this._path,null,t.wrapCallback((function(){}))),t.promise},t.prototype.set=function(t){Kr("OnDisconnect.set",this._path),qr("OnDisconnect.set",t,this._path,!1);var e=new o.BH;return fi(this._repo,this._path,t,e.wrapCallback((function(){}))),e.promise},t.prototype.setWithPriority=function(t,e){Kr("OnDisconnect.setWithPriority",this._path),qr("OnDisconnect.setWithPriority",t,this._path,!1),Gr("OnDisconnect.setWithPriority",e,!1);var n=new o.BH;return function(t,e,n,r,i){var o=le(n,r);t.server_.onDisconnectPut(e.toString(),o.val(!0),(function(n,r){"ok"===n&&Me(t.onDisconnect_,e,o),vi(0,i,n,r)}))}(this._repo,this._path,t,e,n.wrapCallback((function(){}))),n.promise},t.prototype.update=function(t){Kr("OnDisconnect.update",this._path),Vr("OnDisconnect.update",t,this._path,!1);var e=new o.BH;return function(t,e,n,r){if((0,o.xb)(n))return N("onDisconnect().update() called with empty data.  Don't do anything."),void vi(0,r,"ok",void 0);t.server_.onDisconnectMerge(e.toString(),n,(function(i,o){"ok"===i&&B(n,(function(n,r){var i=le(r);Me(t.onDisconnect_,At(e,n),i)})),vi(0,r,i,o)}))}(this._repo,this._path,t,e.wrapCallback((function(){}))),e.promise},t}(),Ri=function(){function t(t,e,n,r){this._repo=t,this._path=e,this._queryParams=n,this._orderByCalled=r}return Object.defineProperty(t.prototype,"key",{get:function(){return St(this._path)?null:It(this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Mi(this._repo,this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_queryIdentifier",{get:function(){var t=Re(this._queryParams),e=j(t);return"{}"===e?"default":e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_queryObject",{get:function(){return Re(this._queryParams)},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){if(!((e=(0,o.m9)(e))instanceof t))return!1;var n=this._repo===e._repo,r=Ct(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i},t.prototype.toJSON=function(){return this.toString()},t.prototype.toString=function(){return this._repo.toString()+function(t){for(var e="",n=t.pieceNum_;n<t.pieces_.length;n++)""!==t.pieces_[n]&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}(this._path)},t}();function Di(t,e){if(!0===t._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Pi(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Vt){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==P)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==L)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===re){if(null!=e&&!jr(e)||null!=n&&!jr(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,o.hu)(t.getIndex()instanceof de||t.getIndex()===ge,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Li(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var Mi=function(t){function e(e,n){return t.call(this,e,n,new ke,!1)||this}return a(e,t),Object.defineProperty(e.prototype,"parent",{get:function(){var t=Tt(this._path);return null===t?null:new e(this._repo,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){for(var t=this;null!==t.parent;)t=t.parent;return t},enumerable:!1,configurable:!0}),e}(Ri),Ui=function(){function t(t,e,n){this._node=t,this.ref=e,this._index=n}return Object.defineProperty(t.prototype,"priority",{get:function(){return this._node.getPriority().val()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"key",{get:function(){return this.ref.key},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._node.numChildren()},enumerable:!1,configurable:!0}),t.prototype.child=function(e){var n=new mt(e),r=qi(this.ref,e);return new t(this._node.getChild(n),r,re)},t.prototype.exists=function(){return!this._node.isEmpty()},t.prototype.exportVal=function(){return this._node.val(!0)},t.prototype.forEach=function(e){var n=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(function(r,i){return e(new t(i,qi(n.ref,r),re))}))},t.prototype.hasChild=function(t){var e=new mt(t);return!this._node.getChild(e).isEmpty()},t.prototype.hasChildren=function(){return!this._node.isLeafNode()&&!this._node.isEmpty()},t.prototype.toJSON=function(){return this.exportVal()},t.prototype.val=function(){return this._node.val()},t}();function Fi(t,e){return(t=(0,o.m9)(t))._checkNotDeleted("ref"),void 0!==e?qi(t._root,e):t._root}function ji(t,e){(t=(0,o.m9)(t))._checkNotDeleted("refFromURL");var n=Si(e,t._repo.repoInfo_.nodeAdmin);$r("refFromURL",n);var r=n.repoInfo;return t._repo.repoInfo_.isCustomHost()||r.host===t._repo.repoInfo_.host||x("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+t._repo.repoInfo_.host+")"),Fi(t,n.path.toString())}function qi(t,e){var n;return null===_t((t=(0,o.m9)(t))._path)?("child","path",!1,(n=e)&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),zr("child","path",n,false)):zr("child","path",e,!1),new Mi(t._repo,At(t._path,e))}function Bi(t,e){t=(0,o.m9)(t),Kr("push",t._path),qr("push",e,t._path,!0);var n,r=ii(t._repo),i=me(r),s=qi(t,i),a=qi(t,i);return n=null!=e?Gi(a,e).then((function(){return a})):Promise.resolve(a),s.then=n.then.bind(n),s.catch=n.then.bind(n,void 0),s}function Vi(t){return Kr("remove",t._path),Gi(t,null)}function Gi(t,e){t=(0,o.m9)(t),Kr("set",t._path),qr("set",e,t._path,!1);var n=new o.BH;return hi(t._repo,t._path,e,null,n.wrapCallback((function(){}))),n.promise}function Hi(t,e){t=(0,o.m9)(t),Kr("setPriority",t._path),Gr("setPriority",e,!1);var n=new o.BH;return hi(t._repo,At(t._path,".priority"),e,null,n.wrapCallback((function(){}))),n.promise}function Wi(t,e,n){if(Kr("setWithPriority",t._path),qr("setWithPriority",e,t._path,!1),Gr("setWithPriority",n,!1),".length"===t.key||".keys"===t.key)throw"setWithPriority failed: "+t.key+" is a read-only object.";var r=new o.BH;return hi(t._repo,t._path,e,n,r.wrapCallback((function(){}))),r.promise}function zi(t,e){Vr("update",e,t._path,!1);var n=new o.BH;return function(t,e,n,r){gi(t,"update",{path:e.toString(),value:n});var i=!0,s=oi(t),a={};if(B(n,(function(n,r){i=!1,a[n]=Ir(At(e,n),le(r),t.serverSyncTree_,s)})),i)N("update() called with empty data.  Don't do anything."),vi(0,r,"ok",void 0);else{var u=ci(t),c=function(t,e,n,r){!function(t,e,n,r){(0,o.hu)(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=sn(t.visibleWrites,e,n),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r);var i=nn.fromObject(n);return ar(t,new Ke({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(t.serverSyncTree_,e,a,u);Xr(t.eventQueue_,c),t.server_.merge(e.toString(),n,(function(n,i){var o="ok"===n;o||R("update at "+e+" failed: "+n);var s=nr(t.serverSyncTree_,u,!o),a=s.length>0?_i(t,e):e;Zr(t.eventQueue_,a,s),vi(0,r,n,i)})),B(n,(function(n){var r=Ti(t,At(e,n));_i(t,r)})),Zr(t.eventQueue_,e,[])}}(t._repo,t._path,e,n.wrapCallback((function(){}))),n.promise}function Ki(t){return function(t,e){var n=function(t,e){var n=e._path,r=null;t.syncPointTree_.foreachOnPath(n,(function(t,e){var i=kt(t,n);r=r||$n(e,i)}));var i=t.syncPointTree_.get(n);i?r=r||$n(i,yt()):(i=new Hn,t.syncPointTree_=t.syncPointTree_.set(n,i));var o=null!=r,s=o?new $e(r,!0,!1):null;return tn(zn(i,e,gn(t.pendingWriteTree_,e._path),o?s.getNode():ce.EMPTY_NODE,o).viewCache_)}(t.serverSyncTree_,e);return null!=n?Promise.resolve(n):t.server_.get(e).then((function(n){var r=le(n).withIndex(e._queryParams.getIndex()),i=rr(t.serverSyncTree_,e._path,r);return Jr(t.eventQueue_,e._path,i),Promise.resolve(r)}),(function(n){return gi(t,"get for query "+(0,o.Pz)(e)+" failed: "+n),Promise.reject(new Error(n))}))}((t=(0,o.m9)(t))._repo,t).then((function(e){return new Ui(e,new Mi(t._repo,t._path),t._queryParams.getIndex())}))}var $i=function(){function t(t){this.callbackContext=t}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e._queryParams.getIndex();return new Ni("value",this,new Ui(t.snapshotNode,new Mi(e._repo,e._path),n))},t.prototype.getEventRunner=function(t){var e=this;return"cancel"===t.getEventType()?function(){return e.callbackContext.onCancel(t.error)}:function(){return e.callbackContext.onValue(t.snapshot,null)}},t.prototype.createCancelEvent=function(t,e){return this.callbackContext.hasCancelCallback?new Ci(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))},t.prototype.hasAnyCallback=function(){return null!==this.callbackContext},t}(),Yi=function(){function t(t,e){this.eventType=t,this.callbackContext=e}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,this.eventType===e},t.prototype.createCancelEvent=function(t,e){return this.callbackContext.hasCancelCallback?new Ci(this,t,e):null},t.prototype.createEvent=function(t,e){(0,o.hu)(null!=t.childName,"Child events should have a childName.");var n=qi(new Mi(e._repo,e._path),t.childName),r=e._queryParams.getIndex();return new Ni(t.type,this,new Ui(t.snapshotNode,n,r),t.prevName)},t.prototype.getEventRunner=function(t){var e=this;return"cancel"===t.getEventType()?function(){return e.callbackContext.onCancel(t.error)}:function(){return e.callbackContext.onValue(t.snapshot,t.prevName)}},t.prototype.matches=function(e){return e instanceof t&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))},t.prototype.hasAnyCallback=function(){return!!this.callbackContext},t}();function Qi(t,e,n,r,i){var o;if("object"==typeof r&&(o=void 0,i=r),"function"==typeof r&&(o=r),i&&i.onlyOnce){var s=n,a=function(e,n){pi(t._repo,t,c),s(e,n)};a.userCallback=n.userCallback,a.context=n.context,n=a}var u=new Oi(n,o||void 0),c="value"===e?new $i(u):new Yi(e,u);return function(t,e,n){var r;r=".info"===_t(e._path)?or(t.infoSyncTree_,e,n):or(t.serverSyncTree_,e,n),Jr(t.eventQueue_,e._path,r)}(t._repo,t,c),function(){return pi(t._repo,t,c)}}function Xi(t,e,n,r){return Qi(t,"value",e,n,r)}function Ji(t,e,n,r){return Qi(t,"child_added",e,n,r)}function Zi(t,e,n,r){return Qi(t,"child_changed",e,n,r)}function to(t,e,n,r){return Qi(t,"child_moved",e,n,r)}function eo(t,e,n,r){return Qi(t,"child_removed",e,n,r)}function no(t,e,n){var r=null,i=n?new Oi(n):null;"value"===e?r=new $i(i):e&&(r=new Yi(e,i)),pi(t._repo,t,r)}var ro=function(){},io=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return a(e,t),e.prototype._apply=function(t){qr("endAt",this._value,t._path,!0);var e=Ce(t._queryParams,this._value,this._key);if(Li(e),Pi(e),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ri(t._repo,t._path,e,t._orderByCalled)},e}(ro);function oo(t,e){return Wr("endAt","key",e,!0),new io(t,e)}var so=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return a(e,t),e.prototype._apply=function(t){qr("endBefore",this._value,t._path,!1);var e,n,r,i,o=(e=t._queryParams,n=this._value,r=this._key,e.index_===Vt?("string"==typeof n&&(n=_e(n)),i=Ce(e,n,r)):i=Ce(e,n,null==r?P:_e(r)),i.endBeforeSet_=!0,i);if(Li(o),Pi(o),t._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ri(t._repo,t._path,o,t._orderByCalled)},e}(ro);function ao(t,e){return Wr("endBefore","key",e,!0),new so(t,e)}var uo=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return a(e,t),e.prototype._apply=function(t){qr("startAt",this._value,t._path,!0);var e=Ne(t._queryParams,this._value,this._key);if(Li(e),Pi(e),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Ri(t._repo,t._path,e,t._orderByCalled)},e}(ro);function co(t,e){return void 0===t&&(t=null),Wr("startAt","key",e,!0),new uo(t,e)}var ho=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return a(e,t),e.prototype._apply=function(t){qr("startAfter",this._value,t._path,!1);var e,n,r,i,o=(e=t._queryParams,n=this._value,r=this._key,e.index_===Vt?("string"==typeof n&&(n=ye(n)),i=Ne(e,n,r)):i=Ne(e,n,null==r?L:ye(r)),i.startAfterSet_=!0,i);if(Li(o),Pi(o),t._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Ri(t._repo,t._path,o,t._orderByCalled)},e}(ro);function lo(t,e){return Wr("startAfter","key",e,!0),new ho(t,e)}var fo=function(t){function e(e){var n=t.call(this)||this;return n._limit=e,n}return a(e,t),e.prototype._apply=function(t){if(t._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ri(t._repo,t._path,(e=t._queryParams,n=this._limit,(r=e.copy()).limitSet_=!0,r.limit_=n,r.viewFrom_="l",r),t._orderByCalled);var e,n,r},e}(ro);function po(t){if("number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new fo(t)}var go=function(t){function e(e){var n=t.call(this)||this;return n._limit=e,n}return a(e,t),e.prototype._apply=function(t){if(t._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ri(t._repo,t._path,(e=t._queryParams,n=this._limit,(r=e.copy()).limitSet_=!0,r.limit_=n,r.viewFrom_="r",r),t._orderByCalled);var e,n,r},e}(ro);function vo(t){if("number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new go(t)}var mo=function(t){function e(e){var n=t.call(this)||this;return n._path=e,n}return a(e,t),e.prototype._apply=function(t){Di(t,"orderByChild");var e=new mt(this._path);if(St(e))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var n=new de(e),r=Oe(t._queryParams,n);return Pi(r),new Ri(t._repo,t._path,r,!0)},e}(ro);function yo(t){if("$key"===t)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===t)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===t)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return zr("orderByChild","path",t,!1),new mo(t)}var _o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype._apply=function(t){Di(t,"orderByKey");var e=Oe(t._queryParams,Vt);return Pi(e),new Ri(t._repo,t._path,e,!0)},e}(ro);function bo(){return new _o}var wo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype._apply=function(t){Di(t,"orderByPriority");var e=Oe(t._queryParams,re);return Pi(e),new Ri(t._repo,t._path,e,!0)},e}(ro);function Io(){return new wo}var Eo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype._apply=function(t){Di(t,"orderByValue");var e=Oe(t._queryParams,ge);return Pi(e),new Ri(t._repo,t._path,e,!0)},e}(ro);function To(){return new Eo}var Ao=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return a(e,t),e.prototype._apply=function(t){if(qr("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new io(this._value,this._key)._apply(new uo(this._value,this._key)._apply(t))},e}(ro);function So(t,e){return Wr("equalTo","key",e,!0),new Ao(t,e)}function ko(t){for(var e,n,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var s=(0,o.m9)(t);try{for(var a=c(r),u=a.next();!u.done;u=a.next()){var h=u.value;s=h._apply(s)}}catch(t){e={error:t}}finally{try{u&&!u.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return s}!function(t){(0,o.hu)(!Mn,"__referenceConstructor has already been defined"),Mn=t}(Mi),function(t){(0,o.hu)(!Gn,"__referenceConstructor has already been defined"),Gn=t}(Mi);var No={},Co=!1;function Oo(t,e,n,r,i){var o=r||t.options.databaseURL;void 0===o&&(t.options.projectId||x("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),N("Using default host for project ",t.options.projectId),o=t.options.projectId+"-default-rtdb.firebaseio.com");var s,a=Si(o,i),u=a.repoInfo,c=void 0;"undefined"!=typeof process&&(c={FIREBASE_API_KEY:"AIzaSyA_d2z_LMkARJysO5MINZc-W3DFE-ZHXT0",FIREBASE_AUTH_DOMAIN:"lmi-store.firebaseapp.com",FIREBASE_PROJECT_ID:"lmi-store",FIREBASE_STORAGE_BUCKET:"lmi-store.appspot.com",FIREBASE_MESSAGING_SENDER_ID:"724695490036",FIREBASE_APP_ID:"1:724695490036:web:74fdba648a47384d3b2da1",FIREBASE_MEASUREMENT_ID:"G-H88RV60D76",ENV_DOMAIN:"https://api.tldv.io",TLDV_LOGIN_URL:"https://tldv.io/app/login?autoClose=true",MIXPANEL_PLAN:"early-beta",MIXPANEL_KEY:"9119f2c3302030eaaee56e29fcf9b1bc",NODE_ENV:"production",ONBOARDING_URL:"https://tldv.io/app/chrome-extension-onboarding",APP_URL:"https://tldv.io/app",MAX_MEETING_DURATION_IN_HOURS:"3",UNINSTALL_URL:"https://tally.so/r/3jqNxm",SENTRY_DSN:"https://27e262052a324fec9473a47392ea1735@o1042962.ingest.sentry.io/6021256",GROWTHBOOK_ROOT_DOMAIN:"https://cdn.growthbook.io",GROWTHBOOK_API_KEY:"key_prod_78197814c430ea7f"}.FIREBASE_DATABASE_EMULATOR_HOST),c?(s=!0,o="http://"+c+"?ns="+u.namespace,u=(a=Si(o,i)).repoInfo):s=!a.repoInfo.secure;var h=i&&s?new Y(Y.OWNER):new $(t.name,t.options,e);$r("Invalid Firebase Database URL",a),St(a.path)||x("Database URL must point to the root of a Firebase Database (not including a child path).");var l=function(t,e,n,r){var i=No[e.name];i||(i={},No[e.name]=i);var o=i[t.toURLString()];return o&&x("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new ri(t,Co,n,r),i[t.toURLString()]=o,o}(u,t,h,new K(t.name,n));return new xo(l,t)}var xo=function(){function t(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}return Object.defineProperty(t.prototype,"_repo",{get:function(){return this._instanceStarted||(function(t,e,n){if(t.stats_=it(t.repoInfo_),t.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)t.server_=new De(t.repoInfo_,(function(e,n,r,i){si(t,e,n,r,i)}),t.authTokenProvider_,t.appCheckProvider_),setTimeout((function(){return ai(t,!0)}),0);else{if(null!=n){if("object"!=typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,o.Pz)(n)}catch(t){throw new Error("Invalid authOverride provided: "+t)}}t.persistentConnection_=new Ft(t.repoInfo_,e,(function(e,n,r,i){si(t,e,n,r,i)}),(function(e){ai(t,e)}),(function(e){!function(t,e){B(e,(function(e,n){ui(t,e,n)}))}(t,e)}),t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}var r,i;t.authTokenProvider_.addTokenChangeListener((function(e){t.server_.refreshAuthToken(e)})),t.appCheckProvider_.addTokenChangeListener((function(e){t.server_.refreshAppCheckToken(e.token)})),t.statsReporter_=(r=function(){return new Be(t.stats_,t.server_)},i=t.repoInfo_.toString(),rt[i]||(rt[i]=r()),rt[i]),t.infoData_=new Pe,t.infoSyncTree_=new tr({startListening:function(e,n,r,i){var o=[],s=t.infoData_.getNode(e._path);return s.isEmpty()||(o=rr(t.infoSyncTree_,e._path,s),setTimeout((function(){i("ok")}),0)),o},stopListening:function(){}}),ui(t,"connected",!1),t.serverSyncTree_=new tr({startListening:function(e,n,r,i){return t.server_.listen(e,r,n,(function(n,r){var o=i(n,r);Zr(t.eventQueue_,e._path,o)})),[]},stopListening:function(e,n){t.server_.unlisten(e,n)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_root",{get:function(){return this._rootInternal||(this._rootInternal=new Mi(this._repo,yt())),this._rootInternal},enumerable:!1,configurable:!0}),t.prototype._delete=function(){var t,e,n;return null!==this._rootInternal&&(t=this._repo,e=this.app.name,(n=No[e])&&n[t.key]===t||x("Database "+e+"("+t.repoInfo_+") has already been deleted."),di(t),delete n[t.key],this._repoInternal=null,this._rootInternal=null),Promise.resolve()},t.prototype._checkNotDeleted=function(t){null===this._rootInternal&&x("Cannot call "+t+" on a deleted database.")},t}();function Ro(t){(t=(0,o.m9)(t))._checkNotDeleted("goOffline"),di(t._repo)}function Do(t){var e;(t=(0,o.m9)(t))._checkNotDeleted("goOnline"),(e=t._repo).persistentConnection_&&e.persistentConnection_.resume(ni)}var Po={".sv":"timestamp"},Lo=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}();function Mo(t,e,n){var r;if(t=(0,o.m9)(t),Kr("Reference.transaction",t._path),".length"===t.key||".keys"===t.key)throw"Reference.transaction failed: "+t.key+" is a read-only object.";var i=null===(r=null==n?void 0:n.applyLocally)||void 0===r||r,s=new o.BH,a=Xi(t,(function(){}));return function(e,n,r,i,a,u){gi(e,"transaction on "+n);var c={path:n,update:r,onComplete:function(e,n,r){var i=null;e?s.reject(e):(i=new Ui(r,new Mi(t._repo,t._path),re),s.resolve(new Lo(n,i)))},status:null,order:I(),applyLocally:u,retryCount:0,unwatcher:a,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},h=mi(e,n,void 0);c.currentInputSnapshot=h;var l=c.update(h.val());if(void 0===l)c.unwatcher(),c.currentOutputSnapshotRaw=null,c.currentOutputSnapshotResolved=null,c.onComplete&&c.onComplete(null,!1,c.currentInputSnapshot);else{Br("transaction failed: Data returned ",l,c.path),c.status=0;var f=Sr(e.transactionQueueTree_,n),p=kr(f)||[];p.push(c),Nr(f,p);var d=void 0;"object"==typeof l&&null!==l&&(0,o.r3)(l,".priority")?(d=(0,o.DV)(l,".priority"),(0,o.hu)(jr(d),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):d=(sr(e.serverSyncTree_,n)||ce.EMPTY_NODE).getPriority().val();var g=oi(e),v=le(l,d),m=Er(v,h,g);c.currentOutputSnapshotRaw=v,c.currentOutputSnapshotResolved=m,c.currentWriteId=ci(e);var y=er(e.serverSyncTree_,n,m,c.currentWriteId,c.applyLocally);Zr(e.eventQueue_,n,y),yi(e,e.transactionQueueTree_)}}(t._repo,t._path,e,0,a,i),s.promise}var Uo=function(){function t(t){this._delegate=t}return t.prototype.cancel=function(t){(0,o.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,o.Wj)("OnDisconnect.cancel","onComplete",t,!0);var e=this._delegate.cancel();return t&&e.then((function(){return t(null)}),(function(e){return t(e)})),e},t.prototype.remove=function(t){(0,o.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,o.Wj)("OnDisconnect.remove","onComplete",t,!0);var e=this._delegate.remove();return t&&e.then((function(){return t(null)}),(function(e){return t(e)})),e},t.prototype.set=function(t,e){(0,o.Dv)("OnDisconnect.set",1,2,arguments.length),(0,o.Wj)("OnDisconnect.set","onComplete",e,!0);var n=this._delegate.set(t);return e&&n.then((function(){return e(null)}),(function(t){return e(t)})),n},t.prototype.setWithPriority=function(t,e,n){(0,o.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,o.Wj)("OnDisconnect.setWithPriority","onComplete",n,!0);var r=this._delegate.setWithPriority(t,e);return n&&r.then((function(){return n(null)}),(function(t){return n(t)})),r},t.prototype.update=function(t,e){if((0,o.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,R("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,o.Wj)("OnDisconnect.update","onComplete",e,!0);var i=this._delegate.update(t);return e&&i.then((function(){return e(null)}),(function(t){return e(t)})),i},t}(),Fo=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return(0,o.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),jo=function(){function t(t,e){this._database=t,this._delegate=e}return t.prototype.val=function(){return(0,o.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()},t.prototype.exportVal=function(){return(0,o.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()},t.prototype.toJSON=function(){return(0,o.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()},t.prototype.exists=function(){return(0,o.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()},t.prototype.child=function(e){return(0,o.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),zr("DataSnapshot.child","path",e,!1),new t(this._database,this._delegate.child(e))},t.prototype.hasChild=function(t){return(0,o.Dv)("DataSnapshot.hasChild",1,1,arguments.length),zr("DataSnapshot.hasChild","path",t,!1),this._delegate.hasChild(t)},t.prototype.getPriority=function(){return(0,o.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority},t.prototype.forEach=function(e){var n=this;return(0,o.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,o.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach((function(r){return e(new t(n._database,r))}))},t.prototype.hasChildren=function(){return(0,o.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()},Object.defineProperty(t.prototype,"key",{get:function(){return this._delegate.key},enumerable:!1,configurable:!0}),t.prototype.numChildren=function(){return(0,o.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size},t.prototype.getRef=function(){return(0,o.Dv)("DataSnapshot.ref",0,0,arguments.length),new Bo(this._database,this._delegate.ref)},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),qo=function(){function t(t,e){this.database=t,this._delegate=e}return t.prototype.on=function(e,n,r,i){var s,a=this;(0,o.Dv)("Query.on",2,4,arguments.length),(0,o.Wj)("Query.on","callback",n,!1);var u=t.getCancelAndContextArgs_("Query.on",r,i),c=function(t,e){n.call(u.context,new jo(a.database,t),e)};c.userCallback=n,c.context=u.context;var h=null===(s=u.cancel)||void 0===s?void 0:s.bind(u.context);switch(e){case"value":return Xi(this._delegate,c,h),n;case"child_added":return Ji(this._delegate,c,h),n;case"child_removed":return eo(this._delegate,c,h),n;case"child_changed":return Zi(this._delegate,c,h),n;case"child_moved":return to(this._delegate,c,h),n;default:throw new Error((0,o.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},t.prototype.off=function(t,e,n){if((0,o.Dv)("Query.off",0,3,arguments.length),Hr("Query.off",t,!0),(0,o.Wj)("Query.off","callback",e,!0),(0,o.lb)("Query.off","context",n,!0),e){var r=function(){};r.userCallback=e,r.context=n,no(this._delegate,t,r)}else no(this._delegate,t)},t.prototype.get=function(){var t=this;return Ki(this._delegate).then((function(e){return new jo(t.database,e)}))},t.prototype.once=function(e,n,r,i){var s=this;(0,o.Dv)("Query.once",1,4,arguments.length),(0,o.Wj)("Query.once","callback",n,!0);var a=t.getCancelAndContextArgs_("Query.once",r,i),u=new o.BH,c=function(t,e){var r=new jo(s.database,t);n&&n.call(a.context,r,e),u.resolve(r)};c.userCallback=n,c.context=a.context;var h=function(t){a.cancel&&a.cancel.call(a.context,t),u.reject(t)};switch(e){case"value":Xi(this._delegate,c,h,{onlyOnce:!0});break;case"child_added":Ji(this._delegate,c,h,{onlyOnce:!0});break;case"child_removed":eo(this._delegate,c,h,{onlyOnce:!0});break;case"child_changed":Zi(this._delegate,c,h,{onlyOnce:!0});break;case"child_moved":to(this._delegate,c,h,{onlyOnce:!0});break;default:throw new Error((0,o.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return u.promise},t.prototype.limitToFirst=function(e){return(0,o.Dv)("Query.limitToFirst",1,1,arguments.length),new t(this.database,ko(this._delegate,po(e)))},t.prototype.limitToLast=function(e){return(0,o.Dv)("Query.limitToLast",1,1,arguments.length),new t(this.database,ko(this._delegate,vo(e)))},t.prototype.orderByChild=function(e){return(0,o.Dv)("Query.orderByChild",1,1,arguments.length),new t(this.database,ko(this._delegate,yo(e)))},t.prototype.orderByKey=function(){return(0,o.Dv)("Query.orderByKey",0,0,arguments.length),new t(this.database,ko(this._delegate,bo()))},t.prototype.orderByPriority=function(){return(0,o.Dv)("Query.orderByPriority",0,0,arguments.length),new t(this.database,ko(this._delegate,Io()))},t.prototype.orderByValue=function(){return(0,o.Dv)("Query.orderByValue",0,0,arguments.length),new t(this.database,ko(this._delegate,To()))},t.prototype.startAt=function(e,n){return void 0===e&&(e=null),(0,o.Dv)("Query.startAt",0,2,arguments.length),new t(this.database,ko(this._delegate,co(e,n)))},t.prototype.startAfter=function(e,n){return void 0===e&&(e=null),(0,o.Dv)("Query.startAfter",0,2,arguments.length),new t(this.database,ko(this._delegate,lo(e,n)))},t.prototype.endAt=function(e,n){return void 0===e&&(e=null),(0,o.Dv)("Query.endAt",0,2,arguments.length),new t(this.database,ko(this._delegate,oo(e,n)))},t.prototype.endBefore=function(e,n){return void 0===e&&(e=null),(0,o.Dv)("Query.endBefore",0,2,arguments.length),new t(this.database,ko(this._delegate,ao(e,n)))},t.prototype.equalTo=function(e,n){return(0,o.Dv)("Query.equalTo",1,2,arguments.length),new t(this.database,ko(this._delegate,So(e,n)))},t.prototype.toString=function(){return(0,o.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()},t.prototype.toJSON=function(){return(0,o.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()},t.prototype.isEqual=function(e){if((0,o.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof t)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}return this._delegate.isEqual(e._delegate)},t.getCancelAndContextArgs_=function(t,e,n){var r={cancel:void 0,context:void 0};if(e&&n)r.cancel=e,(0,o.Wj)(t,"cancel",r.cancel,!0),r.context=n,(0,o.lb)(t,"context",r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error((0,o.gK)(t,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(t.prototype,"ref",{get:function(){return new Bo(this.database,new Mi(this._delegate._repo,this._delegate._path))},enumerable:!1,configurable:!0}),t}(),Bo=function(t){function e(e,n){var r=t.call(this,e,new Ri(n._repo,n._path,new ke,!1))||this;return r.database=e,r._delegate=n,r}return a(e,t),e.prototype.getKey=function(){return(0,o.Dv)("Reference.key",0,0,arguments.length),this._delegate.key},e.prototype.child=function(t){return(0,o.Dv)("Reference.child",1,1,arguments.length),"number"==typeof t&&(t=String(t)),new e(this.database,qi(this._delegate,t))},e.prototype.getParent=function(){(0,o.Dv)("Reference.parent",0,0,arguments.length);var t=this._delegate.parent;return t?new e(this.database,t):null},e.prototype.getRoot=function(){return(0,o.Dv)("Reference.root",0,0,arguments.length),new e(this.database,this._delegate.root)},e.prototype.set=function(t,e){(0,o.Dv)("Reference.set",1,2,arguments.length),(0,o.Wj)("Reference.set","onComplete",e,!0);var n=Gi(this._delegate,t);return e&&n.then((function(){return e(null)}),(function(t){return e(t)})),n},e.prototype.update=function(t,e){if((0,o.Dv)("Reference.update",1,2,arguments.length),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,R("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Kr("Reference.update",this._delegate._path),(0,o.Wj)("Reference.update","onComplete",e,!0);var i=zi(this._delegate,t);return e&&i.then((function(){return e(null)}),(function(t){return e(t)})),i},e.prototype.setWithPriority=function(t,e,n){(0,o.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,o.Wj)("Reference.setWithPriority","onComplete",n,!0);var r=Wi(this._delegate,t,e);return n&&r.then((function(){return n(null)}),(function(t){return n(t)})),r},e.prototype.remove=function(t){(0,o.Dv)("Reference.remove",0,1,arguments.length),(0,o.Wj)("Reference.remove","onComplete",t,!0);var e=Vi(this._delegate);return t&&e.then((function(){return t(null)}),(function(e){return t(e)})),e},e.prototype.transaction=function(t,e,n){var r=this;(0,o.Dv)("Reference.transaction",1,3,arguments.length),(0,o.Wj)("Reference.transaction","transactionUpdate",t,!1),(0,o.Wj)("Reference.transaction","onComplete",e,!0),Yr("Reference.transaction","applyLocally",n,!0);var i=Mo(this._delegate,t,{applyLocally:n}).then((function(t){return new Fo(t.committed,new jo(r.database,t.snapshot))}));return e&&i.then((function(t){return e(null,t.committed,t.snapshot)}),(function(t){return e(t,!1,null)})),i},e.prototype.setPriority=function(t,e){(0,o.Dv)("Reference.setPriority",1,2,arguments.length),(0,o.Wj)("Reference.setPriority","onComplete",e,!0);var n=Hi(this._delegate,t);return e&&n.then((function(){return e(null)}),(function(t){return e(t)})),n},e.prototype.push=function(t,n){var r=this;(0,o.Dv)("Reference.push",0,2,arguments.length),(0,o.Wj)("Reference.push","onComplete",n,!0);var i=Bi(this._delegate,t),s=i.then((function(t){return new e(r.database,t)}));n&&s.then((function(){return n(null)}),(function(t){return n(t)}));var a=new e(this.database,i);return a.then=s.then.bind(s),a.catch=s.catch.bind(s,void 0),a},e.prototype.onDisconnect=function(){return Kr("Reference.onDisconnect",this._delegate._path),new Uo(new xi(this._delegate._repo,this._delegate._path))},Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),e}(qo),Vo=function(){function t(t,e){var n=this;this._delegate=t,this.app=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){void 0===r&&(r={}),(t=(0,o.m9)(t))._checkNotDeleted("useEmulator"),t._instanceStarted&&x("Cannot call useEmulator() after instance has already been initialized.");var i=t._repoInternal,s=void 0;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&x('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Y(Y.OWNER);else if(r.mockUserToken){var a="string"==typeof r.mockUserToken?r.mockUserToken:(0,o.Sg)(r.mockUserToken,t.app.options.projectId);s=new Y(a)}!function(t,e,n,r){t.repoInfo_=new Z(e+":"+n,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),r&&(t.authTokenProvider_=r)}(i,e,n,s)}(this._delegate,t,e,n)},t.prototype.ref=function(t){if((0,o.Dv)("database.ref",0,1,arguments.length),t instanceof Bo){var e=ji(this._delegate,t.toString());return new Bo(this,e)}return e=Fi(this._delegate,t),new Bo(this,e)},t.prototype.refFromURL=function(t){var e="database.refFromURL";(0,o.Dv)(e,1,1,arguments.length);var n=ji(this._delegate,t);return new Bo(this,n)},t.prototype.goOffline=function(){return(0,o.Dv)("database.goOffline",0,0,arguments.length),Ro(this._delegate)},t.prototype.goOnline=function(){return(0,o.Dv)("database.goOnline",0,0,arguments.length),Do(this._delegate)},t.ServerValue={TIMESTAMP:Po,increment:function(t){return function(t){return{".sv":{increment:t}}}(t)}},t}(),Go=Object.freeze({__proto__:null,forceLongPolling:function(){lt.forceDisallow(),ut.forceAllow()},forceWebSockets:function(){ut.forceDisallow()},isWebSocketsAvailable:function(){return lt.isAvailable()},setSecurityDebugCallback:function(t,e){t._delegate._repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){!function(t,e){if(void 0===e&&(e=!1),"undefined"!=typeof console){var n;e?(t.statsListener_||(t.statsListener_=new qe(t.stats_)),n=t.statsListener_.get()):n=t.stats_.get();var r=Object.keys(n).reduce((function(t,e){return Math.max(e.length,t)}),0);B(n,(function(t,e){for(var n=t,i=t.length;i<r+2;i++)n+=" ";console.log(n+e)}))}}(t._delegate._repo,e)},statsIncrementCounter:function(t,e){!function(t,e){var n;t.stats_.incrementCounter(e),n=e,t.statsReporter_.statsToReport_[n]=!0}(t._delegate._repo,e)},dataUpdateCount:function(t){return t._delegate._repo.dataUpdateCount},interceptServerData:function(t,e){return function(t,e){t.interceptServerDataCallback_=e}(t._delegate._repo,e)},initStandalone:function(t){var e=t.app,n=t.url,r=t.version,o=t.customAuthImpl,s=t.namespace,a=t.nodeAdmin,u=void 0!==a&&a;d(r);var c=new i.zt("auth-internal",new i.H0("database-standalone"));return c.setComponent(new i.wA("auth-internal",(function(){return o}),"PRIVATE")),{instance:new Vo(Oo(e,c,void 0,n,u),e),namespace:s}}}),Ho=Ft;Ft.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},Ft.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var Wo=pt,zo=Z,Ko=Object.freeze({__proto__:null,DataConnection:Ho,RealTimeConnection:Wo,hijackHash:function(t){var e=Ft.prototype.put;return Ft.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){Ft.prototype.put=e}},ConnectionTarget:zo,queryIdentifier:function(t){return t._delegate._queryIdentifier},forceRestClient:function(t){!function(t){Co=t}(t)}}),$o=Vo.ServerValue;!function(e){d(e.SDK_VERSION);var n=e.INTERNAL.registerComponent(new i.wA("database",(function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return new Vo(Oo(r,i,o,n),r)}),"PUBLIC").setServiceProps({Reference:Bo,Query:qo,Database:Vo,DataSnapshot:jo,enableLogging:k,INTERNAL:Go,ServerValue:$o,TEST_ACCESS:Ko}).setMultipleInstances(!0));e.registerVersion("@firebase/database","0.11.0"),(0,o.Yr)()&&(t.exports=n)}(r.Z)},100:(t,e,n)=>{"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var i;n.d(e,{Am:()=>p,Ub:()=>f,Yd:()=>l,in:()=>o});var o,s=[];!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(o||(o={}));var a={debug:o.DEBUG,verbose:o.VERBOSE,info:o.INFO,warn:o.WARN,error:o.ERROR,silent:o.SILENT},u=o.INFO,c=((i={})[o.DEBUG]="log",i[o.VERBOSE]="log",i[o.INFO]="info",i[o.WARN]="warn",i[o.ERROR]="error",i),h=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),s=c[e];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[s].apply(console,r(["["+o+"]  "+t.name+":"],n))}},l=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=h,this._userLogHandler=null,s.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in o))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.DEBUG],t)),this._logHandler.apply(this,r([this,o.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.VERBOSE],t)),this._logHandler.apply(this,r([this,o.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.INFO],t)),this._logHandler.apply(this,r([this,o.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.WARN],t)),this._logHandler.apply(this,r([this,o.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.ERROR],t)),this._logHandler.apply(this,r([this,o.ERROR],t))},t}();function f(t){s.forEach((function(e){e.setLogLevel(t)}))}function p(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],s=2;s<arguments.length;s++)i[s-2]=arguments[s];var a=i.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(t){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:o[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=s;r<i.length;r++)n(i[r])}},4850:(t,e,n)=>{"use strict";n.d(e,{BH:()=>d,LL:()=>N,gQ:()=>B,hu:()=>o,g5:()=>s,US:()=>u,h$:()=>c,r3:()=>M,Sg:()=>g,ne:()=>V,p$:()=>f,ZB:()=>p,gK:()=>z,m9:()=>X,z$:()=>v,GJ:()=>L,jU:()=>_,ru:()=>b,d:()=>I,xb:()=>F,w1:()=>E,uI:()=>m,UG:()=>y,Yr:()=>A,b$:()=>w,G6:()=>S,Mn:()=>T,w9:()=>P,cI:()=>x,UI:()=>j,xO:()=>q,DV:()=>U,ug:()=>Q,dS:()=>Y,Pz:()=>R,Dv:()=>W,Wj:()=>K,lb:()=>$});var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},i=function(){return i=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},i.apply(this,arguments)};Object.create,Object.create;var o=function(t,e){if(!t)throw s(e)},s=function(t){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+t)},a=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},u={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,h=o>>2,l=(3&o)<<4|a>>4,f=(15&a)<<2|c>>6,p=63&c;u||(p=64,s||(f=64)),r.push(n[h],n[l],n[f],n[p])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(a(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();var c=o<<2|s>>4;if(r.push(c),64!==a){var h=s<<4&240|a>>2;if(r.push(h),64!==u){var l=a<<6&192|u;r.push(l)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},c=function(t){var e=a(t);return u.encodeByteArray(e,!0)},h=function(t){return c(t).replace(/\./g,"")},l=function(t){try{return u.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function f(t){return p(void 0,t)}function p(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=p(t[n],e[n]));return t}var d=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();function g(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=e||"demo-project",r=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var s=i({iss:"https://securetoken.google.com/"+n,aud:n,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[h(JSON.stringify({alg:"none",type:"JWT"})),h(JSON.stringify(s)),""].join(".")}function v(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function m(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(v())}function y(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(t){return!1}}function _(){return"object"==typeof self&&self.self===self}function b(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function w(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function I(){return v().indexOf("Electron/")>=0}function E(){var t=v();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function T(){return v().indexOf("MSAppHost/")>=0}function A(){return!1}function S(){return!y()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}var k=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,N.prototype.create),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e}(Error),N=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?C(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new k(i,a,r);return u},t}();function C(t,e){return t.replace(O,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var O=/\{\$([^}]+)}/g;function x(t){return JSON.parse(t)}function R(t){return JSON.stringify(t)}var D=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=x(l(o[0])||""),n=x(l(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(t){}return{header:e,claims:n,data:r,signature:i}},P=function(t){var e=D(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},L=function(t){var e=D(t).claims;return"object"==typeof e&&!0===e.admin};function M(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function U(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function F(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function j(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function q(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach((function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))})):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];n(o[0],o[1])}return e.length?"&"+e.join("&"):""}var B=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,s,a=this.chain_[0],u=this.chain_[1],c=this.chain_[2],h=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++)r<40?r<20?(o=h^u&(c^h),s=1518500249):(o=u^c^h,s=1859775393):r<60?(o=u&c|h&(u|c),s=2400959708):(o=u^c^h,s=3395469782),i=(a<<5|a>>>27)+o+l+s+n[r]&4294967295,l=h,h=c,c=4294967295&(u<<30|u>>>2),u=a,a=i;this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}();function V(t,e){var n=new G(t,e);return n.subscribe.bind(n)}var G=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=H),void 0===r.error&&(r.error=H),void 0===r.complete&&(r.complete=H);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function H(){}var W=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function z(t,e){return t+" failed: "+e+" argument "}function K(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(z(t,e)+"must be a valid function.")}function $(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(z(t,e)+"must be a valid context object.")}var Y=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);if(i>=55296&&i<=56319){var s=i-55296;r++,o(r<t.length,"Surrogate pair missing trail surrogate."),i=65536+(s<<10)+(t.charCodeAt(r)-56320)}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},Q=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};function X(t){return t&&t._delegate?t._delegate:t}},7185:(t,e,n)=>{t.exports=n(6908)},8806:(t,e,n)=>{"use strict";var r=n(4208),i=n(3347),o=n(398),s=n(777),a=n(4259),u=n(1489),c=n(757),h=n(2717);t.exports=function(t){return new Promise((function(e,n){var l=t.data,f=t.headers,p=t.responseType;r.isFormData(l)&&delete f["Content-Type"];var d=new XMLHttpRequest;if(t.auth){var g=t.auth.username||"",v=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";f.Authorization="Basic "+btoa(g+":"+v)}var m=a(t.baseURL,t.url);function y(){if(d){var r="getAllResponseHeaders"in d?u(d.getAllResponseHeaders()):null,o={data:p&&"text"!==p&&"json"!==p?d.response:d.responseText,status:d.status,statusText:d.statusText,headers:r,config:t,request:d};i(e,n,o),d=null}}if(d.open(t.method.toUpperCase(),s(m,t.params,t.paramsSerializer),!0),d.timeout=t.timeout,"onloadend"in d?d.onloadend=y:d.onreadystatechange=function(){d&&4===d.readyState&&(0!==d.status||d.responseURL&&0===d.responseURL.indexOf("file:"))&&setTimeout(y)},d.onabort=function(){d&&(n(h("Request aborted",t,"ECONNABORTED",d)),d=null)},d.onerror=function(){n(h("Network Error",t,null,d)),d=null},d.ontimeout=function(){var e="timeout of "+t.timeout+"ms exceeded";t.timeoutErrorMessage&&(e=t.timeoutErrorMessage),n(h(e,t,t.transitional&&t.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",d)),d=null},r.isStandardBrowserEnv()){var _=(t.withCredentials||c(m))&&t.xsrfCookieName?o.read(t.xsrfCookieName):void 0;_&&(f[t.xsrfHeaderName]=_)}"setRequestHeader"in d&&r.forEach(f,(function(t,e){void 0===l&&"content-type"===e.toLowerCase()?delete f[e]:d.setRequestHeader(e,t)})),r.isUndefined(t.withCredentials)||(d.withCredentials=!!t.withCredentials),p&&"json"!==p&&(d.responseType=t.responseType),"function"==typeof t.onDownloadProgress&&d.addEventListener("progress",t.onDownloadProgress),"function"==typeof t.onUploadProgress&&d.upload&&d.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then((function(t){d&&(d.abort(),n(t),d=null)})),l||(l=null),d.send(l)}))}},6908:(t,e,n)=>{"use strict";var r=n(4208),i=n(87),o=n(5693),s=n(6114);function a(t){var e=new o(t),n=i(o.prototype.request,e);return r.extend(n,o.prototype,e),r.extend(n,e),n}var u=a(n(8906));u.Axios=o,u.create=function(t){return a(s(u.defaults,t))},u.Cancel=n(7397),u.CancelToken=n(4417),u.isCancel=n(3278),u.all=function(t){return Promise.all(t)},u.spread=n(6870),u.isAxiosError=n(7579),t.exports=u,t.exports.default=u},7397:t=>{"use strict";function e(t){this.message=t}e.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},e.prototype.__CANCEL__=!0,t.exports=e},4417:(t,e,n)=>{"use strict";var r=n(7397);function i(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise((function(t){e=t}));var n=this;t((function(t){n.reason||(n.reason=new r(t),e(n.reason))}))}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.source=function(){var t;return{token:new i((function(e){t=e})),cancel:t}},t.exports=i},3278:t=>{"use strict";t.exports=function(t){return!(!t||!t.__CANCEL__)}},5693:(t,e,n)=>{"use strict";var r=n(4208),i=n(777),o=n(3971),s=n(3293),a=n(6114),u=n(1526),c=u.validators;function h(t){this.defaults=t,this.interceptors={request:new o,response:new o}}h.prototype.request=function(t){"string"==typeof t?(t=arguments[1]||{}).url=arguments[0]:t=t||{},(t=a(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var e=t.transitional;void 0!==e&&u.assertOptions(e,{silentJSONParsing:c.transitional(c.boolean,"1.0.0"),forcedJSONParsing:c.transitional(c.boolean,"1.0.0"),clarifyTimeoutError:c.transitional(c.boolean,"1.0.0")},!1);var n=[],r=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(r=r&&e.synchronous,n.unshift(e.fulfilled,e.rejected))}));var i,o=[];if(this.interceptors.response.forEach((function(t){o.push(t.fulfilled,t.rejected)})),!r){var h=[s,void 0];for(Array.prototype.unshift.apply(h,n),h.concat(o),i=Promise.resolve(t);h.length;)i=i.then(h.shift(),h.shift());return i}for(var l=t;n.length;){var f=n.shift(),p=n.shift();try{l=f(l)}catch(t){p(t);break}}try{i=s(l)}catch(t){return Promise.reject(t)}for(;o.length;)i=i.then(o.shift(),o.shift());return i},h.prototype.getUri=function(t){return t=a(this.defaults,t),i(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")},r.forEach(["delete","get","head","options"],(function(t){h.prototype[t]=function(e,n){return this.request(a(n||{},{method:t,url:e,data:(n||{}).data}))}})),r.forEach(["post","put","patch"],(function(t){h.prototype[t]=function(e,n,r){return this.request(a(r||{},{method:t,url:e,data:n}))}})),t.exports=h},3971:(t,e,n)=>{"use strict";var r=n(4208);function i(){this.handlers=[]}i.prototype.use=function(t,e,n){return this.handlers.push({fulfilled:t,rejected:e,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},i.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},i.prototype.forEach=function(t){r.forEach(this.handlers,(function(e){null!==e&&t(e)}))},t.exports=i},4259:(t,e,n)=>{"use strict";var r=n(4353),i=n(6647);t.exports=function(t,e){return t&&!r(e)?i(t,e):e}},2717:(t,e,n)=>{"use strict";var r=n(343);t.exports=function(t,e,n,i,o){var s=new Error(t);return r(s,e,n,i,o)}},3293:(t,e,n)=>{"use strict";var r=n(4208),i=n(3825),o=n(3278),s=n(8906);function a(t){t.cancelToken&&t.cancelToken.throwIfRequested()}t.exports=function(t){return a(t),t.headers=t.headers||{},t.data=i.call(t,t.data,t.headers,t.transformRequest),t.headers=r.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(e){delete t.headers[e]})),(t.adapter||s.adapter)(t).then((function(e){return a(t),e.data=i.call(t,e.data,e.headers,t.transformResponse),e}),(function(e){return o(e)||(a(t),e&&e.response&&(e.response.data=i.call(t,e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)}))}},343:t=>{"use strict";t.exports=function(t,e,n,r,i){return t.config=e,n&&(t.code=n),t.request=r,t.response=i,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},t}},6114:(t,e,n)=>{"use strict";var r=n(4208);t.exports=function(t,e){e=e||{};var n={},i=["url","method","data"],o=["headers","auth","proxy","params"],s=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],a=["validateStatus"];function u(t,e){return r.isPlainObject(t)&&r.isPlainObject(e)?r.merge(t,e):r.isPlainObject(e)?r.merge({},e):r.isArray(e)?e.slice():e}function c(i){r.isUndefined(e[i])?r.isUndefined(t[i])||(n[i]=u(void 0,t[i])):n[i]=u(t[i],e[i])}r.forEach(i,(function(t){r.isUndefined(e[t])||(n[t]=u(void 0,e[t]))})),r.forEach(o,c),r.forEach(s,(function(i){r.isUndefined(e[i])?r.isUndefined(t[i])||(n[i]=u(void 0,t[i])):n[i]=u(void 0,e[i])})),r.forEach(a,(function(r){r in e?n[r]=u(t[r],e[r]):r in t&&(n[r]=u(void 0,t[r]))}));var h=i.concat(o).concat(s).concat(a),l=Object.keys(t).concat(Object.keys(e)).filter((function(t){return-1===h.indexOf(t)}));return r.forEach(l,c),n}},3347:(t,e,n)=>{"use strict";var r=n(2717);t.exports=function(t,e,n){var i=n.config.validateStatus;n.status&&i&&!i(n.status)?e(r("Request failed with status code "+n.status,n.config,null,n.request,n)):t(n)}},3825:(t,e,n)=>{"use strict";var r=n(4208),i=n(8906);t.exports=function(t,e,n){var o=this||i;return r.forEach(n,(function(n){t=n.call(o,t,e)})),t}},8906:(t,e,n)=>{"use strict";var r=n(4208),i=n(9849),o=n(343),s={"Content-Type":"application/x-www-form-urlencoded"};function a(t,e){!r.isUndefined(t)&&r.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var u,c={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(u=n(8806)),u),transformRequest:[function(t,e){return i(e,"Accept"),i(e,"Content-Type"),r.isFormData(t)||r.isArrayBuffer(t)||r.isBuffer(t)||r.isStream(t)||r.isFile(t)||r.isBlob(t)?t:r.isArrayBufferView(t)?t.buffer:r.isURLSearchParams(t)?(a(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):r.isObject(t)||e&&"application/json"===e["Content-Type"]?(a(e,"application/json"),JSON.stringify(t)):t}],transformResponse:[function(t){var e=this.transitional,n=e&&e.silentJSONParsing,i=e&&e.forcedJSONParsing,s=!n&&"json"===this.responseType;if(s||i&&r.isString(t)&&t.length)try{return JSON.parse(t)}catch(t){if(s){if("SyntaxError"===t.name)throw o(t,this,"E_JSON_PARSE");throw t}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],(function(t){c.headers[t]={}})),r.forEach(["post","put","patch"],(function(t){c.headers[t]=r.merge(s)})),t.exports=c},87:t=>{"use strict";t.exports=function(t,e){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return t.apply(e,n)}}},777:(t,e,n)=>{"use strict";var r=n(4208);function i(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}t.exports=function(t,e,n){if(!e)return t;var o;if(n)o=n(e);else if(r.isURLSearchParams(e))o=e.toString();else{var s=[];r.forEach(e,(function(t,e){null!=t&&(r.isArray(t)?e+="[]":t=[t],r.forEach(t,(function(t){r.isDate(t)?t=t.toISOString():r.isObject(t)&&(t=JSON.stringify(t)),s.push(i(e)+"="+i(t))})))})),o=s.join("&")}if(o){var a=t.indexOf("#");-1!==a&&(t=t.slice(0,a)),t+=(-1===t.indexOf("?")?"?":"&")+o}return t}},6647:t=>{"use strict";t.exports=function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}},398:(t,e,n)=>{"use strict";var r=n(4208);t.exports=r.isStandardBrowserEnv()?{write:function(t,e,n,i,o,s){var a=[];a.push(t+"="+encodeURIComponent(e)),r.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),r.isString(i)&&a.push("path="+i),r.isString(o)&&a.push("domain="+o),!0===s&&a.push("secure"),document.cookie=a.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},4353:t=>{"use strict";t.exports=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}},7579:t=>{"use strict";t.exports=function(t){return"object"==typeof t&&!0===t.isAxiosError}},757:(t,e,n)=>{"use strict";var r=n(4208);t.exports=r.isStandardBrowserEnv()?function(){var t,e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function i(t){var r=t;return e&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return t=i(window.location.href),function(e){var n=r.isString(e)?i(e):e;return n.protocol===t.protocol&&n.host===t.host}}():function(){return!0}},9849:(t,e,n)=>{"use strict";var r=n(4208);t.exports=function(t,e){r.forEach(t,(function(n,r){r!==e&&r.toUpperCase()===e.toUpperCase()&&(t[e]=n,delete t[r])}))}},1489:(t,e,n)=>{"use strict";var r=n(4208),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];t.exports=function(t){var e,n,o,s={};return t?(r.forEach(t.split("\n"),(function(t){if(o=t.indexOf(":"),e=r.trim(t.substr(0,o)).toLowerCase(),n=r.trim(t.substr(o+1)),e){if(s[e]&&i.indexOf(e)>=0)return;s[e]="set-cookie"===e?(s[e]?s[e]:[]).concat([n]):s[e]?s[e]+", "+n:n}})),s):s}},6870:t=>{"use strict";t.exports=function(t){return function(e){return t.apply(null,e)}}},1526:(t,e,n)=>{"use strict";var r=n(8593),i={};["object","boolean","number","function","string","symbol"].forEach((function(t,e){i[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}}));var o={},s=r.version.split(".");function a(t,e){for(var n=e?e.split("."):s,r=t.split("."),i=0;i<3;i++){if(n[i]>r[i])return!0;if(n[i]<r[i])return!1}return!1}i.transitional=function(t,e,n){var i=e&&a(e);function s(t,e){return"[Axios v"+r.version+"] Transitional option '"+t+"'"+e+(n?". "+n:"")}return function(n,r,a){if(!1===t)throw new Error(s(r," has been removed in "+e));return i&&!o[r]&&(o[r]=!0,console.warn(s(r," has been deprecated since v"+e+" and will be removed in the near future"))),!t||t(n,r,a)}},t.exports={isOlderVersion:a,assertOptions:function(t,e,n){if("object"!=typeof t)throw new TypeError("options must be an object");for(var r=Object.keys(t),i=r.length;i-- >0;){var o=r[i],s=e[o];if(s){var a=t[o],u=void 0===a||s(a,o,t);if(!0!==u)throw new TypeError("option "+o+" must be "+u)}else if(!0!==n)throw Error("Unknown option "+o)}},validators:i}},4208:(t,e,n)=>{"use strict";var r=n(87),i=Object.prototype.toString;function o(t){return"[object Array]"===i.call(t)}function s(t){return void 0===t}function a(t){return null!==t&&"object"==typeof t}function u(t){if("[object Object]"!==i.call(t))return!1;var e=Object.getPrototypeOf(t);return null===e||e===Object.prototype}function c(t){return"[object Function]"===i.call(t)}function h(t,e){if(null!=t)if("object"!=typeof t&&(t=[t]),o(t))for(var n=0,r=t.length;n<r;n++)e.call(null,t[n],n,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}t.exports={isArray:o,isArrayBuffer:function(t){return"[object ArrayBuffer]"===i.call(t)},isBuffer:function(t){return null!==t&&!s(t)&&null!==t.constructor&&!s(t.constructor)&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)},isFormData:function(t){return"undefined"!=typeof FormData&&t instanceof FormData},isArrayBufferView:function(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isObject:a,isPlainObject:u,isUndefined:s,isDate:function(t){return"[object Date]"===i.call(t)},isFile:function(t){return"[object File]"===i.call(t)},isBlob:function(t){return"[object Blob]"===i.call(t)},isFunction:c,isStream:function(t){return a(t)&&c(t.pipe)},isURLSearchParams:function(t){return"undefined"!=typeof URLSearchParams&&t instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:h,merge:function t(){var e={};function n(n,r){u(e[r])&&u(n)?e[r]=t(e[r],n):u(n)?e[r]=t({},n):o(n)?e[r]=n.slice():e[r]=n}for(var r=0,i=arguments.length;r<i;r++)h(arguments[r],n);return e},extend:function(t,e,n){return h(e,(function(e,i){t[i]=n&&"function"==typeof e?r(e,n):e})),t},trim:function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")},stripBOM:function(t){return 65279===t.charCodeAt(0)&&(t=t.slice(1)),t}}},9873:function(t,e,n){var r;t=n.nmd(t),function(){var i,o="Expected a function",s="__lodash_hash_undefined__",a="__lodash_placeholder__",u=32,c=128,h=1/0,l=9007199254740991,f=NaN,p=4294967295,d=[["ary",c],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",u],["partialRight",64],["rearg",256]],g="[object Arguments]",v="[object Array]",m="[object Boolean]",y="[object Date]",_="[object Error]",b="[object Function]",w="[object GeneratorFunction]",I="[object Map]",E="[object Number]",T="[object Object]",A="[object Promise]",S="[object RegExp]",k="[object Set]",N="[object String]",C="[object Symbol]",O="[object WeakMap]",x="[object ArrayBuffer]",R="[object DataView]",D="[object Float32Array]",P="[object Float64Array]",L="[object Int8Array]",M="[object Int16Array]",U="[object Int32Array]",F="[object Uint8Array]",j="[object Uint8ClampedArray]",q="[object Uint16Array]",B="[object Uint32Array]",V=/\b__p \+= '';/g,G=/\b(__p \+=) '' \+/g,H=/(__e\(.*?\)|\b__t\)) \+\n'';/g,W=/&(?:amp|lt|gt|quot|#39);/g,z=/[&<>"']/g,K=RegExp(W.source),$=RegExp(z.source),Y=/<%-([\s\S]+?)%>/g,Q=/<%([\s\S]+?)%>/g,X=/<%=([\s\S]+?)%>/g,J=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Z=/^\w*$/,tt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,et=/[\\^$.*+?()[\]{}|]/g,nt=RegExp(et.source),rt=/^\s+/,it=/\s/,ot=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,st=/\{\n\/\* \[wrapped with (.+)\] \*/,at=/,? & /,ut=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ct=/[()=,{}\[\]\/\s]/,ht=/\\(\\)?/g,lt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ft=/\w*$/,pt=/^[-+]0x[0-9a-f]+$/i,dt=/^0b[01]+$/i,gt=/^\[object .+?Constructor\]$/,vt=/^0o[0-7]+$/i,mt=/^(?:0|[1-9]\d*)$/,yt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,_t=/($^)/,bt=/['\n\r\u2028\u2029\\]/g,wt="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",It="a-z\\xdf-\\xf6\\xf8-\\xff",Et="A-Z\\xc0-\\xd6\\xd8-\\xde",Tt="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",At="["+Tt+"]",St="["+wt+"]",kt="\\d+",Nt="["+It+"]",Ct="[^\\ud800-\\udfff"+Tt+kt+"\\u2700-\\u27bf"+It+Et+"]",Ot="\\ud83c[\\udffb-\\udfff]",xt="[^\\ud800-\\udfff]",Rt="(?:\\ud83c[\\udde6-\\uddff]){2}",Dt="[\\ud800-\\udbff][\\udc00-\\udfff]",Pt="["+Et+"]",Lt="(?:"+Nt+"|"+Ct+")",Mt="(?:"+Pt+"|"+Ct+")",Ut="(?:['](?:d|ll|m|re|s|t|ve))?",Ft="(?:['](?:D|LL|M|RE|S|T|VE))?",jt="(?:"+St+"|"+Ot+")?",qt="[\\ufe0e\\ufe0f]?",Bt=qt+jt+"(?:\\u200d(?:"+[xt,Rt,Dt].join("|")+")"+qt+jt+")*",Vt="(?:"+["[\\u2700-\\u27bf]",Rt,Dt].join("|")+")"+Bt,Gt="(?:"+[xt+St+"?",St,Rt,Dt,"[\\ud800-\\udfff]"].join("|")+")",Ht=RegExp("[']","g"),Wt=RegExp(St,"g"),zt=RegExp(Ot+"(?="+Ot+")|"+Gt+Bt,"g"),Kt=RegExp([Pt+"?"+Nt+"+"+Ut+"(?="+[At,Pt,"$"].join("|")+")",Mt+"+"+Ft+"(?="+[At,Pt+Lt,"$"].join("|")+")",Pt+"?"+Lt+"+"+Ut,Pt+"+"+Ft,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",kt,Vt].join("|"),"g"),$t=RegExp("[\\u200d\\ud800-\\udfff"+wt+"\\ufe0e\\ufe0f]"),Yt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Qt=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Xt=-1,Jt={};Jt[D]=Jt[P]=Jt[L]=Jt[M]=Jt[U]=Jt[F]=Jt[j]=Jt[q]=Jt[B]=!0,Jt[g]=Jt[v]=Jt[x]=Jt[m]=Jt[R]=Jt[y]=Jt[_]=Jt[b]=Jt[I]=Jt[E]=Jt[T]=Jt[S]=Jt[k]=Jt[N]=Jt[O]=!1;var Zt={};Zt[g]=Zt[v]=Zt[x]=Zt[R]=Zt[m]=Zt[y]=Zt[D]=Zt[P]=Zt[L]=Zt[M]=Zt[U]=Zt[I]=Zt[E]=Zt[T]=Zt[S]=Zt[k]=Zt[N]=Zt[C]=Zt[F]=Zt[j]=Zt[q]=Zt[B]=!0,Zt[_]=Zt[b]=Zt[O]=!1;var te={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ee=parseFloat,ne=parseInt,re="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,ie="object"==typeof self&&self&&self.Object===Object&&self,oe=re||ie||Function("return this")(),se=e&&!e.nodeType&&e,ae=se&&t&&!t.nodeType&&t,ue=ae&&ae.exports===se,ce=ue&&re.process,he=function(){try{return ae&&ae.require&&ae.require("util").types||ce&&ce.binding&&ce.binding("util")}catch(t){}}(),le=he&&he.isArrayBuffer,fe=he&&he.isDate,pe=he&&he.isMap,de=he&&he.isRegExp,ge=he&&he.isSet,ve=he&&he.isTypedArray;function me(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function ye(t,e,n,r){for(var i=-1,o=null==t?0:t.length;++i<o;){var s=t[i];e(r,s,n(s),t)}return r}function _e(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}function be(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function we(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function Ie(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var s=t[n];e(s,n,t)&&(o[i++]=s)}return o}function Ee(t,e){return!(null==t||!t.length)&&De(t,e,0)>-1}function Te(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}function Ae(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function Se(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function ke(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function Ne(t,e,n,r){var i=null==t?0:t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function Ce(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var Oe=Ue("length");function xe(t,e,n){var r;return n(t,(function(t,n,i){if(e(t,n,i))return r=n,!1})),r}function Re(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}function De(t,e,n){return e==e?function(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}(t,e,n):Re(t,Le,n)}function Pe(t,e,n,r){for(var i=n-1,o=t.length;++i<o;)if(r(t[i],e))return i;return-1}function Le(t){return t!=t}function Me(t,e){var n=null==t?0:t.length;return n?qe(t,e)/n:f}function Ue(t){return function(e){return null==e?i:e[t]}}function Fe(t){return function(e){return null==t?i:t[e]}}function je(t,e,n,r,i){return i(t,(function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)})),n}function qe(t,e){for(var n,r=-1,o=t.length;++r<o;){var s=e(t[r]);s!==i&&(n=n===i?s:n+s)}return n}function Be(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function Ve(t){return t?t.slice(0,an(t)+1).replace(rt,""):t}function Ge(t){return function(e){return t(e)}}function He(t,e){return Ae(e,(function(e){return t[e]}))}function We(t,e){return t.has(e)}function ze(t,e){for(var n=-1,r=t.length;++n<r&&De(e,t[n],0)>-1;);return n}function Ke(t,e){for(var n=t.length;n--&&De(e,t[n],0)>-1;);return n}function $e(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}var Ye=Fe({:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"}),Qe=Fe({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Xe(t){return"\\"+te[t]}function Je(t){return $t.test(t)}function Ze(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function tn(t,e){return function(n){return t(e(n))}}function en(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var s=t[n];s!==e&&s!==a||(t[n]=a,o[i++]=n)}return o}function nn(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}function rn(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=[t,t]})),n}function on(t){return Je(t)?function(t){for(var e=zt.lastIndex=0;zt.test(t);)++e;return e}(t):Oe(t)}function sn(t){return Je(t)?function(t){return t.match(zt)||[]}(t):function(t){return t.split("")}(t)}function an(t){for(var e=t.length;e--&&it.test(t.charAt(e)););return e}var un=Fe({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),cn=function t(e){var n,r=(e=null==e?oe:cn.defaults(oe.Object(),e,cn.pick(oe,Qt))).Array,it=e.Date,wt=e.Error,It=e.Function,Et=e.Math,Tt=e.Object,At=e.RegExp,St=e.String,kt=e.TypeError,Nt=r.prototype,Ct=It.prototype,Ot=Tt.prototype,xt=e["__core-js_shared__"],Rt=Ct.toString,Dt=Ot.hasOwnProperty,Pt=0,Lt=(n=/[^.]+$/.exec(xt&&xt.keys&&xt.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",Mt=Ot.toString,Ut=Rt.call(Tt),Ft=oe._,jt=At("^"+Rt.call(Dt).replace(et,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),qt=ue?e.Buffer:i,Bt=e.Symbol,Vt=e.Uint8Array,Gt=qt?qt.allocUnsafe:i,zt=tn(Tt.getPrototypeOf,Tt),$t=Tt.create,te=Ot.propertyIsEnumerable,re=Nt.splice,ie=Bt?Bt.isConcatSpreadable:i,se=Bt?Bt.iterator:i,ae=Bt?Bt.toStringTag:i,ce=function(){try{var t=co(Tt,"defineProperty");return t({},"",{}),t}catch(t){}}(),he=e.clearTimeout!==oe.clearTimeout&&e.clearTimeout,Oe=it&&it.now!==oe.Date.now&&it.now,Fe=e.setTimeout!==oe.setTimeout&&e.setTimeout,hn=Et.ceil,ln=Et.floor,fn=Tt.getOwnPropertySymbols,pn=qt?qt.isBuffer:i,dn=e.isFinite,gn=Nt.join,vn=tn(Tt.keys,Tt),mn=Et.max,yn=Et.min,_n=it.now,bn=e.parseInt,wn=Et.random,In=Nt.reverse,En=co(e,"DataView"),Tn=co(e,"Map"),An=co(e,"Promise"),Sn=co(e,"Set"),kn=co(e,"WeakMap"),Nn=co(Tt,"create"),Cn=kn&&new kn,On={},xn=jo(En),Rn=jo(Tn),Dn=jo(An),Pn=jo(Sn),Ln=jo(kn),Mn=Bt?Bt.prototype:i,Un=Mn?Mn.valueOf:i,Fn=Mn?Mn.toString:i;function jn(t){if(na(t)&&!Ws(t)&&!(t instanceof Gn)){if(t instanceof Vn)return t;if(Dt.call(t,"__wrapped__"))return qo(t)}return new Vn(t)}var qn=function(){function t(){}return function(e){if(!ea(e))return{};if($t)return $t(e);t.prototype=e;var n=new t;return t.prototype=i,n}}();function Bn(){}function Vn(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=i}function Gn(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=p,this.__views__=[]}function Hn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Wn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function zn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Kn(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new zn;++e<n;)this.add(t[e])}function $n(t){var e=this.__data__=new Wn(t);this.size=e.size}function Yn(t,e){var n=Ws(t),r=!n&&Hs(t),i=!n&&!r&&Ys(t),o=!n&&!r&&!i&&ha(t),s=n||r||i||o,a=s?Be(t.length,St):[],u=a.length;for(var c in t)!e&&!Dt.call(t,c)||s&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||mo(c,u))||a.push(c);return a}function Qn(t){var e=t.length;return e?t[zr(0,e-1)]:i}function Xn(t,e){return Po(ki(t),sr(e,0,t.length))}function Jn(t){return Po(ki(t))}function Zn(t,e,n){(n!==i&&!Bs(t[e],n)||n===i&&!(e in t))&&ir(t,e,n)}function tr(t,e,n){var r=t[e];Dt.call(t,e)&&Bs(r,n)&&(n!==i||e in t)||ir(t,e,n)}function er(t,e){for(var n=t.length;n--;)if(Bs(t[n][0],e))return n;return-1}function nr(t,e,n,r){return lr(t,(function(t,i,o){e(r,t,n(t),o)})),r}function rr(t,e){return t&&Ni(e,Ra(e),t)}function ir(t,e,n){"__proto__"==e&&ce?ce(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function or(t,e){for(var n=-1,o=e.length,s=r(o),a=null==t;++n<o;)s[n]=a?i:ka(t,e[n]);return s}function sr(t,e,n){return t==t&&(n!==i&&(t=t<=n?t:n),e!==i&&(t=t>=e?t:e)),t}function ar(t,e,n,r,o,s){var a,u=1&e,c=2&e,h=4&e;if(n&&(a=o?n(t,r,o,s):n(t)),a!==i)return a;if(!ea(t))return t;var l=Ws(t);if(l){if(a=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&Dt.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(t),!u)return ki(t,a)}else{var f=fo(t),p=f==b||f==w;if(Ys(t))return wi(t,u);if(f==T||f==g||p&&!o){if(a=c||p?{}:go(t),!u)return c?function(t,e){return Ni(t,lo(t),e)}(t,function(t,e){return t&&Ni(e,Da(e),t)}(a,t)):function(t,e){return Ni(t,ho(t),e)}(t,rr(a,t))}else{if(!Zt[f])return o?t:{};a=function(t,e,n){var r,i=t.constructor;switch(e){case x:return Ii(t);case m:case y:return new i(+t);case R:return function(t,e){var n=e?Ii(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case D:case P:case L:case M:case U:case F:case j:case q:case B:return Ei(t,n);case I:return new i;case E:case N:return new i(t);case S:return function(t){var e=new t.constructor(t.source,ft.exec(t));return e.lastIndex=t.lastIndex,e}(t);case k:return new i;case C:return r=t,Un?Tt(Un.call(r)):{}}}(t,f,u)}}s||(s=new $n);var d=s.get(t);if(d)return d;s.set(t,a),aa(t)?t.forEach((function(r){a.add(ar(r,e,n,r,t,s))})):ra(t)&&t.forEach((function(r,i){a.set(i,ar(r,e,n,i,t,s))}));var v=l?i:(h?c?no:eo:c?Da:Ra)(t);return _e(v||t,(function(r,i){v&&(r=t[i=r]),tr(a,i,ar(r,e,n,i,t,s))})),a}function ur(t,e,n){var r=n.length;if(null==t)return!r;for(t=Tt(t);r--;){var o=n[r],s=e[o],a=t[o];if(a===i&&!(o in t)||!s(a))return!1}return!0}function cr(t,e,n){if("function"!=typeof t)throw new kt(o);return Oo((function(){t.apply(i,n)}),e)}function hr(t,e,n,r){var i=-1,o=Ee,s=!0,a=t.length,u=[],c=e.length;if(!a)return u;n&&(e=Ae(e,Ge(n))),r?(o=Te,s=!1):e.length>=200&&(o=We,s=!1,e=new Kn(e));t:for(;++i<a;){var h=t[i],l=null==n?h:n(h);if(h=r||0!==h?h:0,s&&l==l){for(var f=c;f--;)if(e[f]===l)continue t;u.push(h)}else o(e,l,r)||u.push(h)}return u}jn.templateSettings={escape:Y,evaluate:Q,interpolate:X,variable:"",imports:{_:jn}},jn.prototype=Bn.prototype,jn.prototype.constructor=jn,Vn.prototype=qn(Bn.prototype),Vn.prototype.constructor=Vn,Gn.prototype=qn(Bn.prototype),Gn.prototype.constructor=Gn,Hn.prototype.clear=function(){this.__data__=Nn?Nn(null):{},this.size=0},Hn.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Hn.prototype.get=function(t){var e=this.__data__;if(Nn){var n=e[t];return n===s?i:n}return Dt.call(e,t)?e[t]:i},Hn.prototype.has=function(t){var e=this.__data__;return Nn?e[t]!==i:Dt.call(e,t)},Hn.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Nn&&e===i?s:e,this},Wn.prototype.clear=function(){this.__data__=[],this.size=0},Wn.prototype.delete=function(t){var e=this.__data__,n=er(e,t);return!(n<0||(n==e.length-1?e.pop():re.call(e,n,1),--this.size,0))},Wn.prototype.get=function(t){var e=this.__data__,n=er(e,t);return n<0?i:e[n][1]},Wn.prototype.has=function(t){return er(this.__data__,t)>-1},Wn.prototype.set=function(t,e){var n=this.__data__,r=er(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},zn.prototype.clear=function(){this.size=0,this.__data__={hash:new Hn,map:new(Tn||Wn),string:new Hn}},zn.prototype.delete=function(t){var e=ao(this,t).delete(t);return this.size-=e?1:0,e},zn.prototype.get=function(t){return ao(this,t).get(t)},zn.prototype.has=function(t){return ao(this,t).has(t)},zn.prototype.set=function(t,e){var n=ao(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},Kn.prototype.add=Kn.prototype.push=function(t){return this.__data__.set(t,s),this},Kn.prototype.has=function(t){return this.__data__.has(t)},$n.prototype.clear=function(){this.__data__=new Wn,this.size=0},$n.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},$n.prototype.get=function(t){return this.__data__.get(t)},$n.prototype.has=function(t){return this.__data__.has(t)},$n.prototype.set=function(t,e){var n=this.__data__;if(n instanceof Wn){var r=n.__data__;if(!Tn||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new zn(r)}return n.set(t,e),this.size=n.size,this};var lr=xi(_r),fr=xi(br,!0);function pr(t,e){var n=!0;return lr(t,(function(t,r,i){return n=!!e(t,r,i)})),n}function dr(t,e,n){for(var r=-1,o=t.length;++r<o;){var s=t[r],a=e(s);if(null!=a&&(u===i?a==a&&!ca(a):n(a,u)))var u=a,c=s}return c}function gr(t,e){var n=[];return lr(t,(function(t,r,i){e(t,r,i)&&n.push(t)})),n}function vr(t,e,n,r,i){var o=-1,s=t.length;for(n||(n=vo),i||(i=[]);++o<s;){var a=t[o];e>0&&n(a)?e>1?vr(a,e-1,n,r,i):Se(i,a):r||(i[i.length]=a)}return i}var mr=Ri(),yr=Ri(!0);function _r(t,e){return t&&mr(t,e,Ra)}function br(t,e){return t&&yr(t,e,Ra)}function wr(t,e){return Ie(e,(function(e){return Js(t[e])}))}function Ir(t,e){for(var n=0,r=(e=mi(e,t)).length;null!=t&&n<r;)t=t[Fo(e[n++])];return n&&n==r?t:i}function Er(t,e,n){var r=e(t);return Ws(t)?r:Se(r,n(t))}function Tr(t){return null==t?t===i?"[object Undefined]":"[object Null]":ae&&ae in Tt(t)?function(t){var e=Dt.call(t,ae),n=t[ae];try{t[ae]=i;var r=!0}catch(t){}var o=Mt.call(t);return r&&(e?t[ae]=n:delete t[ae]),o}(t):function(t){return Mt.call(t)}(t)}function Ar(t,e){return t>e}function Sr(t,e){return null!=t&&Dt.call(t,e)}function kr(t,e){return null!=t&&e in Tt(t)}function Nr(t,e,n){for(var o=n?Te:Ee,s=t[0].length,a=t.length,u=a,c=r(a),h=1/0,l=[];u--;){var f=t[u];u&&e&&(f=Ae(f,Ge(e))),h=yn(f.length,h),c[u]=!n&&(e||s>=120&&f.length>=120)?new Kn(u&&f):i}f=t[0];var p=-1,d=c[0];t:for(;++p<s&&l.length<h;){var g=f[p],v=e?e(g):g;if(g=n||0!==g?g:0,!(d?We(d,v):o(l,v,n))){for(u=a;--u;){var m=c[u];if(!(m?We(m,v):o(t[u],v,n)))continue t}d&&d.push(v),l.push(g)}}return l}function Cr(t,e,n){var r=null==(t=So(t,e=mi(e,t)))?t:t[Fo(Xo(e))];return null==r?i:me(r,t,n)}function Or(t){return na(t)&&Tr(t)==g}function xr(t,e,n,r,o){return t===e||(null==t||null==e||!na(t)&&!na(e)?t!=t&&e!=e:function(t,e,n,r,o,s){var a=Ws(t),u=Ws(e),c=a?v:fo(t),h=u?v:fo(e),l=(c=c==g?T:c)==T,f=(h=h==g?T:h)==T,p=c==h;if(p&&Ys(t)){if(!Ys(e))return!1;a=!0,l=!1}if(p&&!l)return s||(s=new $n),a||ha(t)?Zi(t,e,n,r,o,s):function(t,e,n,r,i,o,s){switch(n){case R:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case x:return!(t.byteLength!=e.byteLength||!o(new Vt(t),new Vt(e)));case m:case y:case E:return Bs(+t,+e);case _:return t.name==e.name&&t.message==e.message;case S:case N:return t==e+"";case I:var a=Ze;case k:var u=1&r;if(a||(a=nn),t.size!=e.size&&!u)return!1;var c=s.get(t);if(c)return c==e;r|=2,s.set(t,e);var h=Zi(a(t),a(e),r,i,o,s);return s.delete(t),h;case C:if(Un)return Un.call(t)==Un.call(e)}return!1}(t,e,c,n,r,o,s);if(!(1&n)){var d=l&&Dt.call(t,"__wrapped__"),b=f&&Dt.call(e,"__wrapped__");if(d||b){var w=d?t.value():t,A=b?e.value():e;return s||(s=new $n),o(w,A,n,r,s)}}return!!p&&(s||(s=new $n),function(t,e,n,r,o,s){var a=1&n,u=eo(t),c=u.length;if(c!=eo(e).length&&!a)return!1;for(var h=c;h--;){var l=u[h];if(!(a?l in e:Dt.call(e,l)))return!1}var f=s.get(t),p=s.get(e);if(f&&p)return f==e&&p==t;var d=!0;s.set(t,e),s.set(e,t);for(var g=a;++h<c;){var v=t[l=u[h]],m=e[l];if(r)var y=a?r(m,v,l,e,t,s):r(v,m,l,t,e,s);if(!(y===i?v===m||o(v,m,n,r,s):y)){d=!1;break}g||(g="constructor"==l)}if(d&&!g){var _=t.constructor,b=e.constructor;_==b||!("constructor"in t)||!("constructor"in e)||"function"==typeof _&&_ instanceof _&&"function"==typeof b&&b instanceof b||(d=!1)}return s.delete(t),s.delete(e),d}(t,e,n,r,o,s))}(t,e,n,r,xr,o))}function Rr(t,e,n,r){var o=n.length,s=o,a=!r;if(null==t)return!s;for(t=Tt(t);o--;){var u=n[o];if(a&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++o<s;){var c=(u=n[o])[0],h=t[c],l=u[1];if(a&&u[2]){if(h===i&&!(c in t))return!1}else{var f=new $n;if(r)var p=r(h,l,c,t,e,f);if(!(p===i?xr(l,h,3,r,f):p))return!1}}return!0}function Dr(t){return!(!ea(t)||(e=t,Lt&&Lt in e))&&(Js(t)?jt:gt).test(jo(t));var e}function Pr(t){return"function"==typeof t?t:null==t?iu:"object"==typeof t?Ws(t)?jr(t[0],t[1]):Fr(t):pu(t)}function Lr(t){if(!Io(t))return vn(t);var e=[];for(var n in Tt(t))Dt.call(t,n)&&"constructor"!=n&&e.push(n);return e}function Mr(t,e){return t<e}function Ur(t,e){var n=-1,i=Ks(t)?r(t.length):[];return lr(t,(function(t,r,o){i[++n]=e(t,r,o)})),i}function Fr(t){var e=uo(t);return 1==e.length&&e[0][2]?To(e[0][0],e[0][1]):function(n){return n===t||Rr(n,t,e)}}function jr(t,e){return _o(t)&&Eo(e)?To(Fo(t),e):function(n){var r=ka(n,t);return r===i&&r===e?Na(n,t):xr(e,r,3)}}function qr(t,e,n,r,o){t!==e&&mr(e,(function(s,a){if(o||(o=new $n),ea(s))!function(t,e,n,r,o,s,a){var u=No(t,n),c=No(e,n),h=a.get(c);if(h)Zn(t,n,h);else{var l=s?s(u,c,n+"",t,e,a):i,f=l===i;if(f){var p=Ws(c),d=!p&&Ys(c),g=!p&&!d&&ha(c);l=c,p||d||g?Ws(u)?l=u:$s(u)?l=ki(u):d?(f=!1,l=wi(c,!0)):g?(f=!1,l=Ei(c,!0)):l=[]:oa(c)||Hs(c)?(l=u,Hs(u)?l=ya(u):ea(u)&&!Js(u)||(l=go(c))):f=!1}f&&(a.set(c,l),o(l,c,r,s,a),a.delete(c)),Zn(t,n,l)}}(t,e,a,n,qr,r,o);else{var u=r?r(No(t,a),s,a+"",t,e,o):i;u===i&&(u=s),Zn(t,a,u)}}),Da)}function Br(t,e){var n=t.length;if(n)return mo(e+=e<0?n:0,n)?t[e]:i}function Vr(t,e,n){e=e.length?Ae(e,(function(t){return Ws(t)?function(e){return Ir(e,1===t.length?t[0]:t)}:t})):[iu];var r=-1;e=Ae(e,Ge(so()));var i=Ur(t,(function(t,n,i){var o=Ae(e,(function(e){return e(t)}));return{criteria:o,index:++r,value:t}}));return function(t,e){var r=t.length;for(t.sort((function(t,e){return function(t,e,n){for(var r=-1,i=t.criteria,o=e.criteria,s=i.length,a=n.length;++r<s;){var u=Ti(i[r],o[r]);if(u)return r>=a?u:u*("desc"==n[r]?-1:1)}return t.index-e.index}(t,e,n)}));r--;)t[r]=t[r].value;return t}(i)}function Gr(t,e,n){for(var r=-1,i=e.length,o={};++r<i;){var s=e[r],a=Ir(t,s);n(a,s)&&Xr(o,mi(s,t),a)}return o}function Hr(t,e,n,r){var i=r?Pe:De,o=-1,s=e.length,a=t;for(t===e&&(e=ki(e)),n&&(a=Ae(t,Ge(n)));++o<s;)for(var u=0,c=e[o],h=n?n(c):c;(u=i(a,h,u,r))>-1;)a!==t&&re.call(a,u,1),re.call(t,u,1);return t}function Wr(t,e){for(var n=t?e.length:0,r=n-1;n--;){var i=e[n];if(n==r||i!==o){var o=i;mo(i)?re.call(t,i,1):ci(t,i)}}return t}function zr(t,e){return t+ln(wn()*(e-t+1))}function Kr(t,e){var n="";if(!t||e<1||e>l)return n;do{e%2&&(n+=t),(e=ln(e/2))&&(t+=t)}while(e);return n}function $r(t,e){return xo(Ao(t,e,iu),t+"")}function Yr(t){return Qn(Ba(t))}function Qr(t,e){var n=Ba(t);return Po(n,sr(e,0,n.length))}function Xr(t,e,n,r){if(!ea(t))return t;for(var o=-1,s=(e=mi(e,t)).length,a=s-1,u=t;null!=u&&++o<s;){var c=Fo(e[o]),h=n;if("__proto__"===c||"constructor"===c||"prototype"===c)return t;if(o!=a){var l=u[c];(h=r?r(l,c,u):i)===i&&(h=ea(l)?l:mo(e[o+1])?[]:{})}tr(u,c,h),u=u[c]}return t}var Jr=Cn?function(t,e){return Cn.set(t,e),t}:iu,Zr=ce?function(t,e){return ce(t,"toString",{configurable:!0,enumerable:!1,value:eu(e),writable:!0})}:iu;function ti(t){return Po(Ba(t))}function ei(t,e,n){var i=-1,o=t.length;e<0&&(e=-e>o?0:o+e),(n=n>o?o:n)<0&&(n+=o),o=e>n?0:n-e>>>0,e>>>=0;for(var s=r(o);++i<o;)s[i]=t[i+e];return s}function ni(t,e){var n;return lr(t,(function(t,r,i){return!(n=e(t,r,i))})),!!n}function ri(t,e,n){var r=0,i=null==t?r:t.length;if("number"==typeof e&&e==e&&i<=2147483647){for(;r<i;){var o=r+i>>>1,s=t[o];null!==s&&!ca(s)&&(n?s<=e:s<e)?r=o+1:i=o}return i}return ii(t,e,iu,n)}function ii(t,e,n,r){var o=0,s=null==t?0:t.length;if(0===s)return 0;for(var a=(e=n(e))!=e,u=null===e,c=ca(e),h=e===i;o<s;){var l=ln((o+s)/2),f=n(t[l]),p=f!==i,d=null===f,g=f==f,v=ca(f);if(a)var m=r||g;else m=h?g&&(r||p):u?g&&p&&(r||!d):c?g&&p&&!d&&(r||!v):!d&&!v&&(r?f<=e:f<e);m?o=l+1:s=l}return yn(s,4294967294)}function oi(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var s=t[n],a=e?e(s):s;if(!n||!Bs(a,u)){var u=a;o[i++]=0===s?0:s}}return o}function si(t){return"number"==typeof t?t:ca(t)?f:+t}function ai(t){if("string"==typeof t)return t;if(Ws(t))return Ae(t,ai)+"";if(ca(t))return Fn?Fn.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function ui(t,e,n){var r=-1,i=Ee,o=t.length,s=!0,a=[],u=a;if(n)s=!1,i=Te;else if(o>=200){var c=e?null:Ki(t);if(c)return nn(c);s=!1,i=We,u=new Kn}else u=e?[]:a;t:for(;++r<o;){var h=t[r],l=e?e(h):h;if(h=n||0!==h?h:0,s&&l==l){for(var f=u.length;f--;)if(u[f]===l)continue t;e&&u.push(l),a.push(h)}else i(u,l,n)||(u!==a&&u.push(l),a.push(h))}return a}function ci(t,e){return null==(t=So(t,e=mi(e,t)))||delete t[Fo(Xo(e))]}function hi(t,e,n,r){return Xr(t,e,n(Ir(t,e)),r)}function li(t,e,n,r){for(var i=t.length,o=r?i:-1;(r?o--:++o<i)&&e(t[o],o,t););return n?ei(t,r?0:o,r?o+1:i):ei(t,r?o+1:0,r?i:o)}function fi(t,e){var n=t;return n instanceof Gn&&(n=n.value()),ke(e,(function(t,e){return e.func.apply(e.thisArg,Se([t],e.args))}),n)}function pi(t,e,n){var i=t.length;if(i<2)return i?ui(t[0]):[];for(var o=-1,s=r(i);++o<i;)for(var a=t[o],u=-1;++u<i;)u!=o&&(s[o]=hr(s[o]||a,t[u],e,n));return ui(vr(s,1),e,n)}function di(t,e,n){for(var r=-1,o=t.length,s=e.length,a={};++r<o;){var u=r<s?e[r]:i;n(a,t[r],u)}return a}function gi(t){return $s(t)?t:[]}function vi(t){return"function"==typeof t?t:iu}function mi(t,e){return Ws(t)?t:_o(t,e)?[t]:Uo(_a(t))}var yi=$r;function _i(t,e,n){var r=t.length;return n=n===i?r:n,!e&&n>=r?t:ei(t,e,n)}var bi=he||function(t){return oe.clearTimeout(t)};function wi(t,e){if(e)return t.slice();var n=t.length,r=Gt?Gt(n):new t.constructor(n);return t.copy(r),r}function Ii(t){var e=new t.constructor(t.byteLength);return new Vt(e).set(new Vt(t)),e}function Ei(t,e){var n=e?Ii(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function Ti(t,e){if(t!==e){var n=t!==i,r=null===t,o=t==t,s=ca(t),a=e!==i,u=null===e,c=e==e,h=ca(e);if(!u&&!h&&!s&&t>e||s&&a&&c&&!u&&!h||r&&a&&c||!n&&c||!o)return 1;if(!r&&!s&&!h&&t<e||h&&n&&o&&!r&&!s||u&&n&&o||!a&&o||!c)return-1}return 0}function Ai(t,e,n,i){for(var o=-1,s=t.length,a=n.length,u=-1,c=e.length,h=mn(s-a,0),l=r(c+h),f=!i;++u<c;)l[u]=e[u];for(;++o<a;)(f||o<s)&&(l[n[o]]=t[o]);for(;h--;)l[u++]=t[o++];return l}function Si(t,e,n,i){for(var o=-1,s=t.length,a=-1,u=n.length,c=-1,h=e.length,l=mn(s-u,0),f=r(l+h),p=!i;++o<l;)f[o]=t[o];for(var d=o;++c<h;)f[d+c]=e[c];for(;++a<u;)(p||o<s)&&(f[d+n[a]]=t[o++]);return f}function ki(t,e){var n=-1,i=t.length;for(e||(e=r(i));++n<i;)e[n]=t[n];return e}function Ni(t,e,n,r){var o=!n;n||(n={});for(var s=-1,a=e.length;++s<a;){var u=e[s],c=r?r(n[u],t[u],u,n,t):i;c===i&&(c=t[u]),o?ir(n,u,c):tr(n,u,c)}return n}function Ci(t,e){return function(n,r){var i=Ws(n)?ye:nr,o=e?e():{};return i(n,t,so(r,2),o)}}function Oi(t){return $r((function(e,n){var r=-1,o=n.length,s=o>1?n[o-1]:i,a=o>2?n[2]:i;for(s=t.length>3&&"function"==typeof s?(o--,s):i,a&&yo(n[0],n[1],a)&&(s=o<3?i:s,o=1),e=Tt(e);++r<o;){var u=n[r];u&&t(e,u,r,s)}return e}))}function xi(t,e){return function(n,r){if(null==n)return n;if(!Ks(n))return t(n,r);for(var i=n.length,o=e?i:-1,s=Tt(n);(e?o--:++o<i)&&!1!==r(s[o],o,s););return n}}function Ri(t){return function(e,n,r){for(var i=-1,o=Tt(e),s=r(e),a=s.length;a--;){var u=s[t?a:++i];if(!1===n(o[u],u,o))break}return e}}function Di(t){return function(e){var n=Je(e=_a(e))?sn(e):i,r=n?n[0]:e.charAt(0),o=n?_i(n,1).join(""):e.slice(1);return r[t]()+o}}function Pi(t){return function(e){return ke(Ja(Ha(e).replace(Ht,"")),t,"")}}function Li(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=qn(t.prototype),r=t.apply(n,e);return ea(r)?r:n}}function Mi(t){return function(e,n,r){var o=Tt(e);if(!Ks(e)){var s=so(n,3);e=Ra(e),n=function(t){return s(o[t],t,o)}}var a=t(e,n,r);return a>-1?o[s?e[a]:a]:i}}function Ui(t){return to((function(e){var n=e.length,r=n,s=Vn.prototype.thru;for(t&&e.reverse();r--;){var a=e[r];if("function"!=typeof a)throw new kt(o);if(s&&!u&&"wrapper"==io(a))var u=new Vn([],!0)}for(r=u?r:n;++r<n;){var c=io(a=e[r]),h="wrapper"==c?ro(a):i;u=h&&bo(h[0])&&424==h[1]&&!h[4].length&&1==h[9]?u[io(h[0])].apply(u,h[3]):1==a.length&&bo(a)?u[c]():u.thru(a)}return function(){var t=arguments,r=t[0];if(u&&1==t.length&&Ws(r))return u.plant(r).value();for(var i=0,o=n?e[i].apply(this,t):r;++i<n;)o=e[i].call(this,o);return o}}))}function Fi(t,e,n,o,s,a,u,h,l,f){var p=e&c,d=1&e,g=2&e,v=24&e,m=512&e,y=g?i:Li(t);return function i(){for(var c=arguments.length,_=r(c),b=c;b--;)_[b]=arguments[b];if(v)var w=oo(i),I=$e(_,w);if(o&&(_=Ai(_,o,s,v)),a&&(_=Si(_,a,u,v)),c-=I,v&&c<f){var E=en(_,w);return Wi(t,e,Fi,i.placeholder,n,_,E,h,l,f-c)}var T=d?n:this,A=g?T[t]:t;return c=_.length,h?_=ko(_,h):m&&c>1&&_.reverse(),p&&l<c&&(_.length=l),this&&this!==oe&&this instanceof i&&(A=y||Li(A)),A.apply(T,_)}}function ji(t,e){return function(n,r){return function(t,e,n,r){return _r(t,(function(t,i,o){e(r,n(t),i,o)})),r}(n,t,e(r),{})}}function qi(t,e){return function(n,r){var o;if(n===i&&r===i)return e;if(n!==i&&(o=n),r!==i){if(o===i)return r;"string"==typeof n||"string"==typeof r?(n=ai(n),r=ai(r)):(n=si(n),r=si(r)),o=t(n,r)}return o}}function Bi(t){return to((function(e){return e=Ae(e,Ge(so())),$r((function(n){var r=this;return t(e,(function(t){return me(t,r,n)}))}))}))}function Vi(t,e){var n=(e=e===i?" ":ai(e)).length;if(n<2)return n?Kr(e,t):e;var r=Kr(e,hn(t/on(e)));return Je(e)?_i(sn(r),0,t).join(""):r.slice(0,t)}function Gi(t){return function(e,n,o){return o&&"number"!=typeof o&&yo(e,n,o)&&(n=o=i),e=da(e),n===i?(n=e,e=0):n=da(n),function(t,e,n,i){for(var o=-1,s=mn(hn((e-t)/(n||1)),0),a=r(s);s--;)a[i?s:++o]=t,t+=n;return a}(e,n,o=o===i?e<n?1:-1:da(o),t)}}function Hi(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=ma(e),n=ma(n)),t(e,n)}}function Wi(t,e,n,r,o,s,a,c,h,l){var f=8&e;e|=f?u:64,4&(e&=~(f?64:u))||(e&=-4);var p=[t,e,o,f?s:i,f?a:i,f?i:s,f?i:a,c,h,l],d=n.apply(i,p);return bo(t)&&Co(d,p),d.placeholder=r,Ro(d,t,e)}function zi(t){var e=Et[t];return function(t,n){if(t=ma(t),(n=null==n?0:yn(ga(n),292))&&dn(t)){var r=(_a(t)+"e").split("e");return+((r=(_a(e(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return e(t)}}var Ki=Sn&&1/nn(new Sn([,-0]))[1]==h?function(t){return new Sn(t)}:cu;function $i(t){return function(e){var n=fo(e);return n==I?Ze(e):n==k?rn(e):function(t,e){return Ae(e,(function(e){return[e,t[e]]}))}(e,t(e))}}function Yi(t,e,n,s,h,l,f,p){var d=2&e;if(!d&&"function"!=typeof t)throw new kt(o);var g=s?s.length:0;if(g||(e&=-97,s=h=i),f=f===i?f:mn(ga(f),0),p=p===i?p:ga(p),g-=h?h.length:0,64&e){var v=s,m=h;s=h=i}var y=d?i:ro(t),_=[t,e,n,s,h,v,m,l,f,p];if(y&&function(t,e){var n=t[1],r=e[1],i=n|r,o=i<131,s=r==c&&8==n||r==c&&256==n&&t[7].length<=e[8]||384==r&&e[7].length<=e[8]&&8==n;if(!o&&!s)return t;1&r&&(t[2]=e[2],i|=1&n?0:4);var u=e[3];if(u){var h=t[3];t[3]=h?Ai(h,u,e[4]):u,t[4]=h?en(t[3],a):e[4]}(u=e[5])&&(h=t[5],t[5]=h?Si(h,u,e[6]):u,t[6]=h?en(t[5],a):e[6]),(u=e[7])&&(t[7]=u),r&c&&(t[8]=null==t[8]?e[8]:yn(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i}(_,y),t=_[0],e=_[1],n=_[2],s=_[3],h=_[4],!(p=_[9]=_[9]===i?d?0:t.length:mn(_[9]-g,0))&&24&e&&(e&=-25),e&&1!=e)b=8==e||16==e?function(t,e,n){var o=Li(t);return function s(){for(var a=arguments.length,u=r(a),c=a,h=oo(s);c--;)u[c]=arguments[c];var l=a<3&&u[0]!==h&&u[a-1]!==h?[]:en(u,h);return(a-=l.length)<n?Wi(t,e,Fi,s.placeholder,i,u,l,i,i,n-a):me(this&&this!==oe&&this instanceof s?o:t,this,u)}}(t,e,p):e!=u&&33!=e||h.length?Fi.apply(i,_):function(t,e,n,i){var o=1&e,s=Li(t);return function e(){for(var a=-1,u=arguments.length,c=-1,h=i.length,l=r(h+u),f=this&&this!==oe&&this instanceof e?s:t;++c<h;)l[c]=i[c];for(;u--;)l[c++]=arguments[++a];return me(f,o?n:this,l)}}(t,e,n,s);else var b=function(t,e,n){var r=1&e,i=Li(t);return function e(){return(this&&this!==oe&&this instanceof e?i:t).apply(r?n:this,arguments)}}(t,e,n);return Ro((y?Jr:Co)(b,_),t,e)}function Qi(t,e,n,r){return t===i||Bs(t,Ot[n])&&!Dt.call(r,n)?e:t}function Xi(t,e,n,r,o,s){return ea(t)&&ea(e)&&(s.set(e,t),qr(t,e,i,Xi,s),s.delete(e)),t}function Ji(t){return oa(t)?i:t}function Zi(t,e,n,r,o,s){var a=1&n,u=t.length,c=e.length;if(u!=c&&!(a&&c>u))return!1;var h=s.get(t),l=s.get(e);if(h&&l)return h==e&&l==t;var f=-1,p=!0,d=2&n?new Kn:i;for(s.set(t,e),s.set(e,t);++f<u;){var g=t[f],v=e[f];if(r)var m=a?r(v,g,f,e,t,s):r(g,v,f,t,e,s);if(m!==i){if(m)continue;p=!1;break}if(d){if(!Ce(e,(function(t,e){if(!We(d,e)&&(g===t||o(g,t,n,r,s)))return d.push(e)}))){p=!1;break}}else if(g!==v&&!o(g,v,n,r,s)){p=!1;break}}return s.delete(t),s.delete(e),p}function to(t){return xo(Ao(t,i,zo),t+"")}function eo(t){return Er(t,Ra,ho)}function no(t){return Er(t,Da,lo)}var ro=Cn?function(t){return Cn.get(t)}:cu;function io(t){for(var e=t.name+"",n=On[e],r=Dt.call(On,e)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==t)return i.name}return e}function oo(t){return(Dt.call(jn,"placeholder")?jn:t).placeholder}function so(){var t=jn.iteratee||ou;return t=t===ou?Pr:t,arguments.length?t(arguments[0],arguments[1]):t}function ao(t,e){var n,r,i=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof e?"string":"hash"]:i.map}function uo(t){for(var e=Ra(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,Eo(i)]}return e}function co(t,e){var n=function(t,e){return null==t?i:t[e]}(t,e);return Dr(n)?n:i}var ho=fn?function(t){return null==t?[]:(t=Tt(t),Ie(fn(t),(function(e){return te.call(t,e)})))}:vu,lo=fn?function(t){for(var e=[];t;)Se(e,ho(t)),t=zt(t);return e}:vu,fo=Tr;function po(t,e,n){for(var r=-1,i=(e=mi(e,t)).length,o=!1;++r<i;){var s=Fo(e[r]);if(!(o=null!=t&&n(t,s)))break;t=t[s]}return o||++r!=i?o:!!(i=null==t?0:t.length)&&ta(i)&&mo(s,i)&&(Ws(t)||Hs(t))}function go(t){return"function"!=typeof t.constructor||Io(t)?{}:qn(zt(t))}function vo(t){return Ws(t)||Hs(t)||!!(ie&&t&&t[ie])}function mo(t,e){var n=typeof t;return!!(e=null==e?l:e)&&("number"==n||"symbol"!=n&&mt.test(t))&&t>-1&&t%1==0&&t<e}function yo(t,e,n){if(!ea(n))return!1;var r=typeof e;return!!("number"==r?Ks(n)&&mo(e,n.length):"string"==r&&e in n)&&Bs(n[e],t)}function _o(t,e){if(Ws(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!ca(t))||Z.test(t)||!J.test(t)||null!=e&&t in Tt(e)}function bo(t){var e=io(t),n=jn[e];if("function"!=typeof n||!(e in Gn.prototype))return!1;if(t===n)return!0;var r=ro(n);return!!r&&t===r[0]}(En&&fo(new En(new ArrayBuffer(1)))!=R||Tn&&fo(new Tn)!=I||An&&fo(An.resolve())!=A||Sn&&fo(new Sn)!=k||kn&&fo(new kn)!=O)&&(fo=function(t){var e=Tr(t),n=e==T?t.constructor:i,r=n?jo(n):"";if(r)switch(r){case xn:return R;case Rn:return I;case Dn:return A;case Pn:return k;case Ln:return O}return e});var wo=xt?Js:mu;function Io(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Ot)}function Eo(t){return t==t&&!ea(t)}function To(t,e){return function(n){return null!=n&&n[t]===e&&(e!==i||t in Tt(n))}}function Ao(t,e,n){return e=mn(e===i?t.length-1:e,0),function(){for(var i=arguments,o=-1,s=mn(i.length-e,0),a=r(s);++o<s;)a[o]=i[e+o];o=-1;for(var u=r(e+1);++o<e;)u[o]=i[o];return u[e]=n(a),me(t,this,u)}}function So(t,e){return e.length<2?t:Ir(t,ei(e,0,-1))}function ko(t,e){for(var n=t.length,r=yn(e.length,n),o=ki(t);r--;){var s=e[r];t[r]=mo(s,n)?o[s]:i}return t}function No(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var Co=Do(Jr),Oo=Fe||function(t,e){return oe.setTimeout(t,e)},xo=Do(Zr);function Ro(t,e,n){var r=e+"";return xo(t,function(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(ot,"{\n/* [wrapped with "+e+"] */\n")}(r,function(t,e){return _e(d,(function(n){var r="_."+n[0];e&n[1]&&!Ee(t,r)&&t.push(r)})),t.sort()}(function(t){var e=t.match(st);return e?e[1].split(at):[]}(r),n)))}function Do(t){var e=0,n=0;return function(){var r=_n(),o=16-(r-n);if(n=r,o>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(i,arguments)}}function Po(t,e){var n=-1,r=t.length,o=r-1;for(e=e===i?r:e;++n<e;){var s=zr(n,o),a=t[s];t[s]=t[n],t[n]=a}return t.length=e,t}var Lo,Mo,Uo=(Lo=Ls((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(tt,(function(t,n,r,i){e.push(r?i.replace(ht,"$1"):n||t)})),e}),(function(t){return 500===Mo.size&&Mo.clear(),t})),Mo=Lo.cache,Lo);function Fo(t){if("string"==typeof t||ca(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function jo(t){if(null!=t){try{return Rt.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function qo(t){if(t instanceof Gn)return t.clone();var e=new Vn(t.__wrapped__,t.__chain__);return e.__actions__=ki(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var Bo=$r((function(t,e){return $s(t)?hr(t,vr(e,1,$s,!0)):[]})),Vo=$r((function(t,e){var n=Xo(e);return $s(n)&&(n=i),$s(t)?hr(t,vr(e,1,$s,!0),so(n,2)):[]})),Go=$r((function(t,e){var n=Xo(e);return $s(n)&&(n=i),$s(t)?hr(t,vr(e,1,$s,!0),i,n):[]}));function Ho(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:ga(n);return i<0&&(i=mn(r+i,0)),Re(t,so(e,3),i)}function Wo(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var o=r-1;return n!==i&&(o=ga(n),o=n<0?mn(r+o,0):yn(o,r-1)),Re(t,so(e,3),o,!0)}function zo(t){return null!=t&&t.length?vr(t,1):[]}function Ko(t){return t&&t.length?t[0]:i}var $o=$r((function(t){var e=Ae(t,gi);return e.length&&e[0]===t[0]?Nr(e):[]})),Yo=$r((function(t){var e=Xo(t),n=Ae(t,gi);return e===Xo(n)?e=i:n.pop(),n.length&&n[0]===t[0]?Nr(n,so(e,2)):[]})),Qo=$r((function(t){var e=Xo(t),n=Ae(t,gi);return(e="function"==typeof e?e:i)&&n.pop(),n.length&&n[0]===t[0]?Nr(n,i,e):[]}));function Xo(t){var e=null==t?0:t.length;return e?t[e-1]:i}var Jo=$r(Zo);function Zo(t,e){return t&&t.length&&e&&e.length?Hr(t,e):t}var ts=to((function(t,e){var n=null==t?0:t.length,r=or(t,e);return Wr(t,Ae(e,(function(t){return mo(t,n)?+t:t})).sort(Ti)),r}));function es(t){return null==t?t:In.call(t)}var ns=$r((function(t){return ui(vr(t,1,$s,!0))})),rs=$r((function(t){var e=Xo(t);return $s(e)&&(e=i),ui(vr(t,1,$s,!0),so(e,2))})),is=$r((function(t){var e=Xo(t);return e="function"==typeof e?e:i,ui(vr(t,1,$s,!0),i,e)}));function os(t){if(!t||!t.length)return[];var e=0;return t=Ie(t,(function(t){if($s(t))return e=mn(t.length,e),!0})),Be(e,(function(e){return Ae(t,Ue(e))}))}function ss(t,e){if(!t||!t.length)return[];var n=os(t);return null==e?n:Ae(n,(function(t){return me(e,i,t)}))}var as=$r((function(t,e){return $s(t)?hr(t,e):[]})),us=$r((function(t){return pi(Ie(t,$s))})),cs=$r((function(t){var e=Xo(t);return $s(e)&&(e=i),pi(Ie(t,$s),so(e,2))})),hs=$r((function(t){var e=Xo(t);return e="function"==typeof e?e:i,pi(Ie(t,$s),i,e)})),ls=$r(os),fs=$r((function(t){var e=t.length,n=e>1?t[e-1]:i;return n="function"==typeof n?(t.pop(),n):i,ss(t,n)}));function ps(t){var e=jn(t);return e.__chain__=!0,e}function ds(t,e){return e(t)}var gs=to((function(t){var e=t.length,n=e?t[0]:0,r=this.__wrapped__,o=function(e){return or(e,t)};return!(e>1||this.__actions__.length)&&r instanceof Gn&&mo(n)?((r=r.slice(n,+n+(e?1:0))).__actions__.push({func:ds,args:[o],thisArg:i}),new Vn(r,this.__chain__).thru((function(t){return e&&!t.length&&t.push(i),t}))):this.thru(o)})),vs=Ci((function(t,e,n){Dt.call(t,n)?++t[n]:ir(t,n,1)})),ms=Mi(Ho),ys=Mi(Wo);function _s(t,e){return(Ws(t)?_e:lr)(t,so(e,3))}function bs(t,e){return(Ws(t)?be:fr)(t,so(e,3))}var ws=Ci((function(t,e,n){Dt.call(t,n)?t[n].push(e):ir(t,n,[e])})),Is=$r((function(t,e,n){var i=-1,o="function"==typeof e,s=Ks(t)?r(t.length):[];return lr(t,(function(t){s[++i]=o?me(e,t,n):Cr(t,e,n)})),s})),Es=Ci((function(t,e,n){ir(t,n,e)}));function Ts(t,e){return(Ws(t)?Ae:Ur)(t,so(e,3))}var As=Ci((function(t,e,n){t[n?0:1].push(e)}),(function(){return[[],[]]})),Ss=$r((function(t,e){if(null==t)return[];var n=e.length;return n>1&&yo(t,e[0],e[1])?e=[]:n>2&&yo(e[0],e[1],e[2])&&(e=[e[0]]),Vr(t,vr(e,1),[])})),ks=Oe||function(){return oe.Date.now()};function Ns(t,e,n){return e=n?i:e,e=t&&null==e?t.length:e,Yi(t,c,i,i,i,i,e)}function Cs(t,e){var n;if("function"!=typeof e)throw new kt(o);return t=ga(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=i),n}}var Os=$r((function(t,e,n){var r=1;if(n.length){var i=en(n,oo(Os));r|=u}return Yi(t,r,e,n,i)})),xs=$r((function(t,e,n){var r=3;if(n.length){var i=en(n,oo(xs));r|=u}return Yi(e,r,t,n,i)}));function Rs(t,e,n){var r,s,a,u,c,h,l=0,f=!1,p=!1,d=!0;if("function"!=typeof t)throw new kt(o);function g(e){var n=r,o=s;return r=s=i,l=e,u=t.apply(o,n)}function v(t){return l=t,c=Oo(y,e),f?g(t):u}function m(t){var n=t-h;return h===i||n>=e||n<0||p&&t-l>=a}function y(){var t=ks();if(m(t))return _(t);c=Oo(y,function(t){var n=e-(t-h);return p?yn(n,a-(t-l)):n}(t))}function _(t){return c=i,d&&r?g(t):(r=s=i,u)}function b(){var t=ks(),n=m(t);if(r=arguments,s=this,h=t,n){if(c===i)return v(h);if(p)return bi(c),c=Oo(y,e),g(h)}return c===i&&(c=Oo(y,e)),u}return e=ma(e)||0,ea(n)&&(f=!!n.leading,a=(p="maxWait"in n)?mn(ma(n.maxWait)||0,e):a,d="trailing"in n?!!n.trailing:d),b.cancel=function(){c!==i&&bi(c),l=0,r=h=s=c=i},b.flush=function(){return c===i?u:_(ks())},b}var Ds=$r((function(t,e){return cr(t,1,e)})),Ps=$r((function(t,e,n){return cr(t,ma(e)||0,n)}));function Ls(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new kt(o);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var s=t.apply(this,r);return n.cache=o.set(i,s)||o,s};return n.cache=new(Ls.Cache||zn),n}function Ms(t){if("function"!=typeof t)throw new kt(o);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}Ls.Cache=zn;var Us=yi((function(t,e){var n=(e=1==e.length&&Ws(e[0])?Ae(e[0],Ge(so())):Ae(vr(e,1),Ge(so()))).length;return $r((function(r){for(var i=-1,o=yn(r.length,n);++i<o;)r[i]=e[i].call(this,r[i]);return me(t,this,r)}))})),Fs=$r((function(t,e){var n=en(e,oo(Fs));return Yi(t,u,i,e,n)})),js=$r((function(t,e){var n=en(e,oo(js));return Yi(t,64,i,e,n)})),qs=to((function(t,e){return Yi(t,256,i,i,i,e)}));function Bs(t,e){return t===e||t!=t&&e!=e}var Vs=Hi(Ar),Gs=Hi((function(t,e){return t>=e})),Hs=Or(function(){return arguments}())?Or:function(t){return na(t)&&Dt.call(t,"callee")&&!te.call(t,"callee")},Ws=r.isArray,zs=le?Ge(le):function(t){return na(t)&&Tr(t)==x};function Ks(t){return null!=t&&ta(t.length)&&!Js(t)}function $s(t){return na(t)&&Ks(t)}var Ys=pn||mu,Qs=fe?Ge(fe):function(t){return na(t)&&Tr(t)==y};function Xs(t){if(!na(t))return!1;var e=Tr(t);return e==_||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!oa(t)}function Js(t){if(!ea(t))return!1;var e=Tr(t);return e==b||e==w||"[object AsyncFunction]"==e||"[object Proxy]"==e}function Zs(t){return"number"==typeof t&&t==ga(t)}function ta(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=l}function ea(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function na(t){return null!=t&&"object"==typeof t}var ra=pe?Ge(pe):function(t){return na(t)&&fo(t)==I};function ia(t){return"number"==typeof t||na(t)&&Tr(t)==E}function oa(t){if(!na(t)||Tr(t)!=T)return!1;var e=zt(t);if(null===e)return!0;var n=Dt.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&Rt.call(n)==Ut}var sa=de?Ge(de):function(t){return na(t)&&Tr(t)==S},aa=ge?Ge(ge):function(t){return na(t)&&fo(t)==k};function ua(t){return"string"==typeof t||!Ws(t)&&na(t)&&Tr(t)==N}function ca(t){return"symbol"==typeof t||na(t)&&Tr(t)==C}var ha=ve?Ge(ve):function(t){return na(t)&&ta(t.length)&&!!Jt[Tr(t)]},la=Hi(Mr),fa=Hi((function(t,e){return t<=e}));function pa(t){if(!t)return[];if(Ks(t))return ua(t)?sn(t):ki(t);if(se&&t[se])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[se]());var e=fo(t);return(e==I?Ze:e==k?nn:Ba)(t)}function da(t){return t?(t=ma(t))===h||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function ga(t){var e=da(t),n=e%1;return e==e?n?e-n:e:0}function va(t){return t?sr(ga(t),0,p):0}function ma(t){if("number"==typeof t)return t;if(ca(t))return f;if(ea(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=ea(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=Ve(t);var n=dt.test(t);return n||vt.test(t)?ne(t.slice(2),n?2:8):pt.test(t)?f:+t}function ya(t){return Ni(t,Da(t))}function _a(t){return null==t?"":ai(t)}var ba=Oi((function(t,e){if(Io(e)||Ks(e))Ni(e,Ra(e),t);else for(var n in e)Dt.call(e,n)&&tr(t,n,e[n])})),wa=Oi((function(t,e){Ni(e,Da(e),t)})),Ia=Oi((function(t,e,n,r){Ni(e,Da(e),t,r)})),Ea=Oi((function(t,e,n,r){Ni(e,Ra(e),t,r)})),Ta=to(or),Aa=$r((function(t,e){t=Tt(t);var n=-1,r=e.length,o=r>2?e[2]:i;for(o&&yo(e[0],e[1],o)&&(r=1);++n<r;)for(var s=e[n],a=Da(s),u=-1,c=a.length;++u<c;){var h=a[u],l=t[h];(l===i||Bs(l,Ot[h])&&!Dt.call(t,h))&&(t[h]=s[h])}return t})),Sa=$r((function(t){return t.push(i,Xi),me(La,i,t)}));function ka(t,e,n){var r=null==t?i:Ir(t,e);return r===i?n:r}function Na(t,e){return null!=t&&po(t,e,kr)}var Ca=ji((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Mt.call(e)),t[e]=n}),eu(iu)),Oa=ji((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Mt.call(e)),Dt.call(t,e)?t[e].push(n):t[e]=[n]}),so),xa=$r(Cr);function Ra(t){return Ks(t)?Yn(t):Lr(t)}function Da(t){return Ks(t)?Yn(t,!0):function(t){if(!ea(t))return function(t){var e=[];if(null!=t)for(var n in Tt(t))e.push(n);return e}(t);var e=Io(t),n=[];for(var r in t)("constructor"!=r||!e&&Dt.call(t,r))&&n.push(r);return n}(t)}var Pa=Oi((function(t,e,n){qr(t,e,n)})),La=Oi((function(t,e,n,r){qr(t,e,n,r)})),Ma=to((function(t,e){var n={};if(null==t)return n;var r=!1;e=Ae(e,(function(e){return e=mi(e,t),r||(r=e.length>1),e})),Ni(t,no(t),n),r&&(n=ar(n,7,Ji));for(var i=e.length;i--;)ci(n,e[i]);return n})),Ua=to((function(t,e){return null==t?{}:function(t,e){return Gr(t,e,(function(e,n){return Na(t,n)}))}(t,e)}));function Fa(t,e){if(null==t)return{};var n=Ae(no(t),(function(t){return[t]}));return e=so(e),Gr(t,n,(function(t,n){return e(t,n[0])}))}var ja=$i(Ra),qa=$i(Da);function Ba(t){return null==t?[]:He(t,Ra(t))}var Va=Pi((function(t,e,n){return e=e.toLowerCase(),t+(n?Ga(e):e)}));function Ga(t){return Xa(_a(t).toLowerCase())}function Ha(t){return(t=_a(t))&&t.replace(yt,Ye).replace(Wt,"")}var Wa=Pi((function(t,e,n){return t+(n?"-":"")+e.toLowerCase()})),za=Pi((function(t,e,n){return t+(n?" ":"")+e.toLowerCase()})),Ka=Di("toLowerCase"),$a=Pi((function(t,e,n){return t+(n?"_":"")+e.toLowerCase()})),Ya=Pi((function(t,e,n){return t+(n?" ":"")+Xa(e)})),Qa=Pi((function(t,e,n){return t+(n?" ":"")+e.toUpperCase()})),Xa=Di("toUpperCase");function Ja(t,e,n){return t=_a(t),(e=n?i:e)===i?function(t){return Yt.test(t)}(t)?function(t){return t.match(Kt)||[]}(t):function(t){return t.match(ut)||[]}(t):t.match(e)||[]}var Za=$r((function(t,e){try{return me(t,i,e)}catch(t){return Xs(t)?t:new wt(t)}})),tu=to((function(t,e){return _e(e,(function(e){e=Fo(e),ir(t,e,Os(t[e],t))})),t}));function eu(t){return function(){return t}}var nu=Ui(),ru=Ui(!0);function iu(t){return t}function ou(t){return Pr("function"==typeof t?t:ar(t,1))}var su=$r((function(t,e){return function(n){return Cr(n,t,e)}})),au=$r((function(t,e){return function(n){return Cr(t,n,e)}}));function uu(t,e,n){var r=Ra(e),i=wr(e,r);null!=n||ea(e)&&(i.length||!r.length)||(n=e,e=t,t=this,i=wr(e,Ra(e)));var o=!(ea(n)&&"chain"in n&&!n.chain),s=Js(t);return _e(i,(function(n){var r=e[n];t[n]=r,s&&(t.prototype[n]=function(){var e=this.__chain__;if(o||e){var n=t(this.__wrapped__),i=n.__actions__=ki(this.__actions__);return i.push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,Se([this.value()],arguments))})})),t}function cu(){}var hu=Bi(Ae),lu=Bi(we),fu=Bi(Ce);function pu(t){return _o(t)?Ue(Fo(t)):function(t){return function(e){return Ir(e,t)}}(t)}var du=Gi(),gu=Gi(!0);function vu(){return[]}function mu(){return!1}var yu,_u=qi((function(t,e){return t+e}),0),bu=zi("ceil"),wu=qi((function(t,e){return t/e}),1),Iu=zi("floor"),Eu=qi((function(t,e){return t*e}),1),Tu=zi("round"),Au=qi((function(t,e){return t-e}),0);return jn.after=function(t,e){if("function"!=typeof e)throw new kt(o);return t=ga(t),function(){if(--t<1)return e.apply(this,arguments)}},jn.ary=Ns,jn.assign=ba,jn.assignIn=wa,jn.assignInWith=Ia,jn.assignWith=Ea,jn.at=Ta,jn.before=Cs,jn.bind=Os,jn.bindAll=tu,jn.bindKey=xs,jn.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return Ws(t)?t:[t]},jn.chain=ps,jn.chunk=function(t,e,n){e=(n?yo(t,e,n):e===i)?1:mn(ga(e),0);var o=null==t?0:t.length;if(!o||e<1)return[];for(var s=0,a=0,u=r(hn(o/e));s<o;)u[a++]=ei(t,s,s+=e);return u},jn.compact=function(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var o=t[e];o&&(i[r++]=o)}return i},jn.concat=function(){var t=arguments.length;if(!t)return[];for(var e=r(t-1),n=arguments[0],i=t;i--;)e[i-1]=arguments[i];return Se(Ws(n)?ki(n):[n],vr(e,1))},jn.cond=function(t){var e=null==t?0:t.length,n=so();return t=e?Ae(t,(function(t){if("function"!=typeof t[1])throw new kt(o);return[n(t[0]),t[1]]})):[],$r((function(n){for(var r=-1;++r<e;){var i=t[r];if(me(i[0],this,n))return me(i[1],this,n)}}))},jn.conforms=function(t){return function(t){var e=Ra(t);return function(n){return ur(n,t,e)}}(ar(t,1))},jn.constant=eu,jn.countBy=vs,jn.create=function(t,e){var n=qn(t);return null==e?n:rr(n,e)},jn.curry=function t(e,n,r){var o=Yi(e,8,i,i,i,i,i,n=r?i:n);return o.placeholder=t.placeholder,o},jn.curryRight=function t(e,n,r){var o=Yi(e,16,i,i,i,i,i,n=r?i:n);return o.placeholder=t.placeholder,o},jn.debounce=Rs,jn.defaults=Aa,jn.defaultsDeep=Sa,jn.defer=Ds,jn.delay=Ps,jn.difference=Bo,jn.differenceBy=Vo,jn.differenceWith=Go,jn.drop=function(t,e,n){var r=null==t?0:t.length;return r?ei(t,(e=n||e===i?1:ga(e))<0?0:e,r):[]},jn.dropRight=function(t,e,n){var r=null==t?0:t.length;return r?ei(t,0,(e=r-(e=n||e===i?1:ga(e)))<0?0:e):[]},jn.dropRightWhile=function(t,e){return t&&t.length?li(t,so(e,3),!0,!0):[]},jn.dropWhile=function(t,e){return t&&t.length?li(t,so(e,3),!0):[]},jn.fill=function(t,e,n,r){var o=null==t?0:t.length;return o?(n&&"number"!=typeof n&&yo(t,e,n)&&(n=0,r=o),function(t,e,n,r){var o=t.length;for((n=ga(n))<0&&(n=-n>o?0:o+n),(r=r===i||r>o?o:ga(r))<0&&(r+=o),r=n>r?0:va(r);n<r;)t[n++]=e;return t}(t,e,n,r)):[]},jn.filter=function(t,e){return(Ws(t)?Ie:gr)(t,so(e,3))},jn.flatMap=function(t,e){return vr(Ts(t,e),1)},jn.flatMapDeep=function(t,e){return vr(Ts(t,e),h)},jn.flatMapDepth=function(t,e,n){return n=n===i?1:ga(n),vr(Ts(t,e),n)},jn.flatten=zo,jn.flattenDeep=function(t){return null!=t&&t.length?vr(t,h):[]},jn.flattenDepth=function(t,e){return null!=t&&t.length?vr(t,e=e===i?1:ga(e)):[]},jn.flip=function(t){return Yi(t,512)},jn.flow=nu,jn.flowRight=ru,jn.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r},jn.functions=function(t){return null==t?[]:wr(t,Ra(t))},jn.functionsIn=function(t){return null==t?[]:wr(t,Da(t))},jn.groupBy=ws,jn.initial=function(t){return null!=t&&t.length?ei(t,0,-1):[]},jn.intersection=$o,jn.intersectionBy=Yo,jn.intersectionWith=Qo,jn.invert=Ca,jn.invertBy=Oa,jn.invokeMap=Is,jn.iteratee=ou,jn.keyBy=Es,jn.keys=Ra,jn.keysIn=Da,jn.map=Ts,jn.mapKeys=function(t,e){var n={};return e=so(e,3),_r(t,(function(t,r,i){ir(n,e(t,r,i),t)})),n},jn.mapValues=function(t,e){var n={};return e=so(e,3),_r(t,(function(t,r,i){ir(n,r,e(t,r,i))})),n},jn.matches=function(t){return Fr(ar(t,1))},jn.matchesProperty=function(t,e){return jr(t,ar(e,1))},jn.memoize=Ls,jn.merge=Pa,jn.mergeWith=La,jn.method=su,jn.methodOf=au,jn.mixin=uu,jn.negate=Ms,jn.nthArg=function(t){return t=ga(t),$r((function(e){return Br(e,t)}))},jn.omit=Ma,jn.omitBy=function(t,e){return Fa(t,Ms(so(e)))},jn.once=function(t){return Cs(2,t)},jn.orderBy=function(t,e,n,r){return null==t?[]:(Ws(e)||(e=null==e?[]:[e]),Ws(n=r?i:n)||(n=null==n?[]:[n]),Vr(t,e,n))},jn.over=hu,jn.overArgs=Us,jn.overEvery=lu,jn.overSome=fu,jn.partial=Fs,jn.partialRight=js,jn.partition=As,jn.pick=Ua,jn.pickBy=Fa,jn.property=pu,jn.propertyOf=function(t){return function(e){return null==t?i:Ir(t,e)}},jn.pull=Jo,jn.pullAll=Zo,jn.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?Hr(t,e,so(n,2)):t},jn.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?Hr(t,e,i,n):t},jn.pullAt=ts,jn.range=du,jn.rangeRight=gu,jn.rearg=qs,jn.reject=function(t,e){return(Ws(t)?Ie:gr)(t,Ms(so(e,3)))},jn.remove=function(t,e){var n=[];if(!t||!t.length)return n;var r=-1,i=[],o=t.length;for(e=so(e,3);++r<o;){var s=t[r];e(s,r,t)&&(n.push(s),i.push(r))}return Wr(t,i),n},jn.rest=function(t,e){if("function"!=typeof t)throw new kt(o);return $r(t,e=e===i?e:ga(e))},jn.reverse=es,jn.sampleSize=function(t,e,n){return e=(n?yo(t,e,n):e===i)?1:ga(e),(Ws(t)?Xn:Qr)(t,e)},jn.set=function(t,e,n){return null==t?t:Xr(t,e,n)},jn.setWith=function(t,e,n,r){return r="function"==typeof r?r:i,null==t?t:Xr(t,e,n,r)},jn.shuffle=function(t){return(Ws(t)?Jn:ti)(t)},jn.slice=function(t,e,n){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&yo(t,e,n)?(e=0,n=r):(e=null==e?0:ga(e),n=n===i?r:ga(n)),ei(t,e,n)):[]},jn.sortBy=Ss,jn.sortedUniq=function(t){return t&&t.length?oi(t):[]},jn.sortedUniqBy=function(t,e){return t&&t.length?oi(t,so(e,2)):[]},jn.split=function(t,e,n){return n&&"number"!=typeof n&&yo(t,e,n)&&(e=n=i),(n=n===i?p:n>>>0)?(t=_a(t))&&("string"==typeof e||null!=e&&!sa(e))&&!(e=ai(e))&&Je(t)?_i(sn(t),0,n):t.split(e,n):[]},jn.spread=function(t,e){if("function"!=typeof t)throw new kt(o);return e=null==e?0:mn(ga(e),0),$r((function(n){var r=n[e],i=_i(n,0,e);return r&&Se(i,r),me(t,this,i)}))},jn.tail=function(t){var e=null==t?0:t.length;return e?ei(t,1,e):[]},jn.take=function(t,e,n){return t&&t.length?ei(t,0,(e=n||e===i?1:ga(e))<0?0:e):[]},jn.takeRight=function(t,e,n){var r=null==t?0:t.length;return r?ei(t,(e=r-(e=n||e===i?1:ga(e)))<0?0:e,r):[]},jn.takeRightWhile=function(t,e){return t&&t.length?li(t,so(e,3),!1,!0):[]},jn.takeWhile=function(t,e){return t&&t.length?li(t,so(e,3)):[]},jn.tap=function(t,e){return e(t),t},jn.throttle=function(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new kt(o);return ea(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Rs(t,e,{leading:r,maxWait:e,trailing:i})},jn.thru=ds,jn.toArray=pa,jn.toPairs=ja,jn.toPairsIn=qa,jn.toPath=function(t){return Ws(t)?Ae(t,Fo):ca(t)?[t]:ki(Uo(_a(t)))},jn.toPlainObject=ya,jn.transform=function(t,e,n){var r=Ws(t),i=r||Ys(t)||ha(t);if(e=so(e,4),null==n){var o=t&&t.constructor;n=i?r?new o:[]:ea(t)&&Js(o)?qn(zt(t)):{}}return(i?_e:_r)(t,(function(t,r,i){return e(n,t,r,i)})),n},jn.unary=function(t){return Ns(t,1)},jn.union=ns,jn.unionBy=rs,jn.unionWith=is,jn.uniq=function(t){return t&&t.length?ui(t):[]},jn.uniqBy=function(t,e){return t&&t.length?ui(t,so(e,2)):[]},jn.uniqWith=function(t,e){return e="function"==typeof e?e:i,t&&t.length?ui(t,i,e):[]},jn.unset=function(t,e){return null==t||ci(t,e)},jn.unzip=os,jn.unzipWith=ss,jn.update=function(t,e,n){return null==t?t:hi(t,e,vi(n))},jn.updateWith=function(t,e,n,r){return r="function"==typeof r?r:i,null==t?t:hi(t,e,vi(n),r)},jn.values=Ba,jn.valuesIn=function(t){return null==t?[]:He(t,Da(t))},jn.without=as,jn.words=Ja,jn.wrap=function(t,e){return Fs(vi(e),t)},jn.xor=us,jn.xorBy=cs,jn.xorWith=hs,jn.zip=ls,jn.zipObject=function(t,e){return di(t||[],e||[],tr)},jn.zipObjectDeep=function(t,e){return di(t||[],e||[],Xr)},jn.zipWith=fs,jn.entries=ja,jn.entriesIn=qa,jn.extend=wa,jn.extendWith=Ia,uu(jn,jn),jn.add=_u,jn.attempt=Za,jn.camelCase=Va,jn.capitalize=Ga,jn.ceil=bu,jn.clamp=function(t,e,n){return n===i&&(n=e,e=i),n!==i&&(n=(n=ma(n))==n?n:0),e!==i&&(e=(e=ma(e))==e?e:0),sr(ma(t),e,n)},jn.clone=function(t){return ar(t,4)},jn.cloneDeep=function(t){return ar(t,5)},jn.cloneDeepWith=function(t,e){return ar(t,5,e="function"==typeof e?e:i)},jn.cloneWith=function(t,e){return ar(t,4,e="function"==typeof e?e:i)},jn.conformsTo=function(t,e){return null==e||ur(t,e,Ra(e))},jn.deburr=Ha,jn.defaultTo=function(t,e){return null==t||t!=t?e:t},jn.divide=wu,jn.endsWith=function(t,e,n){t=_a(t),e=ai(e);var r=t.length,o=n=n===i?r:sr(ga(n),0,r);return(n-=e.length)>=0&&t.slice(n,o)==e},jn.eq=Bs,jn.escape=function(t){return(t=_a(t))&&$.test(t)?t.replace(z,Qe):t},jn.escapeRegExp=function(t){return(t=_a(t))&&nt.test(t)?t.replace(et,"\\$&"):t},jn.every=function(t,e,n){var r=Ws(t)?we:pr;return n&&yo(t,e,n)&&(e=i),r(t,so(e,3))},jn.find=ms,jn.findIndex=Ho,jn.findKey=function(t,e){return xe(t,so(e,3),_r)},jn.findLast=ys,jn.findLastIndex=Wo,jn.findLastKey=function(t,e){return xe(t,so(e,3),br)},jn.floor=Iu,jn.forEach=_s,jn.forEachRight=bs,jn.forIn=function(t,e){return null==t?t:mr(t,so(e,3),Da)},jn.forInRight=function(t,e){return null==t?t:yr(t,so(e,3),Da)},jn.forOwn=function(t,e){return t&&_r(t,so(e,3))},jn.forOwnRight=function(t,e){return t&&br(t,so(e,3))},jn.get=ka,jn.gt=Vs,jn.gte=Gs,jn.has=function(t,e){return null!=t&&po(t,e,Sr)},jn.hasIn=Na,jn.head=Ko,jn.identity=iu,jn.includes=function(t,e,n,r){t=Ks(t)?t:Ba(t),n=n&&!r?ga(n):0;var i=t.length;return n<0&&(n=mn(i+n,0)),ua(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&De(t,e,n)>-1},jn.indexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:ga(n);return i<0&&(i=mn(r+i,0)),De(t,e,i)},jn.inRange=function(t,e,n){return e=da(e),n===i?(n=e,e=0):n=da(n),function(t,e,n){return t>=yn(e,n)&&t<mn(e,n)}(t=ma(t),e,n)},jn.invoke=xa,jn.isArguments=Hs,jn.isArray=Ws,jn.isArrayBuffer=zs,jn.isArrayLike=Ks,jn.isArrayLikeObject=$s,jn.isBoolean=function(t){return!0===t||!1===t||na(t)&&Tr(t)==m},jn.isBuffer=Ys,jn.isDate=Qs,jn.isElement=function(t){return na(t)&&1===t.nodeType&&!oa(t)},jn.isEmpty=function(t){if(null==t)return!0;if(Ks(t)&&(Ws(t)||"string"==typeof t||"function"==typeof t.splice||Ys(t)||ha(t)||Hs(t)))return!t.length;var e=fo(t);if(e==I||e==k)return!t.size;if(Io(t))return!Lr(t).length;for(var n in t)if(Dt.call(t,n))return!1;return!0},jn.isEqual=function(t,e){return xr(t,e)},jn.isEqualWith=function(t,e,n){var r=(n="function"==typeof n?n:i)?n(t,e):i;return r===i?xr(t,e,i,n):!!r},jn.isError=Xs,jn.isFinite=function(t){return"number"==typeof t&&dn(t)},jn.isFunction=Js,jn.isInteger=Zs,jn.isLength=ta,jn.isMap=ra,jn.isMatch=function(t,e){return t===e||Rr(t,e,uo(e))},jn.isMatchWith=function(t,e,n){return n="function"==typeof n?n:i,Rr(t,e,uo(e),n)},jn.isNaN=function(t){return ia(t)&&t!=+t},jn.isNative=function(t){if(wo(t))throw new wt("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Dr(t)},jn.isNil=function(t){return null==t},jn.isNull=function(t){return null===t},jn.isNumber=ia,jn.isObject=ea,jn.isObjectLike=na,jn.isPlainObject=oa,jn.isRegExp=sa,jn.isSafeInteger=function(t){return Zs(t)&&t>=-9007199254740991&&t<=l},jn.isSet=aa,jn.isString=ua,jn.isSymbol=ca,jn.isTypedArray=ha,jn.isUndefined=function(t){return t===i},jn.isWeakMap=function(t){return na(t)&&fo(t)==O},jn.isWeakSet=function(t){return na(t)&&"[object WeakSet]"==Tr(t)},jn.join=function(t,e){return null==t?"":gn.call(t,e)},jn.kebabCase=Wa,jn.last=Xo,jn.lastIndexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var o=r;return n!==i&&(o=(o=ga(n))<0?mn(r+o,0):yn(o,r-1)),e==e?function(t,e,n){for(var r=n+1;r--;)if(t[r]===e)return r;return r}(t,e,o):Re(t,Le,o,!0)},jn.lowerCase=za,jn.lowerFirst=Ka,jn.lt=la,jn.lte=fa,jn.max=function(t){return t&&t.length?dr(t,iu,Ar):i},jn.maxBy=function(t,e){return t&&t.length?dr(t,so(e,2),Ar):i},jn.mean=function(t){return Me(t,iu)},jn.meanBy=function(t,e){return Me(t,so(e,2))},jn.min=function(t){return t&&t.length?dr(t,iu,Mr):i},jn.minBy=function(t,e){return t&&t.length?dr(t,so(e,2),Mr):i},jn.stubArray=vu,jn.stubFalse=mu,jn.stubObject=function(){return{}},jn.stubString=function(){return""},jn.stubTrue=function(){return!0},jn.multiply=Eu,jn.nth=function(t,e){return t&&t.length?Br(t,ga(e)):i},jn.noConflict=function(){return oe._===this&&(oe._=Ft),this},jn.noop=cu,jn.now=ks,jn.pad=function(t,e,n){t=_a(t);var r=(e=ga(e))?on(t):0;if(!e||r>=e)return t;var i=(e-r)/2;return Vi(ln(i),n)+t+Vi(hn(i),n)},jn.padEnd=function(t,e,n){t=_a(t);var r=(e=ga(e))?on(t):0;return e&&r<e?t+Vi(e-r,n):t},jn.padStart=function(t,e,n){t=_a(t);var r=(e=ga(e))?on(t):0;return e&&r<e?Vi(e-r,n)+t:t},jn.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),bn(_a(t).replace(rt,""),e||0)},jn.random=function(t,e,n){if(n&&"boolean"!=typeof n&&yo(t,e,n)&&(e=n=i),n===i&&("boolean"==typeof e?(n=e,e=i):"boolean"==typeof t&&(n=t,t=i)),t===i&&e===i?(t=0,e=1):(t=da(t),e===i?(e=t,t=0):e=da(e)),t>e){var r=t;t=e,e=r}if(n||t%1||e%1){var o=wn();return yn(t+o*(e-t+ee("1e-"+((o+"").length-1))),e)}return zr(t,e)},jn.reduce=function(t,e,n){var r=Ws(t)?ke:je,i=arguments.length<3;return r(t,so(e,4),n,i,lr)},jn.reduceRight=function(t,e,n){var r=Ws(t)?Ne:je,i=arguments.length<3;return r(t,so(e,4),n,i,fr)},jn.repeat=function(t,e,n){return e=(n?yo(t,e,n):e===i)?1:ga(e),Kr(_a(t),e)},jn.replace=function(){var t=arguments,e=_a(t[0]);return t.length<3?e:e.replace(t[1],t[2])},jn.result=function(t,e,n){var r=-1,o=(e=mi(e,t)).length;for(o||(o=1,t=i);++r<o;){var s=null==t?i:t[Fo(e[r])];s===i&&(r=o,s=n),t=Js(s)?s.call(t):s}return t},jn.round=Tu,jn.runInContext=t,jn.sample=function(t){return(Ws(t)?Qn:Yr)(t)},jn.size=function(t){if(null==t)return 0;if(Ks(t))return ua(t)?on(t):t.length;var e=fo(t);return e==I||e==k?t.size:Lr(t).length},jn.snakeCase=$a,jn.some=function(t,e,n){var r=Ws(t)?Ce:ni;return n&&yo(t,e,n)&&(e=i),r(t,so(e,3))},jn.sortedIndex=function(t,e){return ri(t,e)},jn.sortedIndexBy=function(t,e,n){return ii(t,e,so(n,2))},jn.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var r=ri(t,e);if(r<n&&Bs(t[r],e))return r}return-1},jn.sortedLastIndex=function(t,e){return ri(t,e,!0)},jn.sortedLastIndexBy=function(t,e,n){return ii(t,e,so(n,2),!0)},jn.sortedLastIndexOf=function(t,e){if(null!=t&&t.length){var n=ri(t,e,!0)-1;if(Bs(t[n],e))return n}return-1},jn.startCase=Ya,jn.startsWith=function(t,e,n){return t=_a(t),n=null==n?0:sr(ga(n),0,t.length),e=ai(e),t.slice(n,n+e.length)==e},jn.subtract=Au,jn.sum=function(t){return t&&t.length?qe(t,iu):0},jn.sumBy=function(t,e){return t&&t.length?qe(t,so(e,2)):0},jn.template=function(t,e,n){var r=jn.templateSettings;n&&yo(t,e,n)&&(e=i),t=_a(t),e=Ia({},e,r,Qi);var o,s,a=Ia({},e.imports,r.imports,Qi),u=Ra(a),c=He(a,u),h=0,l=e.interpolate||_t,f="__p += '",p=At((e.escape||_t).source+"|"+l.source+"|"+(l===X?lt:_t).source+"|"+(e.evaluate||_t).source+"|$","g"),d="//# sourceURL="+(Dt.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Xt+"]")+"\n";t.replace(p,(function(e,n,r,i,a,u){return r||(r=i),f+=t.slice(h,u).replace(bt,Xe),n&&(o=!0,f+="' +\n__e("+n+") +\n'"),a&&(s=!0,f+="';\n"+a+";\n__p += '"),r&&(f+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),h=u+e.length,e})),f+="';\n";var g=Dt.call(e,"variable")&&e.variable;if(g){if(ct.test(g))throw new wt("Invalid `variable` option passed into `_.template`")}else f="with (obj) {\n"+f+"\n}\n";f=(s?f.replace(V,""):f).replace(G,"$1").replace(H,"$1;"),f="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var v=Za((function(){return It(u,d+"return "+f).apply(i,c)}));if(v.source=f,Xs(v))throw v;return v},jn.times=function(t,e){if((t=ga(t))<1||t>l)return[];var n=p,r=yn(t,p);e=so(e),t-=p;for(var i=Be(r,e);++n<t;)e(n);return i},jn.toFinite=da,jn.toInteger=ga,jn.toLength=va,jn.toLower=function(t){return _a(t).toLowerCase()},jn.toNumber=ma,jn.toSafeInteger=function(t){return t?sr(ga(t),-9007199254740991,l):0===t?t:0},jn.toString=_a,jn.toUpper=function(t){return _a(t).toUpperCase()},jn.trim=function(t,e,n){if((t=_a(t))&&(n||e===i))return Ve(t);if(!t||!(e=ai(e)))return t;var r=sn(t),o=sn(e);return _i(r,ze(r,o),Ke(r,o)+1).join("")},jn.trimEnd=function(t,e,n){if((t=_a(t))&&(n||e===i))return t.slice(0,an(t)+1);if(!t||!(e=ai(e)))return t;var r=sn(t);return _i(r,0,Ke(r,sn(e))+1).join("")},jn.trimStart=function(t,e,n){if((t=_a(t))&&(n||e===i))return t.replace(rt,"");if(!t||!(e=ai(e)))return t;var r=sn(t);return _i(r,ze(r,sn(e))).join("")},jn.truncate=function(t,e){var n=30,r="...";if(ea(e)){var o="separator"in e?e.separator:o;n="length"in e?ga(e.length):n,r="omission"in e?ai(e.omission):r}var s=(t=_a(t)).length;if(Je(t)){var a=sn(t);s=a.length}if(n>=s)return t;var u=n-on(r);if(u<1)return r;var c=a?_i(a,0,u).join(""):t.slice(0,u);if(o===i)return c+r;if(a&&(u+=c.length-u),sa(o)){if(t.slice(u).search(o)){var h,l=c;for(o.global||(o=At(o.source,_a(ft.exec(o))+"g")),o.lastIndex=0;h=o.exec(l);)var f=h.index;c=c.slice(0,f===i?u:f)}}else if(t.indexOf(ai(o),u)!=u){var p=c.lastIndexOf(o);p>-1&&(c=c.slice(0,p))}return c+r},jn.unescape=function(t){return(t=_a(t))&&K.test(t)?t.replace(W,un):t},jn.uniqueId=function(t){var e=++Pt;return _a(t)+e},jn.upperCase=Qa,jn.upperFirst=Xa,jn.each=_s,jn.eachRight=bs,jn.first=Ko,uu(jn,(yu={},_r(jn,(function(t,e){Dt.call(jn.prototype,e)||(yu[e]=t)})),yu),{chain:!1}),jn.VERSION="4.17.21",_e(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){jn[t].placeholder=jn})),_e(["drop","take"],(function(t,e){Gn.prototype[t]=function(n){n=n===i?1:mn(ga(n),0);var r=this.__filtered__&&!e?new Gn(this):this.clone();return r.__filtered__?r.__takeCount__=yn(n,r.__takeCount__):r.__views__.push({size:yn(n,p),type:t+(r.__dir__<0?"Right":"")}),r},Gn.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),_e(["filter","map","takeWhile"],(function(t,e){var n=e+1,r=1==n||3==n;Gn.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:so(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}})),_e(["head","last"],(function(t,e){var n="take"+(e?"Right":"");Gn.prototype[t]=function(){return this[n](1).value()[0]}})),_e(["initial","tail"],(function(t,e){var n="drop"+(e?"":"Right");Gn.prototype[t]=function(){return this.__filtered__?new Gn(this):this[n](1)}})),Gn.prototype.compact=function(){return this.filter(iu)},Gn.prototype.find=function(t){return this.filter(t).head()},Gn.prototype.findLast=function(t){return this.reverse().find(t)},Gn.prototype.invokeMap=$r((function(t,e){return"function"==typeof t?new Gn(this):this.map((function(n){return Cr(n,t,e)}))})),Gn.prototype.reject=function(t){return this.filter(Ms(so(t)))},Gn.prototype.slice=function(t,e){t=ga(t);var n=this;return n.__filtered__&&(t>0||e<0)?new Gn(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==i&&(n=(e=ga(e))<0?n.dropRight(-e):n.take(e-t)),n)},Gn.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Gn.prototype.toArray=function(){return this.take(p)},_r(Gn.prototype,(function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),r=/^(?:head|last)$/.test(e),o=jn[r?"take"+("last"==e?"Right":""):e],s=r||/^find/.test(e);o&&(jn.prototype[e]=function(){var e=this.__wrapped__,a=r?[1]:arguments,u=e instanceof Gn,c=a[0],h=u||Ws(e),l=function(t){var e=o.apply(jn,Se([t],a));return r&&f?e[0]:e};h&&n&&"function"==typeof c&&1!=c.length&&(u=h=!1);var f=this.__chain__,p=!!this.__actions__.length,d=s&&!f,g=u&&!p;if(!s&&h){e=g?e:new Gn(this);var v=t.apply(e,a);return v.__actions__.push({func:ds,args:[l],thisArg:i}),new Vn(v,f)}return d&&g?t.apply(this,a):(v=this.thru(l),d?r?v.value()[0]:v.value():v)})})),_e(["pop","push","shift","sort","splice","unshift"],(function(t){var e=Nt[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);jn.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var i=this.value();return e.apply(Ws(i)?i:[],t)}return this[n]((function(n){return e.apply(Ws(n)?n:[],t)}))}})),_r(Gn.prototype,(function(t,e){var n=jn[e];if(n){var r=n.name+"";Dt.call(On,r)||(On[r]=[]),On[r].push({name:e,func:n})}})),On[Fi(i,2).name]=[{name:"wrapper",func:i}],Gn.prototype.clone=function(){var t=new Gn(this.__wrapped__);return t.__actions__=ki(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=ki(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=ki(this.__views__),t},Gn.prototype.reverse=function(){if(this.__filtered__){var t=new Gn(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},Gn.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=Ws(t),r=e<0,i=n?t.length:0,o=function(t,e,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],s=o.size;switch(o.type){case"drop":t+=s;break;case"dropRight":e-=s;break;case"take":e=yn(e,t+s);break;case"takeRight":t=mn(t,e-s)}}return{start:t,end:e}}(0,i,this.__views__),s=o.start,a=o.end,u=a-s,c=r?a:s-1,h=this.__iteratees__,l=h.length,f=0,p=yn(u,this.__takeCount__);if(!n||!r&&i==u&&p==u)return fi(t,this.__actions__);var d=[];t:for(;u--&&f<p;){for(var g=-1,v=t[c+=e];++g<l;){var m=h[g],y=m.iteratee,_=m.type,b=y(v);if(2==_)v=b;else if(!b){if(1==_)continue t;break t}}d[f++]=v}return d},jn.prototype.at=gs,jn.prototype.chain=function(){return ps(this)},jn.prototype.commit=function(){return new Vn(this.value(),this.__chain__)},jn.prototype.next=function(){this.__values__===i&&(this.__values__=pa(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?i:this.__values__[this.__index__++]}},jn.prototype.plant=function(t){for(var e,n=this;n instanceof Bn;){var r=qo(n);r.__index__=0,r.__values__=i,e?o.__wrapped__=r:e=r;var o=r;n=n.__wrapped__}return o.__wrapped__=t,e},jn.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof Gn){var e=t;return this.__actions__.length&&(e=new Gn(this)),(e=e.reverse()).__actions__.push({func:ds,args:[es],thisArg:i}),new Vn(e,this.__chain__)}return this.thru(es)},jn.prototype.toJSON=jn.prototype.valueOf=jn.prototype.value=function(){return fi(this.__wrapped__,this.__actions__)},jn.prototype.first=jn.prototype.head,se&&(jn.prototype[se]=function(){return this}),jn}();oe._=cn,(r=function(){return cn}.call(e,n,e,t))===i||(t.exports=r)}.call(this)},4753:t=>{"use strict";var e,n={DEBUG:!1,LIB_VERSION:"2.45.0"};if("undefined"==typeof window){var r={hostname:""};e={navigator:{userAgent:""},document:{location:r,referrer:""},screen:{width:0,height:0},location:r}}else e=window;var i,o,s,a,u,c,h,l,f,p,d,g=Array.prototype,v=Function.prototype,m=Object.prototype,y=g.slice,_=m.toString,b=m.hasOwnProperty,w=e.console,I=e.navigator,E=e.document,T=e.opera,A=e.screen,S=I.userAgent,k=v.bind,N=g.forEach,C=g.indexOf,O=g.map,x=Array.isArray,R={},D={trim:function(t){return t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},P={log:function(){if(n.DEBUG&&!D.isUndefined(w)&&w)try{w.log.apply(w,arguments)}catch(t){D.each(arguments,(function(t){w.log(t)}))}},warn:function(){if(n.DEBUG&&!D.isUndefined(w)&&w){var t=["Mixpanel warning:"].concat(D.toArray(arguments));try{w.warn.apply(w,t)}catch(e){D.each(t,(function(t){w.warn(t)}))}}},error:function(){if(n.DEBUG&&!D.isUndefined(w)&&w){var t=["Mixpanel error:"].concat(D.toArray(arguments));try{w.error.apply(w,t)}catch(e){D.each(t,(function(t){w.error(t)}))}}},critical:function(){if(!D.isUndefined(w)&&w){var t=["Mixpanel error:"].concat(D.toArray(arguments));try{w.error.apply(w,t)}catch(e){D.each(t,(function(t){w.error(t)}))}}}},L=function(t,e){return function(){return arguments[0]="["+e+"] "+arguments[0],t.apply(P,arguments)}},M=function(t){return{log:L(P.log,t),error:L(P.error,t),critical:L(P.critical,t)}};D.bind=function(t,e){var n,r;if(k&&t.bind===k)return k.apply(t,y.call(arguments,1));if(!D.isFunction(t))throw new TypeError;return n=y.call(arguments,2),r=function(){if(!(this instanceof r))return t.apply(e,n.concat(y.call(arguments)));var i={};i.prototype=t.prototype;var o=new i;i.prototype=null;var s=t.apply(o,n.concat(y.call(arguments)));return Object(s)===s?s:o},r},D.each=function(t,e,n){if(null!=t)if(N&&t.forEach===N)t.forEach(e,n);else if(t.length===+t.length){for(var r=0,i=t.length;r<i;r++)if(r in t&&e.call(n,t[r],r,t)===R)return}else for(var o in t)if(b.call(t,o)&&e.call(n,t[o],o,t)===R)return},D.extend=function(t){return D.each(y.call(arguments,1),(function(e){for(var n in e)void 0!==e[n]&&(t[n]=e[n])})),t},D.isArray=x||function(t){return"[object Array]"===_.call(t)},D.isFunction=function(t){try{return/^\s*\bfunction\b/.test(t)}catch(t){return!1}},D.isArguments=function(t){return!(!t||!b.call(t,"callee"))},D.toArray=function(t){return t?t.toArray?t.toArray():D.isArray(t)||D.isArguments(t)?y.call(t):D.values(t):[]},D.map=function(t,e,n){if(O&&t.map===O)return t.map(e,n);var r=[];return D.each(t,(function(t){r.push(e.call(n,t))})),r},D.keys=function(t){var e=[];return null===t||D.each(t,(function(t,n){e[e.length]=n})),e},D.values=function(t){var e=[];return null===t||D.each(t,(function(t){e[e.length]=t})),e},D.include=function(t,e){var n=!1;return null===t?n:C&&t.indexOf===C?-1!=t.indexOf(e):(D.each(t,(function(t){if(n||(n=t===e))return R})),n)},D.includes=function(t,e){return-1!==t.indexOf(e)},D.inherit=function(t,e){return t.prototype=new e,t.prototype.constructor=t,t.superclass=e.prototype,t},D.isObject=function(t){return t===Object(t)&&!D.isArray(t)},D.isEmptyObject=function(t){if(D.isObject(t)){for(var e in t)if(b.call(t,e))return!1;return!0}return!1},D.isUndefined=function(t){return void 0===t},D.isString=function(t){return"[object String]"==_.call(t)},D.isDate=function(t){return"[object Date]"==_.call(t)},D.isNumber=function(t){return"[object Number]"==_.call(t)},D.isElement=function(t){return!(!t||1!==t.nodeType)},D.encodeDates=function(t){return D.each(t,(function(e,n){D.isDate(e)?t[n]=D.formatDate(e):D.isObject(e)&&(t[n]=D.encodeDates(e))})),t},D.timestamp=function(){return Date.now=Date.now||function(){return+new Date},Date.now()},D.formatDate=function(t){function e(t){return t<10?"0"+t:t}return t.getUTCFullYear()+"-"+e(t.getUTCMonth()+1)+"-"+e(t.getUTCDate())+"T"+e(t.getUTCHours())+":"+e(t.getUTCMinutes())+":"+e(t.getUTCSeconds())},D.strip_empty_properties=function(t){var e={};return D.each(t,(function(t,n){D.isString(t)&&t.length>0&&(e[n]=t)})),e},D.truncate=function(t,e){var n;return"string"==typeof t?n=t.slice(0,e):D.isArray(t)?(n=[],D.each(t,(function(t){n.push(D.truncate(t,e))}))):D.isObject(t)?(n={},D.each(t,(function(t,r){n[r]=D.truncate(t,e)}))):n=t,n},D.JSONEncode=function(t){var e=function(t){var e=/[\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,n={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return e.lastIndex=0,e.test(t)?'"'+t.replace(e,(function(t){var e=n[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)}))+'"':'"'+t+'"'},n=function(t,r){var i="",o=0,s="",a="",u=0,c=i,h=[],l=r[t];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(t)),typeof l){case"string":return e(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(i+="    ",h=[],"[object Array]"===_.apply(l)){for(u=l.length,o=0;o<u;o+=1)h[o]=n(o,l)||"null";return a=0===h.length?"[]":i?"[\n"+i+h.join(",\n"+i)+"\n"+c+"]":"["+h.join(",")+"]",i=c,a}for(s in l)b.call(l,s)&&(a=n(s,l))&&h.push(e(s)+(i?": ":":")+a);return a=0===h.length?"{}":i?"{"+h.join(",")+c+"}":"{"+h.join(",")+"}",i=c,a}};return n("",{"":t})},D.JSONDecode=(u={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},c=function(t){var e=new SyntaxError(t);throw e.at=i,e.text=s,e},h=function(t){return t&&t!==o&&c("Expected '"+t+"' instead of '"+o+"'"),o=s.charAt(i),i+=1,o},l=function(){var t,e="";for("-"===o&&(e="-",h("-"));o>="0"&&o<="9";)e+=o,h();if("."===o)for(e+=".";h()&&o>="0"&&o<="9";)e+=o;if("e"===o||"E"===o)for(e+=o,h(),"-"!==o&&"+"!==o||(e+=o,h());o>="0"&&o<="9";)e+=o,h();if(t=+e,isFinite(t))return t;c("Bad number")},f=function(){var t,e,n,r="";if('"'===o)for(;h();){if('"'===o)return h(),r;if("\\"===o)if(h(),"u"===o){for(n=0,e=0;e<4&&(t=parseInt(h(),16),isFinite(t));e+=1)n=16*n+t;r+=String.fromCharCode(n)}else{if("string"!=typeof u[o])break;r+=u[o]}else r+=o}c("Bad string")},p=function(){for(;o&&o<=" ";)h()},a=function(){switch(p(),o){case"{":return function(){var t,e={};if("{"===o){if(h("{"),p(),"}"===o)return h("}"),e;for(;o;){if(t=f(),p(),h(":"),Object.hasOwnProperty.call(e,t)&&c('Duplicate key "'+t+'"'),e[t]=a(),p(),"}"===o)return h("}"),e;h(","),p()}}c("Bad object")}();case"[":return function(){var t=[];if("["===o){if(h("["),p(),"]"===o)return h("]"),t;for(;o;){if(t.push(a()),p(),"]"===o)return h("]"),t;h(","),p()}}c("Bad array")}();case'"':return f();case"-":return l();default:return o>="0"&&o<="9"?l():function(){switch(o){case"t":return h("t"),h("r"),h("u"),h("e"),!0;case"f":return h("f"),h("a"),h("l"),h("s"),h("e"),!1;case"n":return h("n"),h("u"),h("l"),h("l"),null}c('Unexpected "'+o+'"')}()}},function(t){var e;return s=t,i=0,o=" ",e=a(),p(),o&&c("Syntax error"),e}),D.base64Encode=function(t){var e,n,r,i,o,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",a=0,u=0,c="",h=[];if(!t)return t;t=D.utf8Encode(t);do{e=(o=t.charCodeAt(a++)<<16|t.charCodeAt(a++)<<8|t.charCodeAt(a++))>>18&63,n=o>>12&63,r=o>>6&63,i=63&o,h[u++]=s.charAt(e)+s.charAt(n)+s.charAt(r)+s.charAt(i)}while(a<t.length);switch(c=h.join(""),t.length%3){case 1:c=c.slice(0,-2)+"==";break;case 2:c=c.slice(0,-1)+"="}return c},D.utf8Encode=function(t){var e,n,r,i,o="";for(e=n=0,r=(t=(t+"").replace(/\r\n/g,"\n").replace(/\r/g,"\n")).length,i=0;i<r;i++){var s=t.charCodeAt(i),a=null;s<128?n++:a=s>127&&s<2048?String.fromCharCode(s>>6|192,63&s|128):String.fromCharCode(s>>12|224,s>>6&63|128,63&s|128),null!==a&&(n>e&&(o+=t.substring(e,n)),o+=a,e=n=i+1)}return n>e&&(o+=t.substring(e,t.length)),o},D.UUID=(d=function(){for(var t=1*new Date,e=0;t==1*new Date;)e++;return t.toString(16)+e.toString(16)},function(){var t=(A.height*A.width).toString(16);return d()+"-"+Math.random().toString(16).replace(".","")+"-"+function(){var t,e,n=S,r=[],i=0;function o(t,e){var n,i=0;for(n=0;n<e.length;n++)i|=r[n]<<8*n;return t^i}for(t=0;t<n.length;t++)e=n.charCodeAt(t),r.unshift(255&e),r.length>=4&&(i=o(i,r),r=[]);return r.length>0&&(i=o(i,r)),i.toString(16)}()+"-"+t+"-"+d()});var U=["ahrefsbot","baiduspider","bingbot","bingpreview","facebookexternal","petalbot","pinterest","screaming frog","yahoo! slurp","yandexbot","adsbot-google","apis-google","duplexweb-google","feedfetcher-google","google favicon","google web preview","google-read-aloud","googlebot","googleweblight","mediapartners-google","storebot-google"];D.isBlockedUA=function(t){var e;for(t=t.toLowerCase(),e=0;e<U.length;e++)if(-1!==t.indexOf(U[e]))return!0;return!1},D.HTTPBuildQuery=function(t,e){var n,r,i=[];return D.isUndefined(e)&&(e="&"),D.each(t,(function(t,e){n=encodeURIComponent(t.toString()),r=encodeURIComponent(e),i[i.length]=r+"="+n})),i.join(e)},D.getQueryParam=function(t,e){e=e.replace(/[[]/,"\\[").replace(/[\]]/,"\\]");var n=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(t);if(null===n||n&&"string"!=typeof n[1]&&n[1].length)return"";var r=n[1];try{r=decodeURIComponent(r)}catch(t){P.error("Skipping decoding for malformed query param: "+r)}return r.replace(/\+/g," ")},D.cookie={get:function(t){for(var e=t+"=",n=E.cookie.split(";"),r=0;r<n.length;r++){for(var i=n[r];" "==i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(e))return decodeURIComponent(i.substring(e.length,i.length))}return null},parse:function(t){var e;try{e=D.JSONDecode(D.cookie.get(t))||{}}catch(t){}return e},set_seconds:function(t,e,n,r,i,o,s){var a="",u="",c="";if(s)a="; domain="+s;else if(r){var h=H(E.location.hostname);a=h?"; domain=."+h:""}if(n){var l=new Date;l.setTime(l.getTime()+1e3*n),u="; expires="+l.toGMTString()}o&&(i=!0,c="; SameSite=None"),i&&(c+="; secure"),E.cookie=t+"="+encodeURIComponent(e)+u+"; path=/"+a+c},set:function(t,e,n,r,i,o,s){var a="",u="",c="";if(s)a="; domain="+s;else if(r){var h=H(E.location.hostname);a=h?"; domain=."+h:""}if(n){var l=new Date;l.setTime(l.getTime()+24*n*60*60*1e3),u="; expires="+l.toGMTString()}o&&(i=!0,c="; SameSite=None"),i&&(c+="; secure");var f=t+"="+encodeURIComponent(e)+u+"; path=/"+a+c;return E.cookie=f,f},remove:function(t,e,n){D.cookie.set(t,"",-1,e,!1,!1,n)}};var F=null,j=function(t,e){if(null!==F&&!e)return F;var n=!0;try{t=t||window.localStorage;var r="__mplss_"+B(8);t.setItem(r,"xyz"),"xyz"!==t.getItem(r)&&(n=!1),t.removeItem(r)}catch(t){n=!1}return F=n,n};D.localStorage={is_supported:function(t){var e=j(null,t);return e||P.error("localStorage unsupported; falling back to cookie store"),e},error:function(t){P.error("localStorage error: "+t)},get:function(t){try{return window.localStorage.getItem(t)}catch(t){D.localStorage.error(t)}return null},parse:function(t){try{return D.JSONDecode(D.localStorage.get(t))||{}}catch(t){}return null},set:function(t,e){try{window.localStorage.setItem(t,e)}catch(t){D.localStorage.error(t)}},remove:function(t){try{window.localStorage.removeItem(t)}catch(t){D.localStorage.error(t)}}},D.register_event=function(){function t(e){return e&&(e.preventDefault=t.preventDefault,e.stopPropagation=t.stopPropagation),e}return t.preventDefault=function(){this.returnValue=!1},t.stopPropagation=function(){this.cancelBubble=!0},function(e,n,r,i,o){if(e)if(e.addEventListener&&!i)e.addEventListener(n,r,!!o);else{var s="on"+n,a=e[s];e[s]=function(e,n,r){return function(i){if(i=i||t(window.event)){var o,s,a=!0;return D.isFunction(r)&&(o=r(i)),s=n.call(e,i),!1!==o&&!1!==s||(a=!1),a}}}(e,r,a)}else P.error("No valid element provided to register_event")}}();var q=new RegExp('^(\\w*)\\[(\\w+)([=~\\|\\^\\$\\*]?)=?"?([^\\]"]*)"?\\]$');D.dom_query=function(){function t(t){return t.all?t.all:t.getElementsByTagName("*")}var e=/[\t\r\n]/g;function n(t,n){var r=" "+n+" ";return(" "+t.className+" ").replace(e," ").indexOf(r)>=0}function r(e){if(!E.getElementsByTagName)return[];var r,i,o,s,a,u,c,h,l,f,p=e.split(" "),d=[E];for(u=0;u<p.length;u++)if((r=p[u].replace(/^\s+/,"").replace(/\s+$/,"")).indexOf("#")>-1){o=(i=r.split("#"))[0];var g=i[1],v=E.getElementById(g);if(!v||o&&v.nodeName.toLowerCase()!=o)return[];d=[v]}else if(r.indexOf(".")>-1){o=(i=r.split("."))[0];var m=i[1];for(o||(o="*"),s=[],a=0,c=0;c<d.length;c++)for(l="*"==o?t(d[c]):d[c].getElementsByTagName(o),h=0;h<l.length;h++)s[a++]=l[h];for(d=[],f=0,c=0;c<s.length;c++)s[c].className&&D.isString(s[c].className)&&n(s[c],m)&&(d[f++]=s[c])}else{var y=r.match(q);if(y){o=y[1];var _,b=y[2],w=y[3],I=y[4];for(o||(o="*"),s=[],a=0,c=0;c<d.length;c++)for(l="*"==o?t(d[c]):d[c].getElementsByTagName(o),h=0;h<l.length;h++)s[a++]=l[h];switch(d=[],f=0,w){case"=":_=function(t){return t.getAttribute(b)==I};break;case"~":_=function(t){return t.getAttribute(b).match(new RegExp("\\b"+I+"\\b"))};break;case"|":_=function(t){return t.getAttribute(b).match(new RegExp("^"+I+"-?"))};break;case"^":_=function(t){return 0===t.getAttribute(b).indexOf(I)};break;case"$":_=function(t){return t.getAttribute(b).lastIndexOf(I)==t.getAttribute(b).length-I.length};break;case"*":_=function(t){return t.getAttribute(b).indexOf(I)>-1};break;default:_=function(t){return t.getAttribute(b)}}for(d=[],f=0,c=0;c<s.length;c++)_(s[c])&&(d[f++]=s[c])}else{for(o=r,s=[],a=0,c=0;c<d.length;c++)for(l=d[c].getElementsByTagName(o),h=0;h<l.length;h++)s[a++]=l[h];d=s}}return d}return function(t){return D.isElement(t)?[t]:D.isObject(t)&&!D.isUndefined(t.length)?t:r.call(this,t)}}(),D.info={campaignParams:function(){var t="utm_source utm_medium utm_campaign utm_content utm_term".split(" "),e="",n={};return D.each(t,(function(t){(e=D.getQueryParam(E.URL,t)).length&&(n[t]=e)})),n},searchEngine:function(t){return 0===t.search("https?://(.*)google.([^/?]*)")?"google":0===t.search("https?://(.*)bing.com")?"bing":0===t.search("https?://(.*)yahoo.com")?"yahoo":0===t.search("https?://(.*)duckduckgo.com")?"duckduckgo":null},searchInfo:function(t){var e=D.info.searchEngine(t),n="yahoo"!=e?"q":"p",r={};if(null!==e){r.$search_engine=e;var i=D.getQueryParam(t,n);i.length&&(r.mp_keyword=i)}return r},browser:function(t,e,n){return e=e||"",n||D.includes(t," OPR/")?D.includes(t,"Mini")?"Opera Mini":"Opera":/(BlackBerry|PlayBook|BB10)/i.test(t)?"BlackBerry":D.includes(t,"IEMobile")||D.includes(t,"WPDesktop")?"Internet Explorer Mobile":D.includes(t,"SamsungBrowser/")?"Samsung Internet":D.includes(t,"Edge")||D.includes(t,"Edg/")?"Microsoft Edge":D.includes(t,"FBIOS")?"Facebook Mobile":D.includes(t,"Chrome")?"Chrome":D.includes(t,"CriOS")?"Chrome iOS":D.includes(t,"UCWEB")||D.includes(t,"UCBrowser")?"UC Browser":D.includes(t,"FxiOS")?"Firefox iOS":D.includes(e,"Apple")?D.includes(t,"Mobile")?"Mobile Safari":"Safari":D.includes(t,"Android")?"Android Mobile":D.includes(t,"Konqueror")?"Konqueror":D.includes(t,"Firefox")?"Firefox":D.includes(t,"MSIE")||D.includes(t,"Trident/")?"Internet Explorer":D.includes(t,"Gecko")?"Mozilla":""},browserVersion:function(t,e,n){var r={"Internet Explorer Mobile":/rv:(\d+(\.\d+)?)/,"Microsoft Edge":/Edge?\/(\d+(\.\d+)?)/,Chrome:/Chrome\/(\d+(\.\d+)?)/,"Chrome iOS":/CriOS\/(\d+(\.\d+)?)/,"UC Browser":/(UCBrowser|UCWEB)\/(\d+(\.\d+)?)/,Safari:/Version\/(\d+(\.\d+)?)/,"Mobile Safari":/Version\/(\d+(\.\d+)?)/,Opera:/(Opera|OPR)\/(\d+(\.\d+)?)/,Firefox:/Firefox\/(\d+(\.\d+)?)/,"Firefox iOS":/FxiOS\/(\d+(\.\d+)?)/,Konqueror:/Konqueror:(\d+(\.\d+)?)/,BlackBerry:/BlackBerry (\d+(\.\d+)?)/,"Android Mobile":/android\s(\d+(\.\d+)?)/,"Samsung Internet":/SamsungBrowser\/(\d+(\.\d+)?)/,"Internet Explorer":/(rv:|MSIE )(\d+(\.\d+)?)/,Mozilla:/rv:(\d+(\.\d+)?)/}[D.info.browser(t,e,n)];if(void 0===r)return null;var i=t.match(r);return i?parseFloat(i[i.length-2]):null},os:function(){var t=S;return/Windows/i.test(t)?/Phone/.test(t)||/WPDesktop/.test(t)?"Windows Phone":"Windows":/(iPhone|iPad|iPod)/.test(t)?"iOS":/Android/.test(t)?"Android":/(BlackBerry|PlayBook|BB10)/i.test(t)?"BlackBerry":/Mac/i.test(t)?"Mac OS X":/Linux/.test(t)?"Linux":/CrOS/.test(t)?"Chrome OS":""},device:function(t){return/Windows Phone/i.test(t)||/WPDesktop/.test(t)?"Windows Phone":/iPad/.test(t)?"iPad":/iPod/.test(t)?"iPod Touch":/iPhone/.test(t)?"iPhone":/(BlackBerry|PlayBook|BB10)/i.test(t)?"BlackBerry":/Android/.test(t)?"Android":""},referringDomain:function(t){var e=t.split("/");return e.length>=3?e[2]:""},properties:function(){return D.extend(D.strip_empty_properties({$os:D.info.os(),$browser:D.info.browser(S,I.vendor,T),$referrer:E.referrer,$referring_domain:D.info.referringDomain(E.referrer),$device:D.info.device(S)}),{$current_url:e.location.href,$browser_version:D.info.browserVersion(S,I.vendor,T),$screen_height:A.height,$screen_width:A.width,mp_lib:"web",$lib_version:n.LIB_VERSION,$insert_id:B(),time:D.timestamp()/1e3})},people_properties:function(){return D.extend(D.strip_empty_properties({$os:D.info.os(),$browser:D.info.browser(S,I.vendor,T)}),{$browser_version:D.info.browserVersion(S,I.vendor,T)})},pageviewInfo:function(t){return D.strip_empty_properties({mp_page:t,mp_referrer:E.referrer,mp_browser:D.info.browser(S,I.vendor,T),mp_platform:D.info.os()})}};var B=function(t){var e=Math.random().toString(36).substring(2,10)+Math.random().toString(36).substring(2,10);return t?e.substring(0,t):e},V=/[a-z0-9][a-z0-9-]*\.[a-z]+$/i,G=/[a-z0-9][a-z0-9-]+\.[a-z.]{2,6}$/i,H=function(t){var e=G,n=t.split("."),r=n[n.length-1];(r.length>4||"com"===r||"org"===r)&&(e=V);var i=t.match(e);return i?i[0]:""},W=null,z=null;"undefined"!=typeof JSON&&(W=JSON.stringify,z=JSON.parse),W=W||D.JSONEncode,z=z||D.JSONDecode,D.toArray=D.toArray,D.isObject=D.isObject,D.JSONEncode=D.JSONEncode,D.JSONDecode=D.JSONDecode,D.isBlockedUA=D.isBlockedUA,D.isEmptyObject=D.isEmptyObject,D.info=D.info,D.info.device=D.info.device,D.info.browser=D.info.browser,D.info.browserVersion=D.info.browserVersion,D.info.properties=D.info.properties;var K=function(){};K.prototype.create_properties=function(){},K.prototype.event_handler=function(){},K.prototype.after_track_handler=function(){},K.prototype.init=function(t){return this.mp=t,this},K.prototype.track=function(t,e,n,r){var i=this,o=D.dom_query(t);if(0!==o.length)return D.each(o,(function(t){D.register_event(t,this.override_event,(function(t){var o={},s=i.create_properties(n,this),a=i.mp.get_config("track_links_timeout");i.event_handler(t,this,o),window.setTimeout(i.track_callback(r,s,o,!0),a),i.mp.track(e,s,i.track_callback(r,s,o))}))}),this),!0;P.error("The DOM query ("+t+") returned 0 elements")},K.prototype.track_callback=function(t,e,n,r){r=r||!1;var i=this;return function(){n.callback_fired||(n.callback_fired=!0,t&&!1===t(r,e)||i.after_track_handler(e,n,r))}},K.prototype.create_properties=function(t,e){return"function"==typeof t?t(e):D.extend({},t)};var $=function(){this.override_event="click"};D.inherit($,K),$.prototype.create_properties=function(t,e){var n=$.superclass.create_properties.apply(this,arguments);return e.href&&(n.url=e.href),n},$.prototype.event_handler=function(t,e,n){n.new_tab=2===t.which||t.metaKey||t.ctrlKey||"_blank"===e.target,n.href=e.href,n.new_tab||t.preventDefault()},$.prototype.after_track_handler=function(t,e){e.new_tab||setTimeout((function(){window.location=e.href}),0)};var Y=function(){this.override_event="submit"};D.inherit(Y,K),Y.prototype.event_handler=function(t,e,n){n.element=e,t.preventDefault()},Y.prototype.after_track_handler=function(t,e){setTimeout((function(){e.element.submit()}),0)};var Q=M("lock"),X=function(t,e){e=e||{},this.storageKey=t,this.storage=e.storage||window.localStorage,this.pollIntervalMS=e.pollIntervalMS||100,this.timeoutMS=e.timeoutMS||2e3};X.prototype.withLock=function(t,e,n){n||"function"==typeof e||(n=e,e=null);var r=n||(new Date).getTime()+"|"+Math.random(),i=(new Date).getTime(),o=this.storageKey,s=this.pollIntervalMS,a=this.timeoutMS,u=this.storage,c=o+":X",h=o+":Y",l=o+":Z",f=function(t){e&&e(t)},p=function(t){if((new Date).getTime()-i>a)return Q.error("Timeout waiting for mutex on "+o+"; clearing lock. ["+r+"]"),u.removeItem(l),u.removeItem(h),void v();setTimeout((function(){try{t()}catch(t){f(t)}}),s*(Math.random()+.1))},d=function(t,e){t()?e():p((function(){d(t,e)}))},g=function(){var t=u.getItem(h);if(t&&t!==r)return!1;if(u.setItem(h,r),u.getItem(h)===r)return!0;if(!j(u,!0))throw new Error("localStorage support dropped while acquiring lock");return!1},v=function(){u.setItem(c,r),d(g,(function(){u.getItem(c)!==r?p((function(){u.getItem(h)===r?d((function(){return!u.getItem(l)}),m):v()})):m()}))},m=function(){u.setItem(l,"1");try{t()}finally{u.removeItem(l),u.getItem(h)===r&&u.removeItem(h),u.getItem(c)===r&&u.removeItem(c)}};try{if(!j(u,!0))throw new Error("localStorage support check failed");v()}catch(t){f(t)}};var J=M("batch"),Z=function(t,e){e=e||{},this.storageKey=t,this.storage=e.storage||window.localStorage,this.reportError=e.errorReporter||D.bind(J.error,J),this.lock=new X(t,{storage:this.storage}),this.pid=e.pid||null,this.memQueue=[]};Z.prototype.enqueue=function(t,e,n){var r={id:B(),flushAfter:(new Date).getTime()+2*e,payload:t};this.lock.withLock(D.bind((function(){var e;try{var i=this.readFromStorage();i.push(r),(e=this.saveToStorage(i))&&this.memQueue.push(r)}catch(n){this.reportError("Error enqueueing item",t),e=!1}n&&n(e)}),this),D.bind((function(t){this.reportError("Error acquiring storage lock",t),n&&n(!1)}),this),this.pid)},Z.prototype.fillBatch=function(t){var e=this.memQueue.slice(0,t);if(e.length<t){var n=this.readFromStorage();if(n.length){var r={};D.each(e,(function(t){r[t.id]=!0}));for(var i=0;i<n.length;i++){var o=n[i];if((new Date).getTime()>o.flushAfter&&!r[o.id]&&(o.orphaned=!0,e.push(o),e.length>=t))break}}}return e};var tt=function(t,e){var n=[];return D.each(t,(function(t){t.id&&!e[t.id]&&n.push(t)})),n};Z.prototype.removeItemsByID=function(t,e){var n={};D.each(t,(function(t){n[t]=!0})),this.memQueue=tt(this.memQueue,n);var r=D.bind((function(){var e;try{var r=this.readFromStorage();if(r=tt(r,n),e=this.saveToStorage(r)){r=this.readFromStorage();for(var i=0;i<r.length;i++){var o=r[i];if(o.id&&n[o.id])return this.reportError("Item not removed from storage"),!1}}}catch(n){this.reportError("Error removing items",t),e=!1}return e}),this);this.lock.withLock((function(){var t=r();e&&e(t)}),D.bind((function(t){var n=!1;if(this.reportError("Error acquiring storage lock",t),!j(this.storage,!0)&&!(n=r()))try{this.storage.removeItem(this.storageKey)}catch(t){this.reportError("Error clearing queue",t)}e&&e(n)}),this),this.pid)};var et=function(t,e){var n=[];return D.each(t,(function(t){var r=t.id;if(r in e){var i=e[r];null!==i&&(t.payload=i,n.push(t))}else n.push(t)})),n};Z.prototype.updatePayloads=function(t,e){this.memQueue=et(this.memQueue,t),this.lock.withLock(D.bind((function(){var n;try{var r=this.readFromStorage();r=et(r,t),n=this.saveToStorage(r)}catch(e){this.reportError("Error updating items",t),n=!1}e&&e(n)}),this),D.bind((function(t){this.reportError("Error acquiring storage lock",t),e&&e(!1)}),this),this.pid)},Z.prototype.readFromStorage=function(){var t;try{(t=this.storage.getItem(this.storageKey))&&(t=z(t),D.isArray(t)||(this.reportError("Invalid storage entry:",t),t=null))}catch(e){this.reportError("Error retrieving queue",e),t=null}return t||[]},Z.prototype.saveToStorage=function(t){try{return this.storage.setItem(this.storageKey,W(t)),!0}catch(t){return this.reportError("Error saving queue",t),!1}},Z.prototype.clear=function(){this.memQueue=[],this.storage.removeItem(this.storageKey)};var nt=M("batch"),rt=function(t,e){this.errorReporter=e.errorReporter,this.queue=new Z(t,{errorReporter:D.bind(this.reportError,this),storage:e.storage}),this.libConfig=e.libConfig,this.sendRequest=e.sendRequestFunc,this.beforeSendHook=e.beforeSendHook,this.stopAllBatching=e.stopAllBatchingFunc,this.batchSize=this.libConfig.batch_size,this.flushInterval=this.libConfig.batch_flush_interval_ms,this.stopped=!this.libConfig.batch_autostart,this.consecutiveRemovalFailures=0};function it(t,e){gt(!0,t,e)}function ot(t,e){gt(!1,t,e)}function st(t,e){return"1"===dt(t,e)}function at(t,n){if(function(t){if(t&&t.ignoreDnt)return!1;var n=t&&t.window||e,r=n.navigator||{},i=!1;return D.each([r.doNotTrack,r.msDoNotTrack,n.doNotTrack],(function(t){D.includes([!0,1,"1","yes"],t)&&(i=!0)})),i}(n))return P.warn('This browser has "Do Not Track" enabled. This will prevent the Mixpanel SDK from sending any data. To ignore the "Do Not Track" browser setting, initialize the Mixpanel instance with the config "ignore_dnt: true"'),!0;var r="0"===dt(t,n);return r&&P.warn("You are opted out of Mixpanel tracking. This will prevent the Mixpanel SDK from sending any data."),r}function ut(t){return vt(t,(function(t){return this.get_config(t)}))}function ct(t){return vt(t,(function(t){return this._get_config(t)}))}function ht(t){return vt(t,(function(t){return this._get_config(t)}))}function lt(t,e){ft(e=e||{}).remove(pt(t,e),!!e.crossSubdomainCookie,e.cookieDomain)}function ft(t){return"localStorage"===(t=t||{}).persistenceType?D.localStorage:D.cookie}function pt(t,e){return((e=e||{}).persistencePrefix||"__mp_opt_in_out_")+t}function dt(t,e){return ft(e).get(pt(t,e))}function gt(t,e,n){D.isString(e)&&e.length?(ft(n=n||{}).set(pt(e,n),t?1:0,D.isNumber(n.cookieExpiration)?n.cookieExpiration:null,!!n.crossSubdomainCookie,!!n.secureCookie,!!n.crossSiteCookie,n.cookieDomain),n.track&&t&&n.track(n.trackEventName||"$opt_in",n.trackProperties,{send_immediately:!0})):P.error("gdpr."+(t?"optIn":"optOut")+" called with an invalid token")}function vt(t,e){return function(){var n=!1;try{var r=e.call(this,"token"),i=e.call(this,"ignore_dnt"),o=e.call(this,"opt_out_tracking_persistence_type"),s=e.call(this,"opt_out_tracking_cookie_prefix"),a=e.call(this,"window");r&&(n=at(r,{ignoreDnt:i,persistenceType:o,persistencePrefix:s,window:a}))}catch(t){P.error("Unexpected error when checking tracking opt-out status: "+t)}if(!n)return t.apply(this,arguments);var u=arguments[arguments.length-1];"function"==typeof u&&u(0)}}rt.prototype.enqueue=function(t,e){this.queue.enqueue(t,this.flushInterval,e)},rt.prototype.start=function(){this.stopped=!1,this.consecutiveRemovalFailures=0,this.flush()},rt.prototype.stop=function(){this.stopped=!0,this.timeoutID&&(clearTimeout(this.timeoutID),this.timeoutID=null)},rt.prototype.clear=function(){this.queue.clear()},rt.prototype.resetBatchSize=function(){this.batchSize=this.libConfig.batch_size},rt.prototype.resetFlush=function(){this.scheduleFlush(this.libConfig.batch_flush_interval_ms)},rt.prototype.scheduleFlush=function(t){this.flushInterval=t,this.stopped||(this.timeoutID=setTimeout(D.bind(this.flush,this),this.flushInterval))},rt.prototype.flush=function(t){try{if(this.requestInProgress)return void nt.log("Flush: Request already in progress");t=t||{};var e=this.libConfig.batch_request_timeout_ms,n=(new Date).getTime(),r=this.batchSize,i=this.queue.fillBatch(r),o=[],s={};if(D.each(i,(function(t){var e=t.payload;this.beforeSendHook&&!t.orphaned&&(e=this.beforeSendHook(e)),e&&o.push(e),s[t.id]=e}),this),o.length<1)return void this.resetFlush();this.requestInProgress=!0;var a=D.bind((function(o){this.requestInProgress=!1;try{var a=!1;if(t.unloading)this.queue.updatePayloads(s);else if(D.isObject(o)&&"timeout"===o.error&&(new Date).getTime()-n>=e)this.reportError("Network timeout; retrying"),this.flush();else if(D.isObject(o)&&o.xhr_req&&(o.xhr_req.status>=500||429===o.xhr_req.status||"timeout"===o.error)){var u=2*this.flushInterval,c=o.xhr_req.responseHeaders;if(c){var h=c["Retry-After"];h&&(u=1e3*parseInt(h,10)||u)}u=Math.min(6e5,u),this.reportError("Error; retry in "+u+" ms"),this.scheduleFlush(u)}else if(D.isObject(o)&&o.xhr_req&&413===o.xhr_req.status)if(i.length>1){var l=Math.max(1,Math.floor(r/2));this.batchSize=Math.min(this.batchSize,l,i.length-1),this.reportError("413 response; reducing batch size to "+this.batchSize),this.resetFlush()}else this.reportError("Single-event request too large; dropping",i),this.resetBatchSize(),a=!0;else a=!0;a&&this.queue.removeItemsByID(D.map(i,(function(t){return t.id})),D.bind((function(t){t?(this.consecutiveRemovalFailures=0,this.flush()):(this.reportError("Failed to remove items from queue"),++this.consecutiveRemovalFailures>5?(this.reportError("Too many queue failures; disabling batching system."),this.stopAllBatching()):this.resetFlush())}),this))}catch(t){this.reportError("Error handling API response",t),this.resetFlush()}}),this),u={method:"POST",verbose:!0,ignore_json_errors:!0,timeout_ms:e};t.unloading&&(u.transport="sendBeacon"),nt.log("MIXPANEL REQUEST:",o),this.sendRequest(o,u,a)}catch(t){this.reportError("Error flushing request queue",t),this.resetFlush()}},rt.prototype.reportError=function(t,e){if(nt.error.apply(nt.error,arguments),this.errorReporter)try{e instanceof Error||(e=new Error(t)),this.errorReporter(t,e)}catch(e){nt.error(e)}};var mt="$set",yt="$set_once",_t="$unset",bt="$add",wt="$append",It="$union",Et="$remove",Tt={set_action:function(t,e){var n={},r={};return D.isObject(t)?D.each(t,(function(t,e){this._is_reserved_property(e)||(r[e]=t)}),this):r[t]=e,n.$set=r,n},unset_action:function(t){var e={},n=[];return D.isArray(t)||(t=[t]),D.each(t,(function(t){this._is_reserved_property(t)||n.push(t)}),this),e.$unset=n,e},set_once_action:function(t,e){var n={},r={};return D.isObject(t)?D.each(t,(function(t,e){this._is_reserved_property(e)||(r[e]=t)}),this):r[t]=e,n.$set_once=r,n},union_action:function(t,e){var n={},r={};return D.isObject(t)?D.each(t,(function(t,e){this._is_reserved_property(e)||(r[e]=D.isArray(t)?t:[t])}),this):r[t]=D.isArray(e)?e:[e],n.$union=r,n},append_action:function(t,e){var n={},r={};return D.isObject(t)?D.each(t,(function(t,e){this._is_reserved_property(e)||(r[e]=t)}),this):r[t]=e,n.$append=r,n},remove_action:function(t,e){var n={},r={};return D.isObject(t)?D.each(t,(function(t,e){this._is_reserved_property(e)||(r[e]=t)}),this):r[t]=e,n.$remove=r,n},delete_action:function(){return{$delete:""}}},At=function(){};D.extend(At.prototype,Tt),At.prototype._init=function(t,e,n){this._mixpanel=t,this._group_key=e,this._group_id=n},At.prototype.set=ht((function(t,e,n){var r=this.set_action(t,e);return D.isObject(t)&&(n=e),this._send_request(r,n)})),At.prototype.set_once=ht((function(t,e,n){var r=this.set_once_action(t,e);return D.isObject(t)&&(n=e),this._send_request(r,n)})),At.prototype.unset=ht((function(t,e){var n=this.unset_action(t);return this._send_request(n,e)})),At.prototype.union=ht((function(t,e,n){D.isObject(t)&&(n=e);var r=this.union_action(t,e);return this._send_request(r,n)})),At.prototype.delete=ht((function(t){var e=this.delete_action();return this._send_request(e,t)})),At.prototype.remove=ht((function(t,e,n){var r=this.remove_action(t,e);return this._send_request(r,n)})),At.prototype._send_request=function(t,e){t.$group_key=this._group_key,t.$group_id=this._group_id,t.$token=this._get_config("token");var n=D.encodeDates(t);return this._mixpanel._track_or_batch({type:"groups",data:n,endpoint:this._get_config("api_host")+"/groups/",batcher:this._mixpanel.request_batchers.groups},e)},At.prototype._is_reserved_property=function(t){return"$group_key"===t||"$group_id"===t},At.prototype._get_config=function(t){return this._mixpanel.get_config(t)},At.prototype.toString=function(){return this._mixpanel.toString()+".group."+this._group_key+"."+this._group_id},At.prototype.remove=At.prototype.remove,At.prototype.set=At.prototype.set,At.prototype.set_once=At.prototype.set_once,At.prototype.union=At.prototype.union,At.prototype.unset=At.prototype.unset,At.prototype.toString=At.prototype.toString;var St=function(){};D.extend(St.prototype,Tt),St.prototype._init=function(t){this._mixpanel=t},St.prototype.set=ct((function(t,e,n){var r=this.set_action(t,e);return D.isObject(t)&&(n=e),this._get_config("save_referrer")&&this._mixpanel.persistence.update_referrer_info(document.referrer),r.$set=D.extend({},D.info.people_properties(),this._mixpanel.persistence.get_referrer_info(),r.$set),this._send_request(r,n)})),St.prototype.set_once=ct((function(t,e,n){var r=this.set_once_action(t,e);return D.isObject(t)&&(n=e),this._send_request(r,n)})),St.prototype.unset=ct((function(t,e){var n=this.unset_action(t);return this._send_request(n,e)})),St.prototype.increment=ct((function(t,e,n){var r={},i={};return D.isObject(t)?(D.each(t,(function(t,e){if(!this._is_reserved_property(e)){if(isNaN(parseFloat(t)))return void P.error("Invalid increment value passed to mixpanel.people.increment - must be a number");i[e]=t}}),this),n=e):(D.isUndefined(e)&&(e=1),i[t]=e),r.$add=i,this._send_request(r,n)})),St.prototype.append=ct((function(t,e,n){D.isObject(t)&&(n=e);var r=this.append_action(t,e);return this._send_request(r,n)})),St.prototype.remove=ct((function(t,e,n){D.isObject(t)&&(n=e);var r=this.remove_action(t,e);return this._send_request(r,n)})),St.prototype.union=ct((function(t,e,n){D.isObject(t)&&(n=e);var r=this.union_action(t,e);return this._send_request(r,n)})),St.prototype.track_charge=ct((function(t,e,n){if(D.isNumber(t)||(t=parseFloat(t),!isNaN(t)))return this.append("$transactions",D.extend({$amount:t},e),n);P.error("Invalid value passed to mixpanel.people.track_charge - must be a number")})),St.prototype.clear_charges=function(t){return this.set("$transactions",[],t)},St.prototype.delete_user=function(){if(this._identify_called()){var t={$delete:this._mixpanel.get_distinct_id()};return this._send_request(t)}P.error("mixpanel.people.delete_user() requires you to call identify() first")},St.prototype.toString=function(){return this._mixpanel.toString()+".people"},St.prototype._send_request=function(t,e){t.$token=this._get_config("token"),t.$distinct_id=this._mixpanel.get_distinct_id();var n=this._mixpanel.get_property("$device_id"),r=this._mixpanel.get_property("$user_id"),i=this._mixpanel.get_property("$had_persisted_distinct_id");n&&(t.$device_id=n),r&&(t.$user_id=r),i&&(t.$had_persisted_distinct_id=i);var o=D.encodeDates(t);return this._identify_called()?this._mixpanel._track_or_batch({type:"people",data:o,endpoint:this._get_config("api_host")+"/engage/",batcher:this._mixpanel.request_batchers.people},e):(this._enqueue(t),D.isUndefined(e)||(this._get_config("verbose")?e({status:-1,error:null}):e(-1)),D.truncate(o,255))},St.prototype._get_config=function(t){return this._mixpanel.get_config(t)},St.prototype._identify_called=function(){return!0===this._mixpanel._flags.identify_called},St.prototype._enqueue=function(t){mt in t?this._mixpanel.persistence._add_to_people_queue(mt,t):yt in t?this._mixpanel.persistence._add_to_people_queue(yt,t):_t in t?this._mixpanel.persistence._add_to_people_queue(_t,t):bt in t?this._mixpanel.persistence._add_to_people_queue(bt,t):wt in t?this._mixpanel.persistence._add_to_people_queue(wt,t):Et in t?this._mixpanel.persistence._add_to_people_queue(Et,t):It in t?this._mixpanel.persistence._add_to_people_queue(It,t):P.error("Invalid call to _enqueue():",t)},St.prototype._flush_one_queue=function(t,e,n,r){var i=this,o=D.extend({},this._mixpanel.persistence._get_queue(t)),s=o;D.isUndefined(o)||!D.isObject(o)||D.isEmptyObject(o)||(i._mixpanel.persistence._pop_from_people_queue(t,o),r&&(s=r(o)),e.call(i,s,(function(e,r){0===e&&i._mixpanel.persistence._add_to_people_queue(t,o),D.isUndefined(n)||n(e,r)})))},St.prototype._flush=function(t,e,n,r,i,o,s){var a=this,u=this._mixpanel.persistence._get_queue(wt),c=this._mixpanel.persistence._get_queue(Et);if(this._flush_one_queue(mt,this.set,t),this._flush_one_queue(yt,this.set_once,r),this._flush_one_queue(_t,this.unset,o,(function(t){return D.keys(t)})),this._flush_one_queue(bt,this.increment,e),this._flush_one_queue(It,this.union,i),!D.isUndefined(u)&&D.isArray(u)&&u.length){for(var h,l=function(t,e){0===t&&a._mixpanel.persistence._add_to_people_queue(wt,h),D.isUndefined(n)||n(t,e)},f=u.length-1;f>=0;f--)h=u.pop(),D.isEmptyObject(h)||a.append(h,l);a._mixpanel.persistence.save()}if(!D.isUndefined(c)&&D.isArray(c)&&c.length){for(var p,d=function(t,e){0===t&&a._mixpanel.persistence._add_to_people_queue(Et,p),D.isUndefined(s)||s(t,e)},g=c.length-1;g>=0;g--)p=c.pop(),D.isEmptyObject(p)||a.remove(p,d);a._mixpanel.persistence.save()}},St.prototype._is_reserved_property=function(t){return"$distinct_id"===t||"$token"===t||"$device_id"===t||"$user_id"===t||"$had_persisted_distinct_id"===t},St.prototype.set=St.prototype.set,St.prototype.set_once=St.prototype.set_once,St.prototype.unset=St.prototype.unset,St.prototype.increment=St.prototype.increment,St.prototype.append=St.prototype.append,St.prototype.remove=St.prototype.remove,St.prototype.union=St.prototype.union,St.prototype.track_charge=St.prototype.track_charge,St.prototype.clear_charges=St.prototype.clear_charges,St.prototype.delete_user=St.prototype.delete_user,St.prototype.toString=St.prototype.toString;var kt,Nt,Ct="__mps",Ot="__mpso",xt="__mpus",Rt="__mpa",Dt="__mpap",Pt="__mpr",Lt="__mpu",Mt="$people_distinct_id",Ut="__alias",Ft=[Ct,Ot,xt,Rt,Dt,Pt,Lt,Mt,Ut,"__timers"],jt=function(t){this.props={},this.campaign_params_saved=!1,t.persistence_name?this.name="mp_"+t.persistence_name:this.name="mp_"+t.token+"_mixpanel";var e=t.persistence;"cookie"!==e&&"localStorage"!==e&&(P.critical("Unknown persistence type "+e+"; falling back to cookie"),e=t.persistence="cookie"),"localStorage"===e&&D.localStorage.is_supported()?this.storage=D.localStorage:this.storage=D.cookie,this.load(),this.update_config(t),this.upgrade(t),this.save()};jt.prototype.properties=function(){var t={};return D.each(this.props,(function(e,n){D.include(Ft,n)||(t[n]=e)})),t},jt.prototype.load=function(){if(!this.disabled){var t=this.storage.parse(this.name);t&&(this.props=D.extend({},t))}},jt.prototype.upgrade=function(t){var e,n,r=t.upgrade;r&&(e="mp_super_properties","string"==typeof r&&(e=r),n=this.storage.parse(e),this.storage.remove(e),this.storage.remove(e,!0),n&&(this.props=D.extend(this.props,n.all,n.events))),t.cookie_name||"mixpanel"===t.name||(e="mp_"+t.token+"_"+t.name,(n=this.storage.parse(e))&&(this.storage.remove(e),this.storage.remove(e,!0),this.register_once(n))),this.storage===D.localStorage&&(n=D.cookie.parse(this.name),D.cookie.remove(this.name),D.cookie.remove(this.name,!0),n&&this.register_once(n))},jt.prototype.save=function(){this.disabled||this.storage.set(this.name,D.JSONEncode(this.props),this.expire_days,this.cross_subdomain,this.secure,this.cross_site,this.cookie_domain)},jt.prototype.remove=function(){this.storage.remove(this.name,!1,this.cookie_domain),this.storage.remove(this.name,!0,this.cookie_domain)},jt.prototype.clear=function(){this.remove(),this.props={}},jt.prototype.register_once=function(t,e,n){return!!D.isObject(t)&&(void 0===e&&(e="None"),this.expire_days=void 0===n?this.default_expiry:n,D.each(t,(function(t,n){this.props.hasOwnProperty(n)&&this.props[n]!==e||(this.props[n]=t)}),this),this.save(),!0)},jt.prototype.register=function(t,e){return!!D.isObject(t)&&(this.expire_days=void 0===e?this.default_expiry:e,D.extend(this.props,t),this.save(),!0)},jt.prototype.unregister=function(t){t in this.props&&(delete this.props[t],this.save())},jt.prototype.update_campaign_params=function(){this.campaign_params_saved||(this.register_once(D.info.campaignParams()),this.campaign_params_saved=!0)},jt.prototype.update_search_keyword=function(t){this.register(D.info.searchInfo(t))},jt.prototype.update_referrer_info=function(t){this.register_once({$initial_referrer:t||"$direct",$initial_referring_domain:D.info.referringDomain(t)||"$direct"},"")},jt.prototype.get_referrer_info=function(){return D.strip_empty_properties({$initial_referrer:this.props.$initial_referrer,$initial_referring_domain:this.props.$initial_referring_domain})},jt.prototype.safe_merge=function(t){return D.each(this.props,(function(e,n){n in t||(t[n]=e)})),t},jt.prototype.update_config=function(t){this.default_expiry=this.expire_days=t.cookie_expiration,this.set_disabled(t.disable_persistence),this.set_cookie_domain(t.cookie_domain),this.set_cross_site(t.cross_site_cookie),this.set_cross_subdomain(t.cross_subdomain_cookie),this.set_secure(t.secure_cookie)},jt.prototype.set_disabled=function(t){this.disabled=t,this.disabled?this.remove():this.save()},jt.prototype.set_cookie_domain=function(t){t!==this.cookie_domain&&(this.remove(),this.cookie_domain=t,this.save())},jt.prototype.set_cross_site=function(t){t!==this.cross_site&&(this.cross_site=t,this.remove(),this.save())},jt.prototype.set_cross_subdomain=function(t){t!==this.cross_subdomain&&(this.cross_subdomain=t,this.remove(),this.save())},jt.prototype.get_cross_subdomain=function(){return this.cross_subdomain},jt.prototype.set_secure=function(t){t!==this.secure&&(this.secure=!!t,this.remove(),this.save())},jt.prototype._add_to_people_queue=function(t,e){var n=this._get_queue_key(t),r=e[t],i=this._get_or_create_queue(mt),o=this._get_or_create_queue(yt),s=this._get_or_create_queue(_t),a=this._get_or_create_queue(bt),u=this._get_or_create_queue(It),c=this._get_or_create_queue(Et,[]),h=this._get_or_create_queue(wt,[]);n===Ct?(D.extend(i,r),this._pop_from_people_queue(bt,r),this._pop_from_people_queue(It,r),this._pop_from_people_queue(_t,r)):n===Ot?(D.each(r,(function(t,e){e in o||(o[e]=t)})),this._pop_from_people_queue(_t,r)):n===xt?D.each(r,(function(t){D.each([i,o,a,u],(function(e){t in e&&delete e[t]})),D.each(h,(function(e){t in e&&delete e[t]})),s[t]=!0})):n===Rt?(D.each(r,(function(t,e){e in i?i[e]+=t:(e in a||(a[e]=0),a[e]+=t)}),this),this._pop_from_people_queue(_t,r)):n===Lt?(D.each(r,(function(t,e){D.isArray(t)&&(e in u||(u[e]=[]),u[e]=u[e].concat(t))})),this._pop_from_people_queue(_t,r)):n===Pt?(c.push(r),this._pop_from_people_queue(wt,r)):n===Dt&&(h.push(r),this._pop_from_people_queue(_t,r)),P.log("MIXPANEL PEOPLE REQUEST (QUEUED, PENDING IDENTIFY):"),P.log(e),this.save()},jt.prototype._pop_from_people_queue=function(t,e){var n=this._get_queue(t);D.isUndefined(n)||(D.each(e,(function(e,r){t===wt||t===Et?D.each(n,(function(t){t[r]===e&&delete t[r]})):delete n[r]}),this),this.save())},jt.prototype._get_queue_key=function(t){return t===mt?Ct:t===yt?Ot:t===_t?xt:t===bt?Rt:t===wt?Dt:t===Et?Pt:t===It?Lt:void P.error("Invalid queue:",t)},jt.prototype._get_queue=function(t){return this.props[this._get_queue_key(t)]},jt.prototype._get_or_create_queue=function(t,e){var n=this._get_queue_key(t);return e=D.isUndefined(e)?{}:e,this.props[n]||(this.props[n]=e)},jt.prototype.set_event_timer=function(t,e){var n=this.props.__timers||{};n[t]=e,this.props.__timers=n,this.save()},jt.prototype.remove_event_timer=function(t){var e=(this.props.__timers||{})[t];return D.isUndefined(e)||(delete this.props.__timers[t],this.save()),e};var qt=function(t){return t},Bt=function(){},Vt="mixpanel",Gt="base64",Ht=e.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest,Wt=!Ht&&-1===S.indexOf("MSIE")&&-1===S.indexOf("Mozilla"),zt=null;I.sendBeacon&&(zt=function(){return I.sendBeacon.apply(I,arguments)});var Kt={api_host:"https://api-js.mixpanel.com",api_method:"POST",api_transport:"XHR",api_payload_format:Gt,app_host:"https://mixpanel.com",cdn:"https://cdn.mxpnl.com",cross_site_cookie:!1,cross_subdomain_cookie:!0,error_reporter:Bt,persistence:"cookie",persistence_name:"",cookie_domain:"",cookie_name:"",loaded:Bt,store_google:!0,save_referrer:!0,test:!1,verbose:!1,img:!1,debug:!1,track_links_timeout:300,cookie_expiration:365,upgrade:!1,disable_persistence:!1,disable_cookie:!1,secure_cookie:!1,ip:!0,opt_out_tracking_by_default:!1,opt_out_persistence_by_default:!1,opt_out_tracking_persistence_type:"localStorage",opt_out_tracking_cookie_prefix:null,property_blacklist:[],xhr_headers:{},ignore_dnt:!1,batch_requests:!0,batch_size:50,batch_flush_interval_ms:5e3,batch_request_timeout_ms:9e4,batch_autostart:!0,hooks:{}},$t=!1,Yt=function(){},Qt=function(t,e,r){var i,o=r===Vt?Nt:Nt[r];if(o&&0===kt)i=o;else{if(o&&!D.isArray(o))return void P.error("You have already initialized "+r);i=new Yt}return i._cached_groups={},i._init(t,e,r),i.people=new St,i.people._init(i),n.DEBUG=n.DEBUG||i.get_config("debug"),!D.isUndefined(o)&&D.isArray(o)&&(i._execute_array.call(i.people,o.people),i._execute_array(o)),i};Yt.prototype.init=function(t,e,n){if(D.isUndefined(n))this.report_error("You must name your new library: init(token, config, name)");else{if(n!==Vt){var r=Qt(t,e,n);return Nt[n]=r,r._loaded(),r}this.report_error("You must initialize the main mixpanel object right after you include the Mixpanel js snippet")}},Yt.prototype._init=function(t,n,r){n=n||{},this.__loaded=!0,this.config={};var i={};if("api_payload_format"in n||(n.api_host||Kt.api_host).match(/\.mixpanel\.com$/)&&(i.api_payload_format="json"),this.set_config(D.extend({},Kt,i,n,{name:r,token:t,callback_fn:(r===Vt?r:"mixpanel."+r)+"._jsc"})),this._jsc=Bt,this.__dom_loaded_queue=[],this.__request_queue=[],this.__disabled_events=[],this._flags={disable_all_events:!1,identify_called:!1},this.request_batchers={},this._batch_requests=this.get_config("batch_requests"),this._batch_requests)if(D.localStorage.is_supported(!0)&&Ht){if(this.init_batchers(),zt&&e.addEventListener){var o=D.bind((function(){this.request_batchers.events.stopped||this.request_batchers.events.flush({unloading:!0})}),this);e.addEventListener("pagehide",(function(t){t.persisted&&o()})),e.addEventListener("visibilitychange",(function(){"hidden"===E.visibilityState&&o()}))}}else this._batch_requests=!1,P.log("Turning off Mixpanel request-queueing; needs XHR and localStorage support");this.persistence=this.cookie=new jt(this.config),this.unpersisted_superprops={},this._gdpr_init();var s=D.UUID();this.get_distinct_id()||this.register_once({distinct_id:s,$device_id:s},"")},Yt.prototype._loaded=function(){this.get_config("loaded")(this),this._set_default_superprops()},Yt.prototype._set_default_superprops=function(){this.persistence.update_search_keyword(E.referrer),this.get_config("store_google")&&this.persistence.update_campaign_params(),this.get_config("save_referrer")&&this.persistence.update_referrer_info(E.referrer)},Yt.prototype._dom_loaded=function(){D.each(this.__dom_loaded_queue,(function(t){this._track_dom.apply(this,t)}),this),this.has_opted_out_tracking()||D.each(this.__request_queue,(function(t){this._send_request.apply(this,t)}),this),delete this.__dom_loaded_queue,delete this.__request_queue},Yt.prototype._track_dom=function(t,e){if(this.get_config("img"))return this.report_error("You can't use DOM tracking functions with img = true."),!1;if(!$t)return this.__dom_loaded_queue.push([t,e]),!1;var n=(new t).init(this);return n.track.apply(n,e)},Yt.prototype._prepare_callback=function(t,e){if(D.isUndefined(t))return null;if(Ht)return function(n){t(n,e)};var n=this._jsc,r=""+Math.floor(1e8*Math.random()),i=this.get_config("callback_fn")+"["+r+"]";return n[r]=function(i){delete n[r],t(i,e)},i},Yt.prototype._send_request=function(t,e,n,r){var i=!0;if(Wt)return this.__request_queue.push(arguments),i;var o={method:this.get_config("api_method"),transport:this.get_config("api_transport"),verbose:this.get_config("verbose")},s=null;r||!D.isFunction(n)&&"string"!=typeof n||(r=n,n=null),n=D.extend(o,n||{}),Ht||(n.method="GET");var a="POST"===n.method,u=zt&&a&&"sendbeacon"===n.transport.toLowerCase(),c=n.verbose;e.verbose&&(c=!0),this.get_config("test")&&(e.test=1),c&&(e.verbose=1),this.get_config("img")&&(e.img=1),Ht||(r?e.callback=r:(c||this.get_config("test"))&&(e.callback="(function(){})")),e.ip=this.get_config("ip")?1:0,e._=(new Date).getTime().toString(),a&&(s="data="+encodeURIComponent(e.data),delete e.data),t+="?"+D.HTTPBuildQuery(e);var h=this;if("img"in e){var l=E.createElement("img");l.src=t,E.body.appendChild(l)}else if(u){try{i=zt(t,s)}catch(t){h.report_error(t),i=!1}try{r&&r(i?1:0)}catch(t){h.report_error(t)}}else if(Ht)try{var f=new XMLHttpRequest;f.open(n.method,t,!0);var p=this.get_config("xhr_headers");if(a&&(p["Content-Type"]="application/x-www-form-urlencoded"),D.each(p,(function(t,e){f.setRequestHeader(e,t)})),n.timeout_ms&&void 0!==f.timeout){f.timeout=n.timeout_ms;var d=(new Date).getTime()}f.withCredentials=!0,f.onreadystatechange=function(){var t;if(4===f.readyState)if(200===f.status){if(r)if(c){var e;try{e=D.JSONDecode(f.responseText)}catch(t){if(h.report_error(t),!n.ignore_json_errors)return;e=f.responseText}r(e)}else r(Number(f.responseText))}else t=f.timeout&&!f.status&&(new Date).getTime()-d>=f.timeout?"timeout":"Bad HTTP status: "+f.status+" "+f.statusText,h.report_error(t),r&&r(c?{status:0,error:t,xhr_req:f}:0)},f.send(s)}catch(t){h.report_error(t),i=!1}else{var g=E.createElement("script");g.type="text/javascript",g.async=!0,g.defer=!0,g.src=t;var v=E.getElementsByTagName("script")[0];v.parentNode.insertBefore(g,v)}return i},Yt.prototype._execute_array=function(t){var e,n=[],r=[],i=[];D.each(t,(function(t){t&&(e=t[0],D.isArray(e)?i.push(t):"function"==typeof t?t.call(this):D.isArray(t)&&"alias"===e?n.push(t):D.isArray(t)&&-1!==e.indexOf("track")&&"function"==typeof this[e]?i.push(t):r.push(t))}),this);var o=function(t,e){D.each(t,(function(t){if(D.isArray(t[0])){var n=e;D.each(t,(function(t){n=n[t[0]].apply(n,t.slice(1))}))}else this[t[0]].apply(this,t.slice(1))}),e)};o(n,this),o(r,this),o(i,this)},Yt.prototype.are_batchers_initialized=function(){return!!this.request_batchers.events},Yt.prototype.init_batchers=function(){var t=this.get_config("token");if(!this.are_batchers_initialized()){var e=D.bind((function(e){return new rt("__mpq_"+t+e.queue_suffix,{libConfig:this.config,sendRequestFunc:D.bind((function(t,n,r){this._send_request(this.get_config("api_host")+e.endpoint,this._encode_data_for_request(t),n,this._prepare_callback(r,t))}),this),beforeSendHook:D.bind((function(t){return this._run_hook("before_send_"+e.type,t)}),this),errorReporter:this.get_config("error_reporter"),stopAllBatchingFunc:D.bind(this.stop_batch_senders,this)})}),this);this.request_batchers={events:e({type:"events",endpoint:"/track/",queue_suffix:"_ev"}),people:e({type:"people",endpoint:"/engage/",queue_suffix:"_pp"}),groups:e({type:"groups",endpoint:"/groups/",queue_suffix:"_gr"})}}this.get_config("batch_autostart")&&this.start_batch_senders()},Yt.prototype.start_batch_senders=function(){this.are_batchers_initialized()&&(this._batch_requests=!0,D.each(this.request_batchers,(function(t){t.start()})))},Yt.prototype.stop_batch_senders=function(){this._batch_requests=!1,D.each(this.request_batchers,(function(t){t.stop(),t.clear()}))},Yt.prototype.push=function(t){this._execute_array([t])},Yt.prototype.disable=function(t){void 0===t?this._flags.disable_all_events=!0:this.__disabled_events=this.__disabled_events.concat(t)},Yt.prototype._encode_data_for_request=function(t){var e=D.JSONEncode(t);return this.get_config("api_payload_format")===Gt&&(e=D.base64Encode(e)),{data:e}},Yt.prototype._track_or_batch=function(t,e){var n=D.truncate(t.data,255),r=t.endpoint,i=t.batcher,o=t.should_send_immediately,s=t.send_request_options||{};e=e||Bt;var a=!0,u=D.bind((function(){return s.skip_hooks||(n=this._run_hook("before_send_"+t.type,n)),n?(P.log("MIXPANEL REQUEST:"),P.log(n),this._send_request(r,this._encode_data_for_request(n),s,this._prepare_callback(e,n))):null}),this);return this._batch_requests&&!o?i.enqueue(n,(function(t){t?e(1,n):u()})):a=u(),a&&n},Yt.prototype.track=ut((function(t,e,n,r){r||"function"!=typeof n||(r=n,n=null);var i=(n=n||{}).transport;i&&(n.transport=i);var o=n.send_immediately;if("function"!=typeof r&&(r=Bt),D.isUndefined(t))this.report_error("No event name provided to mixpanel.track");else{if(!this._event_is_disabled(t)){(e=e||{}).token=this.get_config("token");var s=this.persistence.remove_event_timer(t);if(!D.isUndefined(s)){var a=(new Date).getTime()-s;e.$duration=parseFloat((a/1e3).toFixed(3))}this._set_default_superprops(),e=D.extend({},D.info.properties(),this.persistence.properties(),this.unpersisted_superprops,e);var u=this.get_config("property_blacklist");D.isArray(u)?D.each(u,(function(t){delete e[t]})):this.report_error("Invalid value for property_blacklist config: "+u);var c={event:t,properties:e};return this._track_or_batch({type:"events",data:c,endpoint:this.get_config("api_host")+"/track/",batcher:this.request_batchers.events,should_send_immediately:o,send_request_options:n},r)}r(0)}})),Yt.prototype.set_group=ut((function(t,e,n){D.isArray(e)||(e=[e]);var r={};return r[t]=e,this.register(r),this.people.set(t,e,n)})),Yt.prototype.add_group=ut((function(t,e,n){var r=this.get_property(t);if(void 0===r){var i={};i[t]=[e],this.register(i)}else-1===r.indexOf(e)&&(r.push(e),this.register(i));return this.people.union(t,e,n)})),Yt.prototype.remove_group=ut((function(t,e,n){var r=this.get_property(t);if(void 0!==r){var i=r.indexOf(e);i>-1&&(r.splice(i,1),this.register({group_key:r})),0===r.length&&this.unregister(t)}return this.people.remove(t,e,n)})),Yt.prototype.track_with_groups=ut((function(t,e,n,r){var i=D.extend({},e||{});return D.each(n,(function(t,e){null!=t&&(i[e]=t)})),this.track(t,i,r)})),Yt.prototype._create_map_key=function(t,e){return t+"_"+JSON.stringify(e)},Yt.prototype._remove_group_from_cache=function(t,e){delete this._cached_groups[this._create_map_key(t,e)]},Yt.prototype.get_group=function(t,e){var n=this._create_map_key(t,e),r=this._cached_groups[n];return void 0!==r&&r._group_key===t&&r._group_id===e||((r=new At)._init(this,t,e),this._cached_groups[n]=r),r},Yt.prototype.track_pageview=function(t){D.isUndefined(t)&&(t=E.location.href),this.track("mp_page_view",D.info.pageviewInfo(t))},Yt.prototype.track_links=function(){return this._track_dom.call(this,$,arguments)},Yt.prototype.track_forms=function(){return this._track_dom.call(this,Y,arguments)},Yt.prototype.time_event=function(t){D.isUndefined(t)?this.report_error("No event name provided to mixpanel.time_event"):this._event_is_disabled(t)||this.persistence.set_event_timer(t,(new Date).getTime())};var Xt={persistent:!0},Jt=function(t){var e;return e=D.isObject(t)?t:D.isUndefined(t)?{}:{days:t},D.extend({},Xt,e)};Yt.prototype.register=function(t,e){var n=Jt(e);n.persistent?this.persistence.register(t,n.days):D.extend(this.unpersisted_superprops,t)},Yt.prototype.register_once=function(t,e,n){var r=Jt(n);r.persistent?this.persistence.register_once(t,e,r.days):(void 0===e&&(e="None"),D.each(t,(function(t,n){this.unpersisted_superprops.hasOwnProperty(n)&&this.unpersisted_superprops[n]!==e||(this.unpersisted_superprops[n]=t)}),this))},Yt.prototype.unregister=function(t,e){(e=Jt(e)).persistent?this.persistence.unregister(t):delete this.unpersisted_superprops[t]},Yt.prototype._register_single=function(t,e){var n={};n[t]=e,this.register(n)},Yt.prototype.identify=function(t,e,n,r,i,o,s,a){var u=this.get_distinct_id();if(this.register({$user_id:t}),!this.get_property("$device_id")){var c=u;this.register_once({$had_persisted_distinct_id:!0,$device_id:c},"")}t!==u&&t!==this.get_property(Ut)&&(this.unregister(Ut),this.register({distinct_id:t})),this._flags.identify_called=!0,this.people._flush(e,n,r,i,o,s,a),t!==u&&this.track("$identify",{distinct_id:t,$anon_distinct_id:u},{skip_hooks:!0})},Yt.prototype.reset=function(){this.persistence.clear(),this._flags.identify_called=!1;var t=D.UUID();this.register_once({distinct_id:t,$device_id:t},"")},Yt.prototype.get_distinct_id=function(){return this.get_property("distinct_id")},Yt.prototype.alias=function(t,e){if(t===this.get_property(Mt))return this.report_error("Attempting to create alias for existing People user - aborting."),-2;var n=this;return D.isUndefined(e)&&(e=this.get_distinct_id()),t!==e?(this._register_single(Ut,t),this.track("$create_alias",{alias:t,distinct_id:e},{skip_hooks:!0},(function(){n.identify(t)}))):(this.report_error("alias matches current distinct_id - skipping api call."),this.identify(t),-1)},Yt.prototype.name_tag=function(t){this._register_single("mp_name_tag",t)},Yt.prototype.set_config=function(t){D.isObject(t)&&(D.extend(this.config,t),t.batch_size&&D.each(this.request_batchers,(function(t){t.resetBatchSize()})),this.get_config("persistence_name")||(this.config.persistence_name=this.config.cookie_name),this.get_config("disable_persistence")||(this.config.disable_persistence=this.config.disable_cookie),this.persistence&&this.persistence.update_config(this.config),n.DEBUG=n.DEBUG||this.get_config("debug"))},Yt.prototype.get_config=function(t){return this.config[t]},Yt.prototype._run_hook=function(t){var e=(this.config.hooks[t]||qt).apply(this,y.call(arguments,1));return void 0===e&&(this.report_error(t+" hook did not return a value"),e=null),e},Yt.prototype.get_property=function(t){return this.persistence.props[t]},Yt.prototype.toString=function(){var t=this.get_config("name");return t!==Vt&&(t="mixpanel."+t),t},Yt.prototype._event_is_disabled=function(t){return D.isBlockedUA(S)||this._flags.disable_all_events||D.include(this.__disabled_events,t)},Yt.prototype._gdpr_init=function(){"localStorage"===this.get_config("opt_out_tracking_persistence_type")&&D.localStorage.is_supported()&&(!this.has_opted_in_tracking()&&this.has_opted_in_tracking({persistence_type:"cookie"})&&this.opt_in_tracking({enable_persistence:!1}),!this.has_opted_out_tracking()&&this.has_opted_out_tracking({persistence_type:"cookie"})&&this.opt_out_tracking({clear_persistence:!1}),this.clear_opt_in_out_tracking({persistence_type:"cookie",enable_persistence:!1})),this.has_opted_out_tracking()?this._gdpr_update_persistence({clear_persistence:!0}):this.has_opted_in_tracking()||!this.get_config("opt_out_tracking_by_default")&&!D.cookie.get("mp_optout")||(D.cookie.remove("mp_optout"),this.opt_out_tracking({clear_persistence:this.get_config("opt_out_persistence_by_default")}))},Yt.prototype._gdpr_update_persistence=function(t){var e;if(t&&t.clear_persistence)e=!0;else{if(!t||!t.enable_persistence)return;e=!1}this.get_config("disable_persistence")||this.persistence.disabled===e||this.persistence.set_disabled(e),e&&D.each(this.request_batchers,(function(t){t.clear()}))},Yt.prototype._gdpr_call_func=function(t,e){return e=D.extend({track:D.bind(this.track,this),persistence_type:this.get_config("opt_out_tracking_persistence_type"),cookie_prefix:this.get_config("opt_out_tracking_cookie_prefix"),cookie_expiration:this.get_config("cookie_expiration"),cross_site_cookie:this.get_config("cross_site_cookie"),cross_subdomain_cookie:this.get_config("cross_subdomain_cookie"),cookie_domain:this.get_config("cookie_domain"),secure_cookie:this.get_config("secure_cookie"),ignore_dnt:this.get_config("ignore_dnt")},e),D.localStorage.is_supported()||(e.persistence_type="cookie"),t(this.get_config("token"),{track:e.track,trackEventName:e.track_event_name,trackProperties:e.track_properties,persistenceType:e.persistence_type,persistencePrefix:e.cookie_prefix,cookieDomain:e.cookie_domain,cookieExpiration:e.cookie_expiration,crossSiteCookie:e.cross_site_cookie,crossSubdomainCookie:e.cross_subdomain_cookie,secureCookie:e.secure_cookie,ignoreDnt:e.ignore_dnt})},Yt.prototype.opt_in_tracking=function(t){t=D.extend({enable_persistence:!0},t),this._gdpr_call_func(it,t),this._gdpr_update_persistence(t)},Yt.prototype.opt_out_tracking=function(t){(t=D.extend({clear_persistence:!0,delete_user:!0},t)).delete_user&&this.people&&this.people._identify_called()&&(this.people.delete_user(),this.people.clear_charges()),this._gdpr_call_func(ot,t),this._gdpr_update_persistence(t)},Yt.prototype.has_opted_in_tracking=function(t){return this._gdpr_call_func(st,t)},Yt.prototype.has_opted_out_tracking=function(t){return this._gdpr_call_func(at,t)},Yt.prototype.clear_opt_in_out_tracking=function(t){t=D.extend({enable_persistence:!0},t),this._gdpr_call_func(lt,t),this._gdpr_update_persistence(t)},Yt.prototype.report_error=function(t,e){P.error.apply(P.error,arguments);try{e||t instanceof Error||(t=new Error(t)),this.get_config("error_reporter")(t,e)}catch(e){P.error(e)}},Yt.prototype.init=Yt.prototype.init,Yt.prototype.reset=Yt.prototype.reset,Yt.prototype.disable=Yt.prototype.disable,Yt.prototype.time_event=Yt.prototype.time_event,Yt.prototype.track=Yt.prototype.track,Yt.prototype.track_links=Yt.prototype.track_links,Yt.prototype.track_forms=Yt.prototype.track_forms,Yt.prototype.track_pageview=Yt.prototype.track_pageview,Yt.prototype.register=Yt.prototype.register,Yt.prototype.register_once=Yt.prototype.register_once,Yt.prototype.unregister=Yt.prototype.unregister,Yt.prototype.identify=Yt.prototype.identify,Yt.prototype.alias=Yt.prototype.alias,Yt.prototype.name_tag=Yt.prototype.name_tag,Yt.prototype.set_config=Yt.prototype.set_config,Yt.prototype.get_config=Yt.prototype.get_config,Yt.prototype.get_property=Yt.prototype.get_property,Yt.prototype.get_distinct_id=Yt.prototype.get_distinct_id,Yt.prototype.toString=Yt.prototype.toString,Yt.prototype.opt_out_tracking=Yt.prototype.opt_out_tracking,Yt.prototype.opt_in_tracking=Yt.prototype.opt_in_tracking,Yt.prototype.has_opted_out_tracking=Yt.prototype.has_opted_out_tracking,Yt.prototype.has_opted_in_tracking=Yt.prototype.has_opted_in_tracking,Yt.prototype.clear_opt_in_out_tracking=Yt.prototype.clear_opt_in_out_tracking,Yt.prototype.get_group=Yt.prototype.get_group,Yt.prototype.set_group=Yt.prototype.set_group,Yt.prototype.add_group=Yt.prototype.add_group,Yt.prototype.remove_group=Yt.prototype.remove_group,Yt.prototype.track_with_groups=Yt.prototype.track_with_groups,Yt.prototype.start_batch_senders=Yt.prototype.start_batch_senders,Yt.prototype.stop_batch_senders=Yt.prototype.stop_batch_senders,jt.prototype.properties=jt.prototype.properties,jt.prototype.update_search_keyword=jt.prototype.update_search_keyword,jt.prototype.update_referrer_info=jt.prototype.update_referrer_info,jt.prototype.get_cross_subdomain=jt.prototype.get_cross_subdomain,jt.prototype.clear=jt.prototype.clear;var Zt={},te=(kt=0,(Nt=new Yt).init=function(t,n,r){if(r)return Nt[r]||(Nt[r]=Zt[r]=Qt(t,n,r),Nt[r]._loaded()),Nt[r];var i=Nt;Zt.mixpanel?i=Zt.mixpanel:t&&((i=Qt(t,n,Vt))._loaded(),Zt.mixpanel=i),Nt=i,1===kt&&(e.mixpanel=Nt),D.each(Zt,(function(t,e){e!==Vt&&(Nt[e]=t)})),Nt._=D},Nt.init(),function(){function t(){t.done||(t.done=!0,$t=!0,Wt=!1,D.each(Zt,(function(t){t._dom_loaded()})))}if(E.addEventListener)"complete"===E.readyState?t():E.addEventListener("DOMContentLoaded",t,!1);else if(E.attachEvent){E.attachEvent("onreadystatechange",t);var n=!1;try{n=null===e.frameElement}catch(t){}E.documentElement.doScroll&&n&&function e(){try{E.documentElement.doScroll("left")}catch(t){return void setTimeout(e,1)}t()}()}D.register_event(e,"load",t,!0)}(),Nt);t.exports=te},6354:function(t,e){var n,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,n=function(t){"use strict";if("object"!=typeof globalThis||"object"!=typeof chrome||!chrome||!chrome.runtime||!chrome.runtime.id)throw new Error("This script should only be loaded in a browser extension.");if(void 0===globalThis.browser||Object.getPrototypeOf(globalThis.browser)!==Object.prototype){const e="The message port closed before a response was received.",n="Returning a Promise is the preferred way to send a reply from an onMessage/onMessageExternal listener, as the sendResponse will be removed from the specs (See https://developer.mozilla.org/docs/Mozilla/Add-ons/WebExtensions/API/runtime/onMessage)",r=t=>{const r={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(0===Object.keys(r).length)throw new Error("api-metadata.json has not been included in browser-polyfill");class i extends WeakMap{constructor(t,e){super(e),this.createItem=t}get(t){return this.has(t)||this.set(t,this.createItem(t)),super.get(t)}}const o=(e,n)=>(...r)=>{t.runtime.lastError?e.reject(new Error(t.runtime.lastError.message)):n.singleCallbackArg||r.length<=1&&!1!==n.singleCallbackArg?e.resolve(r[0]):e.resolve(r)},s=t=>1==t?"argument":"arguments",a=(t,e,n)=>new Proxy(e,{apply:(e,r,i)=>n.call(r,t,...i)});let u=Function.call.bind(Object.prototype.hasOwnProperty);const c=(t,e={},n={})=>{let r=Object.create(null),i={has:(e,n)=>n in t||n in r,get(i,h,l){if(h in r)return r[h];if(!(h in t))return;let f=t[h];if("function"==typeof f)if("function"==typeof e[h])f=a(t,t[h],e[h]);else if(u(n,h)){let e=((t,e)=>function(n,...r){if(r.length<e.minArgs)throw new Error(`Expected at least ${e.minArgs} ${s(e.minArgs)} for ${t}(), got ${r.length}`);if(r.length>e.maxArgs)throw new Error(`Expected at most ${e.maxArgs} ${s(e.maxArgs)} for ${t}(), got ${r.length}`);return new Promise(((i,s)=>{if(e.fallbackToNoCallback)try{n[t](...r,o({resolve:i,reject:s},e))}catch(o){console.warn(`${t} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,o),n[t](...r),e.fallbackToNoCallback=!1,e.noCallback=!0,i()}else e.noCallback?(n[t](...r),i()):n[t](...r,o({resolve:i,reject:s},e))}))})(h,n[h]);f=a(t,t[h],e)}else f=f.bind(t);else if("object"==typeof f&&null!==f&&(u(e,h)||u(n,h)))f=c(f,e[h],n[h]);else{if(!u(n,"*"))return Object.defineProperty(r,h,{configurable:!0,enumerable:!0,get:()=>t[h],set(e){t[h]=e}}),f;f=c(f,e[h],n["*"])}return r[h]=f,f},set:(e,n,i,o)=>(n in r?r[n]=i:t[n]=i,!0),defineProperty:(t,e,n)=>Reflect.defineProperty(r,e,n),deleteProperty:(t,e)=>Reflect.deleteProperty(r,e)},h=Object.create(t);return new Proxy(h,i)},h=t=>({addListener(e,n,...r){e.addListener(t.get(n),...r)},hasListener:(e,n)=>e.hasListener(t.get(n)),removeListener(e,n){e.removeListener(t.get(n))}}),l=new i((t=>"function"!=typeof t?t:function(e){const n=c(e,{},{getContent:{minArgs:0,maxArgs:0}});t(n)}));let f=!1;const p=new i((t=>"function"!=typeof t?t:function(e,r,i){let o,s,a=!1,u=new Promise((t=>{o=function(e){f||(console.warn(n,(new Error).stack),f=!0),a=!0,t(e)}}));try{s=t(e,r,o)}catch(t){s=Promise.reject(t)}const c=!0!==s&&((h=s)&&"object"==typeof h&&"function"==typeof h.then);var h;if(!0!==s&&!c&&!a)return!1;return(c?s:u).then((t=>{i(t)}),(t=>{let e;e=t&&(t instanceof Error||"string"==typeof t.message)?t.message:"An unexpected error occurred",i({__mozWebExtensionPolyfillReject__:!0,message:e})})).catch((t=>{console.error("Failed to send onMessage rejected reply",t)})),!0})),d=({reject:n,resolve:r},i)=>{t.runtime.lastError?t.runtime.lastError.message===e?r():n(new Error(t.runtime.lastError.message)):i&&i.__mozWebExtensionPolyfillReject__?n(new Error(i.message)):r(i)},g=(t,e,n,...r)=>{if(r.length<e.minArgs)throw new Error(`Expected at least ${e.minArgs} ${s(e.minArgs)} for ${t}(), got ${r.length}`);if(r.length>e.maxArgs)throw new Error(`Expected at most ${e.maxArgs} ${s(e.maxArgs)} for ${t}(), got ${r.length}`);return new Promise(((t,e)=>{const i=d.bind(null,{resolve:t,reject:e});r.push(i),n.sendMessage(...r)}))},v={devtools:{network:{onRequestFinished:h(l)}},runtime:{onMessage:h(p),onMessageExternal:h(p),sendMessage:g.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:g.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},m={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return r.privacy={network:{"*":m},services:{"*":m},websites:{"*":m}},c(t,v,r)};t.exports=r(chrome)}else t.exports=globalThis.browser},void 0===(r=n.apply(e,[t]))||(t.exports=r)},8398:(t,e,n)=>{"use strict";n.d(e,{W:()=>qt,b:()=>Ft});var r=n(4320),i=n(5305),o=n(6555),s=n(9873);const a=async()=>{try{const t=await(0,o.be)({requireToken:!0});return(await t.get("/user-settings")).data}catch(t){throw t.response&&console.log("Get cross-platform onboarding status error response >>>",t.response.data),console.log("Get cross-platform onboarding status error>>>",t),t}},u=async({payload:t})=>{try{const e=await(0,o.be)({requireToken:!0}),{data:n}=await e.get("/user-settings");let r={};r&&(r=n.chromeExtension);const i=(0,s.merge)({chromeExtension:r},{chromeExtension:{crossPlatformHighlighting:t}});return(await e.put("/user-settings",i)).data}catch(t){throw t.response&&console.log("Update cross-platform onboarding status error response >>>",t.response.data),console.log("Update cross-platform onboarding status error>>>",t),t}};var c=n(8437),h=n(7714),l=n(9729);const f=[];var p=n(6354),d=n.n(p);const g="REMOVE_INSTANCE";class v{constructor(t){this._timers={initialize:void 0,removeInstanceIfExists:void 0,open:void 0,redirect:void 0},this._options=t,this.setupListeners()}getOptions(){return this._options}execTimer(t,e,n=v.MILLISECONDS_TO_START_TIMER){t&&clearTimeout(t),t=setTimeout(e,n)}onBeforeEvent(...t){const{beforeEvent:e}=this.getOptions();e&&e(t[0],t[1])}setupListeners(){d().tabs.onUpdated.addListener(((t,e,n)=>{const{status:r}=e;this.onBeforeEvent(e,n),this.execTimer(this._timers.initialize,(async()=>{if("complete"===r){const t=E.getIntegrationByURL(n.url);t&&n.url&&t.initialize({url:n.url,windowId:n.windowId,tabId:n.id})}}))})),d().tabs.onRemoved.addListener(((t,e)=>{this.onBeforeEvent(e,t),this.execTimer(this._timers.removeInstanceIfExists,(()=>{const{windowId:n,isWindowClosing:r}=e;r&&E.removeInstanceIfExists(n,t)}))})),d().runtime.onMessage.addListener(((t,e)=>{if("REQUEST_OPEN"===t.type){const{payload:n}=t;this.onBeforeEvent(t,e),this.execTimer(this._timers.open,(()=>{var t,r;const i=E.getIntegrationByURL(n.url);i&&i.initialize({url:n.url,windowId:null===(t=e.tab)||void 0===t?void 0:t.id,tabId:null===(r=e.tab)||void 0===r?void 0:r.windowId})}))}}))}}v.id="EventListener",v.MILLISECONDS_TO_START_TIMER=200;class m{constructor(t={}){this._integrations={},this._options=t,this.setupIntegrations(),this.setupListeners()}_isEnabled(){const{enabled:t}=this.getOptions();return t}setupIntegrations(){this._isEnabled()&&!this._integrations.initialized&&(this._integrations=function(t){const e={};var n;return function(t){return[...(e=t.integrations,e.reduce(((t,e)=>(t.every((t=>e.name!==t.name))&&t.push(e),t)),[]))];var e}(t).forEach((t=>{e[t.name]=t,function(t){-1===f.indexOf(t.name)&&(f.push(t.name),l.Z.success(t.name,"Integration installed."))}(t)})),n=e,Object.defineProperty(n,"initialized",{value:!0,writable:!0,configurable:!0}),e}(this._options))}unstable_clearIntegrations(){this._integrations={},this._integrations.initialized=!1}setupListeners(){this._isEnabled()&&this._integrations.initialized&&(this._emmiter=new v(this._options))}getOptions(){return this._options}getIntegrations(){return this._integrations}getIntegration(t){try{return this._integrations[t.id]||null}catch(e){return l.Z.error(m.id,`Cannot retrieve integration ${t.id} from the current Client`),null}}}m.id="BrowserClient";class y{constructor(t,e){this._transport=t,this._port=e,this._connected=!0,this._onConnected(),this._setupListeners()}get connected(){return this._connected}_setupListeners(){this._port.onMessage.addListener((t=>{E.store.resolve(t,(t=>{this.dispatch({type:"statechanged",payload:t})}))})),this._port.onDisconnect.addListener(this._onPortDisconnected.bind(this))}dispatch(t){l.Z.log(y.id,`Dispatching action ${t.type}.`,t),this._port.postMessage(t)}get senderId(){return this._port.sender.tab.id}_onConnected(){l.Z.success(y.id,`Connection established with Sender ${this.senderId}.`);const t=E.store.getState();this.dispatch({type:"statechanged",payload:t})}_onPortDisconnected(){this._connected=!1,l.Z.success(y.id,`Sender ${this.senderId} was disconnected.`)}}y.id="Actions";class _{constructor(t=_.channel){this._events={},this._port=d().runtime.connect({name:t}),this._port.onMessage.addListener(this._onMessageReceived.bind(this)),l.Z.success(_.id,`EventBrigde start listening to ${this._port.name} channel.`)}_onMessageReceived(t){const e=t.type;l.Z.log(_.id,`Looking for on listener for ${e} event.`),this._events[e]&&(l.Z.success(_.id,`Listener found! Calling ${e} listener.`),this._events[e](t))}hydrated(){this.dispatch({type:"hydrated",payload:void 0})}on(t,e){this._events[t]=e}dispatch(t){this._port.postMessage(t),l.Z.success(_.id,`Action ${t.type} sent via EventBridge.`)}disconnect(){this._port.disconnect(),l.Z.warn(_.id,`Connection with port ${this._port.name} ended.`)}}_.id="EventBrigde",_.channel="TLDX_EXTENSION_BRIGE";class b{constructor(){this._instances=[],this._connection=d().runtime,this._setupListeners()}_setupListeners(){this._connection.onConnect.addListener(this._onConnectListener.bind(this))}sendToAllListeners(t){l.Z.log(b.id,`Dispatching action ${t.type} for all listeners`),this._instances.forEach((e=>{e.connected&&e.dispatch(t)}))}_onConnectListener(t){t.name===_.channel&&this._instances.push(new y(this,t))}}b.id="Transport";var w=n(11);class I{constructor(){this._options={enabled:!1,integrations:[]}}static getInstance(){return this.instance||(this.instance=new this),this.instance}init(t){this._options=t,this._browser=new m(t),this._transport=new b;const e=(0,w.Me)();l.Z.success(I.id,`Extension ${e} initialized.`),(0,w.Uw)()}getClient(){return this._browser}get transport(){return this._transport}get store(){return this._options.store}get enabled(){return this._options.enabled}setIntegrations(t){this._options.integrations=t,this._browser.unstable_clearIntegrations(),this._browser.setupIntegrations()}getIntegration(t){const e=this.getClient();if(!e)return null;try{return e.getIntegration(t)}catch(e){return l.Z.error(I.id,`Cannot retrieve ${t.id} from current Client.`),null}}getIntegrationByURL(t){const e=this._browser.getIntegrations();return Object.keys(e).reduce(((n,r)=>{if(!n){const n=e[r];if(n.isValidURL(t))return n}return n}),null)}getIntegrationByBrowserInfo(t,e){const n=this._browser.getIntegrations();return Object.keys(n).reduce(((r,i)=>{if(!r){const r=n[i];if(r.hasInstance(t,e))return r}return r}),null)}removeInstanceIfExists(t,e){const n=this.getIntegrationByBrowserInfo(t,e);n&&n.removeInstance(t,e)}}I.id="Extension";const E=I.getInstance();function T(t,e){const{width:n,height:r}={width:window.screen.width,height:window.screen.height},i={};return e.top&&(i.top=e.top),e.left&&(i.left=e.left),e.bottom&&(i.top=r-t.height-e.bottom),e.right&&(i.left=n-t.width-e.right),i}var A=n(4753),S=n.n(A);S().init("9119f2c3302030eaaee56e29fcf9b1bc",{batch_requests:!0});const k={height:100,width:450},N={height:100,width:390},C={default:k,idle:k,initializing:N,pending:N,reserved:N,collapsed:{height:100,width:160},joined:{height:550,width:370},uploading:{height:300,width:450}},O="us02web",x=/^.*https:\/\/([A-Za-z0-9\\-]*)([\\.]*)zoom\.us\/([a-z])\/([0-9]+)([^#\r\n]*)([^?\r\n]*)/gm,R=/^([https://]*)([A-Za-z0-9\\-]*)([\\.]*)zoom\.us\/([a-z]{2})\/([0-9]+)\/([start|join]*)([^#\r\n]*)([^?\r\n]*)/gm;class D{constructor(){this.name=D.id,this.allowUrls=[x]}verifyIfInstanceExists(t){const{instances:e}=E.store.getState();return e[t]?e[t]:null}getPositionAndSize(t){return{...C[t],...T(C[t],{left:32,bottom:80})}}redirect(){}update(){}initialize({url:t,tabId:e}){const{meetingId:n,vanityURL:r,queryParameters:i}=function(t){const[,e=O,,n,r,i="",o]=x.exec(t);return{vanityURL:e,resourcePath:n,meetingId:r,queryParameters:i,fragments:o}}(t);if(!n)return void l.Z.error("Integration.ts","Meeting id not found. Cannot initialize");const o=this.verifyIfInstanceExists(n),s=`?meetingId=${n}&meetingPassword=${new URLSearchParams(i).get("pwd")}&meetingHost=${r}&meetingURL=${t}`;o?l.Z.warn(D.id,`Instance already exits for ${o.browser.url}. Focusing...`):(clearTimeout(this.zoomWindowDisplayTimer),this.zoomWindowDisplayTimer=setTimeout((async()=>{const t=`${d().runtime.getURL("zoom-lmi.html")}${s}`;(0,w.ok)(t,{}),class{static track(t){const{event:e}=t,n=t.params||{};S().track(e,n)}}.track({event:"zoom-integration-initialize-missing-data"})}),1e4))}_isValid(t,e){return e instanceof RegExp?null!==(t||"").match(e):t.includes(e)}isValidURL(t){return function(t){return null!==(t||"").match(x)}(t)}getInstance(t,e){const n=E.store.getState();return Object.values(n.instances).filter((n=>n.browser.tabId===e&&n.browser.windowId===t))[0]}hasInstance(t,e){return!!this.getInstance(t,e)}removeInstance(t,e){const n=this.getInstance(t,e);if(n){E.store.resolve({type:g,payload:n});const{meeting:{extras:{id:t}}}=n;l.Z.success(D.id,`Instance ${t} removed.`)}}}D.id="ZoomStandAloneIntegration";class P{constructor(){this.name=P.id,this.allowUrls=[R]}isValidURL(t){return function(t){return null!==(t||"").match(R)}(t)}hasInstance(t,e){return!1}removeInstance(t,e){throw new Error("Method not implemented.")}update(t){}redirect(t){}initialize({tabId:t}){(0,w.n9)(t,{file:"./zoom-on-fly-meeting.bundle.js"})}}function L(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+t+(n.length?" "+n.map((function(t){return"'"+t+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function M(t){return!!t&&!!t[wt]}function U(t){return!!t&&(function(t){if(!t||"object"!=typeof t)return!1;var e=Object.getPrototypeOf(t);if(null===e)return!0;var n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===It}(t)||Array.isArray(t)||!!t[bt]||!!t.constructor[bt]||V(t)||G(t))}function F(t,e,n){void 0===n&&(n=!1),0===j(t)?(n?Object.keys:Et)(t).forEach((function(r){n&&"symbol"==typeof r||e(r,t[r],t)})):t.forEach((function(n,r){return e(r,n,t)}))}function j(t){var e=t[wt];return e?e.i>3?e.i-4:e.i:Array.isArray(t)?1:V(t)?2:G(t)?3:0}function q(t,e){return 2===j(t)?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function B(t,e,n){var r=j(t);2===r?t.set(e,n):3===r?(t.delete(e),t.add(n)):t[e]=n}function V(t){return vt&&t instanceof Map}function G(t){return mt&&t instanceof Set}function H(t){return t.o||t.t}function W(t){if(Array.isArray(t))return Array.prototype.slice.call(t);var e=Tt(t);delete e[wt];for(var n=Et(e),r=0;r<n.length;r++){var i=n[r],o=e[i];!1===o.writable&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(e[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:t[i]})}return Object.create(Object.getPrototypeOf(t),e)}function z(t,e){return void 0===e&&(e=!1),$(t)||M(t)||!U(t)||(j(t)>1&&(t.set=t.add=t.clear=t.delete=K),Object.freeze(t),e&&F(t,(function(t,e){return z(e,!0)}),!0)),t}function K(){L(2)}function $(t){return null==t||"object"!=typeof t||Object.isFrozen(t)}function Y(t){var e=At[t];return e||L(18,t),e}function Q(){return dt}function X(t,e){e&&(Y("Patches"),t.u=[],t.s=[],t.v=e)}function J(t){Z(t),t.p.forEach(et),t.p=null}function Z(t){t===dt&&(dt=t.l)}function tt(t){return dt={p:[],l:dt,h:t,m:!0,_:0}}function et(t){var e=t[wt];0===e.i||1===e.i?e.j():e.O=!0}function nt(t,e){e._=e.p.length;var n=e.p[0],r=void 0!==t&&t!==n;return e.h.g||Y("ES5").S(e,t,r),r?(n[wt].P&&(J(e),L(4)),U(t)&&(t=rt(e,t),e.l||ot(e,t)),e.u&&Y("Patches").M(n[wt].t,t,e.u,e.s)):t=rt(e,n,[]),J(e),e.u&&e.v(e.u,e.s),t!==_t?t:void 0}function rt(t,e,n){if($(e))return e;var r=e[wt];if(!r)return F(e,(function(i,o){return it(t,r,e,i,o,n)}),!0),e;if(r.A!==t)return e;if(!r.P)return ot(t,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=4===r.i||5===r.i?r.o=W(r.k):r.o;F(3===r.i?new Set(i):i,(function(e,o){return it(t,r,i,e,o,n)})),ot(t,i,!1),n&&t.u&&Y("Patches").R(r,n,t.u,t.s)}return r.o}function it(t,e,n,r,i,o){if(M(i)){var s=rt(t,i,o&&e&&3!==e.i&&!q(e.D,r)?o.concat(r):void 0);if(B(n,r,s),!M(s))return;t.m=!1}if(U(i)&&!$(i)){if(!t.h.F&&t._<1)return;rt(t,i),e&&e.A.l||ot(t,i)}}function ot(t,e,n){void 0===n&&(n=!1),t.h.F&&t.m&&z(e,n)}function st(t,e){var n=t[wt];return(n?H(n):t)[e]}function at(t,e){if(e in t)for(var n=Object.getPrototypeOf(t);n;){var r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=Object.getPrototypeOf(n)}}function ut(t){t.P||(t.P=!0,t.l&&ut(t.l))}function ct(t){t.o||(t.o=W(t.t))}function ht(t,e,n){var r=V(e)?Y("MapSet").N(e,n):G(e)?Y("MapSet").T(e,n):t.g?function(t,e){var n=Array.isArray(t),r={i:n?1:0,A:e?e.A:Q(),P:!1,I:!1,D:{},l:e,t,k:null,o:null,j:null,C:!1},i=r,o=St;n&&(i=[r],o=kt);var s=Proxy.revocable(i,o),a=s.revoke,u=s.proxy;return r.k=u,r.j=a,u}(e,n):Y("ES5").J(e,n);return(n?n.A:Q()).p.push(r),r}function lt(t){return M(t)||L(22,t),function t(e){if(!U(e))return e;var n,r=e[wt],i=j(e);if(r){if(!r.P&&(r.i<4||!Y("ES5").K(r)))return r.t;r.I=!0,n=ft(e,i),r.I=!1}else n=ft(e,i);return F(n,(function(e,i){r&&function(t,e){return 2===j(t)?t.get(e):t[e]}(r.t,e)===i||B(n,e,t(i))})),3===i?new Set(n):n}(t)}function ft(t,e){switch(e){case 2:return new Map(t);case 3:return Array.from(t)}return W(t)}P.id="ZoomHostedIntegration";var pt,dt,gt="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),vt="undefined"!=typeof Map,mt="undefined"!=typeof Set,yt="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,_t=gt?Symbol.for("immer-nothing"):((pt={})["immer-nothing"]=!0,pt),bt=gt?Symbol.for("immer-draftable"):"__$immer_draftable",wt=gt?Symbol.for("immer-state"):"__$immer_state",It=("undefined"!=typeof Symbol&&Symbol.iterator,""+Object.prototype.constructor),Et="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames,Tt=Object.getOwnPropertyDescriptors||function(t){var e={};return Et(t).forEach((function(n){e[n]=Object.getOwnPropertyDescriptor(t,n)})),e},At={},St={get:function(t,e){if(e===wt)return t;var n=H(t);if(!q(n,e))return function(t,e,n){var r,i=at(e,n);return i?"value"in i?i.value:null===(r=i.get)||void 0===r?void 0:r.call(t.k):void 0}(t,n,e);var r=n[e];return t.I||!U(r)?r:r===st(t.t,e)?(ct(t),t.o[e]=ht(t.A.h,r,t)):r},has:function(t,e){return e in H(t)},ownKeys:function(t){return Reflect.ownKeys(H(t))},set:function(t,e,n){var r=at(H(t),e);if(null==r?void 0:r.set)return r.set.call(t.k,n),!0;if(!t.P){var i=st(H(t),e),o=null==i?void 0:i[wt];if(o&&o.t===n)return t.o[e]=n,t.D[e]=!1,!0;if(function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}(n,i)&&(void 0!==n||q(t.t,e)))return!0;ct(t),ut(t)}return t.o[e]===n&&"number"!=typeof n&&(void 0!==n||e in t.o)||(t.o[e]=n,t.D[e]=!0,!0)},deleteProperty:function(t,e){return void 0!==st(t.t,e)||e in t.t?(t.D[e]=!1,ct(t),ut(t)):delete t.D[e],t.o&&delete t.o[e],!0},getOwnPropertyDescriptor:function(t,e){var n=H(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r?{writable:!0,configurable:1!==t.i||"length"!==e,enumerable:r.enumerable,value:n[e]}:r},defineProperty:function(){L(11)},getPrototypeOf:function(t){return Object.getPrototypeOf(t.t)},setPrototypeOf:function(){L(12)}},kt={};F(St,(function(t,e){kt[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}})),kt.deleteProperty=function(t,e){return kt.set.call(this,t,e,void 0)},kt.set=function(t,e,n){return St.set.call(this,t[0],e,n,t[0])};var Nt=function(){function t(t){var e=this;this.g=yt,this.F=!0,this.produce=function(t,n,r){if("function"==typeof t&&"function"!=typeof n){var i=n;n=t;var o=e;return function(t){var e=this;void 0===t&&(t=i);for(var r=arguments.length,s=Array(r>1?r-1:0),a=1;a<r;a++)s[a-1]=arguments[a];return o.produce(t,(function(t){var r;return(r=n).call.apply(r,[e,t].concat(s))}))}}var s;if("function"!=typeof n&&L(6),void 0!==r&&"function"!=typeof r&&L(7),U(t)){var a=tt(e),u=ht(e,t,void 0),c=!0;try{s=n(u),c=!1}finally{c?J(a):Z(a)}return"undefined"!=typeof Promise&&s instanceof Promise?s.then((function(t){return X(a,r),nt(t,a)}),(function(t){throw J(a),t})):(X(a,r),nt(s,a))}if(!t||"object"!=typeof t){if(void 0===(s=n(t))&&(s=t),s===_t&&(s=void 0),e.F&&z(s,!0),r){var h=[],l=[];Y("Patches").M(t,s,h,l),r(h,l)}return s}L(21,t)},this.produceWithPatches=function(t,n){if("function"==typeof t)return function(n){for(var r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return e.produceWithPatches(n,(function(e){return t.apply(void 0,[e].concat(i))}))};var r,i,o=e.produce(t,n,(function(t,e){r=t,i=e}));return"undefined"!=typeof Promise&&o instanceof Promise?o.then((function(t){return[t,r,i]})):[o,r,i]},"boolean"==typeof(null==t?void 0:t.useProxies)&&this.setUseProxies(t.useProxies),"boolean"==typeof(null==t?void 0:t.autoFreeze)&&this.setAutoFreeze(t.autoFreeze)}var e=t.prototype;return e.createDraft=function(t){U(t)||L(8),M(t)&&(t=lt(t));var e=tt(this),n=ht(this,t,void 0);return n[wt].C=!0,Z(e),n},e.finishDraft=function(t,e){var n=(t&&t[wt]).A;return X(n,e),nt(void 0,n)},e.setAutoFreeze=function(t){this.F=t},e.setUseProxies=function(t){t&&!yt&&L(20),this.g=t},e.applyPatches=function(t,e){var n;for(n=e.length-1;n>=0;n--){var r=e[n];if(0===r.path.length&&"replace"===r.op){t=r.value;break}}n>-1&&(e=e.slice(n+1));var i=Y("Patches").$;return M(t)?i(t,e):this.produce(t,(function(t){return i(t,e)}))},t}(),Ct=new Nt,Ot=Ct.produce;Ct.produceWithPatches.bind(Ct),Ct.setAutoFreeze.bind(Ct),Ct.setUseProxies.bind(Ct),Ct.applyPatches.bind(Ct),Ct.createDraft.bind(Ct),Ct.finishDraft.bind(Ct);const xt=Ot,Rt={},Dt={},Pt=function(t){const e={state:{}};for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const r=t[n];e.state[n]=r(void 0,{type:"hydrated"})}return e.getState=()=>e.state,e.resolve=(n,r)=>{l.Z.log("Store","Action received: ",n);for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)){const i=t[r];e.state[r]=i(e.state[r],n)}"hydrated"===n.type&&E.transport.sendToAllListeners({type:"statechanged",payload:e.state}),r&&r(e.state),E.transport.sendToAllListeners({type:"statechanged",payload:e.state}),l.Z.log("Store","New state value: ",e.state)},e}({highlights:function(t=Rt,e){return xt(t,(t=>{if("ADD_HIGHLIGHT"===e.type){const{payload:n}=e;return t[n.meetingId].push(n),t}return t}))},instances:function(t=Dt,e){return xt(t,(t=>{switch(e.type){case"ADD_INSTANCE":{const{payload:n}=e,{id:r}=n.meeting.extras;return t[r]=n,t}case"UPDATE_INSTANCE":{const{payload:n}=e;console.log({payload:n});const{id:r}=n.meeting.extras,i=t[r];return t[r]={...i,...n,browser:{...null==i?void 0:i.browser,...n.browser}},t}case g:return Dt;default:return t}}))}}),{UNINSTALL_URL:Lt}=r.TY.generic;var Mt=n(417),Ut=n(2697);const Ft=({tabId:t,message:e,callback:n})=>{l.Z.log("background.js",{tabId:t,message:e}),chrome.tabs.sendMessage(t,e,n)},jt=({storageKey:t,value:e})=>{chrome.storage.sync.set({[t]:e})},qt=({storageKey:t,callback:e})=>{chrome.storage.sync.get(t,e)};let Bt=-1;const Vt=[r.CB.SUCCESSFUL,r.CB.PROCESSING,r.CB.UPLOADING];chrome.runtime.onInstalled.addListener((({reason:t})=>{"install"===t&&(d().runtime.setUninstallURL(Lt),window.open(`${r.wv}?f=zoom`))})),chrome.runtime.onMessage.addListener((async(t,e,n)=>{let c=null;if(e.tab&&(c=e.tab.id),e.tab&&t.type===r.wc.EVENT){const{url:n}=e.tab;t.platform=n.substring(8,n.indexOf("/",8)),APP.track(t.event,t.eventData||{})}if(e.tab&&t.type===r.wc.USER.SEND_ID){const{uid:t,email:e=null,username:n=null}=await(0,Mt.rD)();Ft({tabId:c,message:{type:r.wc.USER.GET_ID,uid:t,email:e,username:n}})}if(e.tab&&t.type===r.wc.JOIN_NOW.REQUESTING){const{googleMeetMeetingId:e,userId:r,provider:i,meetingName:o,link:s}=t.data;n((0,Ut.a)({googleMeetMeetingId:e,provider:i,meetingName:o,tabId:c,userId:r,link:s}))}if(e.tab&&t.type===r.wc.LMI.REQUEST_LOGIN&&((0,i.fH)({tabId:c}),n({success:!0})),e.tab&&t.type===r.wc.MEETING.ADD_PARTICIPANT)try{const{googleMeetMeetingId:e}=t,{meetingId:n}=await(0,Ut.Y)({googleMeetMeetingId:e});await(0,i.iR)({meetingId:n})}catch(t){console.log("tldv-error failed to add part ...")}if(e.tab&&t.type===r.wc.MEETING.ADD_PARTICIPANT_VIA_API&&console.log("Fire API request to add participant via API",t),e.tab&&t.type===r.wc.MEETING.UPDATE_PARTICIPANT)try{const{meetingId:e,participantId:n,updateData:r}=t.options;await(0,Mt.yl)({meetingId:e,participantId:n,updateData:r})}catch(t){console.log("tldv-error failed to update participant...",t)}if(e.tab&&t.type===r.wc.PARTICIPANTS.UPDATE&&await(0,Mt.sj)({...t}),e.tab&&t.type===r.wc.HIGHLIGHT.CREATE&&await(0,Mt.TH)({...t}),e.tab&&t.type===r.wc.HIGHLIGHT.UPDATE&&await(0,Mt.Pb)({...t}),e.tab&&t.type===r.wc.HIGHLIGHT.DELETE&&(await(0,Mt.Sn)({...t}),n({success:!0})),e.tab&&t.type===r.wc.MEETING.GET_ID){const{googleMeetMeetingId:e}=t;try{const{meetingId:t=null}=await(0,Ut.Y)({googleMeetMeetingId:e}),n={type:r.wc.MEETING.ID,meetingId:t,id:t};Ft({tabId:c,message:n})}catch(t){n({success:!1,error:t.message,tabId:c})}}if(e.tab&&t.type===r.wc.TOUR.GET_STATUS)try{const{chromeExtension:t}=await(async()=>{try{const t=await(0,o.be)({requireToken:!0});return(await t.get("/user-settings")).data}catch(t){throw t.response&&console.log("Get tour status error response >>>",t.response.data),console.log("Get tour status error>>>",t),t}})(),e={type:r.wc.TOUR.STATUS,status:t.onboardingOverview};Ft({tabId:c,message:e})}catch(t){console.log("Error fetching status for overview onboarding tour:::",t)}if(e.tab&&t.type===r.wc.TOUR.UPDATE_STATUS)try{const{chromeExtension:t}=await(async()=>{try{const t=await(0,o.be)({requireToken:!0}),{data:e}=await t.get("/user-settings");let n={};n&&(n=e.chromeExtension);const r=(0,s.merge)({chromeExtension:n},{chromeExtension:{onboardingOverview:!0}});return(await t.put("/user-settings",r)).data}catch(t){throw t.response&&console.log("Update tour status error response >>>",t.response.data),console.log("Update tour status error>>>",t),t}})(),e={type:r.wc.TOUR.STATUS,status:t.onboardingOverview};Ft({tabId:c,message:e})}catch(t){console.log("Error updating status for overview onboarding tour:::",t)}if(e.tab&&t.type===r.wc.CROSS_PLATFORM.GET_ONBOARDING_STATUS)try{const{chromeExtension:t}=await a(),e={type:r.wc.CROSS_PLATFORM.ONBOARDING_STATUS,notionFirstTimeOnboardingCompleted:t.crossPlatformHighlighting&&t.crossPlatformHighlighting.notionFirstTimeOnboardingCompleted||!1};Ft({tabId:c,message:e})}catch(t){console.log("Error fetching status for notion cross-platform onboarding:::",t)}if(e.tab&&t.type===r.wc.CROSS_PLATFORM.UPDATE_ONBOARDING_STATUS)try{const{chromeExtension:e}=await u({payload:t.data}),n={type:r.wc.CROSS_PLATFORM.ONBOARDING_STATUS,notionFirstTimeOnboardingCompleted:e.crossPlatformHighlighting.notionFirstTimeOnboardingCompleted};Ft({tabId:c,message:n})}catch(t){console.log("Error updating status for notion cross-platform onboarding:::",t)}if(e.tab&&t.type===r.wc.CROSS_PLATFORM.GET_LMI_BANNER_CLICK_STATUS)try{const{chromeExtension:t}=await a(),e={type:r.wc.CROSS_PLATFORM.LMI_BANNER_CLICK_STATUS,lmiBannerClicked:t.crossPlatformHighlighting&&t.crossPlatformHighlighting.lmiBannerClicked||!1};Ft({tabId:c,message:e})}catch(t){console.log("Error fetching status for LMI banner click:::",t)}if(e.tab&&t.type===r.wc.CROSS_PLATFORM.UPDATE_LMI_BANNER_CLICK_STATUS)try{const{chromeExtension:e}=await u({payload:t.data}),n={type:r.wc.CROSS_PLATFORM.LMI_BANNER_CLICK_STATUS,lmiBannerClicked:e.crossPlatformHighlighting.lmiBannerClicked};console.log("MESSAGE IN UPDATE PROCESSOR::::",n),Ft({tabId:c,message:n})}catch(t){console.log("Error updating status for LMI banner click:::",t)}if(e.tab&&t.type===r.wc.CROSS_PLATFORM.GET_USAGE_COUNT)try{const{chromeExtension:t}=await a(),e={type:r.wc.CROSS_PLATFORM.USAGE_COUNT,notionUsageCount:t.crossPlatformHighlighting&&t.crossPlatformHighlighting.notionUsageCount||0};Ft({tabId:c,message:e})}catch(t){console.log("Error fetching status for cross-platform onboarding:::",t)}if(e.tab&&t.type===r.wc.CROSS_PLATFORM.UPDATE_USAGE_COUNT)try{const{chromeExtension:e}=await u({payload:t.data}),n={type:r.wc.CROSS_PLATFORM.USAGE_COUNT,notionUsageCount:e.crossPlatformHighlighting.notionUsageCount};Ft({tabId:c,message:n})}catch(t){console.log("Error updating status for cross-platform onboarding:::",t)}if(e.tab&&t.type.includes(r.wc.CROSS_PLATFORM.GET_PLATFORM_DATA))try{const{chromeExtension:e}=await a(),n=e.crossPlatformHighlighting,r={type:t.type,data:n};Ft({tabId:c,message:r})}catch(t){console.log("Error fetching status for cross-platform onboarding:::",t)}if(e.tab&&t.type.includes(r.wc.CROSS_PLATFORM.UPDATE_PLATFORM_DATA))try{const{chromeExtension:e}=await u({payload:t.data})}catch(t){console.log("Error updating status for cross-platform onboarding:::",t)}if(e.tab&&t.type===r.wc.CROSS_PLATFORM.GET_SURVEY_COMPLETION_STATUS)try{const{chromeExtension:t}=await a(),e={type:r.wc.CROSS_PLATFORM.SURVEY_COMPLETION_STATUS,surveyCompletionStatus:t.crossPlatformHighlighting&&t.crossPlatformHighlighting.surveyCompletionStatus||!1};Ft({tabId:c,message:e})}catch(t){console.log("Error fetching status for cross-platform onboarding:::",t)}if(e.tab&&t.type===r.wc.CROSS_PLATFORM.UPDATE_SURVEY_COMPLETION_STATUS)try{const{chromeExtension:e}=await u({payload:t.data}),n={type:r.wc.CROSS_PLATFORM.SURVEY_COMPLETION_STATUS,surveyCompletionStatus:e.crossPlatformHighlighting.surveyCompletionStatus};Ft({tabId:c,message:n})}catch(t){console.log("Error updating status for cross-platform onboarding:::",t)}if(e.tab&&t.type===r.wc.MEETING.JOIN_ALREADY_STARTED){const{googleMeetMeetingId:e,userId:o}=t;try{const{meetingId:t}=await(0,Ut.Y)({googleMeetMeetingId:e});await(0,i.iR)({meetingId:t}),await(0,Mt.pA)({tabId:c}),(0,Mt.Dk)({meetingId:t,tabId:c}),t&&(0,Mt.oJ)({meetingId:t,tabId:c,uid:o}),Ft({message:{type:r.wc.MEETING.ID,meetingId:t},tabId:c})}catch(t){n({success:!1,error:t.message,tabId:c})}}if(e.tab&&t.type===r.wc.FIREBASE.SETUP)try{const{googleMeetMeetingId:e,conferenceId:o,userId:s,source:a,provider:u}=t;l.Z.log("background.js (firebase event)",{request:t});const h=o||e,{meetingId:f}=await(0,Ut.Y)({conferenceId:h,provider:u});await(0,Mt.pA)({tabId:c}),f&&((0,Mt.Dk)({meetingId:f,tabId:c,source:a}),await(0,i.iR)({meetingId:f})),f&&s&&((0,Mt.oJ)({meetingId:f,tabId:c,uid:s,source:a,provider:u}),(0,Mt.wJ)({meetingId:f,tabId:c,source:a,provider:u}));const p={type:r.wc.FIREBASE.SETUP_SUCCESS,meetingId:f};Ft({tabId:c,message:p}),n({success:!0,meetingId:f,tabId:c})}catch(t){if(console.log("firebase setup error",t),t.response&&t.response.data&&400===t.response.data.statusCode&&"Meeting not found"===t.response.data.message){const t={type:r.wc.MEETING.STATUS,status:r.wc.NOT_FOUND};return void Ft({tabId:c,message:t})}if(t.response&&t.response.data&&401===t.response.data.statusCode&&"Invalid token."===t.response.data.message){const t={type:r.wc.MEETING.STATUS,status:r.wc.INVALID_TOKEN};Ft({tabId:c,message:t})}n({success:!1,error:t.message,tabId:c})}if(e.tab&&t.type===r.wc.MEETING.OPEN_IN_APP){const{meetingId:e,provider:n,status:i,participantId:o,shouldRedirectToMeeting:s}=t;(({googleMeetTabId:t,meetingId:e,provider:n,status:i,participantId:o,shouldRedirectToMeeting:s})=>{chrome.tabs.onRemoved.addListener((a=>{const u=a===t;function c(t){s&&(clearTimeout(Bt),Bt=setTimeout((()=>{window.open(`${r.FX}/meetings/${t}`)}),200))}if(u){const t={withLMI:!1};console.log("Setting the user to offline status:",{meetingId:e,participantId:o,updateData:t}),(0,Mt.yl)({meetingId:e,participantId:o,updateData:t})}n=n||"",u&&-1!==n.indexOf("zoom")?-1!==Vt.indexOf(i)&&c(e):u&&c(e)}))})({googleMeetTabId:c,meetingId:e,provider:n,status:i,participantId:o,shouldRedirectToMeeting:s})}if(e.tab&&t.type===r.wc.MEETING.CLEAR_LOCAL_STORAGE){const{meetingId:e}=t;(({googleMeetTabId:t,meetingId:e})=>{chrome.tabs.onRemoved.addListener((n=>{n===t&&chrome.storage.sync.get("currentMeetingData",(t=>{const{currentMeetingData:{meetingId:n}}=t;n===e&&jt({storageKey:"currentMeetingData",value:{}})}))}))})({googleMeetTabId:c,meetingId:e})}if(e.tab&&t.type===r.wc.MEETING.REQUEST_STOP){const t={type:r.wc.MEETING.GET_STOP_CONFIRMATION};Ft({tabId:c,message:t})}e.tab&&t.type===r.wc.MEETING.STOP&&(await(0,Mt.kJ)({...t}),n({success:!0})),e.tab&&t.type===r.wc.CLEAN_UP&&((0,h.t)(),(0,Mt.fL)(),jt({storageKey:"currentMeetingData",value:{}}))})),chrome.runtime.onMessageExternal.addListener((async(t,e,n)=>{t.jwt&&(chrome.storage.sync.set({jwt:t.jwt}),jt({storageKey:r.wc.JWT,value:t.jwt}),n({success:!0}),Ht()),t.type===r.wc.USER.LOG_OUT&&((({storageKey:t})=>{chrome.storage.sync.remove(t)})({storageKey:r.wc.JWT}),n({success:!0}))})),chrome.tabs.onUpdated.addListener(((t,e,n)=>{if("complete"===e.status&&n&&n.url&&n.url.includes("https://meet.google.com/")){const e={type:r.wc.INJECT_SCRIPT};Ft({tabId:t,message:e,callback:()=>{chrome.runtime.lastError&&console.log(`tl;dv warning - inject-script... ${chrome.runtime.lastError.message}`)}})}if("complete"===e.status&&n&&n.url&&(n.url.includes("https://www.notion.so/")||n.url.includes("https://docs.google.com/"))){const e={type:r.wc.INJECT_SCRIPT};Ft({tabId:t,message:e,callback:e=>{chrome.runtime.lastError&&console.log(`tl;dv warning - inject-script on notion page... ${chrome.runtime.lastError.message}`),(e=e||{}).status!==r.wc.INJECTED&&chrome.tabs.executeScript(t,{file:"./injectCrossPlatform.js"},(()=>{chrome.tabs.executeScript(t,{file:"./cross-platform.bundle.js"},(()=>{console.log("INJECTED AND EXECUTED ON THE NOTION PAGE")}))}))}})}}));const Gt=[new D,new P],Ht=async()=>{const t=await(0,c.Zm)(),e=t.isOn(c.JU),n=t.isOn(c.EZ);e?l.Z.success("Extension","Zoom Integration Is Enabled on Growth Book"):l.Z.warn("Extension","Zoom Integration Is Disabled on Growth Book"),n?l.Z.success("Extension","Refocus Window Is Enabled on Growth Book"):l.Z.warn("Extension","Refocus Window Is Disabled on Growth Book"),jt({storageKey:"zoomPopupAutoFocusEnabled",value:n});const{shouldLoadZoomIntegrations:r}=await(0,w.qn)("shouldLoadZoomIntegrations");E.setIntegrations(r?Gt:[])};(0,c.Zm)().then((t=>{const e=t.isOn(c.JU),n=t.isOn(c.EZ);n?l.Z.success("Extension","Refocus Window Is Enabled on Growth Book"):l.Z.warn("Extension","Refocus Window Is Disabled on Growth Book"),jt({storageKey:"zoomPopupAutoFocusEnabled",value:n}),(0,w.qn)(["userRegisteredAt"]).then((({userRegisteredAt:t})=>{const n=(({userRegisteredAt:t,isZoomOn:e})=>{const n=new Date(t).getTime()>new Date("2022-04-12T00:00:00.00Z").getTime();return e||n})({userRegisteredAt:t,isZoomOn:e});E.init({enabled:!0,integrations:n?Gt:[],store:Pt}),(0,w.q9)({shouldLoadZoomIntegrations:n})}))})).catch((()=>l.Z.error("Extension","Error to initialize growth book"))),setInterval(Ht,c.Xn)},662:(t,e,n)=>{"use strict";var r=n(8398),i=n(4320);window.init=function(t){const e=function(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return function(){return`${t()+t()}-${t()}-${t()}-${t()}-${t()}${t()}${t()}`}}();(0,r.W)({storageKey:null,callback:function(n){void 0===n.userId?(t.USERID=e(),chrome.storage.sync.set({userId:t.USERID})):t.USERID=n.userId,mixpanel.identify(t.USERID),t.track=function(t,e){const{userId:n}=e;mixpanel.people.set({$name:n,source:"chrome-extension",plan:i.Z6}),(e=e||{}).distinct_id=n,mixpanel.track(t,e)}}})}},5305:(t,e,n)=>{"use strict";n.d(e,{ON:()=>h,dt:()=>u,fH:()=>c,iR:()=>l});var r=n(4320),i=n(417),o=n(2697),s=n(6555),a=n(8398);const u=async({googleMeetMeetingId:t,meetingName:e,tabId:n,provider:i="googleMeet",link:s})=>{const u=window.open(r.GL),c=setInterval((()=>{u.closed&&(clearInterval(c),(0,a.W)({storageKey:r.wc.JWT,callback(u){let c;u.jwt?(c={type:r.wc.JOIN_NOW.NEED_AUTHENTICATION_AUTHENTICATED},(0,a.b)({tabId:n,message:c}),(0,o.a)({googleMeetMeetingId:t,meetingName:e,tabId:n,provider:i,link:s})):(c={type:r.wc.JOIN_NOW.NEED_AUTHENTICATION_UNAUTHORIZED},(0,a.b)({tabId:n,message:c}))}}))}),1e3)},c=({tabId:t})=>{const e=window.open(r.GL),n=setInterval((()=>{e.closed&&(clearInterval(n),(0,a.W)({storageKey:r.wc.JWT,callback:o}))}),1e3),o=async e=>{let n;if(e.jwt){n={type:r.wc.JOIN_NOW.NEED_AUTHENTICATION_AUTHENTICATED},(0,a.b)({tabId:t,message:n});try{await(0,i.pA)({tabId:t})}catch(t){console.log("tldv-error lmi sign in :::",t)}}else n={type:r.wc.LMI.NEEDS_RE_AUTHENTICATION},(0,a.b)({tabId:t,message:n})}},h=async({tabId:t})=>{try{const t=await(0,s.be)({requireToken:!0});return(await t.get("/users/firebase/token")).data}catch(e){if(e.response&&403===e.response.status||e.response&&401===e.response.status){const n={type:r.wc.USER.UNAUTHORIZED,status:e.response.status};(0,a.b)({tabId:t,message:n})}throw e}},l=async({meetingId:t})=>{if(!t)return{success:!1};try{const e=await(0,s.be)({requireToken:!0});return await e("/meetings/participants",{method:"POST",data:{meetingId:t}}),{success:!0}}catch(t){return{success:!1}}}},4320:(t,e,n)=>{"use strict";n.d(e,{CB:()=>f,FX:()=>s,GL:()=>i,TY:()=>d,Z6:()=>l,qW:()=>r,wc:()=>p,wv:()=>o});const{ENV_DOMAIN:r,TLDV_LOGIN_URL:i,ONBOARDING_URL:o,APP_URL:s,UNINSTALL_URL:a,NODE_ENV:u,SENTRY_DSN:c,MAX_MEETING_DURATION_IN_HOURS:h}={FIREBASE_API_KEY:"AIzaSyA_d2z_LMkARJysO5MINZc-W3DFE-ZHXT0",FIREBASE_AUTH_DOMAIN:"lmi-store.firebaseapp.com",FIREBASE_PROJECT_ID:"lmi-store",FIREBASE_STORAGE_BUCKET:"lmi-store.appspot.com",FIREBASE_MESSAGING_SENDER_ID:"724695490036",FIREBASE_APP_ID:"1:724695490036:web:74fdba648a47384d3b2da1",FIREBASE_MEASUREMENT_ID:"G-H88RV60D76",ENV_DOMAIN:"https://api.tldv.io",TLDV_LOGIN_URL:"https://tldv.io/app/login?autoClose=true",MIXPANEL_PLAN:"early-beta",MIXPANEL_KEY:"9119f2c3302030eaaee56e29fcf9b1bc",NODE_ENV:"production",ONBOARDING_URL:"https://tldv.io/app/chrome-extension-onboarding",APP_URL:"https://tldv.io/app",MAX_MEETING_DURATION_IN_HOURS:"3",UNINSTALL_URL:"https://tally.so/r/3jqNxm",SENTRY_DSN:"https://27e262052a324fec9473a47392ea1735@o1042962.ingest.sentry.io/6021256",GROWTHBOOK_ROOT_DOMAIN:"https://cdn.growthbook.io",GROWTHBOOK_API_KEY:"key_prod_78197814c430ea7f"},l="early-beta",f={IDLE:"idle",JOINED:"joined",WAITING_ROOM:"waitingRoom",KICKED_OUT:"kickedOut",SUCCESSFUL:"successful",RESERVED:"reserved",PENDING:"pending",FAILED:"failed",PROCESSING:"processing",UPLOADING:"uploading",WAITING_ROOM_TIME_EXCEEDED:"waitingRoomTimeExceeded",NO_POD_AVAILABLE:"noPodAvailable"},p={JWT:"jwt",EVENT:"event",CLEAN_UP:"clean-up",INJECTED:"injected",NOT_FOUND:"notFound",INVALID_TOKEN:"invalidToken",INJECT_SCRIPT:"injectScript",WELCOME_MODAL_KEY:"tldv:google-meet:onboarding:welcome-modal",FIREBASE:{SETUP:"firebase:setup",SETUP_SUCCESS:"firebase:setup:success"},USER:{UNAUTHORIZED:"user:unauhorized",LOGGED_OUT:"user:loggedout",LOGGED_IN:"user:loggedin",LOG_OUT:"user:logout",GET_ID:"user:getid",SEND_ID:"user:sendid"},LMI:{REQUEST_LOGIN:"lmi-request-login",NEEDS_RE_AUTHENTICATION:"lmi-needs-re-authentication"},CHAT:{NAME:"tldv-chat"},JOIN_NOW:{ERROR:"join-now:error",ACCEPTED:"join-now:accepted",REQUESTING:"join-now:requesting",STATUS_TYPE:"join-now:status",ALREADY_JOINED:"join-now:already-joined",ERROR_NO_POD_AVAILABLE:"join-now:error-no-pod-available",NEED_AUTHENTICATION:"join-now:need-authentification",NEED_AUTHENTICATION_UNAUTHORIZED:"join-now:need-authentication:unauhorized",NEED_AUTHENTICATION_AUTHENTICATED:"join-now:need-authentication:authenticated"},HIGHLIGHT:{LIST:"highlights",CREATE:"highlight:create",UPDATE:"highlight:update",DELETE:"highlight:delete",RETRY_LISTENING:"retry:listening"},MEETING:{ID:"meeting:id",SYNC:"sync:chat",GET_ID:"meeting:get:id",STATUS:"meeting:status",HIGHLIGHTS:"meeting:highlights",PRIVATE_HIGHLIGHTS:"private:highlights",ADD_PARTICIPANT:"add:part",UPDATE_PARTICIPANT:"meeting:update:participant",GET_START_TIME:"get:start:time",START_TIME:"meeting:start:time",JOIN_ALREADY_STARTED:"meeting:join:already:started",OPEN_IN_APP:"meeting:open-in-app",CLEAR_LOCAL_STORAGE:"meeting:clear-local-storage",STOP:"meeting:stop",REQUEST_STOP:"meeting:request-stop",GET_STOP_CONFIRMATION:"meeting:get-stop-confirmation",ADD_PARTICIPANT_VIA_API:"meeting:add-participant-to-api"},PARTICIPANTS:{UPDATE:"participants:update"},TOUR:{STATUS:"tour:status",GET_STATUS:"tour:get:status",UPDATE_STATUS:"tour:update:status"},CROSS_PLATFORM:{ONBOARDING_STATUS:"cross-platform:onboarding:status",GET_ONBOARDING_STATUS:"cross-platform:onboarding:get:status",UPDATE_ONBOARDING_STATUS:"cross-platform:onboarding:update:status",USAGE_COUNT:"cross-platform:usage:count",GET_USAGE_COUNT:"cross-platform:get:usage:count",UPDATE_USAGE_COUNT:"cross-platform:update:usage:count",SURVEY_COMPLETION_STATUS:"cross-platform:survey:completion:status",GET_SURVEY_COMPLETION_STATUS:"cross-platform:get:survey:completion:status",UPDATE_SURVEY_COMPLETION_STATUS:"cross-platform:update:survey:completion:status",LMI_BANNER_CLICK_STATUS:"cross-platform:lmi:banner:click:status",GET_LMI_BANNER_CLICK_STATUS:"cross-platform:get:lmi:banner:click:status",UPDATE_LMI_BANNER_CLICK_STATUS:"cross-platform:update:lmi:banner:click:status",UPDATE_PLATFORM_DATA:"cross-platform:update:platform-data",GET_PLATFORM_DATA:"cross-platform:get:platform-data"}},d={generic:{BOTTOM:"bottom",SOLID:"solid",TOP:"top",TRANSPARENT:"transparent",TEXT:"text",CLICK:"click",LARGE:"large",VISIBLE:"visible",HIDDEN:"hidden",CHECKBOX:"checkbox",TLDV_HOME_URL:"https://tldv.io/app",UNINSTALL_URL:"https://tally.so/r/3jqNxm",READY_TO_GO:"Ready To Go!",ENABLED:"enabled",DISABLED:"disabled"},components:{addHighlight:{TEXT_INPUT_PLACEHOLDER:"Type or click  to mark this moment"},privacy:{VISIBLE_TO_ME:"Highlight visible only to me",VISIBLE_TO_EVERYONE:"Highlight visible to everyone",TOOLTIP_ID:"tldv-highlight-privacy"},chat:{HIGHLIGHT_DELETED_CONFIRMATION:"Highlight Deleted",MESSAGE_SOURCE:"chat",EXPAND:"Expand",COLLAPSE:"Collapse",DRAG:"Drag",OPEN_MEETING_PAGE:"Open final recording page",CLOSE:"Close",DEFAULT_HIGHLIGHT_TEXT:"Howdy! This is an example highlight. type in the box below to tag relevant meeting moments and @colleagues",EXPAND_TOOLTIP_ID:"expand-icon-help-text",COLLAPSE_TOOLTIP_ID:"collapse-icon-help-text",VIDEO_CAM_TOOLTIP_ID:"video-cam-icon-help-text",DRAG_TOOLTIP_ID:"drag-icon-help-text",CLOSE_TOOLTIP_ID:"close-icon-help-text"},chatOverlay:{SSL_ENCRYPTION:"SSL encrypted",GIF_ALT_TEXT:"Animated tl;dv logo"},editHighlight:{EMOJIS_TOOLTIP_ID:"emojis-tray",MAX_TIMESTAMP_BASE_MESSAGE:"The maximum timestamp for this meeting is",INVALID_HIGHLIGHT_TIMESTAMP_MESSAGE:"Invalid timestamp format! Use either HH:MM:SS or MM:SS",PLACEHOLDER_TEXT:"Add a title"},emailShareSettings:{EMAIL_RECIPIENTS_TOOLTIP_ID:"tldv-email-recipients",HEADER_LINE_1:"Recording will be",HEADER_LINE_2:"automatically sent to:",ONLY_TO_ME:"only to me",CUSTOM_SELECTION:"Custom selection",ALL_INVITEES_LINE_1:"All calendar invitees & participants",ALL_INVITEES_LINE_2:"with tl;dv Chrome Extension"},emojis:{TOOLTIP_ID:"emoji-help-text",TOOLTIP_TEXT:"Double-click to add emoji only"},errorBoundary:{TEXT:"Something went wrong."},highlight:{PRIVACY_TOOLTIP_ID:"privacy-desc-tooltip",DELETE:"Delete",EDIT:"Edit"},popup:{WELCOME_TEXT:"Welcome to the future of meetings",TEST_ON_GOOGLE:"Test it on Google Meet",VIEW_MEETING_RECORDINGS:"View Meeting Recordings"},signIn:{GIF_ALT_TEXT:"Login GIF",HEADER_LINE_1:"Add highlights to your",HEADER_LINE_2:"recording",BODY_TEXT:"Sign in to highlight important moments, and tag your colleagues during the meeting.",BUTTON_TEXT:"Sign In"},noHighlights:{BODY_TEXT_1:"or type to mark",BODY_TEXT_2:"this moment in the recording"},tour:{collaboration:{HEADER_TEXT:"Invite your team to collaborate",BODY_TEXT:"Invite your team to install the tl;dv chrome extension and mark key moments in the recording"},sharingSettings:{HEADER_TEXT:"Control who receives the recording",BODY_TEXT:"Automatically share the recording with all calendar invitees, if youd like to."},finalStep:{BUTTON_TEXT:"Start Timestamping"}},collaborators:{COLLABORATORS_TOOLTIP_ID:"tldv-collaborators-help-text",TOOLTIP_HEADER:"Collaborate",TOOLTIP_BODY_TEXT_LINE_1:"Live participants that have the",TOOLTIP_BODY_TEXT_LINE_2:"tl;dv Chrome Extension can",TOOLTIP_BODY_TEXT_LINE_3:"view and add highlights."},stopRecordingDialog:{TITLE:"Stop Recording?",BODY_TEXT:"This meeting recording and all timestamps up until this point will be saved",CONFIRM_BUTTON:"Stop and save",CANCEL_BUTTON:"Cancel"},stopRecordingConfirmation:{TITLE:"Recording saved",BODY_TEXT:"Youll receive it in your inbox soon.",BUTTON_TEXT:"Open recording",GIF_ALT_TEXT:"GIF animating between a video cam and an envelope"},savingRecordingOverlay:{TITLE:"Saving recording",BODY_TEXT:"This can take a few minutes"},crossPlatformHighlighting:{Notion:{ONBOARDING_TITLE:"Discover tl;dv for Notion",ONBOARDING_GIF_ALT_TEXT:"Tl;dv on notion demo GIF",ONBOARDING_CAROUSEL_LAUNCHER_TEXT:"Learn how it works",ONBOARDING_TOOLTIP_ID:"tldv-cross-platform-highlighting-onboarding-tooltip",DRAG_HANDLE_ID:"tldv-cross-platform-highlight-drag-handle",ONBOARDING_STATUS_STORAGE_KEY:"seenCrossPlatformOnboarding",TYPING_GUIDE_TEXT:"Type anything",TYPING_GUIDE_GIF_ALT_TEXT:"Animated finger pointing left",FIRST_HIGHLIGHT_ONBOARDING_TEXT:"Anyone with this link can access the meeting recording",INTEGRATION_TOGGLED_OFF_TOOLTIP:"Enable tl;dv on this Notion page",INTEGRATION_TOGGLED_ON_TOOLTIP:"Snooze tl;dv on this Notion page"},GoogleDocs:{ONBOARDING_TITLE:"Discover tl;dv for Google Docs",ONBOARDING_GIF_ALT_TEXT:"Tl;dv on notion demo GIF",ONBOARDING_CAROUSEL_LAUNCHER_TEXT:"Learn how it works",ONBOARDING_TOOLTIP_ID:"tldv-cross-platform-highlighting-onboarding-tooltip",DRAG_HANDLE_ID:"tldv-cross-platform-highlight-drag-handle",ONBOARDING_STATUS_STORAGE_KEY:"seenCrossPlatformOnboarding",TYPING_GUIDE_TEXT:"Type anything",TYPING_GUIDE_GIF_ALT_TEXT:"Animated finger pointing left",FIRST_HIGHLIGHT_ONBOARDING_TEXT:"Anyone with this link can access the meeting recording",INTEGRATION_TOGGLED_OFF_TOOLTIP:"Enable tl;dv on this Google Docs page",INTEGRATION_TOGGLED_ON_TOOLTIP:"Snooze tl;dv on this Google Docs page"}},crossPlatformOnboardingBanner:{Notion:{TEXT:"Create timestamps on a Notion page"},GoogleDocs:{TEXT:"Mark moments directly from Google Docs"}},crossPlatformFeedbackSurvey:{Notion:{pageOne:{QUESTION:"How has your experience with tl;dv on Notion been so far?"},pageTwo:{QUESTION:"Is there anything that could be improved?",PLACEHOLDER:"Share any thoughts, feelings, ideas here"},pageThree:{QUESTION:"Would you be up to participate in a feedback call?"},pageFour:{TEXT:"Merci! Obrigada! Gracias! Danke!",GIF_ALT_TEXT:"Pulsating Heart GIF"}},GoogleDocs:{pageOne:{QUESTION:"How has your experience with tl;dv on Google Docs been so far?"},pageTwo:{QUESTION:"Is there anything that could be improved?",PLACEHOLDER:"Share any thoughts, feelings, ideas here"},pageThree:{QUESTION:"Would you be up to participate in a feedback call?"},pageFour:{TEXT:"Merci! Obrigada! Gracias! Danke!",GIF_ALT_TEXT:"Pulsating Heart GIF"}}},crossPlatformIntegrationSettings:{Notion:{TITLE:"Notion integration settings",AUTO_HIGHLIGHTING_TEXT:"Create links as you type",AUTO_HIGHLIGHTING_SUB_TEXT:"Add timestamps automatically to every new line you type",HIGHLIGHT_SYNC_TEXT:"Show linked notes on the video",HIGHLIGHT_SYNC_SUB_TEXT:"Every note youre writing will directly show up on the final tl;dv video.",TOOLTIP_ID:"tldv-notion-integration-settings-tooltip",ONBOARDING_LAUNCHER_TEXT:"How does it work?"},GoogleDocs:{TITLE:"Google Docs integration settings",AUTO_HIGHLIGHTING_TEXT:"Show linked notes on the tl;dv notes",AUTO_HIGHLIGHTING_SUB_TEXT:"Add timestamps automatically to every new line you type",HIGHLIGHT_SYNC_TEXT:"Show linked notes on the video",HIGHLIGHT_SYNC_SUB_TEXT:"Every note youre writing will directly show up on the final tl;dv video.",TOOLTIP_ID:"tldv-googledocs-integration-settings-tooltip",ONBOARDING_LAUNCHER_TEXT:"How does it work?"}},crossPlatformOnboardingCarousel:{Notion:{PAGE_ONE_TITLE_LINE_1:"Get more from",PAGE_ONE_TITLE_LINE_2:"every note ",PAGE_ONE_SUBTITLE_LINE_1:"Learn how the tl;dv Notion",PAGE_ONE_SUBTITLE_LINE_2:"integration works",PAGE_TWO_TITLE_LINE_1:"Click and link",PAGE_TWO_TITLE_LINE_2:"any note to that",PAGE_TWO_TITLE_LINE_3:"meeting moment",PAGE_TWO_SUBTITLE_LINE_1:"With one click, you can link your existing notes and",PAGE_TWO_SUBTITLE_LINE_2:"agenda points to the live meeting recording moment.",PAGE_TWO_PROMPT:"Im a Notion note. Click me!",PAGE_THREE_TITLE_LINE_1:"Or simply type",PAGE_THREE_TITLE_LINE_2:"on a new line",PAGE_THREE_SUBTITLE_LINE_1:"tl;dv also",PAGE_THREE_SUBTITLE_LINE_2:"for every new line you type",PAGE_THREE_SUBTITLE_LINE_3:"so you dont have to think about it",PAGE_THREE_PROMPT_1:"Type something here",PAGE_THREE_PROMPT_2:"I'm typing something",PAGE_THREE_BUTTON_TEXT:"Got it! Try it live"},GoogleDocs:{PAGE_ONE_TITLE_LINE_1:"Get more from",PAGE_ONE_TITLE_LINE_2:"every note ",PAGE_ONE_SUBTITLE_LINE_1:"Learn how the tl;dv Google Docs",PAGE_ONE_SUBTITLE_LINE_2:"integration works",PAGE_TWO_TITLE_LINE_1:"Click and link",PAGE_TWO_TITLE_LINE_2:"any note to that",PAGE_TWO_TITLE_LINE_3:"meeting moment",PAGE_TWO_SUBTITLE_LINE_1:"With one click, you can link your existing notes and",PAGE_TWO_SUBTITLE_LINE_2:"agenda points to the live meeting recording moment.",PAGE_TWO_PROMPT:"Im a Google Docs note. Click me!",PAGE_THREE_TITLE_LINE_1:"Or simply type",PAGE_THREE_TITLE_LINE_2:"on a new line",PAGE_THREE_SUBTITLE_LINE_1:"tl;dv also",PAGE_THREE_SUBTITLE_LINE_2:"for every new line you type",PAGE_THREE_SUBTITLE_LINE_3:"so you dont have to think about it",PAGE_THREE_PROMPT_1:"Type something here",PAGE_THREE_PROMPT_2:"I'm typing something",PAGE_THREE_BUTTON_TEXT:"Got it! Try it live"}},collaboration:{TITLE:"Collaborate & Share this meeting",SUB_TITLE:"Ensure everyone can timestamp moments & has immediate access to the recording from their library.",INPUT_FIELD_PLACEHOLDER:"Add collaborators via email",REMOVE_COLLABORATORS:" Remove all Collaborators",INPUT_ERROR_TEXT:"Oops, something went wrong"},header:{COLLABORATORS_TOOLTIP_ID:"tldv-header-collaborators-tooltip",CANNOT_INVITE_COLLABORATORS:"Only Administrators can invite collaborators"}}}},417:(t,e,n)=>{"use strict";n.d(e,{fL:()=>cd,Sn:()=>vd,rD:()=>ud,oJ:()=>ld,Dk:()=>fd,wJ:()=>pd,pA:()=>_d,kJ:()=>bd,TH:()=>dd,Pb:()=>gd,yl:()=>md,sj:()=>yd});var r=n(6987),i="8.10.1";r.Z.registerVersion("firebase",i,"app"),r.Z.SDK_VERSION=i,function(){var t,e="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)},i=function(t){t=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof n.g&&n.g,t];for(var e=0;e<t.length;++e){var r=t[e];if(r&&r.Math==Math)return r}return globalThis}(this);function o(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function s(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:o(t)}}!function(t,n){if(n){var r=i;t=t.split(".");for(var o=0;o<t.length-1;o++){var s=t[o];s in r||(r[s]={}),r=r[s]}(n=n(o=r[t=t[t.length-1]]))!=o&&null!=n&&e(r,t,{configurable:!0,writable:!0,value:n})}}("Promise",(function(t){function e(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(t){e.reject(t)}}function n(){this.a=null}function r(t){return t instanceof e?t:new e((function(e){e(t)}))}if(t)return t;n.prototype.b=function(t){if(null==this.a){this.a=[];var e=this;this.c((function(){e.g()}))}this.a.push(t)};var o=i.setTimeout;n.prototype.c=function(t){o(t,0)},n.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(t){this.f(t)}}}this.a=null},n.prototype.f=function(t){this.c((function(){throw t}))},e.prototype.f=function(){function t(t){return function(r){n||(n=!0,t.call(e,r))}}var e=this,n=!1;return{resolve:t(this.m),reject:t(this.g)}},e.prototype.m=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.s(t);else{t:switch(typeof t){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1}n?this.v(t):this.h(t)}},e.prototype.v=function(t){var e=void 0;try{e=t.then}catch(t){return void this.g(t)}"function"==typeof e?this.u(e,t):this.h(t)},e.prototype.g=function(t){this.i(2,t)},e.prototype.h=function(t){this.i(1,t)},e.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},e.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)a.b(this.a[t]);this.a=null}};var a=new n;return e.prototype.s=function(t){var e=this.f();t.Ra(e.resolve,e.reject)},e.prototype.u=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(t){n.reject(t)}},e.prototype.then=function(t,n){function r(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(t){o(t)}}:e}var i,o,s=new e((function(t,e){i=t,o=e}));return this.Ra(r(t,i),r(n,o)),s},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.Ra=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?a.b(n):this.a.push(n)},e.resolve=r,e.reject=function(t){return new e((function(e,n){n(t)}))},e.race=function(t){return new e((function(e,n){for(var i=s(t),o=i.next();!o.done;o=i.next())r(o.value).Ra(e,n)}))},e.all=function(t){var n=s(t),i=n.next();return i.done?r([]):new e((function(t,e){function o(e){return function(n){s[e]=n,0==--a&&t(s)}}var s=[],a=0;do{s.push(void 0),a++,r(i.value).Ra(o(s.length-1),e),i=n.next()}while(!i.done)}))},e}));var a=a||{},u=this||self,c=/^[\w+/_-]+[=]{0,2}$/,h=null;function l(t){return(t=t.querySelector&&t.querySelector("script[nonce]"))&&(t=t.nonce||t.getAttribute("nonce"))&&c.test(t)?t:""}function f(){}function p(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function d(t){var e=p(t);return"array"==e||"object"==e&&"number"==typeof t.length}function g(t){return"function"==p(t)}function v(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function m(t){return Object.prototype.hasOwnProperty.call(t,y)&&t[y]||(t[y]=++_)}var y="closure_uid_"+(1e9*Math.random()>>>0),_=0;function b(t,e,n){return t.call.apply(t.bind,arguments)}function w(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function I(t,e,n){return(I=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?b:w).apply(null,arguments)}function E(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var T=Date.now;function A(t,e){function n(){}n.prototype=e.prototype,t.bb=e.prototype,t.prototype=new n,t.prototype.constructor=t}function S(t){return t}function k(t,e,n){this.code=O+t,this.message=e||x[t]||"",this.a=n||null}function N(t){var e=t&&t.code;return e?new k(e.substring(O.length),t.message,t.serverResponse):null}A(k,Error),k.prototype.w=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},k.prototype.toJSON=function(){return this.w()};var C,O="auth/",x={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},R={ld:{Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ua:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://securetoken.googleapis.com/v1/token",Xa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ua:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ua:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",$a:"https://test-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function D(t){for(var e in R)if(R[e].id===t)return{firebaseEndpoint:(t=R[e]).Ua,secureTokenEndpoint:t.$a,identityPlatformEndpoint:t.Xa};return null}function P(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(t){return!1}}function L(t){if(Error.captureStackTrace)Error.captureStackTrace(this,L);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function M(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");L.call(this,n+t[r])}function U(t,e){throw new M("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function F(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function j(t,e){t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}function q(){this.b=this.a=null}C=D("__EID__")?"__EID__":void 0,A(L,Error),L.prototype.name="CustomError",A(M,L),M.prototype.name="AssertionError",F.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var B=new F((function(){return new G}),(function(t){t.reset()}));function V(){var t=be,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function G(){this.next=this.b=this.a=null}q.prototype.add=function(t,e){var n=B.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},G.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},G.prototype.reset=function(){this.next=this.b=this.a=null};var H=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},W=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)},z=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=[],i=0,o="string"==typeof t?t.split(""):t,s=0;s<n;s++)if(s in o){var a=o[s];e.call(void 0,a,s,t)&&(r[i++]=a)}return r},K=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i="string"==typeof t?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},$=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function Y(t,e){return 0<=H(t,e)}function Q(t,e){var n;return(n=0<=(e=H(t,e)))&&Array.prototype.splice.call(t,e,1),n}function X(t,e){!function(t,e){for(var n="string"==typeof t?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(t,(function(n,r){e.call(void 0,n,r,t)&&Array.prototype.splice.call(t,r,1).length}))}function J(t){return Array.prototype.concat.apply([],arguments)}function Z(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}var tt,et=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},nt=/&/g,rt=/</g,it=/>/g,ot=/"/g,st=/'/g,at=/\x00/g,ut=/[\x00&<>"']/;function ct(t,e){return-1!=t.indexOf(e)}function ht(t,e){return t<e?-1:t>e?1:0}t:{var lt=u.navigator;if(lt){var ft=lt.userAgent;if(ft){tt=ft;break t}}tt=""}function pt(t){return ct(tt,t)}function dt(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function gt(t){for(var e in t)return!1;return!0}function vt(t){var e,n={};for(e in t)n[e]=t[e];return n}var mt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function yt(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<mt.length;o++)n=mt[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function _t(t,e){t:{try{var n=t&&t.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||u).Element&&r.Location){var i=r;break t}}catch(t){}i=null}if(i&&void 0!==i[e]&&(!t||!(t instanceof i[e])&&(t instanceof i.Location||t instanceof i.Element))){if(v(t))try{var o=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(t){o="<object could not be stringified>"}else o=void 0===t?"undefined":null===t?"null":typeof t;U("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,o)}}function bt(t,e){this.a=t===Tt&&e||"",this.b=Et}function wt(t){return t instanceof bt&&t.constructor===bt&&t.b===Et?t.a:(U("expected object of type Const, got '"+t+"'"),"type_error:Const")}bt.prototype.ta=!0,bt.prototype.sa=function(){return this.a},bt.prototype.toString=function(){return"Const{"+this.a+"}"};var It,Et={},Tt={};function At(){if(void 0===It){var t=null,e=u.trustedTypes;if(e&&e.createPolicy){try{t=e.createPolicy("goog#html",{createHTML:S,createScript:S,createScriptURL:S})}catch(t){u.console&&u.console.error(t.message)}It=t}else It=t}return It}function St(t,e){this.a=e===xt?t:""}function kt(t){return t instanceof St&&t.constructor===St?t.a:(U("expected object of type TrustedResourceUrl, got '"+t+"' of type "+p(t)),"type_error:TrustedResourceUrl")}function Nt(t,e){var n=wt(t);if(!Ot.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return function(t){var e=At();return new St(t=e?e.createScriptURL(t):t,xt)}(t=n.replace(Ct,(function(t,r){if(!Object.prototype.hasOwnProperty.call(e,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(e));return(t=e[r])instanceof bt?wt(t):encodeURIComponent(String(t))})))}St.prototype.ta=!0,St.prototype.sa=function(){return this.a.toString()},St.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var Ct=/%{(\w+)}/g,Ot=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,xt={};function Rt(t,e){this.a=e===jt?t:""}function Dt(t){return t instanceof Rt&&t.constructor===Rt?t.a:(U("expected object of type SafeUrl, got '"+t+"' of type "+p(t)),"type_error:SafeUrl")}Rt.prototype.ta=!0,Rt.prototype.sa=function(){return this.a.toString()},Rt.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Pt=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,Lt=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,Mt=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Ut(t){if(t instanceof Rt)return t;if(t="object"==typeof t&&t.ta?t.sa():String(t),Mt.test(t))t=new Rt(t,jt);else{var e=(t=(t=String(t)).replace(/(%0A|%0D)/g,"")).match(Lt);t=e&&Pt.test(e[1])?new Rt(t,jt):null}return t}function Ft(t){return t instanceof Rt?t:(t="object"==typeof t&&t.ta?t.sa():String(t),Mt.test(t)||(t="about:invalid#zClosurez"),new Rt(t,jt))}var jt={},qt=new Rt("about:invalid#zClosurez",jt);function Bt(t,e,n){this.a=n===Vt?t:""}Bt.prototype.ta=!0,Bt.prototype.sa=function(){return this.a.toString()},Bt.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Vt={};function Gt(t,e,n,r){return t=t instanceof Rt?t:Ft(t),e=e||u,n=n instanceof bt?wt(n):n||"",e.open(Dt(t),n,r,void 0)}function Ht(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function Wt(t){return ut.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(nt,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(rt,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(it,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(ot,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(st,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(at,"&#0;"))),t}function zt(t){return zt[" "](t),t}zt[" "]=f;var Kt,$t,Yt=pt("Opera"),Qt=pt("Trident")||pt("MSIE"),Xt=pt("Edge"),Jt=Xt||Qt,Zt=pt("Gecko")&&!(ct(tt.toLowerCase(),"webkit")&&!pt("Edge"))&&!(pt("Trident")||pt("MSIE"))&&!pt("Edge"),te=ct(tt.toLowerCase(),"webkit")&&!pt("Edge");function ee(){var t=u.document;return t?t.documentMode:void 0}t:{var ne="",re=($t=tt,Zt?/rv:([^\);]+)(\)|;)/.exec($t):Xt?/Edge\/([\d\.]+)/.exec($t):Qt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec($t):te?/WebKit\/(\S+)/.exec($t):Yt?/(?:Version)[ \/]?(\S+)/.exec($t):void 0);if(re&&(ne=re?re[1]:""),Qt){var ie=ee();if(null!=ie&&ie>parseFloat(ne)){Kt=String(ie);break t}}Kt=ne}var oe,se={};function ae(t){return function(t,e){var n=se;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,(function(){for(var e=0,n=et(String(Kt)).split("."),r=et(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=ht(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||ht(0==s[2].length,0==a[2].length)||ht(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e}))}u.document&&Qt?oe=ee()||parseInt(Kt,10)||void 0:oe=void 0;var ue=oe;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch($t){}var ce=!Qt||9<=Number(ue);function he(t){var e=document;return"string"==typeof t?e.getElementById(t):t}function le(t,e){dt(e,(function(e,n){e&&"object"==typeof e&&e.ta&&(e=e.sa()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:de.hasOwnProperty(n)?t.setAttribute(de[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e}))}var fe,pe,de={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function ge(t,e,n){function r(n){n&&e.appendChild("string"==typeof n?t.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];if(!d(o)||v(o)&&0<o.nodeType)r(o);else{t:{if(o&&"number"==typeof o.length){if(v(o)){var s="function"==typeof o.item||"string"==typeof o.item;break t}if(g(o)){s="function"==typeof o.item;break t}}s=!1}W(s?Z(o):o,r)}}}function ve(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function me(t){u.setTimeout((function(){throw t}),0)}function ye(t,e){pe||function(){if(u.Promise&&u.Promise.resolve){var t=u.Promise.resolve(void 0);pe=function(){t.then(we)}}else pe=function(){var t=we;!g(u.setImmediate)||u.Window&&u.Window.prototype&&!pt("Edge")&&u.Window.prototype.setImmediate==u.setImmediate?(fe||(fe=function(){var t=u.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!pt("Presto")&&(t=function(){var t=ve(document,"IFRAME");t.style.display="none",document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=I((function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()}),this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),void 0!==t&&!pt("Trident")&&!pt("MSIE")){var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).Hb;n.Hb=null,t()}},function(t){r.next={Hb:t},r=r.next,e.port2.postMessage(0)}}return function(t){u.setTimeout(t,0)}}()),fe(t)):u.setImmediate(t)}}(),_e||(pe(),_e=!0),be.add(t,e)}var _e=!1,be=new q;function we(){for(var t;t=V();){try{t.a.call(t.b)}catch(t){me(t)}j(B,t)}_e=!1}function Ie(t,e){if(this.a=Ee,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=f)try{var n=this;t.call(e,(function(t){Me(n,Te,t)}),(function(t){if(!(t instanceof Ge))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(t){}Me(n,Ae,t)}))}catch(t){Me(this,Ae,t)}}var Ee=0,Te=2,Ae=3;function Se(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}Se.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var ke=new F((function(){return new Se}),(function(t){t.reset()}));function Ne(t,e,n){var r=ke.get();return r.g=t,r.b=e,r.f=n,r}function Ce(t){if(t instanceof Ie)return t;var e=new Ie(f);return Me(e,Te,t),e}function Oe(t){return new Ie((function(e,n){n(t)}))}function xe(t,e,n){Ue(t,e,n,null)||ye(E(e,t))}function Re(t){return new Ie((function(e){var n=t.length,r=[];if(n)for(var i=function(t,i,o){n--,r[t]=i?{Qb:!0,value:o}:{Qb:!1,reason:o},0==n&&e(r)},o=0;o<t.length;o++)xe(t[o],E(i,o,!0),E(i,o,!1));else e(r)}))}function De(t,e){if(t.a==Ee)if(t.c){var n=t.c;if(n.b){for(var r=0,i=null,o=null,s=n.b;s&&(s.c||(r++,s.a==t&&(i=s),!(i&&1<r)));s=s.next)i||(o=s);i&&(n.a==Ee&&1==r?De(n,e):(o?((r=o).next==n.f&&(n.f=r),r.next=r.next.next):je(n),qe(n,i,Ae,e)))}t.c=null}else Me(t,Ae,e)}function Pe(t,e){t.b||t.a!=Te&&t.a!=Ae||Fe(t),t.f?t.f.next=e:t.b=e,t.f=e}function Le(t,e,n,r){var i=Ne(null,null,null);return i.a=new Ie((function(t,o){i.g=e?function(n){try{var i=e.call(r,n);t(i)}catch(t){o(t)}}:t,i.b=n?function(e){try{var i=n.call(r,e);void 0===i&&e instanceof Ge?o(e):t(i)}catch(t){o(t)}}:o})),i.a.c=t,Pe(t,i),i.a}function Me(t,e,n){t.a==Ee&&(t===n&&(e=Ae,n=new TypeError("Promise cannot resolve to itself")),t.a=1,Ue(n,t.$c,t.ad,t)||(t.i=n,t.a=e,t.c=null,Fe(t),e!=Ae||n instanceof Ge||function(t,e){t.g=!0,ye((function(){t.g&&Ve.call(null,e)}))}(t,n)))}function Ue(t,e,n,r){if(t instanceof Ie)return Pe(t,Ne(e||f,n||null,r)),!0;if(P(t))return t.then(e,n,r),!0;if(v(t))try{var i=t.then;if(g(i))return function(t,e,n,r,i){function o(t){s||(s=!0,r.call(i,t))}var s=!1;try{e.call(t,(function(t){s||(s=!0,n.call(i,t))}),o)}catch(t){o(t)}}(t,i,e,n,r),!0}catch(t){return n.call(r,t),!0}return!1}function Fe(t){t.h||(t.h=!0,ye(t.gc,t))}function je(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}function qe(t,e,n,r){if(n==Ae&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,Be(e,n,r);else try{e.c?e.g.call(e.f):Be(e,n,r)}catch(t){Ve.call(null,t)}j(ke,e)}function Be(t,e,n){e==Te?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}Ie.prototype.then=function(t,e,n){return Le(this,g(t)?t:null,g(e)?e:null,n)},Ie.prototype.$goog_Thenable=!0,(t=Ie.prototype).oa=function(t,e){return(t=Ne(t,t,e)).c=!0,Pe(this,t),this},t.o=function(t,e){return Le(this,null,t,e)},t.cancel=function(t){if(this.a==Ee){var e=new Ge(t);ye((function(){De(this,e)}),this)}},t.$c=function(t){this.a=Ee,Me(this,Te,t)},t.ad=function(t){this.a=Ee,Me(this,Ae,t)},t.gc=function(){for(var t;t=je(this);)qe(this,t,this.a,this.i);this.h=!1};var Ve=me;function Ge(t){L.call(this,t)}function He(){0!=We&&(ze[m(this)]=this),this.ya=this.ya,this.pa=this.pa}A(Ge,L),Ge.prototype.name="cancel";var We=0,ze={};function Ke(t){if(!t.ya&&(t.ya=!0,t.Da(),0!=We)){var e=m(t);if(0!=We&&t.pa&&0<t.pa.length)throw Error(t+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete ze[e]}}He.prototype.ya=!1,He.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var $e=Object.freeze||function(t){return t},Ye=!Qt||9<=Number(ue),Qe=Qt&&!ae("9"),Xe=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{u.addEventListener("test",f,e),u.removeEventListener("test",f,e)}catch(t){}return t}();function Je(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function Ze(t,e){if(Je.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(Zt){t:{try{zt(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:tn[t.pointerType]||"",this.a=t,t.defaultPrevented&&this.preventDefault()}}Je.prototype.preventDefault=function(){this.defaultPrevented=!0},A(Ze,Je);var tn=$e({2:"touch",3:"pen",4:"mouse"});Ze.prototype.preventDefault=function(){Ze.bb.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Qe)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}},Ze.prototype.g=function(){return this.a};var en="closure_listenable_"+(1e6*Math.random()|0),nn=0;function rn(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Wa=i,this.key=++nn,this.wa=this.Qa=!1}function on(t){t.wa=!0,t.listener=null,t.proxy=null,t.src=null,t.Wa=null}function sn(t){this.src=t,this.a={},this.b=0}function an(t,e){var n=e.type;n in t.a&&Q(t.a[n],e)&&(on(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function un(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.wa&&o.listener==e&&o.capture==!!n&&o.Wa==r)return i}return-1}sn.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=un(t,e,r,i);return-1<s?(e=t[s],n||(e.Qa=!1)):((e=new rn(e,this.src,o,!!r,i)).Qa=n,t.push(e)),e};var cn="closure_lm_"+(1e6*Math.random()|0),hn={};function ln(t,e,n,r,i){if(r&&r.once)pn(t,e,n,r,i);else if(Array.isArray(e))for(var o=0;o<e.length;o++)ln(t,e[o],n,r,i);else n=In(n),t&&t[en]?Tn(t,e,n,v(r)?!!r.capture:!!r,i):fn(t,e,n,!1,r,i)}function fn(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=v(i)?!!i.capture:!!i,a=bn(t);if(a||(t[cn]=a=new sn(t)),!(n=a.add(e,n,r,s,o)).proxy)if(r=function(){var t=_n,e=Ye?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Xe||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(vn(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}}function pn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)pn(t,e[o],n,r,i);else n=In(n),t&&t[en]?An(t,e,n,v(r)?!!r.capture:!!r,i):fn(t,e,n,!0,r,i)}function dn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)dn(t,e[o],n,r,i);else r=v(r)?!!r.capture:!!r,n=In(n),t&&t[en]?(t=t.v,(e=String(e).toString())in t.a&&-1<(n=un(o=t.a[e],n,r,i))&&(on(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=bn(t))&&(e=t.a[e.toString()],t=-1,e&&(t=un(e,n,r,i)),(n=-1<t?e[t]:null)&&gn(n))}function gn(t){if("number"!=typeof t&&t&&!t.wa){var e=t.src;if(e&&e[en])an(e.v,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(vn(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=bn(e))?(an(n,t),0==n.b&&(n.src=null,e[cn]=null)):on(t)}}}function vn(t){return t in hn?hn[t]:hn[t]="on"+t}function mn(t,e,n,r){var i=!0;if((t=bn(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.wa&&(o=yn(o,r),i=i&&!1!==o)}return i}function yn(t,e){var n=t.listener,r=t.Wa||t.src;return t.Qa&&gn(t),n.call(r,e)}function _n(t,e){if(t.wa)return!0;if(!Ye){if(!e)t:{e=["window","event"];for(var n=u,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new Ze(r=e,this),n=!0,!(0>r.keyCode||null!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(t){i=!0}(i||null==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=mn(r[i],t,!0,e);n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=mn(r[i],t,!1,e),n=n&&o}return n}return yn(t,new Ze(e,this))}function bn(t){return(t=t[cn])instanceof sn?t:null}var wn="__closure_events_fn_"+(1e9*Math.random()>>>0);function In(t){return g(t)?t:(t[wn]||(t[wn]=function(e){return t.handleEvent(e)}),t[wn])}function En(){He.call(this),this.v=new sn(this),this.bc=this,this.hb=null}function Tn(t,e,n,r,i){t.v.add(String(e),n,!1,r,i)}function An(t,e,n,r,i){t.v.add(String(e),n,!0,r,i)}function Sn(t,e,n,r){if(!(e=t.v.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.wa&&s.capture==n){var a=s.listener,u=s.Wa||s.src;s.Qa&&an(t.v,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}function kn(t,e,n){if(g(t))n&&(t=I(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=I(t.handleEvent,t)}return 2147483647<Number(e)?-1:u.setTimeout(t,e||0)}function Nn(t){var e=null;return new Ie((function(n,r){-1==(e=kn((function(){n(void 0)}),t))&&r(Error("Failed to schedule timer."))})).o((function(t){throw u.clearTimeout(e),t}))}function Cn(t){if(t.X&&"function"==typeof t.X)return t.X();if("string"==typeof t)return t.split("");if(d(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function On(t){if(t.Y&&"function"==typeof t.Y)return t.Y();if(!t.X||"function"!=typeof t.X){if(d(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function xn(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof xn)for(n=t.Y(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Rn(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Dn(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Dn(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Dn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}A(En,He),En.prototype[en]=!0,En.prototype.addEventListener=function(t,e,n,r){ln(this,t,e,n,r)},En.prototype.removeEventListener=function(t,e,n,r){dn(this,t,e,n,r)},En.prototype.dispatchEvent=function(t){var e,n=this.hb;if(n)for(e=[];n;n=n.hb)e.push(n);n=this.bc;var r=t.type||t;if("string"==typeof t)t=new Je(t,n);else if(t instanceof Je)t.target=t.target||n;else{var i=t;yt(t=new Je(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var s=t.b=e[o];i=Sn(s,r,!0,t)&&i}if(i=Sn(s=t.b=n,r,!0,t)&&i,i=Sn(s,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=Sn(s=t.b=e[o],r,!1,t)&&i;return i},En.prototype.Da=function(){if(En.bb.Da.call(this),this.v){var t,e=this.v;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)on(n[r]);delete e.a[t],e.b--}}this.hb=null},(t=xn.prototype).X=function(){Rn(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.Y=function(){return Rn(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return Dn(this.b,t)?this.b[t]:e},t.set=function(t,e){Dn(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.Y(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Pn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ln(t,e){var n;this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1,t instanceof Ln?(this.i=void 0!==e?e:t.i,Mn(this,t.c),this.l=t.l,this.a=t.a,Un(this,t.g),this.f=t.f,Fn(this,rr(t.b)),this.h=t.h):t&&(n=String(t).match(Pn))?(this.i=!!e,Mn(this,n[1]||"",!0),this.l=Gn(n[2]||""),this.a=Gn(n[3]||"",!0),Un(this,n[4]),this.f=Gn(n[5]||"",!0),Fn(this,n[6]||"",!0),this.h=Gn(n[7]||"")):(this.i=!!e,this.b=new Xn(null,this.i))}function Mn(t,e,n){t.c=n?Gn(e,!0):e,t.c&&(t.c=t.c.replace(/:$/,""))}function Un(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.g=e}else t.g=null}function Fn(t,e,n){e instanceof Xn?(t.b=e,function(t,e){e&&!t.f&&(Jn(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(tr(this,e),nr(this,n,t))}),t)),t.f=e}(t.b,t.i)):(n||(e=Hn(e,Yn)),t.b=new Xn(e,t.i))}function jn(t,e,n){t.b.set(e,n)}function qn(t,e){return t.b.get(e)}function Bn(t){return t instanceof Ln?new Ln(t):new Ln(t,void 0)}function Vn(t,e,n,r){var i=new Ln(null,void 0);return t&&Mn(i,t),e&&(i.a=e),n&&Un(i,n),r&&(i.f=r),i}function Gn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Hn(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Wn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Wn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Ln.prototype.toString=function(){var t=[],e=this.c;e&&t.push(Hn(e,zn,!0),":");var n=this.a;return(n||"file"==e)&&(t.push("//"),(e=this.l)&&t.push(Hn(e,zn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.g)&&t.push(":",String(n))),(n=this.f)&&(this.a&&"/"!=n.charAt(0)&&t.push("/"),t.push(Hn(n,"/"==n.charAt(0)?$n:Kn,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.h)&&t.push("#",Hn(n,Qn)),t.join("")},Ln.prototype.resolve=function(t){var e=new Ln(this),n=!!t.c;n?Mn(e,t.c):n=!!t.l,n?e.l=t.l:n=!!t.a,n?e.a=t.a:n=null!=t.g;var r=t.f;if(n)Un(e,t.g);else if(n=!!t.f){if("/"!=r.charAt(0))if(this.a&&!this.f)r="/"+r;else{var i=e.f.lastIndexOf("/");-1!=i&&(r=e.f.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(ct(i,"./")||ct(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],s=0;s<i.length;){var a=i[s++];"."==a?r&&s==i.length&&o.push(""):".."==a?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&s==i.length&&o.push("")):(o.push(a),r=!0)}r=o.join("/")}else r=i}return n?e.f=r:n=""!==t.b.toString(),n?Fn(e,rr(t.b)):n=!!t.h,n&&(e.h=t.h),e};var zn=/[#\/\?@]/g,Kn=/[#\?:]/g,$n=/[#\?]/g,Yn=/[#\?@]/g,Qn=/#/g;function Xn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Jn(t){t.a||(t.a=new xn,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Zn(t){var e=On(t);if(void 0===e)throw Error("Keys are undefined");var n=new Xn(null,void 0);t=Cn(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];Array.isArray(o)?nr(n,i,o):n.add(i,o)}return n}function tr(t,e){Jn(t),e=ir(t,e),Dn(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Dn((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Rn(t)))}function er(t,e){return Jn(t),e=ir(t,e),Dn(t.a.b,e)}function nr(t,e,n){tr(t,e),0<n.length&&(t.c=null,t.a.set(ir(t,e),Z(n)),t.b+=n.length)}function rr(t){var e=new Xn;return e.c=t.c,t.a&&(e.a=new xn(t.a),e.b=t.b),e}function ir(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function or(t){var e=[];return ar(new sr,t,e),e.join("")}function sr(){}function ar(t,e,n){if(null==e)n.push("null");else{if("object"==typeof e){if(Array.isArray(e)){var r=e;e=r.length,n.push("[");for(var i="",o=0;o<e;o++)n.push(i),ar(t,r[o],n),i=",";return void n.push("]")}if(!(e instanceof String||e instanceof Number||e instanceof Boolean)){for(r in n.push("{"),i="",e)Object.prototype.hasOwnProperty.call(e,r)&&"function"!=typeof(o=e[r])&&(n.push(i),hr(r,n),n.push(":"),ar(t,o,n),i=",");return void n.push("}")}e=e.valueOf()}switch(typeof e){case"string":hr(e,n);break;case"number":n.push(isFinite(e)&&!isNaN(e)?String(e):"null");break;case"boolean":n.push(String(e));break;case"function":n.push("null");break;default:throw Error("Unknown type: "+typeof e)}}}(t=Xn.prototype).add=function(t,e){Jn(this),this.c=null,t=ir(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(t,e){Jn(this),this.a.forEach((function(n,r){W(n,(function(n){t.call(e,n,r,this)}),this)}),this)},t.Y=function(){Jn(this);for(var t=this.a.X(),e=this.a.Y(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.X=function(t){Jn(this);var e=[];if("string"==typeof t)er(this,t)&&(e=J(e,this.a.get(ir(this,t))));else{t=this.a.X();for(var n=0;n<t.length;n++)e=J(e,t[n])}return e},t.set=function(t,e){return Jn(this),this.c=null,er(this,t=ir(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return t&&0<(t=this.X(t)).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.Y(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.X(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var ur={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},cr=/\uffff/.test("")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function hr(t,e){e.push('"',t.replace(cr,(function(t){var e=ur[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),ur[t]=e),e})),'"')}function lr(){var t=xr();return Qt&&!!ue&&11==ue||/Edge\/\d+/.test(t)}function fr(){return u.window&&u.window.location.href||self&&self.location&&self.location.href||""}function pr(t,e){e=e||u.window;var n="about:blank";t&&(n=Dt(Ut(t)||qt)),e.location.href=n}function dr(t,e){var n,r=[];for(n in t)n in e?typeof t[n]!=typeof e[n]?r.push(n):"object"==typeof t[n]&&null!=t[n]&&null!=e[n]?0<dr(t[n],e[n]).length&&r.push(n):t[n]!==e[n]&&r.push(n):r.push(n);for(n in e)n in t||r.push(n);return r}function gr(t){return!!((t=(t||xr()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function vr(t){t=t||u.window;try{t.close()}catch(t){}}function mr(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(s in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=xr().toLowerCase(),r&&(e.target=r,ct(n,"crios/")&&(e.target="_blank")),Nr(xr())==Sr&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof Rt?n:Ut(void 0!==n.href?n.href:String(n))||qt,n=t.target||n.target,i=[],t)switch(s){case"width":case"height":case"top":case"left":i.push(s+"="+t[s]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(s+"="+(t[s]?1:0))}var s=i.join(",");if((pt("iPhone")&&!pt("iPod")&&!pt("iPad")||pt("iPad")||pt("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(_t(s=ve(document,"A"),"HTMLAnchorElement"),e=e instanceof Rt?e:Ft(e),s.href=Dt(e),s.setAttribute("target",n),t.noreferrer&&s.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),s.dispatchEvent(t),s={}):t.noreferrer?(s=Gt("",r,n,s),t=Dt(e),s&&(Jt&&ct(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),s.opener=null,t='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Wt(t)+'">',t=new Bt(t=(r=At())?r.createHTML(t):t,null,Vt),r=s.document)&&(r.write(function(t){return t instanceof Bt&&t.constructor===Bt?t.a:(U("expected object of type SafeHtml, got '"+t+"' of type "+p(t)),"type_error:SafeHtml")}(t)),r.close())):(s=Gt(e,r,n,s))&&t.noopener&&(s.opener=null),s)try{s.focus()}catch(t){}return s}var yr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,_r=/^[^@]+@[^@]+$/;function br(){var t=null;return new Ie((function(e){"complete"==u.document.readyState?e():(t=function(){e()},pn(window,"load",t))})).o((function(e){throw dn(window,"load",t),e}))}function wr(t){return t=t||xr(),!("file:"!==Mr()&&"ionic:"!==Mr()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function Ir(){var t=u.window;try{return!(!t||t==t.top)}catch(t){return!1}}function Er(){return void 0!==u.WorkerGlobalScope&&"function"==typeof u.importScripts}function Tr(){return r.Z.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":r.Z.INTERNAL.hasOwnProperty("node")?"Node":Er()?"Worker":"Browser"}function Ar(){var t=Tr();return"ReactNative"===t||"Node"===t}var Sr="Firefox",kr="Chrome";function Nr(t){var e=t.toLowerCase();return ct(e,"opera/")||ct(e,"opr/")||ct(e,"opios/")?"Opera":ct(e,"iemobile")?"IEMobile":ct(e,"msie")||ct(e,"trident/")?"IE":ct(e,"edge/")?"Edge":ct(e,"firefox/")?Sr:ct(e,"silk/")?"Silk":ct(e,"blackberry")?"Blackberry":ct(e,"webos")?"Webos":!ct(e,"safari/")||ct(e,"chrome/")||ct(e,"crios/")||ct(e,"android")?!ct(e,"chrome/")&&!ct(e,"crios/")||ct(e,"edge/")?ct(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":kr:"Safari"}var Cr={md:"FirebaseCore-web",od:"FirebaseUI-web"};function Or(t,e){e=e||[];var n,r=[],i={};for(n in Cr)i[Cr[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=Tr())?r=Nr(i=xr()):"Worker"===r&&(r=Nr(i=xr())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function xr(){return u.navigator&&u.navigator.userAgent||""}function Rr(t,e){t=t.split("."),e=e||u;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function Dr(){try{var t=u.localStorage,e=Br();if(t)return t.setItem(e,"1"),t.removeItem(e),!lr()||!!u.indexedDB}catch(t){return Er()&&!!u.indexedDB}return!1}function Pr(){return(Lr()||"chrome-extension:"===Mr()||wr())&&!Ar()&&Dr()&&!Er()}function Lr(){return"http:"===Mr()||"https:"===Mr()}function Mr(){return u.location&&u.location.protocol||null}function Ur(t){return!gr(t=t||xr())&&Nr(t)!=Sr}function Fr(t){return void 0===t?null:or(t)}function jr(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function qr(t){if(null!==t)return JSON.parse(t)}function Br(t){return t||Math.floor(1e9*Math.random()).toString()}function Vr(t){return"Safari"!=Nr(t=t||xr())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function Gr(){var t=u.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function Hr(t,e){if(t>e)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=xr(),e=Tr(),this.b=gr(t)||"ReactNative"===e}function Wr(){var t=u.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function zr(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(t){}return null}function Kr(){return!(!Rr("fireauth.oauthhelper",u)&&!Rr("fireauth.iframe",u))}Hr.prototype.get=function(){var t=u.navigator;return!t||"boolean"!=typeof t.onLine||!Lr()&&"chrome-extension:"!==Mr()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var $r,Yr={};function Qr(t){Yr[t]||(Yr[t]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t))}try{var Xr={};Object.defineProperty(Xr,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Xr,"abcd",{configurable:!0,enumerable:!0,value:2}),$r=2==Xr.abcd}catch($t){$r=!1}function Jr(t,e,n){$r?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function Zr(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&Jr(t,n,e[n])}function ti(t){var e={};return Zr(e,t),e}function ei(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)Jr(e,n,ei(t[n]));return e}function ni(t){var e=t&&(t[ai]?"phone":null);if(!(e&&t&&t[si]))throw new k("internal-error","Internal assert: invalid MultiFactorInfo object");Jr(this,"uid",t[si]),Jr(this,"displayName",t[ii]||null);var n=null;t[oi]&&(n=new Date(t[oi]).toUTCString()),Jr(this,"enrollmentTime",n),Jr(this,"factorId",e)}function ri(t){try{var e=new ui(t)}catch(t){e=null}return e}ni.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var ii="displayName",oi="enrolledAt",si="mfaEnrollmentId",ai="phoneInfo";function ui(t){ni.call(this,t),Jr(this,"phoneNumber",t[ai])}function ci(t){var e={},n=t[pi],r=t[gi],i=t[vi];if(t=ri(t[di]),!i||i!=li&&i!=fi&&!n||i==fi&&!r||i==hi&&!t)throw Error("Invalid checkActionCode response!");i==fi?(e[yi]=n||null,e[bi]=n||null,e[mi]=r):(e[yi]=r||null,e[bi]=r||null,e[mi]=n||null),e[_i]=t||null,Jr(this,Ii,i),Jr(this,wi,ei(e))}A(ui,ni),ui.prototype.w=function(){var t=ui.bb.w.call(this);return t.phoneNumber=this.phoneNumber,t};var hi="REVERT_SECOND_FACTOR_ADDITION",li="EMAIL_SIGNIN",fi="VERIFY_AND_CHANGE_EMAIL",pi="email",di="mfaInfo",gi="newEmail",vi="requestType",mi="email",yi="fromEmail",_i="multiFactorInfo",bi="previousEmail",wi="data",Ii="operation";function Ei(t){var e=qn(t=Bn(t),Ti)||null,n=qn(t,Ai)||null,r=qn(t,Ni)||null;if(r=r&&Oi[r]||null,!e||!n||!r)throw new k("argument-error",Ti+", "+Ai+"and "+Ni+" are required in a valid action code URL.");Zr(this,{apiKey:e,operation:r,code:n,continueUrl:qn(t,Si)||null,languageCode:qn(t,ki)||null,tenantId:qn(t,Ci)||null})}var Ti="apiKey",Ai="oobCode",Si="continueUrl",ki="languageCode",Ni="mode",Ci="tenantId",Oi={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:hi,signIn:li,verifyAndChangeEmail:fi,verifyEmail:"VERIFY_EMAIL"};function xi(t){try{return new Ei(t)}catch(t){return null}}function Ri(t){var e=t[Ui];if(void 0===e)throw new k("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new k("invalid-continue-uri");this.h=e,this.b=this.a=null,this.g=!1;var n=t[Di];if(n&&"object"==typeof n){e=n[qi];var r=n[Fi];if(n=n[ji],"string"==typeof e&&e.length){if(this.a=e,void 0!==r&&"boolean"!=typeof r)throw new k("argument-error",Fi+" property must be a boolean when specified.");if(this.g=!!r,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new k("argument-error",ji+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==e)throw new k("argument-error",qi+" property must be a non empty string when specified.");if(void 0!==r||void 0!==n)throw new k("missing-android-pkg-name")}}else if(void 0!==n)throw new k("argument-error",Di+" property must be a non null object when specified.");if(this.f=null,(e=t[Mi])&&"object"==typeof e){if("string"==typeof(e=e[Bi])&&e.length)this.f=e;else if(void 0!==e)throw new k("argument-error",Bi+" property must be a non empty string when specified.")}else if(void 0!==e)throw new k("argument-error",Mi+" property must be a non null object when specified.");if(void 0!==(e=t[Li])&&"boolean"!=typeof e)throw new k("argument-error",Li+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[Pi])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new k("argument-error",Pi+" property must be a non empty string when specified.");this.i=t||null}var Di="android",Pi="dynamicLinkDomain",Li="handleCodeInApp",Mi="iOS",Ui="url",Fi="installApp",ji="minimumVersion",qi="packageName",Bi="bundleId";function Vi(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.i,e)null===e[n]&&delete e[n];return e}var Gi=null;function Hi(t){var e=zi(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.h=t,this.a=e.exp,this.i=e.sub,t=Date.now()/1e3,this.g=e.iat||(t>this.a?this.a:t),this.b=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.c=!!e.is_anonymous||"anonymous"==this.b}function Wi(t){try{return new Hi(t)}catch(t){return null}}function zi(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{var r=function(t){var e=[];return function(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=Gi[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}!function(){if(!Gi){Gi={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++)for(var r=t.concat(e[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===Gi[o]&&(Gi[o]=i)}}}();for(var r=0;;){var i=n(-1),o=n(0),s=n(64),a=n(64);if(64===a&&-1===i)break;e(i<<2|o>>4),64!=s&&(e(o<<4&240|s>>2),64!=a&&e(s<<6&192|a))}}(t,(function(t){e.push(t)})),e}(t);for(t=[],n=e=0;e<r.length;){var i=r[e++];if(128>i)t[n++]=String.fromCharCode(i);else if(191<i&&224>i){var o=r[e++];t[n++]=String.fromCharCode((31&i)<<6|63&o)}else if(239<i&&365>i){o=r[e++];var s=r[e++],a=((7&i)<<18|(63&o)<<12|(63&s)<<6|63&r[e++])-65536;t[n++]=String.fromCharCode(55296+(a>>10)),t[n++]=String.fromCharCode(56320+(1023&a))}else o=r[e++],s=r[e++],t[n++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}return JSON.parse(t.join(""))}catch(t){}return null}Hi.prototype.T=function(){return this.f},Hi.prototype.l=function(){return this.c},Hi.prototype.toString=function(){return this.h};var Ki="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),$i=["client_id","response_type","scope","redirect_uri","state"],Yi={nd:{Ja:"locale",va:700,ua:600,fa:"facebook.com",Ya:$i},pd:{Ja:null,va:500,ua:750,fa:"github.com",Ya:$i},qd:{Ja:"hl",va:515,ua:680,fa:"google.com",Ya:$i},wd:{Ja:"lang",va:485,ua:705,fa:"twitter.com",Ya:Ki},kd:{Ja:"locale",va:640,ua:600,fa:"apple.com",Ya:[]}};function Qi(t){for(var e in Yi)if(Yi[e].fa==t)return Yi[e];return null}function Xi(t){var e={};e["facebook.com"]=no,e["google.com"]=io,e["github.com"]=ro,e["twitter.com"]=oo;var n=t&&t[Zi];try{if(n)return e[n]?new e[n](t):new eo(t);if(void 0!==t[Ji])return new to(t)}catch(t){}return null}var Ji="idToken",Zi="providerId";function to(t){var e=t[Zi];if(!e&&t[Ji]){var n=Wi(t[Ji]);n&&n.b&&(e=n.b)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,void 0!==t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),Jr(this,"providerId",e),Jr(this,"isNewUser",n)}function eo(t){to.call(this,t),Jr(this,"profile",ei((t=qr(t.rawUserInfo||"{}"))||{}))}function no(t){if(eo.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function ro(t){if(eo.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Jr(this,"username",this.profile&&this.profile.login||null)}function io(t){if(eo.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function oo(t){if(eo.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Jr(this,"username",t.screenName||null)}function so(t){var e=Bn(t),n=qn(e,"link"),r=qn(Bn(n),"link");return e=qn(e,"deep_link_id"),qn(Bn(e),"link")||e||r||n||t}function ao(t,e){if(!t&&!e)throw new k("internal-error","Internal assert: no raw session string available");if(t&&e)throw new k("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?uo:co}A(eo,to),A(no,eo),A(ro,eo),A(io,eo),A(oo,eo);var uo="enroll",co="signin";function ho(){}function lo(t,e){return t.then((function(t){if(t[Zs]){var n=Wi(t[Zs]);if(!n||e!=n.i)throw new k("user-mismatch");return t}throw new k("user-mismatch")})).o((function(t){throw t&&t.code&&t.code==O+"user-not-found"?new k("user-mismatch"):t}))}function fo(t,e){if(!e)throw new k("internal-error","failed to construct a credential");this.a=e,Jr(this,"providerId",t),Jr(this,"signInMethod",t)}function po(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function go(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new fo(t.providerId,t.pendingToken)}catch(t){}return null}function vo(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&Jr(this,"idToken",e.idToken),e.accessToken&&Jr(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&Jr(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new k("internal-error","failed to construct a credential");Jr(this,"accessToken",e.oauthToken),Jr(this,"secret",e.oauthTokenSecret)}Jr(this,"providerId",t),Jr(this,"signInMethod",n)}function mo(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:Zn(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function yo(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new vo(t.providerId,e,t.signInMethod)}catch(t){}}return null}function _o(t,e){this.Qc=e||[],Zr(this,{providerId:t,isOAuthProvider:!0}),this.Jb={},this.qb=(Qi(t)||{}).Ja||null,this.pb=null}function bo(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new k("argument-error",'SAML provider IDs must be prefixed with "saml."');_o.call(this,t,[])}function wo(t){_o.call(this,t,$i),this.a=[]}function Io(){wo.call(this,"facebook.com")}function Eo(t){if(!t)throw new k("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return v(t)&&(e=t.accessToken),(new Io).credential({accessToken:e})}function To(){wo.call(this,"github.com")}function Ao(t){if(!t)throw new k("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return v(t)&&(e=t.accessToken),(new To).credential({accessToken:e})}function So(){wo.call(this,"google.com"),this.Ca("profile")}function ko(t,e){var n=t;return v(t)&&(n=t.idToken,e=t.accessToken),(new So).credential({idToken:n,accessToken:e})}function No(){_o.call(this,"twitter.com",Ki)}function Co(t,e){var n=t;if(v(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new k("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new vo("twitter.com",n,"twitter.com")}function Oo(t,e,n){this.a=t,this.f=e,Jr(this,"providerId","password"),Jr(this,"signInMethod",n===Ro.EMAIL_LINK_SIGN_IN_METHOD?Ro.EMAIL_LINK_SIGN_IN_METHOD:Ro.EMAIL_PASSWORD_SIGN_IN_METHOD)}function xo(t){return t&&t.email&&t.password?new Oo(t.email,t.password,t.signInMethod):null}function Ro(){Zr(this,{providerId:"password",isOAuthProvider:!1})}function Do(t,e){if(!(e=Po(e)))throw new k("argument-error","Invalid email link!");return new Oo(t,e.code,Ro.EMAIL_LINK_SIGN_IN_METHOD)}function Po(t){return(t=xi(t=so(t)))&&t.operation===li?t:null}function Lo(t){if(!(t.fb&&t.eb||t.La&&t.ea))throw new k("internal-error");this.a=t,Jr(this,"providerId","phone"),this.fa="phone",Jr(this,"signInMethod","phone")}function Mo(t){if(t&&"phone"===t.providerId&&(t.verificationId&&t.verificationCode||t.temporaryProof&&t.phoneNumber)){var e={};return W(["verificationId","verificationCode","temporaryProof","phoneNumber"],(function(n){t[n]&&(e[n]=t[n])})),new Lo(e)}return null}function Uo(t){return t.a.La&&t.a.ea?{temporaryProof:t.a.La,phoneNumber:t.a.ea}:{sessionInfo:t.a.fb,code:t.a.eb}}function Fo(t){try{this.a=t||r.Z.auth()}catch(t){throw new k("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Zr(this,{providerId:"phone",isOAuthProvider:!1})}function jo(t,e){if(!t)throw new k("missing-verification-id");if(!e)throw new k("missing-verification-code");return new Lo({fb:t,eb:e})}function qo(t){if(t.temporaryProof&&t.phoneNumber)return new Lo({La:t.temporaryProof,ea:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,s=t&&t.pendingToken;try{switch(e){case"google.com":return ko(o,n);case"facebook.com":return Eo(n);case"github.com":return Ao(n);case"twitter.com":return Co(n,r);default:return n||r||o||s?s?0==e.indexOf("saml.")?new fo(e,s):new vo(e,{pendingToken:s,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new wo(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(t){return null}}function Bo(t){if(!t.isOAuthProvider)throw new k("invalid-oauth-provider")}function Vo(t,e,n,r,i,o,s){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=s||null,this.a=i||null,!this.g&&!this.a)throw new k("invalid-auth-event");if(this.g&&this.a)throw new k("invalid-auth-event");if(this.g&&!this.f)throw new k("invalid-auth-event")}function Go(t){return(t=t||{}).type?new Vo(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&N(t.error),t.postBody,t.tenantId):null}function Ho(){this.b=null,this.a=[]}ao.prototype.Ha=function(){return this.a?Ce(this.a):Ce(this.b)},ao.prototype.w=function(){return this.type==uo?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},ho.prototype.ka=function(){},ho.prototype.b=function(){},ho.prototype.c=function(){},ho.prototype.w=function(){},fo.prototype.ka=function(t){return ba(t,po(this))},fo.prototype.b=function(t,e){var n=po(this);return n.idToken=e,wa(t,n)},fo.prototype.c=function(t,e){return lo(Ia(t,po(this)),e)},fo.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},vo.prototype.ka=function(t){return ba(t,mo(this))},vo.prototype.b=function(t,e){var n=mo(this);return n.idToken=e,wa(t,n)},vo.prototype.c=function(t,e){return lo(Ia(t,mo(this)),e)},vo.prototype.w=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},_o.prototype.Ka=function(t){return this.Jb=vt(t),this},A(bo,_o),A(wo,_o),wo.prototype.Ca=function(t){return Y(this.a,t)||this.a.push(t),this},wo.prototype.Rb=function(){return Z(this.a)},wo.prototype.credential=function(t,e){var n;if(!(n=v(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null}).idToken&&!n.accessToken)throw new k("argument-error","credential failed: must provide the ID token and/or the access token.");return new vo(this.providerId,n,this.providerId)},A(Io,wo),Jr(Io,"PROVIDER_ID","facebook.com"),Jr(Io,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),A(To,wo),Jr(To,"PROVIDER_ID","github.com"),Jr(To,"GITHUB_SIGN_IN_METHOD","github.com"),A(So,wo),Jr(So,"PROVIDER_ID","google.com"),Jr(So,"GOOGLE_SIGN_IN_METHOD","google.com"),A(No,_o),Jr(No,"PROVIDER_ID","twitter.com"),Jr(No,"TWITTER_SIGN_IN_METHOD","twitter.com"),Oo.prototype.ka=function(t){return this.signInMethod==Ro.EMAIL_LINK_SIGN_IN_METHOD?ru(t,Oa,{email:this.a,oobCode:this.f}):ru(t,Ja,{email:this.a,password:this.f})},Oo.prototype.b=function(t,e){return this.signInMethod==Ro.EMAIL_LINK_SIGN_IN_METHOD?ru(t,xa,{idToken:e,email:this.a,oobCode:this.f}):ru(t,Ha,{idToken:e,email:this.a,password:this.f})},Oo.prototype.c=function(t,e){return lo(this.ka(t),e)},Oo.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},Zr(Ro,{PROVIDER_ID:"password"}),Zr(Ro,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Zr(Ro,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),Lo.prototype.ka=function(t){return t.gb(Uo(this))},Lo.prototype.b=function(t,e){var n=Uo(this);return n.idToken=e,ru(t,tu,n)},Lo.prototype.c=function(t,e){var n=Uo(this);return n.operation="REAUTH",lo(t=ru(t,eu,n),e)},Lo.prototype.w=function(){var t={providerId:"phone"};return this.a.fb&&(t.verificationId=this.a.fb),this.a.eb&&(t.verificationCode=this.a.eb),this.a.La&&(t.temporaryProof=this.a.La),this.a.ea&&(t.phoneNumber=this.a.ea),t},Fo.prototype.gb=function(t,e){var n=this.a.a;return Ce(e.verify()).then((function(r){if("string"!=typeof r)throw new k("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");if("recaptcha"===e.type){var i,o=v(t)?t.session:null,s=v(t)?t.phoneNumber:t;return i=o&&o.type==uo?o.Ha().then((function(t){return function(t,e){return ru(t,za,e).then((function(t){return t.phoneSessionInfo.sessionInfo}))}(n,{idToken:t,phoneEnrollmentInfo:{phoneNumber:s,recaptchaToken:r}})})):o&&o.type==co?o.Ha().then((function(e){return function(t,e){return ru(t,Ka,e).then((function(t){return t.phoneResponseInfo.sessionInfo}))}(n,{mfaPendingCredential:e,mfaEnrollmentId:t.multiFactorHint&&t.multiFactorHint.uid||t.multiFactorUid,phoneSignInInfo:{recaptchaToken:r}})})):function(t,e){return ru(t,Va,e)}(n,{phoneNumber:s,recaptchaToken:r}),i.then((function(t){return"function"==typeof e.reset&&e.reset(),t}),(function(t){throw"function"==typeof e.reset&&e.reset(),t}))}throw new k("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}))},Zr(Fo,{PROVIDER_ID:"phone"}),Zr(Fo,{PHONE_SIGN_IN_METHOD:"phone"}),Vo.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},Vo.prototype.T=function(){return this.h},Vo.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var Wo,zo=null;function Ko(t){var e="unauthorized-domain",n=void 0,r=Bn(t);t=r.a,"chrome-extension"==(r=r.c)?n=Ht("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=Ht("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",k.call(this,e,n)}function $o(t,e,n){k.call(this,t,n),(t=e||{}).Kb&&Jr(this,"email",t.Kb),t.ea&&Jr(this,"phoneNumber",t.ea),t.credential&&Jr(this,"credential",t.credential),t.$b&&Jr(this,"tenantId",t.$b)}function Yo(t){if(t.code){var e=t.code||"";0==e.indexOf(O)&&(e=e.substring(O.length));var n={credential:qo(t),$b:t.tenantId};if(t.email)n.Kb=t.email;else if(t.phoneNumber)n.ea=t.phoneNumber;else if(!n.credential)return new k(e,t.message||void 0);return new $o(e,n,t.message)}return null}function Qo(){}function Xo(t){return t.c||(t.c=t.b())}function Jo(){}function Zo(t){if(!t.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.f}function ts(){}function es(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=I(this.qc,this),this.a.onerror=I(this.Tb,this),this.a.onprogress=I(this.rc,this),this.a.ontimeout=I(this.vc,this)}function ns(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function rs(t,e,n){this.reset(t,e,n,void 0,void 0)}function is(t){this.f=t,this.b=this.c=this.a=null}function os(t,e){this.name=t,this.value=e}A(Ko,k),A($o,k),$o.prototype.w=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.w();return e&&yt(t,e),t},$o.prototype.toJSON=function(){return this.w()},Qo.prototype.c=null,A(Jo,Qo),Jo.prototype.a=function(){var t=Zo(this);return t?new ActiveXObject(t):new XMLHttpRequest},Jo.prototype.b=function(){var t={};return Zo(this)&&(t[0]=!0,t[1]=!0),t},Wo=new Jo,A(ts,Qo),ts.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new es;throw Error("Unsupported browser")},ts.prototype.b=function(){return{}},(t=es.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,ns(this,4)},t.Tb=function(){this.status=500,this.response=this.responseText="",ns(this,4)},t.vc=function(){this.Tb()},t.rc=function(){this.status=200,ns(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},rs.prototype.a=null,rs.prototype.reset=function(t,e,n,r,i){r||T(),delete this.a},os.prototype.toString=function(){return this.name};var ss=new os("SEVERE",1e3),as=new os("WARNING",900),us=new os("CONFIG",700),cs=new os("FINE",500);function hs(t){return t.c?t.c:t.a?hs(t.a):(U("Root logger has no level set."),null)}is.prototype.log=function(t,e,n){if(t.value>=hs(this).value)for(g(e)&&(e=e()),t=new rs(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var ls={},fs=null;function ps(t){var e;if(fs||(fs=new is(""),ls[""]=fs,fs.c=us),!(e=ls[t])){e=new is(t);var n=t.lastIndexOf("."),r=t.substr(n+1);(n=ps(t.substr(0,n))).b||(n.b={}),n.b[r]=e,e.a=n,ls[t]=e}return e}function ds(t,e){t&&t.log(cs,e,void 0)}function gs(t){this.f=t}function vs(t){En.call(this),this.u=t,this.h=void 0,this.readyState=ms,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=ps("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}A(gs,Qo),gs.prototype.a=function(){return new vs(this.f)},gs.prototype.b=function(t){return function(){return t}}({}),A(vs,En);var ms=0;function ys(t){t.c.read().then(t.pc.bind(t)).catch(t.Va.bind(t))}function _s(t){t.readyState=4,t.g=null,t.c=null,t.m=null,bs(t)}function bs(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function ws(t){En.call(this),this.headers=new xn,this.D=t||null,this.c=!1,this.C=this.a=null,this.h=this.P=this.l="",this.f=this.N=this.i=this.J=!1,this.g=0,this.s=null,this.m=Is,this.u=this.S=!1}(t=vs.prototype).open=function(t,e){if(this.readyState!=ms)throw this.abort(),Error("Error reopening a connection");this.s=t,this.f=e,this.readyState=1,bs(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.l,method:this.s,credentials:this.h,cache:void 0};t&&(e.body=t),this.u.fetch(new Request(this.f,e)).then(this.uc.bind(this),this.Va.bind(this))},t.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,_s(this)),this.readyState=ms},t.uc=function(t){this.a&&(this.g=t,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=t.headers,this.readyState=2,bs(this)),this.a&&(this.readyState=3,bs(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.sc.bind(this),this.Va.bind(this)):void 0!==u.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.m=new TextDecoder,ys(this)):t.text().then(this.tc.bind(this),this.Va.bind(this)))))},t.pc=function(t){if(this.a){var e=this.m.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.response=this.responseText+=e),t.done?_s(this):bs(this),3==this.readyState&&ys(this)}},t.tc=function(t){this.a&&(this.response=this.responseText=t,_s(this))},t.sc=function(t){this.a&&(this.response=t,_s(this))},t.Va=function(t){var e=this.i;e&&e.log(as,"Failed to fetch url "+this.f,t instanceof Error?t:Error(t)),this.a&&_s(this)},t.setRequestHeader=function(t,e){this.l.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.i)&&t.log(as,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.i;return t&&t.log(as,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(vs.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(t){this.h=t?"include":"same-origin"}}),A(ws,En);var Is="";ws.prototype.b=ps("goog.net.XhrIo");var Es=/^https?$/i,Ts=["POST","PUT"];function As(t){return"content-type"==t.toLowerCase()}function Ss(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,ks(t),Cs(t)}function ks(t){t.J||(t.J=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function Ns(t){if(t.c&&void 0!==a)if(t.C[1]&&4==xs(t)&&2==Rs(t))ds(t.b,Ds(t,"Local request error detected and ignored"));else if(t.i&&4==xs(t))kn(t.Wb,0,t);else if(t.dispatchEvent("readystatechange"),4==xs(t)){ds(t.b,Ds(t,"Request complete")),t.c=!1;try{var e,n=Rs(t);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.l).match(Pn)[1]||null;if(!o&&u.self&&u.self.location){var s=u.self.location.protocol;o=s.substr(0,s.length-1)}i=!Es.test(o?o.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var c=2<xs(t)?t.a.statusText:""}catch(e){ds(t.b,"Can not get status: "+e.message),c=""}t.h=c+" ["+Rs(t)+"]",ks(t)}}finally{Cs(t)}}}function Cs(t,e){if(t.a){Os(t);var n=t.a,r=t.C[0]?f:null;t.a=null,t.C=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(e){(t=t.b)&&t.log(ss,"Problem encountered resetting onreadystatechange: "+e.message,void 0)}}}function Os(t){t.a&&t.u&&(t.a.ontimeout=null),t.s&&(u.clearTimeout(t.s),t.s=null)}function xs(t){return t.a?t.a.readyState:0}function Rs(t){try{return 2<xs(t)?t.a.status:-1}catch(t){return-1}}function Ds(t,e){return e+" ["+t.P+" "+t.l+" "+Rs(t)+"]"}function Ps(t){var e=Ws;this.g=[],this.u=e,this.s=t||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}function Ls(t,e,n){t.a=!0,t.c=n,t.f=!e,js(t)}function Ms(t){if(t.a){if(!t.v)throw new qs(t);t.v=!1}}function Us(t,e,n,r){t.g.push([e,n,r]),t.a&&js(t)}function Fs(t){return $(t.g,(function(t){return g(t[1])}))}function js(t){if(t.h&&t.a&&Fs(t)){var e=t.h,n=Gs[e];n&&(u.clearTimeout(n.a),delete Gs[e]),t.h=0}t.b&&(t.b.l--,delete t.b),e=t.c;for(var r=n=!1;t.g.length&&!t.i;){var i=t.g.shift(),o=i[0],s=i[1];if(i=i[2],o=t.f?s:o)try{var a=o.call(i||t.s,e);void 0!==a&&(t.f=t.f&&(a==e||a instanceof Error),t.c=e=a),(P(e)||"function"==typeof u.Promise&&e instanceof u.Promise)&&(r=!0,t.i=!0)}catch(r){e=r,t.f=!0,Fs(t)||(n=!0)}}t.c=e,r&&(a=I(t.m,t,!0),r=I(t.m,t,!1),e instanceof Ps?(Us(e,a,r),e.C=!0):e.then(a,r)),n&&(e=new Vs(e),Gs[e.a]=e,t.h=e.a)}function qs(){L.call(this)}function Bs(){L.call(this)}function Vs(t){this.a=u.setTimeout(I(this.c,this),0),this.b=t}(t=ws.prototype).Ma=function(){void 0!==a&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",ds(this.b,Ds(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(ds(this.b,Ds(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Cs(this))},t.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),Cs(this,!0)),ws.bb.Da.call(this)},t.Wb=function(){this.ya||(this.N||this.i||this.f?Ns(this):this.Jc())},t.Jc=function(){Ns(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case Is:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(ss,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(t){return ds(this.b,"Can not get response: "+t.message),null}},Ps.prototype.cancel=function(t){if(this.a)this.c instanceof Ps&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.l--,0>=e.l&&e.cancel())}this.u?this.u.call(this.s,this):this.v=!0,this.a||(t=new Bs(this),Ms(this),Ls(this,!1,t))}},Ps.prototype.m=function(t,e){this.i=!1,Ls(this,t,e)},Ps.prototype.then=function(t,e,n){var r,i,o=new Ie((function(t,e){r=t,i=e}));return Us(this,r,(function(t){t instanceof Bs?o.cancel():i(t)})),o.then(t,e,n)},Ps.prototype.$goog_Thenable=!0,A(qs,L),qs.prototype.message="Deferred has already fired",qs.prototype.name="AlreadyCalledError",A(Bs,L),Bs.prototype.message="Deferred was canceled",Bs.prototype.name="CanceledError",Vs.prototype.c=function(){throw delete Gs[this.a],this.b};var Gs={};function Hs(t){var e={},n=e.document||document,r=kt(t).toString(),i=ve(document,"SCRIPT"),o={Xb:i,Ma:void 0},s=new Ps(o),a=null,c=null!=e.timeout?e.timeout:5e3;return 0<c&&(a=window.setTimeout((function(){zs(i,!0);var t=new Ys($s,"Timeout reached for loading script "+r);Ms(s),Ls(s,!1,t)}),c),o.Ma=a),i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(zs(i,e.xd||!1,a),Ms(s),Ls(s,!0,null))},i.onerror=function(){zs(i,!0,a);var t=new Ys(Ks,"Error while loading script "+r);Ms(s),Ls(s,!1,t)},yt(o=e.attributes||{},{type:"text/javascript",charset:"UTF-8"}),le(i,o),function(t,e){_t(t,"HTMLScriptElement"),t.src=kt(e),(e=t.ownerDocument&&t.ownerDocument.defaultView)&&e!=u?e=l(e.document):(null===h&&(h=l(u.document)),e=h),e&&t.setAttribute("nonce",e)}(i,t),function(t){var e;return(e=(t||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:t.documentElement}(n).appendChild(i),s}function Ws(){if(this&&this.Xb){var t=this.Xb;t&&"SCRIPT"==t.tagName&&zs(t,!0,this.Ma)}}function zs(t,e,n){null!=n&&u.clearTimeout(n),t.onload=f,t.onerror=f,t.onreadystatechange=f,e&&window.setTimeout((function(){t&&t.parentNode&&t.parentNode.removeChild(t)}),0)}var Ks=0,$s=1;function Ys(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),L.call(this,n),this.code=t}function Qs(t){this.f=t}function Xs(t,e,n){if(this.c=t,t=e||{},this.l=t.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=t.secureTokenTimeout||ta,this.g=vt(t.secureTokenHeaders||ea),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=t.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=t.firebaseTimeout||na,this.a=vt(t.firebaseHeaders||ra),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==Tr(),!(n=u.XMLHttpRequest||n&&r.Z.INTERNAL.node&&r.Z.INTERNAL.node.XMLHttpRequest)&&!Er())throw new k("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,Er()?this.f=new gs(self):Ar()?this.f=new Qs(n):this.f=new ts,this.b=null}A(Ys,L),A(Qs,Qo),Qs.prototype.a=function(){return new this.f},Qs.prototype.b=function(){return{}};var Js,Zs="idToken",ta=new Hr(3e4,6e4),ea={"Content-Type":"application/x-www-form-urlencoded"},na=new Hr(3e4,6e4),ra={"Content-Type":"application/json"};function ia(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function oa(t,e){e&&(t.l=sa("https://securetoken.googleapis.com/v1/token",e),t.h=sa("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",e),t.i=sa("https://identitytoolkit.googleapis.com/v2/",e))}function sa(t,e){return t=Bn(t),e=Bn(e.url),t.f=t.a+t.f,Mn(t,e.c),t.a=e.a,Un(t,e.g),t.toString()}function aa(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function ua(t,e,n,r,i,o,s){(function(){var t=xr();return!((t=Nr(t)!=kr?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null)&&30>t||Qt&&ue&&!(9<ue))})()||Er()?t=I(t.u,t):(Js||(Js=new Ie((function(t,e){!function(t,e){((window.gapi||{}).client||{}).request?t():(u[ha]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))},function(t,e){Us(t,null,e,void 0)}(Hs(Nt(ca,{onload:ha})),(function(){e(Error("CORS_UNSUPPORTED"))})))}(t,e)}))),t=I(t.s,t)),t(e,n,r,i,o,s)}Xs.prototype.T=function(){return this.b},Xs.prototype.u=function(t,e,n,r,i,o){if(Er()&&(void 0===u.fetch||void 0===u.Headers||void 0===u.Request))throw new k("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var s=new ws(this.f);if(o){s.g=Math.max(0,o);var a=setTimeout((function(){s.dispatchEvent("timeout")}),o)}Tn(s,"complete",(function(){a&&clearTimeout(a);var t=null;try{t=JSON.parse(function(t){try{return t.a?t.a.responseText:""}catch(e){return ds(t.b,"Can not get responseText: "+e.message),""}}(this))||null}catch(e){t=null}e&&e(t)})),An(s,"ready",(function(){a&&clearTimeout(a),Ke(this)})),An(s,"timeout",(function(){a&&clearTimeout(a),Ke(this),e&&e(null)})),function(t,e,n,r,i){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.h="",t.P=n,t.J=!1,t.c=!0,t.a=t.D?t.D.a():Wo.a(),t.C=t.D?Xo(t.D):Xo(Wo),t.a.onreadystatechange=I(t.Wb,t);try{ds(t.b,Ds(t,"Opening Xhr")),t.N=!0,t.a.open(n,String(e),!0),t.N=!1}catch(e){return ds(t.b,Ds(t,"Error opening Xhr: "+e.message)),void Ss(t,e)}e=r||"";var o=new xn(t.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(d(t)||"string"==typeof t)W(t,e,void 0);else for(var n=On(t),r=Cn(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,(function(t,e){o.set(e,t)})),i=function(t){t:{for(var e=As,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(o.Y()),r=u.FormData&&e instanceof u.FormData,!Y(Ts,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach((function(t,e){this.a.setRequestHeader(e,t)}),t),t.m&&(t.a.responseType=t.m),"withCredentials"in t.a&&t.a.withCredentials!==t.S&&(t.a.withCredentials=t.S);try{Os(t),0<t.g&&(t.u=function(t){return Qt&&ae(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(t.a),ds(t.b,Ds(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.u)),t.u?(t.a.timeout=t.g,t.a.ontimeout=I(t.Ma,t)):t.s=kn(t.Ma,t.g,t)),ds(t.b,Ds(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(e){ds(t.b,Ds(t,"Send error: "+e.message)),Ss(t,e)}}(s,t,n,r,i)};var ca=new bt(Tt,"https://apis.google.com/js/client.js?onload=%{onload}"),ha="__fcb"+Math.floor(1e6*Math.random()).toString();function la(t){if("string"!=typeof(t=t.email)||!_r.test(t))throw new k("invalid-email")}function fa(t){"email"in t&&la(t)}function pa(t){if(!t[Zs]){if(t.mfaPendingCredential)throw new k("multi-factor-auth-required",null,vt(t));throw new k("internal-error")}}function da(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new k("internal-error")}else{if(!t.sessionInfo)throw new k("missing-verification-id");if(!t.code)throw new k("missing-verification-code")}}Xs.prototype.s=function(t,e,n,r,i){var o=this;Js.then((function(){window.gapi.client.setApiKey(o.c);var s=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:r,headers:i,authType:"none",callback:function(t){window.gapi.auth.setToken(s),e&&e(t)}})})).o((function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})}))},Xs.prototype.Ab=function(){return ru(this,Wa,{})},Xs.prototype.Cb=function(t,e){return ru(this,Ga,{idToken:t,email:e})},Xs.prototype.Db=function(t,e){return ru(this,Ha,{idToken:t,password:e})};var ga={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function va(t){if(!t.phoneVerificationInfo)throw new k("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new k("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new k("missing-verification-code")}function ma(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new k("internal-error")}function ya(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&er(t=new Xn(t.postBody),"nonce")&&(e.nonce=t.get("nonce"))),e}function _a(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=Yo(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=Yo(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=Yo(t)):t.errorMessage&&(e=iu(t.errorMessage)),e)throw e;pa(t)}function ba(t,e){return e.returnIdpCredential=!0,ru(t,$a,e)}function wa(t,e){return e.returnIdpCredential=!0,ru(t,Qa,e)}function Ia(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,ru(t,Ya,e)}function Ea(t){if(!t.oobCode)throw new k("invalid-action-code")}(t=Xs.prototype).Eb=function(t,e){var n={idToken:t},r=[];return dt(ga,(function(t,i){var o=e[i];null===o?r.push(t):i in e&&(n[i]=o)})),r.length&&(n.deleteAttribute=r),ru(this,Ga,n)},t.wb=function(t,e){return yt(t={requestType:"PASSWORD_RESET",email:t},e),ru(this,Fa,t)},t.xb=function(t,e){return yt(t={requestType:"EMAIL_SIGNIN",email:t},e),ru(this,La,t)},t.vb=function(t,e){return yt(t={requestType:"VERIFY_EMAIL",idToken:t},e),ru(this,Ma,t)},t.Fb=function(t,e,n){return yt(t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},n),ru(this,Ua,t)},t.gb=function(t){return ru(this,Za,t)},t.ob=function(t,e){return ru(this,Ba,{oobCode:t,newPassword:e})},t.Sa=function(t){return ru(this,Aa,{oobCode:t})},t.kb=function(t){return ru(this,Ta,{oobCode:t})};var Ta={endpoint:"setAccountInfo",A:Ea,Z:"email",B:!0},Aa={endpoint:"resetPassword",A:Ea,G:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new k("internal-error")},B:!0},Sa={endpoint:"signupNewUser",A:function(t){if(la(t),!t.password)throw new k("weak-password")},G:pa,V:!0,B:!0},ka={endpoint:"createAuthUri",B:!0},Na={endpoint:"deleteAccount",O:["idToken"]},Ca={endpoint:"setAccountInfo",O:["idToken","deleteProvider"],A:function(t){if(!Array.isArray(t.deleteProvider))throw new k("internal-error")}},Oa={endpoint:"emailLinkSignin",O:["email","oobCode"],A:la,G:pa,V:!0,B:!0},xa={endpoint:"emailLinkSignin",O:["idToken","email","oobCode"],A:la,G:pa,V:!0},Ra={endpoint:"accounts/mfaEnrollment:finalize",O:["idToken","phoneVerificationInfo"],A:va,G:pa,B:!0,Na:!0},Da={endpoint:"accounts/mfaSignIn:finalize",O:["mfaPendingCredential","phoneVerificationInfo"],A:va,G:pa,B:!0,Na:!0},Pa={endpoint:"getAccountInfo"},La={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new k("internal-error");la(t)},Z:"email",B:!0},Ma={endpoint:"getOobConfirmationCode",O:["idToken","requestType"],A:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new k("internal-error")},Z:"email",B:!0},Ua={endpoint:"getOobConfirmationCode",O:["idToken","newEmail","requestType"],A:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new k("internal-error")},Z:"email",B:!0},Fa={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(t){if("PASSWORD_RESET"!=t.requestType)throw new k("internal-error");la(t)},Z:"email",B:!0},ja={mb:!0,endpoint:"getProjectConfig",Vb:"GET"},qa={mb:!0,endpoint:"getRecaptchaParam",Vb:"GET",G:function(t){if(!t.recaptchaSiteKey)throw new k("internal-error")}},Ba={endpoint:"resetPassword",A:Ea,Z:"email",B:!0},Va={endpoint:"sendVerificationCode",O:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},Ga={endpoint:"setAccountInfo",O:["idToken"],A:fa,V:!0},Ha={endpoint:"setAccountInfo",O:["idToken"],A:function(t){if(fa(t),!t.password)throw new k("weak-password")},G:pa,V:!0},Wa={endpoint:"signupNewUser",G:pa,V:!0,B:!0},za={endpoint:"accounts/mfaEnrollment:start",O:["idToken","phoneEnrollmentInfo"],A:function(t){if(!t.phoneEnrollmentInfo)throw new k("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new k("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new k("missing-app-credential")},G:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new k("internal-error")},B:!0,Na:!0},Ka={endpoint:"accounts/mfaSignIn:start",O:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new k("missing-app-credential")},G:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new k("internal-error")},B:!0,Na:!0},$a={endpoint:"verifyAssertion",A:ma,Za:ya,G:_a,V:!0,B:!0},Ya={endpoint:"verifyAssertion",A:ma,Za:ya,G:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new k("user-not-found");if(t.errorMessage)throw iu(t.errorMessage);pa(t)},V:!0,B:!0},Qa={endpoint:"verifyAssertion",A:function(t){if(ma(t),!t.idToken)throw new k("internal-error")},Za:ya,G:_a,V:!0},Xa={endpoint:"verifyCustomToken",A:function(t){if(!t.token)throw new k("invalid-custom-token")},G:pa,V:!0,B:!0},Ja={endpoint:"verifyPassword",A:function(t){if(la(t),!t.password)throw new k("wrong-password")},G:pa,V:!0,B:!0},Za={endpoint:"verifyPhoneNumber",A:da,G:pa,B:!0},tu={endpoint:"verifyPhoneNumber",A:function(t){if(!t.idToken)throw new k("internal-error");da(t)},G:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",Yo(t);pa(t)}},eu={Ib:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:da,G:pa,B:!0},nu={endpoint:"accounts/mfaEnrollment:withdraw",O:["idToken","mfaEnrollmentId"],G:function(t){if(!!t[Zs]^!!t.refreshToken)throw new k("internal-error")},B:!0,Na:!0};function ru(t,e,n){if(!function(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var r=t[e[n]];if(null==r||""===r)return!1}return!0}(n,e.O))return Oe(new k("internal-error"));var r,i=!!e.Na,o=e.Vb||"POST";return Ce(n).then(e.A).then((function(){return e.V&&(n.returnSecureToken=!0),e.B&&t.b&&void 0===n.tenantId&&(n.tenantId=t.b),function(t,e,n,r,i,o,s){var a=Bn(e+n);jn(a,"key",t.c),s&&jn(a,"cb",Date.now().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&jn(a,c,i[c]);return new Ie((function(e,n){ua(t,a.toString(),(function(t){t?t.error?n(ou(t,o||{})):e(t):n(new k("network-request-failed"))}),r,u?void 0:or(jr(i)),t.a,t.v.get())}))}(t,i?t.i:t.h,e.endpoint,o,n,e.Ib,e.mb||!1)})).then((function(t){return r=t,e.Za?e.Za(n,r):r})).then(e.G).then((function(){if(!e.Z)return r;if(!(e.Z in r))throw new k("internal-error");return r[e.Z]}))}function iu(t){return ou({error:{errors:[{message:t}],code:400,message:t}})}function ou(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new k(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",yt(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new k(r[i],e);return!e&&t&&(e=Fr(t)),new k("internal-error",e)}function su(t){this.b=t,this.a=null,this.sb=function(t){return(hu||(hu=new Ie((function(t,e){function n(){Gr(),Rr("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){Gr(),e(Error("Network Error"))},timeout:uu.get()})}if(Rr("gapi.iframes.Iframe"))t();else if(Rr("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();u[r]=function(){Rr("gapi.load")?n():e(Error("Network Error"))},Ce(Hs(r=Nt(au,{onload:r}))).o((function(){e(Error("Network Error"))}))}})).o((function(t){throw hu=null,t})))).then((function(){return new Ie((function(e,n){Rr("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:Rr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},(function(r){function i(){clearTimeout(o),e()}t.a=r,t.a.restyle({setHideOnLeave:!1});var o=setTimeout((function(){n(Error("Network Error"))}),cu.get());r.ping(i).then(i,(function(){n(Error("Network Error"))}))}))}))}))}(this)}var au=new bt(Tt,"https://apis.google.com/js/api.js?onload=%{onload}"),uu=new Hr(3e4,6e4),cu=new Hr(5e3,15e3),hu=null;function lu(t,e,n,r){this.l=t,this.h=e,this.i=n,this.g=r,this.f=null,t=this.g?Vn((t=Bn(this.g.url)).c,t.a,t.g,"/emulator/auth/iframe"):Vn("https",this.l,null,"/__/auth/iframe"),this.a=t,jn(this.a,"apiKey",this.h),jn(this.a,"appName",this.i),this.b=null,this.c=[]}function fu(t,e,n,r,i,o){this.u=t,this.s=e,this.c=n,this.m=r,this.v=o,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function pu(t){try{return r.Z.app(t).auth().Ga()}catch(t){return[]}}function du(t,e,n,r,i,o){this.s=t,this.g=e,this.b=n,this.f=o,this.c=r||null,this.i=i||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function gu(t){var e=fr();return function(t){return ru(t,ja,{}).then((function(t){return t.authorizedDomains||[]}))}(t).then((function(t){t:{var n=Bn(e),r=n.c;n=n.a;for(var i=0;i<t.length;i++){var o=t[i],s=n,a=r;if(0==o.indexOf("chrome-extension://")?s=Bn(o).a==s&&"chrome-extension"==a:"http"!=a&&"https"!=a?s=!1:yr.test(o)?s=s==o:(o=o.split(".").join("\\."),s=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)),s){t=!0;break t}}t=!1}if(!t)throw new Ko(fr())}))}function vu(t){return t.m||(t.m=br().then((function(){if(!t.u){var e=t.c,n=t.i,r=pu(t.b),i=new lu(t.s,t.g,t.b,t.f);i.f=e,i.b=n,i.c=Z(r||[]),t.u=i.toString()}t.v=new su(t.u),function(t){if(!t.v)throw Error("IfcHandler must be initialized!");!function(t,e){t.sb.then((function(){t.a.register("authEvent",e,Rr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}(t.v,(function(e){var n={};if(e&&e.authEvent){var r=!1;for(e=Go(e.authEvent),n=0;n<t.h.length;n++)r=t.h[n](e)||r;return(n={}).status=r?"ACK":"ERROR",Ce(n)}return n.status="ERROR",Ce(n)}))}(t)}))),t.m}function mu(t){return t.l||(t.C=t.c?Or(t.c,pu(t.b)):null,t.l=new Xs(t.g,D(t.i),t.C),t.f&&oa(t.l,t.f)),t.l}function yu(t,e,n,r,i,o,s,a,u,c,h,l){return(t=new fu(t,e,n,r,i,l)).l=o,t.g=s,t.i=a,t.b=vt(u||null),t.f=c,t.zb(h).toString()}function _u(t){if(this.a=t||r.Z.INTERNAL.reactNative&&r.Z.INTERNAL.reactNative.AsyncStorage,!this.a)throw new k("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function bu(t){this.b=t,this.a={},this.f=I(this.c,this)}lu.prototype.toString=function(){return this.f?jn(this.a,"v",this.f):tr(this.a.b,"v"),this.b?jn(this.a,"eid",this.b):tr(this.a.b,"eid"),this.c.length?jn(this.a,"fw",this.c.join(",")):tr(this.a.b,"fw"),this.a.toString()},fu.prototype.zb=function(t){return this.h=t,this},fu.prototype.toString=function(){if(this.v){var t=Bn(this.v.url);t=Vn(t.c,t.a,t.g,"/emulator/auth/handler")}else t=Vn("https",this.u,null,"/__/auth/handler");if(jn(t,"apiKey",this.s),jn(t,"appName",this.c),jn(t,"authType",this.m),this.a.isOAuthProvider){var e=this.a;try{var n=r.Z.app(this.c).auth().la()}catch(t){n=null}for(var i in e.pb=n,jn(t,"providerId",this.a.providerId),e=jr((n=this.a).Jb))e[i]=e[i].toString();i=n.Qc,e=vt(e);for(var o=0;o<i.length;o++){var s=i[o];s in e&&delete e[s]}n.qb&&n.pb&&!e[n.qb]&&(e[n.qb]=n.pb),gt(e)||jn(t,"customParameters",Fr(e))}if("function"==typeof this.a.Rb&&(n=this.a.Rb()).length&&jn(t,"scopes",n.join(",")),this.l?jn(t,"redirectUrl",this.l):tr(t.b,"redirectUrl"),this.g?jn(t,"eventId",this.g):tr(t.b,"eventId"),this.i?jn(t,"v",this.i):tr(t.b,"v"),this.b)for(var a in this.b)this.b.hasOwnProperty(a)&&!qn(t,a)&&jn(t,a,this.b[a]);return this.h?jn(t,"tid",this.h):tr(t.b,"tid"),this.f?jn(t,"eid",this.f):tr(t.b,"eid"),(a=pu(this.c)).length&&jn(t,"fw",a.join(",")),t.toString()},(t=du.prototype).Pb=function(t,e,n){var r=new k("popup-closed-by-user"),i=new k("web-storage-unsupported"),o=this,s=!1;return this.ma().then((function(){(function(t){var e={type:"webStorageSupport"};return vu(t).then((function(){return function(t,e){return t.sb.then((function(){return new Ie((function(n){t.a.send(e.type,e,n,Rr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}))}(t.v,e)})).then((function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()}))})(o).then((function(n){n||(t&&vr(t),e(i),s=!0)}))})).o((function(){})).then((function(){if(!s)return function(t){return new Ie((function(e){return function n(){Nn(2e3).then((function(){if(t&&!t.closed)return n();e()}))}()}))}(t)})).then((function(){if(!s)return Nn(n).then((function(){e(r)}))}))},t.Yb=function(){var t=xr();return!Ur(t)&&!Vr(t)},t.Ub=function(){return!1},t.Nb=function(t,e,n,r,i,o,s,a){if(!t)return Oe(new k("popup-blocked"));if(s&&!Ur())return this.ma().o((function(e){vr(t),i(e)})),r(),Ce();this.a||(this.a=gu(mu(this)));var u=this;return this.a.then((function(){var e=u.ma().o((function(e){throw vr(t),i(e),e}));return r(),e})).then((function(){Bo(n),s||pr(yu(u.s,u.g,u.b,e,n,null,o,u.c,void 0,u.i,a,u.f),t)})).o((function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t}))},t.Ob=function(t,e,n,r){this.a||(this.a=gu(mu(this)));var i=this;return this.a.then((function(){Bo(e),pr(yu(i.s,i.g,i.b,t,e,fr(),n,i.c,void 0,i.i,r,i.f))})).o((function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t}))},t.ma=function(){var t=this;return vu(this).then((function(){return t.v.sb})).o((function(){throw t.a=null,new k("network-request-failed")}))},t.ac=function(){return!0},t.Ea=function(t){this.h.push(t)},t.Ta=function(t){X(this.h,(function(e){return e==t}))},(t=_u.prototype).get=function(t){return Ce(this.a.getItem(t)).then((function(t){return t&&qr(t)}))},t.set=function(t,e){return Ce(this.a.setItem(t,Fr(e)))},t.U=function(t){return Ce(this.a.removeItem(t))},t.ca=function(){},t.ia=function(){};var wu,Iu=[];function Eu(t,e,n){gt(t.a)&&t.b.addEventListener("message",t.f),void 0===t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function Tu(t){this.a=t}function Au(t){this.c=t,this.b=!1,this.a=[]}function Su(t,e,n,r){var i,o,s,a,u=n||{},c=null;if(t.b)return Oe(Error("connection_unavailable"));var h=r?800:50,l="undefined"!=typeof MessageChannel?new MessageChannel:null;return new Ie((function(n,r){l?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),l.port1.start(),s=setTimeout((function(){r(Error("unsupported_event"))}),h),o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(s),a=setTimeout((function(){r(Error("timeout"))}),3e3)):"done"===t.data.status?(clearTimeout(a),void 0!==t.data.response?n(t.data.response):r(Error("unknown_error"))):(clearTimeout(s),clearTimeout(a),r(Error("invalid_response"))))},c={messageChannel:l,onMessage:o},t.a.push(c),l.port1.addEventListener("message",o),t.c.postMessage({eventType:e,eventId:i,data:u},[l.port2])):r(Error("connection_unavailable"))})).then((function(e){return ku(t,c),e})).o((function(e){throw ku(t,c),e}))}function ku(t,e){if(e){var n=e.messageChannel,r=e.onMessage;n&&(n.port1.removeEventListener("message",r),n.port1.close()),X(t.a,(function(t){return t==e}))}}function Nu(){if(!Ru())throw new k("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=u.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var t=this;Er()&&self?(this.v=function(){var t=Er()?self:null;if(W(Iu,(function(n){n.b==t&&(e=n)})),!e){var e=new bu(t);Iu.push(e)}return e}(),Eu(this.v,"keyChanged",(function(e,n){return Uu(t).then((function(e){return 0<e.length&&W(t.a,(function(t){t(e)})),{keyProcessed:Y(e,n.key)}}))})),Eu(this.v,"ping",(function(){return Ce(["keyChanged"])}))):function(){var t=u.navigator;return t&&t.serviceWorker?Ce().then((function(){return t.serviceWorker.ready})).then((function(t){return t.active||null})).o((function(){return null})):Ce(null)}().then((function(e){(t.h=e)&&(t.g=new Au(new Tu(e)),Su(t.g,"ping",null,!0).then((function(e){e[0].fulfilled&&Y(e[0].value,"keyChanged")&&(t.s=!0)})).o((function(){})))}))}function Cu(t){return new Ie((function(e,n){var r=t.m.open("firebaseLocalStorageDb",1);r.onerror=function(t){try{t.preventDefault()}catch(t){}n(Error(t.target.error))},r.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(t){n(t)}},r.onsuccess=function(r){(r=r.target.result).objectStoreNames.contains("firebaseLocalStorage")?e(r):function(t){return new Ie((function(e,n){var r=t.m.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){e()},r.onerror=function(t){n(Error(t.target.error))}}))}(t).then((function(){return Cu(t)})).then((function(t){e(t)})).o((function(t){n(t)}))}}))}function Ou(t){return t.i||(t.i=Cu(t)),t.i}function xu(t,e){var n=0;return new Ie((function r(i,o){Ou(t).then(e).then(i).o((function(e){if(!(3<++n))return Ou(t).then((function(e){return e.close(),t.i=void 0,r(i,o)})).o((function(t){o(t)}));o(e)}))}))}function Ru(){try{return!!u.indexedDB}catch(t){return!1}}function Du(t){return t.objectStore("firebaseLocalStorage")}function Pu(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function Lu(t){return new Ie((function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}}))}function Mu(t,e){return t.g&&t.h&&function(){var t=u.navigator;return t&&t.serviceWorker&&t.serviceWorker.controller||null}()===t.h?Su(t.g,"keyChanged",{key:e},t.s).then((function(){})).o((function(){})):Ce()}function Uu(t){return Ou(t).then((function(t){var e=Du(Pu(t,!1));return e.getAll?Lu(e.getAll()):new Ie((function(t,n){var r=[],i=e.openCursor();i.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e.continue()):t(r)},i.onerror=function(t){n(t.target.error)}}))})).then((function(e){var n={},r=[];if(0==t.b){for(r=0;r<e.length;r++)n[e[r].fbase_key]=e[r].value;r=dr(t.c,n),t.c=n}return r}))}function Fu(t){t.l&&t.l.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function ju(t){var e=this,n=null;this.a=[],this.type="indexedDB",this.c=t,this.b=Ce().then((function(){if(Ru()){var t=Br(),r="__sak"+t;return wu||(wu=new Nu),(n=wu).set(r,t).then((function(){return n.get(r)})).then((function(e){if(e!==t)throw Error("indexedDB not supported!");return n.U(r)})).then((function(){return n})).o((function(){return e.c}))}return e.c})).then((function(t){return e.type=t.type,t.ca((function(t){W(e.a,(function(e){e(t)}))})),t}))}function qu(){this.a={},this.type="inMemory"}function Bu(){if(!function(){var t="Node"==Tr();if(!(t=Vu()||t&&r.Z.INTERNAL.node&&r.Z.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==Tr())throw new k("internal-error","The LocalStorage compatibility library was not found.");throw new k("web-storage-unsupported")}this.a=Vu()||r.Z.INTERNAL.node.localStorage,this.type="localStorage"}function Vu(){try{var t=u.localStorage,e=Br();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Gu(){this.type="nullStorage"}function Hu(){if(!function(){var t="Node"==Tr();if(!(t=Wu()||t&&r.Z.INTERNAL.node&&r.Z.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==Tr())throw new k("internal-error","The SessionStorage compatibility library was not found.");throw new k("web-storage-unsupported")}this.a=Wu()||r.Z.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Wu(){try{var t=u.sessionStorage,e=Br();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function zu(){var t={};t.Browser=Yu,t.Node=Qu,t.ReactNative=Xu,t.Worker=Ju,this.a=t[Tr()]}bu.prototype.c=function(t){var e=t.data.eventType,n=t.data.eventId,r=this.a[e];if(r&&0<r.length){t.ports[0].postMessage({status:"ack",eventId:n,eventType:e,response:null});var i=[];W(r,(function(e){i.push(Ce().then((function(){return e(t.origin,t.data.data)})))})),Re(i).then((function(r){var i=[];W(r,(function(t){i.push({fulfilled:t.Qb,value:t.value,reason:t.reason?t.reason.message:void 0})})),W(i,(function(t){for(var e in t)void 0===t[e]&&delete t[e]})),t.ports[0].postMessage({status:"done",eventId:n,eventType:e,response:i})}))}},Tu.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},Au.prototype.close=function(){for(;0<this.a.length;)ku(this,this.a[0]);this.b=!0},(t=Nu.prototype).set=function(t,e){var n=this,r=!1;return xu(this,(function(e){return Lu((e=Du(Pu(e,!0))).get(t))})).then((function(i){return xu(n,(function(o){if(o=Du(Pu(o,!0)),i)return i.value=e,Lu(o.put(i));n.b++,r=!0;var s={};return s.fbase_key=t,s.value=e,Lu(o.add(s))}))})).then((function(){return n.c[t]=e,Mu(n,t)})).oa((function(){r&&n.b--}))},t.get=function(t){return xu(this,(function(e){return Lu(Du(Pu(e,!1)).get(t))})).then((function(t){return t&&t.value}))},t.U=function(t){var e=this,n=!1;return xu(this,(function(r){return n=!0,e.b++,Lu(Du(Pu(r,!0)).delete(t))})).then((function(){return delete e.c[t],Mu(e,t)})).oa((function(){n&&e.b--}))},t.ca=function(t){0==this.a.length&&function(t){Fu(t),function e(){t.f=setTimeout((function(){t.l=Uu(t).then((function(e){0<e.length&&W(t.a,(function(t){t(e)}))})).then((function(){e()})).o((function(t){"STOP_EVENT"!=t.message&&e()}))}),800)}()}(this),this.a.push(t)},t.ia=function(t){X(this.a,(function(e){return e==t})),0==this.a.length&&Fu(this)},(t=ju.prototype).get=function(t){return this.b.then((function(e){return e.get(t)}))},t.set=function(t,e){return this.b.then((function(n){return n.set(t,e)}))},t.U=function(t){return this.b.then((function(e){return e.U(t)}))},t.ca=function(t){this.a.push(t)},t.ia=function(t){X(this.a,(function(e){return e==t}))},(t=qu.prototype).get=function(t){return Ce(this.a[t])},t.set=function(t,e){return this.a[t]=e,Ce()},t.U=function(t){return delete this.a[t],Ce()},t.ca=function(){},t.ia=function(){},(t=Bu.prototype).get=function(t){var e=this;return Ce().then((function(){return qr(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return Ce().then((function(){var r=Fr(e);null===r?n.U(t):n.a.setItem(t,r)}))},t.U=function(t){var e=this;return Ce().then((function(){e.a.removeItem(t)}))},t.ca=function(t){u.window&&ln(u.window,"storage",t)},t.ia=function(t){u.window&&dn(u.window,"storage",t)},(t=Gu.prototype).get=function(){return Ce(null)},t.set=function(){return Ce()},t.U=function(){return Ce()},t.ca=function(){},t.ia=function(){},(t=Hu.prototype).get=function(t){var e=this;return Ce().then((function(){return qr(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return Ce().then((function(){var r=Fr(e);null===r?n.U(t):n.a.setItem(t,r)}))},t.U=function(t){var e=this;return Ce().then((function(){e.a.removeItem(t)}))},t.ca=function(){},t.ia=function(){};var Ku,$u,Yu={F:Bu,cb:Hu},Qu={F:Bu,cb:Hu},Xu={F:_u,cb:Gu},Ju={F:Bu,cb:Gu},Zu={rd:"local",NONE:"none",td:"session"};function tc(){var t=!(Vr(xr())||!Ir()),e=Ur(),n=Dr();this.m=t,this.h=e,this.l=n,this.a={},Ku||(Ku=new zu),t=Ku;try{this.g=!lr()&&Kr()||!u.indexedDB?new t.a.F:new ju(Er()?new qu:new t.a.F)}catch(t){this.g=new qu,this.h=!0}try{this.i=new t.a.cb}catch(t){this.i=new qu}this.v=new qu,this.f=I(this.Zb,this),this.b={}}function ec(){return $u||($u=new tc),$u}function nc(t,e){switch(e){case"session":return t.i;case"none":return t.v;default:return t.g}}function rc(t,e){return"firebase:"+t.name+(e?":"+e:"")}function ic(t,e,n){return n=rc(e,n),"local"==e.F&&(t.b[n]=null),nc(t,e.F).U(n)}function oc(t){t.c&&(clearInterval(t.c),t.c=null)}function sc(t){this.a=t,this.b=ec()}(t=tc.prototype).get=function(t,e){return nc(this,t.F).get(rc(t,e))},t.set=function(t,e,n){var r=rc(t,n),i=this,o=nc(this,t.F);return o.set(r,e).then((function(){return o.get(r)})).then((function(e){"local"==t.F&&(i.b[r]=e)}))},t.addListener=function(t,e,n){t=rc(t,e),this.l&&(this.b[t]=u.localStorage.getItem(t)),gt(this.a)&&(nc(this,"local").ca(this.f),this.h||(lr()||!Kr())&&u.indexedDB||!this.l||function(t){oc(t),t.c=setInterval((function(){for(var e in t.a){var n=u.localStorage.getItem(e),r=t.b[e];n!=r&&(t.b[e]=n,n=new Ze({type:"storage",key:e,target:window,oldValue:r,newValue:n,a:!0}),t.Zb(n))}}),1e3)}(this)),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=rc(t,e),this.a[t]&&(X(this.a[t],(function(t){return t==n})),0==this.a[t].length&&delete this.a[t]),gt(this.a)&&(nc(this,"local").ia(this.f),oc(this))},t.Zb=function(t){if(t&&t.g){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=u.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.nb(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?nc(this,"local").ia(this.f):oc(this),this.m)if(n=u.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?u.localStorage.setItem(e,r):u.localStorage.removeItem(e);else if(this.b[e]===r&&void 0===t.a.a)return;var o=this;n=function(){void 0===t.a.a&&o.b[e]===u.localStorage.getItem(e)||(o.b[e]=u.localStorage.getItem(e),o.nb(e))},Qt&&ue&&10==ue&&u.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else W(t,I(this.nb,this))},t.nb=function(t){this.a[t]&&W(this.a[t],(function(t){t()}))};var ac,uc={name:"authEvent",F:"local"};function cc(){this.a=ec()}function hc(t,e){this.b=lc,this.f=u.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=u.Int32Array?new Int32Array(64):Array(64),void 0===ac&&(ac=u.Int32Array?new Int32Array(yc):yc),this.reset()}A(hc,(function(){this.b=-1}));for(var lc=64,fc=lc-1,pc=[],dc=0;dc<fc;dc++)pc[dc]=0;var gc=J(128,pc);function vc(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;64>e;e++){i=0|n[e-15],r=0|n[e-2];var o=(0|n[e-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,s=(0|n[e-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+s|0}r=0|t.a[0],i=0|t.a[1];var a=0|t.a[2],u=0|t.a[3],c=0|t.a[4],h=0|t.a[5],l=0|t.a[6];for(o=0|t.a[7],e=0;64>e;e++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&a^i&a)|0;s=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((s=(s=c&h^~c&l)+(0|ac[e])|0)+(0|n[e])|0)|0,o=l,l=h,h=c,c=u+s|0,u=a,a=i,i=r,r=s+f|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+a|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+h|0,t.a[6]=t.a[6]+l|0,t.a[7]=t.a[7]+o|0}function mc(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if("string"==typeof e)for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(vc(t),i=0);else{if(!d(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(vc(t),i=0)}}t.c=i,t.g+=n}hc.prototype.reset=function(){this.g=this.c=0,this.a=u.Int32Array?new Int32Array(this.h):Z(this.h)};var yc=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function _c(){hc.call(this,8,bc)}A(_c,hc);var bc=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function wc(t,e,n,r,i,o){this.v=t,this.i=e,this.l=n,this.m=r||null,this.u=i||null,this.s=o,this.h=e+":"+n,this.C=new cc,this.g=new sc(this.h),this.f=null,this.b=[],this.a=this.c=null}function Ic(t){return new k("invalid-cordova-configuration",t)}function Ec(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(t){}}function Tc(t){return t.f||(t.f=t.ma().then((function(){return new Ie((function(e){t.Ea((function n(r){return e(r),t.Ta(n),!1})),function(t){function e(e){r=!0,i&&i.cancel(),Ac(t).then((function(r){var i=n;if(r&&e&&e.url){var o=null;-1!=(i=so(e.url)).indexOf("/__/auth/callback")&&(o=(o="object"==typeof(o=qr(qn(o=Bn(i),"firebaseError")||null))?N(o):null)?new Vo(r.c,r.b,null,null,o,null,r.T()):new Vo(r.c,r.b,i,r.f,null,null,r.T())),i=o||n}Ec(t,i)}))}var n=new Vo("unknown",null,null,null,new k("no-auth-event")),r=!1,i=Nn(500).then((function(){return Ac(t).then((function(){r||Ec(t,n)}))})),o=u.handleOpenURL;u.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(Rr("BuildInfo.packageName",u).toLowerCase()+"://")&&e({url:t}),"function"==typeof o)try{o(t)}catch(t){console.error(t)}},zo||(zo=new Ho),function(t){var e=zo;e.a.push(t),e.b||(e.b=function(t){for(var n=0;n<e.a.length;n++)e.a[n](t)},"function"==typeof(t=Rr("universalLinks.subscribe",u))&&t(null,e.b))}(e)}(t)}))}))),t.f}function Ac(t){var e=null;return function(t){return t.b.get(uc,t.a).then((function(t){return Go(t)}))}(t.g).then((function(n){return e=n,ic((n=t.g).b,uc,n.a)})).then((function(){return e}))}function Sc(t){this.a=t,this.b=ec()}(t=wc.prototype).ma=function(){return this.Ia?this.Ia:this.Ia=(wr(void 0)?br().then((function(){return new Ie((function(t,e){var n=u.document,r=setTimeout((function(){e(Error("Cordova framework is not ready."))}),1e3);n.addEventListener("deviceready",(function(){clearTimeout(r),t()}),!1)}))})):Oe(Error("Cordova must run in an Android or iOS file scheme."))).then((function(){if("function"!=typeof Rr("universalLinks.subscribe",u))throw Ic("cordova-universal-links-plugin-fix is not installed");if(void 0===Rr("BuildInfo.packageName",u))throw Ic("cordova-plugin-buildinfo is not installed");if("function"!=typeof Rr("cordova.plugins.browsertab.openUrl",u))throw Ic("cordova-plugin-browsertab is not installed");if("function"!=typeof Rr("cordova.InAppBrowser.open",u))throw Ic("cordova-plugin-inappbrowser is not installed")}),(function(){throw new k("cordova-not-ready")}))},t.Pb=function(t,e){return e(new k("operation-not-supported-in-this-environment")),Ce()},t.Nb=function(){return Oe(new k("operation-not-supported-in-this-environment"))},t.ac=function(){return!1},t.Yb=function(){return!0},t.Ub=function(){return!0},t.Ob=function(t,e,n,r){if(this.c)return Oe(new k("redirect-operation-pending"));var i=this,o=u.document,s=null,a=null,c=null,h=null;return this.c=Ce().then((function(){return Bo(e),Tc(i)})).then((function(){return function(t,e,n,r,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),s=new Vo(e,r,null,o,new k("no-auth-event"),null,i),a=Rr("BuildInfo.packageName",u);if("string"!=typeof a)throw new k("invalid-cordova-configuration");var c=Rr("BuildInfo.displayName",u),h={};if(xr().toLowerCase().match(/iphone|ipad|ipod/))h.ibi=a;else{if(!xr().toLowerCase().match(/android/))return Oe(new k("operation-not-supported-in-this-environment"));h.apn=a}c&&(h.appDisplayName=c),o=function(t){var e=new _c;mc(e,t),t=[];var n=8*e.g;56>e.c?mc(e,gc,56-e.c):mc(e,gc,e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(vc(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return function(t){return K(t,(function(t){return 1<(t=t.toString(16)).length?t:"0"+t})).join("")}(t)}(o),h.sessionId=o;var l=yu(t.v,t.i,t.l,e,n,null,r,t.m,h,t.u,i,t.s);return t.ma().then((function(){var e=t.h;return t.C.a.set(uc,s.w(),e)})).then((function(){var e=Rr("cordova.plugins.browsertab.isAvailable",u);if("function"!=typeof e)throw new k("invalid-cordova-configuration");var n=null;e((function(e){if(e){if("function"!=typeof(n=Rr("cordova.plugins.browsertab.openUrl",u)))throw new k("invalid-cordova-configuration");n(l)}else{if("function"!=typeof(n=Rr("cordova.InAppBrowser.open",u)))throw new k("invalid-cordova-configuration");e=xr(),t.a=n(l,e.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}}))}))}(i,t,e,n,r)})).then((function(){return new Ie((function(t,e){a=function(){var e=Rr("cordova.plugins.browsertab.close",u);return t(),"function"==typeof e&&e(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ea(a),c=function(){s||(s=Nn(2e3).then((function(){e(new k("redirect-cancelled-by-user"))})))},h=function(){Wr()&&c()},o.addEventListener("resume",c,!1),xr().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",h,!1)})).o((function(t){return Ac(i).then((function(){throw t}))}))})).oa((function(){c&&o.removeEventListener("resume",c,!1),h&&o.removeEventListener("visibilitychange",h,!1),s&&s.cancel(),a&&i.Ta(a),i.c=null}))},t.Ea=function(t){this.b.push(t),Tc(this).o((function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new Vo("unknown",null,null,null,new k("no-auth-event")),t(e))}))},t.Ta=function(t){X(this.b,(function(e){return e==t}))};var kc={name:"pendingRedirect",F:"session"};function Nc(t){return ic(t.b,kc,t.a)}function Cc(t,e,n,r){this.i={},this.u=0,this.D=t,this.v=e,this.m=n,this.J=r,this.h=[],this.f=!1,this.l=I(this.s,this),this.b=new Hc,this.C=new Yc,this.g=new Sc(Vc(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=Oc(this.D,this.v,this.m,C,this.J)}function Oc(t,e,n,i,o){var s=r.Z.SDK_VERSION||null;return wr()?new wc(t,e,n,s,i,o):new du(t,e,n,s,i,o)}function xc(t){t.f||(t.f=!0,t.a.Ea(t.l));var e=t.a;return t.a.ma().o((function(n){throw t.a==e&&t.reset(),n}))}function Rc(t){t.a.Yb()&&xc(t).o((function(e){var n=new Vo("unknown",null,null,null,new k("operation-not-supported-in-this-environment"));Fc(e)&&t.s(n)})),t.a.Ub()||Wc(t.b)}function Dc(t,e){Y(t.h,e)||t.h.push(e),t.f||function(t){return t.b.get(kc,t.a).then((function(t){return"pending"==t}))}(t.g).then((function(e){e?Nc(t.g).then((function(){xc(t).o((function(e){var n=new Vo("unknown",null,null,null,new k("operation-not-supported-in-this-environment"));Fc(e)&&t.s(n)}))})):Rc(t)})).o((function(){Rc(t)}))}function Pc(t,e){X(t.h,(function(t){return t==e}))}Cc.prototype.reset=function(){this.f=!1,this.a.Ta(this.l),this.a=Oc(this.D,this.v,this.m,null,this.J),this.i={}},Cc.prototype.s=function(t){if(!t)throw new k("invalid-auth-event");if(6e5<=Date.now()-this.u&&(this.i={},this.u=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Gb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.u=Date.now())),e=!0;break}}return Wc(this.b),e};var Lc=new Hr(2e3,1e4),Mc=new Hr(3e4,6e4);function Uc(t,e,n,r,i,o,s){return t.a.Nb(e,n,r,(function(){t.f||(t.f=!0,t.a.Ea(t.l))}),(function(){t.reset()}),i,o,s)}function Fc(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function jc(t,e,n,r,i){var o;return function(t){return t.b.set(kc,"pending",t.a)}(t.g).then((function(){return t.a.Ob(e,n,r,i).o((function(e){if(Fc(e))throw new k("operation-not-supported-in-this-environment");return o=e,Nc(t.g).then((function(){throw o}))})).then((function(){return t.a.ac()?new Ie((function(){})):Nc(t.g).then((function(){return t.ra()})).then((function(){})).o((function(){}))}))}))}function qc(t,e,n,r,i){return t.a.Pb(r,(function(t){e.na(n,null,t,i)}),Lc.get())}Cc.prototype.ra=function(){return this.b.ra()};var Bc={};function Vc(t,e,n){return t=t+":"+e,n&&(t=t+":"+n.url),t}function Gc(t,e,n,r){var i=Vc(e,n,r);return Bc[i]||(Bc[i]=new Cc(t,e,n,r)),Bc[i]}function Hc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function Wc(t){t.g||(t.g=!0,$c(t,!1,null,null))}function zc(t){t.g&&!t.i&&$c(t,!1,null,null)}function Kc(t,e){if(t.b=function(){return Ce(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function $c(t,e,n,r){e?r?function(t,e){if(t.b=function(){return Oe(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):Kc(t,n):Kc(t,{user:null}),t.f=[],t.c=[]}function Yc(){}function Qc(){this.jb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.jb},set:function(t){this.jb=t},enumerable:!1})}function Xc(t,e){this.a=e,Jr(this,"verificationId",t)}function Jc(t,e,n,r){return new Fo(t).gb(e,n).then((function(t){return new Xc(t,r)}))}function Zc(t){var e=zi(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new k("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Zr(this,{token:t,expirationTime:zr(1e3*e.exp),authTime:zr(1e3*e.auth_time),issuedAtTime:zr(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function th(t,e,n){var r=e&&e[nh];if(!r)throw new k("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=vt(e),this.g=n,this.c=new ao(null,r),this.b=[];var i=this;W(e[eh]||[],(function(t){(t=ri(t))&&i.b.push(t)})),Jr(this,"auth",this.a),Jr(this,"session",this.c),Jr(this,"hints",this.b)}Hc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Hc.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?($c(this,!0,null,t.a),Ce()):e.Fa(n,r)?function(t,e,n){n=n.Fa(e.c,e.b);var r=e.g,i=e.f,o=e.i,s=e.T(),a=!!e.c.match(/Redirect$/);n(r,i,s,o).then((function(e){$c(t,a,e,null)})).o((function(e){$c(t,a,null,e)}))}(this,t,e):Oe(new k("invalid-auth-event")):($c(this,!1,null,null),Ce())}else Oe(new k("invalid-auth-event"))},Hc.prototype.ra=function(){var t=this;return new Ie((function(e,n){t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),function(t){var e=new k("timeout");t.a&&t.a.cancel(),t.a=Nn(Mc.get()).then((function(){t.b||(t.g=!0,$c(t,!0,null,e))}))}(t))}))},Yc.prototype.h=function(t,e){if(t){var n=t.c,r=t.b;t.a?(e.na(t.c,null,t.a,t.b),Ce()):e.Fa(n,r)?function(t,e){var n=t.b,r=t.c;e.Fa(r,n)(t.g,t.f,t.T(),t.i).then((function(t){e.na(r,t,null,n)})).o((function(t){e.na(r,null,t,n)}))}(t,e):Oe(new k("invalid-auth-event"))}else Oe(new k("invalid-auth-event"))},Xc.prototype.confirm=function(t){return t=jo(this.verificationId,t),this.a(t)};var eh="mfaInfo",nh="mfaPendingCredential";function rh(t,e,n,r){k.call(this,"multi-factor-auth-required",r,e),this.b=new th(t,e,n),Jr(this,"resolver",this.b)}function ih(t,e,n){if(t&&v(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new rh(e,t.serverResponse,n,t.message)}catch(t){}return null}function oh(){}function sh(t){Jr(this,"factorId",t.fa),this.a=t}function ah(t){if(sh.call(this,t),this.a.fa!=Fo.PROVIDER_ID)throw new k("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function uh(t,e){for(var n in Je.call(this,t),e)this[n]=e[n]}function ch(t,e){this.a=t,this.b=[],this.c=I(this.yc,this),ln(this.a,"userReloaded",this.c);var n=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&W(e.multiFactor.enrolledFactors,(function(t){var e=null,r={};if(t){t.uid&&(r[si]=t.uid),t.displayName&&(r[ii]=t.displayName),t.enrollmentTime&&(r[oi]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(r[ai]=t.phoneNumber);try{e=new ui(r)}catch(t){}t=e}else t=null;t&&n.push(t)})),hh(this,n)}function hh(t,e){t.b=e,Jr(t,"enrolledFactors",e)}function lh(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function fh(t,e){t.stop(),t.b=Nn(function(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}(t,e)).then((function(){return function(){var t=u.document,e=null;return Wr()||!t?Ce():new Ie((function(n){e=function(){Wr()&&(t.removeEventListener("visibilitychange",e,!1),n())},t.addEventListener("visibilitychange",e,!1)})).o((function(n){throw t.removeEventListener("visibilitychange",e,!1),n}))}()})).then((function(){return t.h()})).then((function(){fh(t,!0)})).o((function(e){t.i(e)&&fh(t,!1)}))}function ph(t){this.f=t,this.b=this.a=null,this.c=Date.now()}function dh(t,e){void 0===e&&(e=t.b?(e=t.b).a-e.g:0),t.c=Date.now()+1e3*e}function gh(t,e){t.b=Wi(e[Zs]||""),t.a=e.refreshToken,dh(t,void 0!==(e=e.expiresIn)?Number(e):void 0)}function vh(t,e){this.a=t||null,this.b=e||null,Zr(this,{lastSignInTime:zr(e||null),creationTime:zr(t||null)})}function mh(t,e,n,r,i,o){Zr(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function yh(t,e,n){this.N=[],this.l=t.apiKey,this.m=t.appName,this.s=t.authDomain||null;var i=r.Z.SDK_VERSION?Or(r.Z.SDK_VERSION):null;this.a=new Xs(this.l,D(C),i),(this.u=t.emulatorConfig||null)&&oa(this.a,this.u),this.h=new ph(this.a),kh(this,e[Zs]),gh(this.h,e),Jr(this,"refreshToken",this.h.a),Oh(this,n||{}),En.call(this),this.P=!1,this.s&&Pr()&&(this.b=Gc(this.s,this.l,this.m,this.u)),this.W=[],this.i=null,this.D=function(t){return new lh((function(){return t.I(!0)}),(function(t){return!(!t||"auth/network-request-failed"!=t.code)}),(function(){var e=t.h.c-Date.now()-3e5;return 0<e?e:0}))}(this),this.ba=I(this.ib,this);var o=this;this.za=null,this.Pa=function(t){o.xa(t.h)},this.qa=null,this.Ba=function(t){_h(o,t.c)},this.$=null,this.aa=[],this.Oa=function(t){Ih(o,t.f)},this.ja=null,this.S=new ch(this,n),Jr(this,"multiFactor",this.S)}function _h(t,e){t.u=e,oa(t.a,e),t.b&&(e=t.b,t.b=Gc(t.s,t.l,t.m,t.u),t.P&&(Pc(e,t),Dc(t.b,t)))}function bh(t,e){t.qa&&dn(t.qa,"languageCodeChanged",t.Pa),(t.qa=e)&&ln(e,"languageCodeChanged",t.Pa)}function wh(t,e){t.$&&dn(t.$,"emulatorConfigChanged",t.Ba),(t.$=e)&&ln(e,"emulatorConfigChanged",t.Ba)}function Ih(t,e){t.aa=e,aa(t.a,r.Z.SDK_VERSION?Or(r.Z.SDK_VERSION,t.aa):null)}function Eh(t,e){t.ja&&dn(t.ja,"frameworkChanged",t.Oa),(t.ja=e)&&ln(e,"frameworkChanged",t.Oa)}function Th(t){try{return r.Z.app(t.m).auth()}catch(e){throw new k("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.m+"'!")}}function Ah(t){t.J||t.D.b||(t.D.start(),dn(t,"tokenChanged",t.ba),ln(t,"tokenChanged",t.ba))}function Sh(t){dn(t,"tokenChanged",t.ba),t.D.stop()}function kh(t,e){t.Aa=e,Jr(t,"_lat",e)}function Nh(t){for(var e=[],n=0;n<t.W.length;n++)e.push(t.W[n](t));return Re(e).then((function(){return t}))}function Ch(t){t.b&&!t.P&&(t.P=!0,Dc(t.b,t))}function Oh(t,e){Zr(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new vh(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function xh(){}function Rh(t){return Ce().then((function(){if(t.J)throw new k("app-deleted")}))}function Dh(t){return K(t.providerData,(function(t){return t.providerId}))}function Ph(t,e){e&&(Lh(t,e.providerId),t.providerData.push(e))}function Lh(t,e){X(t.providerData,(function(t){return t.providerId==e}))}function Mh(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&Jr(t,e,n)}function Uh(t,e){t!=e&&(Zr(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,tenantId:e.tenantId,providerData:[]}),e.metadata?Jr(t,"metadata",function(t){return new vh(t.a,t.b)}(e.metadata)):Jr(t,"metadata",new vh),W(e.providerData,(function(e){Ph(t,e)})),function(t,e){t.b=e.b,t.a=e.a,t.c=e.c}(t.h,e.h),Jr(t,"refreshToken",t.h.a),hh(t.S,e.S.b))}function Fh(t){return t.I().then((function(e){var n=t.isAnonymous;return function(t,e){return ru(t.a,Pa,{idToken:e}).then(I(t.Kc,t))}(t,e).then((function(){return n||Mh(t,"isAnonymous",!1),e}))}))}function jh(t,e){e[Zs]&&t.Aa!=e[Zs]&&(gh(t.h,e),t.dispatchEvent(new uh("tokenChanged")),kh(t,e[Zs]),Mh(t,"refreshToken",t.h.a))}function qh(t,e){return Fh(t).then((function(){if(Y(Dh(t),e))return Nh(t).then((function(){throw new k("provider-already-linked")}))}))}function Bh(t,e,n){return ti({user:t,credential:qo(e),additionalUserInfo:e=Xi(e),operationType:n})}function Vh(t,e){return jh(t,e),t.reload().then((function(){return t}))}function Gh(t,e,n,i,o){if(!Pr())return Oe(new k("operation-not-supported-in-this-environment"));if(t.i&&!o)return Oe(t.i);var s=Qi(n.providerId),a=Br(t.uid+":::"),u=null;(!Ur()||Ir())&&t.s&&n.isOAuthProvider&&(u=yu(t.s,t.l,t.m,e,n,null,a,r.Z.SDK_VERSION||null,null,null,t.tenantId,t.u));var c=mr(u,s&&s.va,s&&s.ua);return i=i().then((function(){if(Wh(t),!o)return t.I().then((function(){}))})).then((function(){return Uc(t.b,c,e,n,a,!!u,t.tenantId)})).then((function(){return new Ie((function(n,r){t.na(e,null,new k("cancelled-popup-request"),t.g||null),t.f=n,t.C=r,t.g=a,t.c=qc(t.b,t,e,c,a)}))})).then((function(t){return c&&vr(c),t?ti(t):null})).o((function(t){throw c&&vr(c),t})),zh(t,i,o)}function Hh(t,e,n,r,i){if(!Pr())return Oe(new k("operation-not-supported-in-this-environment"));if(t.i&&!i)return Oe(t.i);var o=null,s=Br(t.uid+":::");return r=r().then((function(){if(Wh(t),!i)return t.I().then((function(){}))})).then((function(){return t.ga=s,Nh(t)})).then((function(e){return t.ha&&(e=(e=t.ha).b.set(Yh,t.w(),e.a)),e})).then((function(){return jc(t.b,e,n,s,t.tenantId)})).o((function(e){if(o=e,t.ha)return Qh(t.ha);throw o})).then((function(){if(o)throw o})),zh(t,r,i)}function Wh(t){if(!t.b||!t.P){if(t.b&&!t.P)throw new k("internal-error");throw new k("auth-domain-config-required")}}function zh(t,e,n){var r=function(t,e,n){return t.i&&!n?(e.cancel(),Oe(t.i)):e.o((function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(t.i||t.dispatchEvent(new uh("userInvalidated")),t.i=e),e}))}(t,e,n);return t.N.push(r),r.oa((function(){Q(t.N,r)})),r.o((function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=ih(e.w(),Th(t),I(t.jc,t))),n||e}))}function Kh(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName,emulatorConfig:t.emulatorConfig},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[Zs]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var r=t.stsTokenManager.expirationTime;r&&(n.expiresIn=(r-Date.now())/1e3);var i=new yh(e,n,t);return t.providerData&&W(t.providerData,(function(t){t&&Ph(i,ti(t))})),t.redirectEventId&&(i.ga=t.redirectEventId),i}function $h(t){this.a=t,this.b=ec()}th.prototype.Rc=function(t){var e=this;return t.tb(this.a.a,this.c).then((function(t){var n=vt(e.f);return delete n[eh],delete n[nh],yt(n,t),e.g(n)}))},A(rh,k),oh.prototype.tb=function(t,e,n){return e.type==uo?function(t,e,n,r){return n.Ha().then((function(n){return n={idToken:n},void 0!==r&&(n.displayName=r),yt(n,{phoneVerificationInfo:Uo(t.a)}),ru(e,Ra,n)}))}(this,t,e,n):function(t,e,n){return n.Ha().then((function(n){return yt(n={mfaPendingCredential:n},{phoneVerificationInfo:Uo(t.a)}),ru(e,Da,n)}))}(this,t,e)},A(sh,oh),A(ah,sh),A(uh,Je),(t=ch.prototype).yc=function(t){hh(this,function(t){var e=[];return W(t.mfaInfo||[],(function(t){(t=ri(t))&&e.push(t)})),e}(t.hd))},t.Sb=function(){return this.a.I().then((function(t){return new ao(t,null)}))},t.fc=function(t,e){var n=this,r=this.a.a;return this.Sb().then((function(n){return t.tb(r,n,e)})).then((function(t){return jh(n.a,t),n.a.reload()}))},t.bd=function(t){var e=this,n="string"==typeof t?t:t.uid,r=this.a.a;return this.a.I().then((function(t){return ru(r,nu,{idToken:t,mfaEnrollmentId:n})})).then((function(t){var r=z(e.b,(function(t){return t.uid!=n}));return hh(e,r),jh(e.a,t),e.a.reload().o((function(t){if("auth/user-token-expired"!=t.code)throw t}))}))},t.w=function(){return{multiFactor:{enrolledFactors:K(this.b,(function(t){return t.w()}))}}},lh.prototype.start=function(){this.a=this.c,fh(this,!0)},lh.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},ph.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}},ph.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?Oe(new k("user-token-expired")):t||!this.b||Date.now()>this.c-3e4?this.a?function(t,e){return function(t,e){return new Ie((function(n,r){"refresh_token"==e.grant_type&&e.refresh_token||"authorization_code"==e.grant_type&&e.code?ua(t,t.l+"?key="+encodeURIComponent(t.c),(function(t){t?t.error?r(ou(t)):t.access_token&&t.refresh_token?n(t):r(new k("internal-error")):r(new k("network-request-failed"))}),"POST",Zn(e).toString(),t.g,t.m.get()):r(new k("internal-error"))}))}(t.f,e).then((function(e){return t.b=Wi(e.access_token),t.a=e.refresh_token,dh(t,e.expires_in),{accessToken:t.b.toString(),refreshToken:t.a}})).o((function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e}))}(this,{grant_type:"refresh_token",refresh_token:this.a}):Ce(null):Ce({accessToken:this.b.toString(),refreshToken:this.a})},vh.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},A(yh,En),yh.prototype.xa=function(t){this.za=t,ia(this.a,t)},yh.prototype.la=function(){return this.za},yh.prototype.Ga=function(){return Z(this.aa)},yh.prototype.ib=function(){this.D.b&&(this.D.stop(),this.D.start())},Jr(yh.prototype,"providerId","firebase"),(t=yh.prototype).reload=function(){var t=this;return zh(this,Rh(this).then((function(){return Fh(t).then((function(){return Nh(t)})).then(xh)})))},t.oc=function(t){return this.I(t).then((function(t){return new Zc(t)}))},t.I=function(t){var e=this;return zh(this,Rh(this).then((function(){return e.h.getToken(t)})).then((function(t){if(!t)throw new k("internal-error");return t.accessToken!=e.Aa&&(kh(e,t.accessToken),e.dispatchEvent(new uh("tokenChanged"))),Mh(e,"refreshToken",t.refreshToken),t.accessToken})))},t.Kc=function(t){if(!(t=t.users)||!t.length)throw new k("internal-error");Oh(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e=function(t){return(t=t.providerUserInfo)&&t.length?K(t,(function(t){return new mh(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)})):[]}(t),n=0;n<e.length;n++)Ph(this,e[n]);Mh(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new uh("userReloaded",{hd:t}))},t.Lc=function(t){return Qr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.ub(t)},t.ub=function(t){var e=this,n=null;return zh(this,t.c(this.a,this.uid).then((function(t){return jh(e,t),n=Bh(e,t,"reauthenticate"),e.i=null,e.reload()})).then((function(){return n})),!0)},t.Cc=function(t){return Qr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.rb(t)},t.rb=function(t){var e=this,n=null;return zh(this,qh(this,t.providerId).then((function(){return e.I()})).then((function(n){return t.b(e.a,n)})).then((function(t){return n=Bh(e,t,"link"),Vh(e,t)})).then((function(){return n})))},t.Dc=function(t,e){var n=this;return zh(this,qh(this,"phone").then((function(){return Jc(Th(n),t,e,I(n.rb,n))})))},t.Mc=function(t,e){var n=this;return zh(this,Ce().then((function(){return Jc(Th(n),t,e,I(n.ub,n))})),!0)},t.Cb=function(t){var e=this;return zh(this,this.I().then((function(n){return e.a.Cb(n,t)})).then((function(t){return jh(e,t),e.reload()})))},t.ed=function(t){var e=this;return zh(this,this.I().then((function(n){return t.b(e.a,n)})).then((function(t){return jh(e,t),e.reload()})))},t.Db=function(t){var e=this;return zh(this,this.I().then((function(n){return e.a.Db(n,t)})).then((function(t){return jh(e,t),e.reload()})))},t.Eb=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return Rh(this);var e=this;return zh(this,this.I().then((function(n){return e.a.Eb(n,{displayName:t.displayName,photoUrl:t.photoURL})})).then((function(t){return jh(e,t),Mh(e,"displayName",t.displayName||null),Mh(e,"photoURL",t.photoUrl||null),W(e.providerData,(function(t){"password"===t.providerId&&(Jr(t,"displayName",e.displayName),Jr(t,"photoURL",e.photoURL))})),Nh(e)})).then(xh))},t.cd=function(t){var e=this;return zh(this,Fh(this).then((function(n){return Y(Dh(e),t)?function(t,e,n){return ru(t,Ca,{idToken:e,deleteProvider:n})}(e.a,n,[t]).then((function(t){var n={};return W(t.providerUserInfo||[],(function(t){n[t.providerId]=!0})),W(Dh(e),(function(t){n[t]||Lh(e,t)})),n[Fo.PROVIDER_ID]||Jr(e,"phoneNumber",null),Nh(e)})):Nh(e).then((function(){throw new k("no-such-provider")}))})))},t.delete=function(){var t=this;return zh(this,this.I().then((function(e){return ru(t.a,Na,{idToken:e})})).then((function(){t.dispatchEvent(new uh("userDeleted"))}))).then((function(){for(var e=0;e<t.N.length;e++)t.N[e].cancel("app-deleted");bh(t,null),wh(t,null),Eh(t,null),t.N=[],t.J=!0,Sh(t),Jr(t,"refreshToken",null),t.b&&Pc(t.b,t)}))},t.Gb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.ga||null)==e||"reauthViaRedirect"==t&&(this.ga||null)==e)},t.na=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?I(this.Lb,this):"reauthViaPopup"==t&&e==(this.g||null)?I(this.Mb,this):"linkViaRedirect"==t&&(this.ga||null)==e?I(this.Lb,this):"reauthViaRedirect"==t&&(this.ga||null)==e?I(this.Mb,this):null},t.Ec=function(t){var e=this;return Gh(this,"linkViaPopup",t,(function(){return qh(e,t.providerId).then((function(){return Nh(e)}))}),!1)},t.Nc=function(t){return Gh(this,"reauthViaPopup",t,(function(){return Ce()}),!0)},t.Fc=function(t){var e=this;return Hh(this,"linkViaRedirect",t,(function(){return qh(e,t.providerId)}),!1)},t.Oc=function(t){return Hh(this,"reauthViaRedirect",t,(function(){return Ce()}),!0)},t.Lb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return zh(this,this.I().then((function(n){return wa(i.a,{requestUri:t,postBody:r,sessionId:e,idToken:n})})).then((function(t){return o=Bh(i,t,"link"),Vh(i,t)})).then((function(){return o})))},t.Mb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return zh(this,Ce().then((function(){return lo(Ia(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)})).then((function(t){return o=Bh(i,t,"reauthenticate"),jh(i,t),i.i=null,i.reload()})).then((function(){return o})),!0)},t.vb=function(t){var e=this,n=null;return zh(this,this.I().then((function(e){return n=e,void 0===t||gt(t)?{}:Vi(new Ri(t))})).then((function(t){return e.a.vb(n,t)})).then((function(t){if(e.email!=t)return e.reload()})).then((function(){})))},t.Fb=function(t,e){var n=this,r=null;return zh(this,this.I().then((function(t){return r=t,void 0===e||gt(e)?{}:Vi(new Ri(e))})).then((function(e){return n.a.Fb(r,t,e)})).then((function(t){if(n.email!=t)return n.reload()})).then((function(){})))},t.jc=function(t){var e=null,n=this;return zh(this,t=lo(Ce(t),n.uid).then((function(t){return e=Bh(n,t,"reauthenticate"),jh(n,t),n.i=null,n.reload()})).then((function(){return e})),!0)},t.toJSON=function(){return this.w()},t.w=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.h.w(),redirectEventId:this.ga||null};return this.metadata&&yt(t,this.metadata.w()),W(this.providerData,(function(e){t.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(e))})),yt(t,this.S.w()),t};var Yh={name:"redirectUser",F:"session"};function Qh(t){return ic(t.b,Yh,t.a)}function Xh(t){this.a=t,this.b=ec(),this.c=null,this.f=function(t){var e=tl("local"),n=tl("session"),r=tl("none");return function(t,e,n){var r=rc(e,n),i=nc(t,e.F);return t.get(e,n).then((function(o){var s=null;try{s=qr(u.localStorage.getItem(r))}catch(t){}if(s&&!o)return u.localStorage.removeItem(r),t.set(e,s,n);s&&o&&"localStorage"!=i.type&&u.localStorage.removeItem(r)}))}(t.b,e,t.a).then((function(){return t.b.get(n,t.a)})).then((function(i){return i?n:t.b.get(r,t.a).then((function(n){return n?r:t.b.get(e,t.a).then((function(n){return n?e:t.b.get(Zh,t.a).then((function(t){return t?tl(t):e}))}))}))})).then((function(e){return t.c=e,Jh(t,e.F)})).o((function(){t.c||(t.c=e)}))}(this),this.b.addListener(tl("local"),this.a,I(this.g,this))}function Jh(t,e){var n,r=[];for(n in Zu)Zu[n]!==e&&r.push(ic(t.b,tl(Zu[n]),t.a));return r.push(ic(t.b,Zh,t.a)),function(t){return new Ie((function(e,n){var r=t.length,i=[];if(r)for(var o=function(t,n){r--,i[t]=n,0==r&&e(i)},s=function(t){n(t)},a=0;a<t.length;a++)xe(t[a],E(o,a),s);else e(i)}))}(r)}Xh.prototype.g=function(){var t=this,e=tl("local");il(this,(function(){return Ce().then((function(){return t.c&&"local"!=t.c.F?t.b.get(e,t.a):null})).then((function(n){if(n)return Jh(t,"local").then((function(){t.c=e}))}))}))};var Zh={name:"persistence",F:"session"};function tl(t){return{name:"authUser",F:t}}function el(t,e){return il(t,(function(){return t.b.set(t.c,e.w(),t.a)}))}function nl(t){return il(t,(function(){return ic(t.b,t.c,t.a)}))}function rl(t,e,n){return il(t,(function(){return t.b.get(t.c,t.a).then((function(t){return t&&e&&(t.authDomain=e),t&&n&&(t.emulatorConfig=n),Kh(t||{})}))}))}function il(t,e){return t.f=t.f.then(e,e),t.f}function ol(t){if(this.l=!1,Jr(this,"settings",new Qc),Jr(this,"app",t),!pl(this).options||!pl(this).options.apiKey)throw new k("invalid-api-key");t=r.Z.SDK_VERSION?Or(r.Z.SDK_VERSION):null,this.a=new Xs(pl(this).options&&pl(this).options.apiKey,D(C),t),this.P=[],this.s=[],this.N=[],this.Pa=r.Z.INTERNAL.createSubscribe(I(this.zc,this)),this.W=void 0,this.ib=r.Z.INTERNAL.createSubscribe(I(this.Ac,this)),ll(this,null),this.i=new Xh(pl(this).options.apiKey+":"+pl(this).name),this.D=new $h(pl(this).options.apiKey+":"+pl(this).name),this.$=ml(this,function(t){var e=pl(t).options.authDomain,n=function(t){var e=function(t,e){return t.b.get(Yh,t.a).then((function(t){return t&&e&&(t.authDomain=e),Kh(t||{})}))}(t.D,pl(t).options.authDomain).then((function(e){return(t.m=e)&&(e.ha=t.D),Qh(t.D)}));return ml(t,e)}(t).then((function(){return rl(t.i,e,t.R)})).then((function(e){return e?(e.ha=t.D,t.m&&(t.m.ga||null)==(e.ga||null)?e:e.reload().then((function(){return el(t.i,e).then((function(){return e}))})).o((function(n){return"auth/network-request-failed"==n.code?e:nl(t.i)}))):null})).then((function(e){ll(t,e||null)}));return ml(t,n)}(this)),this.h=ml(this,function(t){return t.$.then((function(){return hl(t)})).o((function(){})).then((function(){if(!t.l)return t.ja()})).o((function(){})).then((function(){if(!t.l){t.ba=!0;var e=t.i;e.b.addListener(tl("local"),e.a,t.ja)}}))}(this)),this.ba=!1,this.ja=I(this.Zc,this),this.Ba=I(this.da,this),this.qa=I(this.mc,this),this.za=I(this.wc,this),this.Aa=I(this.xc,this),this.b=null,function(t){var e=pl(t).options.authDomain,n=pl(t).options.apiKey;e&&Pr()&&(t.Oa=t.$.then((function(){if(!t.l){if(t.b=Gc(e,n,pl(t).name,t.R),Dc(t.b,t),dl(t)&&Ch(dl(t)),t.m){Ch(t.m);var r=t.m;r.xa(t.la()),bh(r,t),Ih(r=t.m,t.J),Eh(r,t),_h(r=t.m,t.R),wh(r,t),t.m=null}return t.b}})))}(this),this.INTERNAL={},this.INTERNAL.delete=I(this.delete,this),this.INTERNAL.logFramework=I(this.Gc,this),this.u=0,En.call(this),function(t){Object.defineProperty(t,"lc",{get:function(){return this.la()},set:function(t){this.xa(t)},enumerable:!1}),t.aa=null,Object.defineProperty(t,"ti",{get:function(){return this.T()},set:function(t){this.zb(t)},enumerable:!1}),t.S=null,Object.defineProperty(t,"emulatorConfig",{get:function(){if(this.R){var t=Bn(this.R.url);t=ti({protocol:t.c,host:t.a,port:t.g,options:ti({disableWarnings:this.R.ec})})}else t=null;return t},enumerable:!1})}(this),this.J=[],this.R=null}function sl(t){Je.call(this,"languageCodeChanged"),this.h=t}function al(t){Je.call(this,"emulatorConfigChanged"),this.c=t}function ul(t){Je.call(this,"frameworkChanged"),this.f=t}function cl(t){return t.Oa||Oe(new k("auth-domain-config-required"))}function hl(t){if(!Pr())return Oe(new k("operation-not-supported-in-this-environment"));var e=cl(t).then((function(){return t.b.ra()})).then((function(t){return t?ti(t):null}));return ml(t,e)}function ll(t,e){dl(t)&&(function(t,e){X(t.W,(function(t){return t==e}))}(dl(t),t.Ba),dn(dl(t),"tokenChanged",t.qa),dn(dl(t),"userDeleted",t.za),dn(dl(t),"userInvalidated",t.Aa),Sh(dl(t))),e&&(e.W.push(t.Ba),ln(e,"tokenChanged",t.qa),ln(e,"userDeleted",t.za),ln(e,"userInvalidated",t.Aa),0<t.u&&Ah(e)),Jr(t,"currentUser",e),e&&(e.xa(t.la()),bh(e,t),Ih(e,t.J),Eh(e,t),_h(e,t.R),wh(e,t))}function fl(t,e){var n=null,r=null;return ml(t,e.then((function(e){return n=qo(e),r=Xi(e),function(t,e){var n={};return n.apiKey=pl(t).options.apiKey,n.authDomain=pl(t).options.authDomain,n.appName=pl(t).name,t.R&&(n.emulatorConfig=t.R),t.$.then((function(){return function(t,e,n,r){var i=new yh(t,e);return n&&(i.ha=n),r&&Ih(i,r),i.reload().then((function(){return i}))}(n,e,t.D,t.Ga())})).then((function(e){return dl(t)&&e.uid==dl(t).uid?(Uh(dl(t),e),t.da(e)):(ll(t,e),Ch(e),t.da(e))})).then((function(){vl(t)}))}(t,e)}),(function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=ih(e.w(),t,I(t.kc,t))),n||e})).then((function(){return ti({user:dl(t),credential:n,additionalUserInfo:r,operationType:"signIn"})})))}function pl(t){return t.app}function dl(t){return t.currentUser}function gl(t){return dl(t)&&dl(t)._lat||null}function vl(t){if(t.ba){for(var e=0;e<t.s.length;e++)t.s[e]&&t.s[e](gl(t));if(t.W!==t.getUid()&&t.N.length)for(t.W=t.getUid(),e=0;e<t.N.length;e++)t.N[e]&&t.N[e](gl(t))}}function ml(t,e){return t.P.push(e),e.oa((function(){Q(t.P,e)})),e}function yl(){}function _l(){this.a={},this.b=1e12}Xh.prototype.yb=function(t){var e=null,n=this;return function(t){var e=new k("invalid-persistence-type"),n=new k("unsupported-persistence-type");t:{for(r in Zu)if(Zu[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(Tr()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;case"Worker":if("session"===t||!Ru()&&"none"!==t)throw n;break;default:if(!Dr()&&"none"!==t)throw n}}(t),il(this,(function(){return t!=n.c.F?n.b.get(n.c,n.a).then((function(r){return e=r,Jh(n,t)})).then((function(){if(n.c=tl(t),e)return n.b.set(n.c,e,n.a)})):Ce()}))},A(ol,En),A(sl,Je),A(al,Je),A(ul,Je),(t=ol.prototype).yb=function(t){return ml(this,t=this.i.yb(t))},t.xa=function(t){this.aa===t||this.l||(this.aa=t,ia(this.a,this.aa),this.dispatchEvent(new sl(this.la())))},t.la=function(){return this.aa},t.fd=function(){var t=u.navigator;this.xa(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.gd=function(t,e){if(!this.R){if(!/^https?:\/\//.test(t))throw new k("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");(function(t){"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),u.document&&!t&&br().then((function(){var t=u.document.createElement("div");t.innerText="Running in emulator mode. Do not use with production credentials.",t.style.position="fixed",t.style.width="100%",t.style.backgroundColor="#ffffff",t.style.border=".1em solid #000000",t.style.color="#b50000",t.style.bottom="0px",t.style.left="0px",t.style.margin="0px",t.style.zIndex=1e4,t.style.textAlign="center",t.classList.add("firebase-emulator-warning"),u.document.body.appendChild(t)}))})(e=!!e&&!!e.disableWarnings),this.R={url:t,ec:e},this.settings.jb=!0,oa(this.a,this.R),this.dispatchEvent(new al(this.R))}},t.Gc=function(t){this.J.push(t),aa(this.a,r.Z.SDK_VERSION?Or(r.Z.SDK_VERSION,this.J):null),this.dispatchEvent(new ul(this.J))},t.Ga=function(){return Z(this.J)},t.zb=function(t){this.S===t||this.l||(this.S=t,this.a.b=this.S)},t.T=function(){return this.S},t.toJSON=function(){return{apiKey:pl(this).options.apiKey,authDomain:pl(this).options.authDomain,appName:pl(this).name,currentUser:dl(this)&&dl(this).w()}},t.Gb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},t.na=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?I(this.ic,this):null},t.ic=function(t,e,n,r){var i=this,o={requestUri:t,postBody:r,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.$.then((function(){return fl(i,ba(i.a,o))}))},t.Xc=function(t){if(!Pr())return Oe(new k("operation-not-supported-in-this-environment"));var e=this,n=Qi(t.providerId),i=Br(),o=null;(!Ur()||Ir())&&pl(this).options.authDomain&&t.isOAuthProvider&&(o=yu(pl(this).options.authDomain,pl(this).options.apiKey,pl(this).name,"signInViaPopup",t,null,i,r.Z.SDK_VERSION||null,null,null,this.T(),this.R));var s=mr(o,n&&n.va,n&&n.ua);return ml(this,n=cl(this).then((function(n){return Uc(n,s,"signInViaPopup",t,i,!!o,e.T())})).then((function(){return new Ie((function(t,n){e.na("signInViaPopup",null,new k("cancelled-popup-request"),e.g),e.f=t,e.C=n,e.g=i,e.c=qc(e.b,e,"signInViaPopup",s,i)}))})).then((function(t){return s&&vr(s),t?ti(t):null})).o((function(t){throw s&&vr(s),t})))},t.Yc=function(t){if(!Pr())return Oe(new k("operation-not-supported-in-this-environment"));var e=this,n=cl(this).then((function(){return function(t){return il(t,(function(){return t.b.set(Zh,t.c.F,t.a)}))}(e.i)})).then((function(){return jc(e.b,"signInViaRedirect",t,void 0,e.T())}));return ml(this,n)},t.ra=function(){var t=this;return hl(this).then((function(e){return t.b&&zc(t.b.b),e})).o((function(e){throw t.b&&zc(t.b.b),e}))},t.dd=function(t){if(!t)return Oe(new k("null-user"));if(this.S!=t.tenantId)return Oe(new k("tenant-id-mismatch"));var e=this,n={};n.apiKey=pl(this).options.apiKey,n.authDomain=pl(this).options.authDomain,n.appName=pl(this).name;var r=function(t,e,n,r){var i=t.h,o={};return o[Zs]=i.b&&i.b.toString(),o.refreshToken=i.a,e=new yh(e||{apiKey:t.l,authDomain:t.s,appName:t.m},o),n&&(e.ha=n),r&&Ih(e,r),Uh(e,t),e}(t,n,e.D,e.Ga());return ml(this,this.h.then((function(){if(pl(e).options.apiKey!=t.l)return r.reload()})).then((function(){return dl(e)&&t.uid==dl(e).uid?(Uh(dl(e),t),e.da(t)):(ll(e,r),Ch(r),e.da(r))})).then((function(){vl(e)})))},t.Bb=function(){var t=this;return ml(this,this.h.then((function(){return t.b&&zc(t.b.b),dl(t)?(ll(t,null),nl(t.i).then((function(){vl(t)}))):Ce()})))},t.Zc=function(){var t=this;return rl(this.i,pl(this).options.authDomain).then((function(e){if(!t.l){var n;if(n=dl(t)&&e){n=dl(t).uid;var r=e.uid;n=null!=n&&""!==n&&null!=r&&""!==r&&n==r}if(n)return Uh(dl(t),e),dl(t).I();(dl(t)||e)&&(ll(t,e),e&&(Ch(e),e.ha=t.D),t.b&&Dc(t.b,t),vl(t))}}))},t.da=function(t){return el(this.i,t)},t.mc=function(){vl(this),this.da(dl(this))},t.wc=function(){this.Bb()},t.xc=function(){this.Bb()},t.kc=function(t){var e=this;return this.h.then((function(){return fl(e,Ce(t))}))},t.zc=function(t){var e=this;this.addAuthTokenListener((function(){t.next(dl(e))}))},t.Ac=function(t){var e=this;!function(t,e){t.N.push(e),ml(t,t.h.then((function(){!t.l&&Y(t.N,e)&&t.W!==t.getUid()&&(t.W=t.getUid(),e(gl(t)))})))}(this,(function(){t.next(dl(e))}))},t.Ic=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){"function"==typeof t?t(dl(r)):"function"==typeof t.next&&t.next(dl(r))})),this.Pa(t,e,n)},t.Hc=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){r.W=r.getUid(),"function"==typeof t?t(dl(r)):"function"==typeof t.next&&t.next(dl(r))})),this.ib(t,e,n)},t.nc=function(t){var e=this;return ml(this,this.h.then((function(){return dl(e)?dl(e).I(t).then((function(t){return{accessToken:t}})):null})))},t.Tc=function(t){var e=this;return this.h.then((function(){return fl(e,ru(e.a,Xa,{token:t}))})).then((function(t){var n=t.user;return Mh(n,"isAnonymous",!1),e.da(n),t}))},t.Uc=function(t,e){var n=this;return this.h.then((function(){return fl(n,ru(n.a,Ja,{email:t,password:e}))}))},t.dc=function(t,e){var n=this;return this.h.then((function(){return fl(n,ru(n.a,Sa,{email:t,password:e}))}))},t.ab=function(t){var e=this;return this.h.then((function(){return fl(e,t.ka(e.a))}))},t.Sc=function(t){return Qr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.ab(t)},t.Ab=function(){var t=this;return this.h.then((function(){var e=dl(t);if(e&&e.isAnonymous){var n=ti({providerId:null,isNewUser:!1});return ti({user:e,credential:null,additionalUserInfo:n,operationType:"signIn"})}return fl(t,t.a.Ab()).then((function(e){var n=e.user;return Mh(n,"isAnonymous",!0),t.da(n),e}))}))},t.getUid=function(){return dl(this)&&dl(this).uid||null},t.cc=function(t){this.addAuthTokenListener(t),this.u++,0<this.u&&dl(this)&&Ah(dl(this))},t.Pc=function(t){var e=this;W(this.s,(function(n){n==t&&e.u--})),0>this.u&&(this.u=0),0==this.u&&dl(this)&&Sh(dl(this)),this.removeAuthTokenListener(t)},t.addAuthTokenListener=function(t){var e=this;this.s.push(t),ml(this,this.h.then((function(){e.l||Y(e.s,t)&&t(gl(e))})))},t.removeAuthTokenListener=function(t){X(this.s,(function(e){return e==t}))},t.delete=function(){this.l=!0;for(var t=0;t<this.P.length;t++)this.P[t].cancel("app-deleted");return this.P=[],this.i&&(t=this.i).b.removeListener(tl("local"),t.a,this.ja),this.b&&(Pc(this.b,this),zc(this.b.b)),Promise.resolve()},t.hc=function(t){return ml(this,function(t,e){return ru(t,ka,{identifier:e,continueUri:Lr()?fr():"http://localhost"}).then((function(t){return t.signinMethods||[]}))}(this.a,t))},t.Bc=function(t){return!!Po(t)},t.xb=function(t,e){var n=this;return ml(this,Ce().then((function(){var t=new Ri(e);if(!t.c)throw new k("argument-error",Li+" must be true when sending sign in link to email");return Vi(t)})).then((function(e){return n.a.xb(t,e)})).then((function(){})))},t.jd=function(t){return this.Sa(t).then((function(t){return t.data.email}))},t.ob=function(t,e){return ml(this,this.a.ob(t,e).then((function(){})))},t.Sa=function(t){return ml(this,this.a.Sa(t).then((function(t){return new ci(t)})))},t.kb=function(t){return ml(this,this.a.kb(t).then((function(){})))},t.wb=function(t,e){var n=this;return ml(this,Ce().then((function(){return void 0===e||gt(e)?{}:Vi(new Ri(e))})).then((function(e){return n.a.wb(t,e)})).then((function(){})))},t.Wc=function(t,e){return ml(this,Jc(this,t,e,I(this.ab,this)))},t.Vc=function(t,e){var n=this;return ml(this,Ce().then((function(){var r=e||fr(),i=Do(t,r);if(!(r=Po(r)))throw new k("argument-error","Invalid email link!");if(r.tenantId!==n.T())throw new k("tenant-id-mismatch");return n.ab(i)})))},yl.prototype.render=function(){},yl.prototype.reset=function(){},yl.prototype.getResponse=function(){},yl.prototype.execute=function(){};var bl=null;function wl(t,e){return(e=Il(e))&&t.a[e]||null}function Il(t){return(t=void 0===t?1e12:t)?t.toString():null}function El(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=he(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():ln(this.f,"click",this.i)}function Tl(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function Al(){}function Sl(){}_l.prototype.render=function(t,e){return this.a[this.b.toString()]=new El(t,e),this.b++},_l.prototype.reset=function(t){var e=wl(this,t);t=Il(t),e&&t&&(e.delete(),delete this.a[t])},_l.prototype.getResponse=function(t){return(t=wl(this,t))?t.getResponse():null},_l.prototype.execute=function(t){(t=wl(this,t))&&t.execute()},El.prototype.getResponse=function(){return Tl(this),this.b},El.prototype.execute=function(){Tl(this);var t=this;this.a||(this.a=setTimeout((function(){t.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var e=t.c.callback,n=t.c["expired-callback"];if(e)try{e(t.b)}catch(t){}t.a=setTimeout((function(){if(t.a=null,t.b=null,n)try{n()}catch(t){}t.h&&t.execute()}),6e4)}),500))},El.prototype.delete=function(){Tl(this),this.g=!0,clearTimeout(this.a),this.a=null,dn(this.f,"click",this.i)},Jr(Al,"FACTOR_ID","phone"),Sl.prototype.g=function(){return bl||(bl=new _l),Ce(bl)},Sl.prototype.c=function(){};var kl=null;function Nl(){this.b=u.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var Cl=new bt(Tt,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),Ol=new Hr(3e4,6e4);Nl.prototype.g=function(t){var e=this;return new Ie((function(n,r){var i=setTimeout((function(){r(new k("network-request-failed"))}),Ol.get());!u.grecaptcha||t!==e.f&&!e.b?(u[e.a]=function(){if(u.grecaptcha){e.f=t;var o=u.grecaptcha.render;u.grecaptcha.render=function(t,n){return t=o(t,n),e.b++,t},clearTimeout(i),n(u.grecaptcha)}else clearTimeout(i),r(new k("internal-error"));delete u[e.a]},Ce(Hs(Nt(Cl,{onload:e.a,hl:t||""}))).o((function(){clearTimeout(i),r(new k("internal-error","Unable to load external reCAPTCHA dependencies!"))}))):(clearTimeout(i),n(u.grecaptcha))}))},Nl.prototype.c=function(){this.b--};var xl=null;function Rl(t,e,n,r,i,o,s){if(Jr(this,"type","recaptcha"),this.c=this.f=null,this.J=!1,this.v=e,this.g=null,s?(kl||(kl=new Sl),s=kl):(xl||(xl=new Nl),s=xl),this.m=s,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[Ll])throw new k("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Ml],!u.document)throw new k("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!he(e)||!this.i&&he(e).hasChildNodes())throw new k("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new Xs(t,o||null,i||null),this.u=r||function(){return null};var a=this;this.l=[];var c=this.a[Dl];this.a[Dl]=function(t){if(Ul(a,t),"function"==typeof c)c(t);else if("string"==typeof c){var e=Rr(c,u);"function"==typeof e&&e(t)}};var h=this.a[Pl];this.a[Pl]=function(){if(Ul(a,null),"function"==typeof h)h();else if("string"==typeof h){var t=Rr(h,u);"function"==typeof t&&t()}}}var Dl="callback",Pl="expired-callback",Ll="sitekey",Ml="size";function Ul(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(t){}}function Fl(t,e){return t.h.push(e),e.oa((function(){Q(t.h,e)})),e}function jl(t){if(t.J)throw new k("internal-error","RecaptchaVerifier instance has been destroyed.")}function ql(t,e,n){var i=!1;try{this.b=n||r.Z.app()}catch(t){throw new k("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new k("invalid-api-key");n=this.b.options.apiKey;var o=this,s=null;try{s=this.b.auth().Ga()}catch(t){}try{i=this.b.auth().settings.appVerificationDisabledForTesting}catch(t){}s=r.Z.SDK_VERSION?Or(r.Z.SDK_VERSION,s):null,Rl.call(this,n,t,e,(function(){try{var t=o.b.auth().la()}catch(e){t=null}return t}),s,D(C),i)}function Bl(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,s=0;s<e.length;s++)if(e[s].optional)o=!0;else{if(o)throw new k("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].M(n[i])&&!o){if(e=e[i],0>i||i>=Vl.length)throw new k("internal-error","Argument validator received an unsupported number of arguments.");n=Vl[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.K+".";break t}r=null}}if(r)throw new k("argument-error",t+" failed: "+r)}(t=Rl.prototype).Ia=function(){var t=this;return this.f?this.f:this.f=Fl(this,Ce().then((function(){if(Lr()&&!Er())return br();throw new k("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")})).then((function(){return t.m.g(t.u())})).then((function(e){return t.g=e,ru(t.s,qa,{})})).then((function(e){t.a[Ll]=e.recaptchaSiteKey})).o((function(e){throw t.f=null,e})))},t.render=function(){jl(this);var t=this;return Fl(this,this.Ia().then((function(){if(null===t.c){var e=t.v;if(!t.i){var n=he(e);e=function(t,e,n){var r=arguments,i=document,o=String(r[0]),s=r[1];if(!ce&&s&&(s.name||s.type)){if(o=["<",o],s.name&&o.push(' name="',Wt(s.name),'"'),s.type){o.push(' type="',Wt(s.type),'"');var a={};yt(a,s),delete a.type,s=a}o.push(">"),o=o.join("")}return o=ve(i,o),s&&("string"==typeof s?o.className=s:Array.isArray(s)?o.className=s.join(" "):le(o,s)),2<r.length&&ge(i,o,r),o}("DIV"),n.appendChild(e)}t.c=t.g.render(e,t.a)}return t.c})))},t.verify=function(){jl(this);var t=this;return Fl(this,this.render().then((function(e){return new Ie((function(n){var r=t.g.getResponse(e);if(r)n(r);else{var i=function(e){e&&(function(t,e){X(t.l,(function(t){return t==e}))}(t,i),n(e))};t.l.push(i),t.i&&t.g.execute(t.c)}}))})))},t.reset=function(){jl(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){jl(this),this.J=!0,this.m.c();for(var t=0;t<this.h.length;t++)this.h[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){t=he(this.v);for(var e;e=t.firstChild;)t.removeChild(e)}},A(ql,Rl);var Vl="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Gl(t,e){return{name:t||"",K:"a valid string",optional:!!e,M:function(t){return"string"==typeof t}}}function Hl(t,e){return{name:t||"",K:"a boolean",optional:!!e,M:function(t){return"boolean"==typeof t}}}function Wl(t,e){return{name:t||"",K:"a valid object",optional:!!e,M:v}}function zl(t,e){return{name:t||"",K:"a function",optional:!!e,M:function(t){return"function"==typeof t}}}function Kl(t,e){return{name:t||"",K:"null",optional:!!e,M:function(t){return null===t}}}function $l(t){return{name:t?t+"Credential":"credential",K:t?"a valid "+t+" credential":"a valid credential",optional:!1,M:function(e){if(!e)return!1;var n=!t||e.providerId===t;return!(!e.ka||!n)}}}function Yl(t,e){return v(t)&&"string"==typeof t.type&&t.type===e&&"function"==typeof t.Ha}function Ql(t){return v(t)&&"string"==typeof t.uid}function Xl(t,e,n,r){return{name:n||"",K:t.K+" or "+e.K,optional:!!r,M:function(n){return t.M(n)||e.M(n)}}}function Jl(t,e){for(var n in e){var r=e[n].name;t[r]=ef(r,t[n],e[n].j)}}function Zl(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:E((function(t){return this[t]}),n),set:E((function(t,e,n,r){Bl(t,[n],[r],!0),this[e]=r}),r,n,e[n].lb),enumerable:!0})}}function tf(t,e,n,r){t[e]=ef(e,n,r)}function ef(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return Bl(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=function(t){return(t=t.split("."))[t.length-1]}(t);for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}Jl(ol.prototype,{kb:{name:"applyActionCode",j:[Gl("code")]},Sa:{name:"checkActionCode",j:[Gl("code")]},ob:{name:"confirmPasswordReset",j:[Gl("code"),Gl("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[Gl("email"),Gl("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[Gl("email")]},ra:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[Gl("emailLink")]},Hc:{name:"onAuthStateChanged",j:[Xl(Wl(),zl(),"nextOrObserver"),zl("opt_error",!0),zl("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[Xl(Wl(),zl(),"nextOrObserver"),zl("opt_error",!0),zl("opt_completed",!0)]},wb:{name:"sendPasswordResetEmail",j:[Gl("email"),Xl(Wl("opt_actionCodeSettings",!0),Kl(null,!0),"opt_actionCodeSettings",!0)]},xb:{name:"sendSignInLinkToEmail",j:[Gl("email"),Wl("actionCodeSettings")]},yb:{name:"setPersistence",j:[Gl("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[$l()]},Ab:{name:"signInAnonymously",j:[]},ab:{name:"signInWithCredential",j:[$l()]},Tc:{name:"signInWithCustomToken",j:[Gl("token")]},Uc:{name:"signInWithEmailAndPassword",j:[Gl("email"),Gl("password")]},Vc:{name:"signInWithEmailLink",j:[Gl("email"),Gl("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[Gl("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Xc:{name:"signInWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Yc:{name:"signInWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},dd:{name:"updateCurrentUser",j:[Xl({name:"user",K:"an instance of Firebase User",optional:!1,M:function(t){return!!(t&&t instanceof yh)}},Kl(),"user")]},Bb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Gl(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[Gl("url"),Wl("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[Gl("code")]}}),Zl(ol.prototype,{lc:{name:"languageCode",lb:Xl(Gl(),Kl(),"languageCode")},ti:{name:"tenantId",lb:Xl(Gl(),Kl(),"tenantId")}}),ol.Persistence=Zu,ol.Persistence.LOCAL="local",ol.Persistence.SESSION="session",ol.Persistence.NONE="none",Jl(yh.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[Hl("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[Hl("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[$l()]},rb:{name:"linkWithCredential",j:[$l()]},Dc:{name:"linkWithPhoneNumber",j:[Gl("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Ec:{name:"linkWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Fc:{name:"linkWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[$l()]},ub:{name:"reauthenticateWithCredential",j:[$l()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[Gl("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Nc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Oc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},vb:{name:"sendEmailVerification",j:[Xl(Wl("opt_actionCodeSettings",!0),Kl(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Gl(null,!0)]},cd:{name:"unlink",j:[Gl("provider")]},Cb:{name:"updateEmail",j:[Gl("email")]},Db:{name:"updatePassword",j:[Gl("password")]},ed:{name:"updatePhoneNumber",j:[$l("phone")]},Eb:{name:"updateProfile",j:[Wl("profile")]},Fb:{name:"verifyBeforeUpdateEmail",j:[Gl("email"),Xl(Wl("opt_actionCodeSettings",!0),Kl(null,!0),"opt_actionCodeSettings",!0)]}}),Jl(_l.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Jl(yl.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Jl(Ie.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),Zl(Qc.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",lb:Hl("appVerificationDisabledForTesting")}}),Jl(Xc.prototype,{confirm:{name:"confirm",j:[Gl("verificationCode")]}}),tf(ho,"fromJSON",(function(t){t="string"==typeof t?JSON.parse(t):t;for(var e,n=[yo,xo,Mo,go],r=0;r<n.length;r++)if(e=n[r](t))return e;return null}),[Xl(Gl(),Wl(),"json")]),tf(Ro,"credential",(function(t,e){return new Oo(t,e)}),[Gl("email"),Gl("password")]),Jl(Oo.prototype,{w:{name:"toJSON",j:[Gl(null,!0)]}}),Jl(Io.prototype,{Ca:{name:"addScope",j:[Gl("scope")]},Ka:{name:"setCustomParameters",j:[Wl("customOAuthParameters")]}}),tf(Io,"credential",Eo,[Xl(Gl(),Wl(),"token")]),tf(Ro,"credentialWithLink",Do,[Gl("email"),Gl("emailLink")]),Jl(To.prototype,{Ca:{name:"addScope",j:[Gl("scope")]},Ka:{name:"setCustomParameters",j:[Wl("customOAuthParameters")]}}),tf(To,"credential",Ao,[Xl(Gl(),Wl(),"token")]),Jl(So.prototype,{Ca:{name:"addScope",j:[Gl("scope")]},Ka:{name:"setCustomParameters",j:[Wl("customOAuthParameters")]}}),tf(So,"credential",ko,[Xl(Gl(),Xl(Wl(),Kl()),"idToken"),Xl(Gl(),Kl(),"accessToken",!0)]),Jl(No.prototype,{Ka:{name:"setCustomParameters",j:[Wl("customOAuthParameters")]}}),tf(No,"credential",Co,[Xl(Gl(),Wl(),"token"),Gl("secret",!0)]),Jl(wo.prototype,{Ca:{name:"addScope",j:[Gl("scope")]},credential:{name:"credential",j:[Xl(Gl(),Xl(Wl(),Kl()),"optionsOrIdToken"),Xl(Gl(),Kl(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[Wl("customOAuthParameters")]}}),Jl(vo.prototype,{w:{name:"toJSON",j:[Gl(null,!0)]}}),Jl(fo.prototype,{w:{name:"toJSON",j:[Gl(null,!0)]}}),tf(Fo,"credential",jo,[Gl("verificationId"),Gl("verificationCode")]),Jl(Fo.prototype,{gb:{name:"verifyPhoneNumber",j:[Xl(Gl(),{name:"phoneInfoOptions",K:"valid phone info options",optional:!1,M:function(t){return!!t&&(t.session&&t.phoneNumber?Yl(t.session,uo)&&"string"==typeof t.phoneNumber:t.session&&t.multiFactorHint?Yl(t.session,co)&&Ql(t.multiFactorHint):t.session&&t.multiFactorUid?Yl(t.session,co)&&"string"==typeof t.multiFactorUid:!!t.phoneNumber&&"string"==typeof t.phoneNumber)}},"phoneInfoOptions"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]}}),Jl(Lo.prototype,{w:{name:"toJSON",j:[Gl(null,!0)]}}),Jl(k.prototype,{toJSON:{name:"toJSON",j:[Gl(null,!0)]}}),Jl($o.prototype,{toJSON:{name:"toJSON",j:[Gl(null,!0)]}}),Jl(Ko.prototype,{toJSON:{name:"toJSON",j:[Gl(null,!0)]}}),Jl(rh.prototype,{toJSON:{name:"toJSON",j:[Gl(null,!0)]}}),Jl(th.prototype,{Rc:{name:"resolveSignIn",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.tb}}]}}),Jl(ch.prototype,{Sb:{name:"getSession",j:[]},fc:{name:"enroll",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.tb}},Gl("displayName",!0)]},bd:{name:"unenroll",j:[Xl({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:Ql},Gl(),"multiFactorInfoIdentifier")]}}),Jl(ql.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),tf(Ei,"parseLink",xi,[Gl("link")]),tf(Al,"assertion",(function(t){return new ah(t)}),[$l("phone")]),function(){if(void 0===r.Z||!r.Z.INTERNAL||!r.Z.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:li,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:hi,VERIFY_AND_CHANGE_EMAIL:fi,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:ol,AuthCredential:ho,Error:k};tf(t,"EmailAuthProvider",Ro,[]),tf(t,"FacebookAuthProvider",Io,[]),tf(t,"GithubAuthProvider",To,[]),tf(t,"GoogleAuthProvider",So,[]),tf(t,"TwitterAuthProvider",No,[]),tf(t,"OAuthProvider",wo,[Gl("providerId")]),tf(t,"SAMLAuthProvider",bo,[Gl("providerId")]),tf(t,"PhoneAuthProvider",Fo,[{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(t){return!!(t&&t instanceof ol)}}]),tf(t,"RecaptchaVerifier",ql,[Xl(Gl(),{name:"",K:"an HTML element",optional:!1,M:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),Wl("recaptchaParameters",!0),{name:"app",K:"an instance of Firebase App",optional:!0,M:function(t){return!!(t&&t instanceof r.Z.app.App)}}]),tf(t,"ActionCodeURL",Ei,[]),tf(t,"PhoneMultiFactorGenerator",Al,[]),r.Z.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return new ol(t=t.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC",onInstanceCreated:function(t){t.getProvider("auth-internal").initialize()}}),r.Z.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return{getUid:I((t=t.getProvider("auth").getImmediate()).getUid,t),getToken:I(t.nc,t),addAuthTokenListener:I(t.cc,t),removeAuthTokenListener:I(t.Pc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),r.Z.registerVersion("@firebase/auth","0.16.8"),r.Z.INTERNAL.extendNamespace({User:yh})}()}.apply(void 0!==n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},o(t,e)};function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function a(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))}function u(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function c(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}Object.create,Object.create;var h=n(4850),l=n(100),f=function(t,e){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},f(t,e)};function p(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var d,g="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{},v=v||{},m=g||self;function y(){}function _(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function b(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var w="closure_uid_"+(1e9*Math.random()>>>0),I=0;function E(t,e,n){return t.call.apply(t.bind,arguments)}function T(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function A(t,e,n){return(A=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?E:T).apply(null,arguments)}function S(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function k(t,e){function n(){}n.prototype=e.prototype,t.Z=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Vb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function N(){this.s=this.s,this.o=this.o}var C={};N.prototype.s=!1,N.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var t=function(t){return Object.prototype.hasOwnProperty.call(t,w)&&t[w]||(t[w]=++I)}(this);delete C[t]}},N.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var O=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},x=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function R(t){return Array.prototype.concat.apply([],arguments)}function D(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function P(t){return/^[\s\xa0]*$/.test(t)}var L,M=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function U(t,e){return-1!=t.indexOf(e)}function F(t,e){return t<e?-1:t>e?1:0}t:{var j=m.navigator;if(j){var q=j.userAgent;if(q){L=q;break t}}L=""}function B(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function V(t){var e={};for(var n in t)e[n]=t[n];return e}var G="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function H(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<G.length;o++)n=G[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function W(t){return W[" "](t),t}W[" "]=y;var z,K,$=U(L,"Opera"),Y=U(L,"Trident")||U(L,"MSIE"),Q=U(L,"Edge"),X=Q||Y,J=U(L,"Gecko")&&!(U(L.toLowerCase(),"webkit")&&!U(L,"Edge"))&&!(U(L,"Trident")||U(L,"MSIE"))&&!U(L,"Edge"),Z=U(L.toLowerCase(),"webkit")&&!U(L,"Edge");function tt(){var t=m.document;return t?t.documentMode:void 0}t:{var et="",nt=(K=L,J?/rv:([^\);]+)(\)|;)/.exec(K):Q?/Edge\/([\d\.]+)/.exec(K):Y?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(K):Z?/WebKit\/(\S+)/.exec(K):$?/(?:Version)[ \/]?(\S+)/.exec(K):void 0);if(nt&&(et=nt?nt[1]:""),Y){var rt=tt();if(null!=rt&&rt>parseFloat(et)){z=String(rt);break t}}z=et}var it,ot={};function st(){return t=ot,Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=function(){for(var t=0,e=M(String(z)).split("."),n=M("9").split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++){var o=e[i]||"",s=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==o[0].length&&0==s[0].length)break;t=F(0==o[1].length?0:parseInt(o[1],10),0==s[1].length?0:parseInt(s[1],10))||F(0==o[2].length,0==s[2].length)||F(o[2],s[2]),o=o[3],s=s[3]}while(0==t)}return 0<=t}();var t}m.document&&Y?it=tt()||parseInt(z,10)||void 0:it=void 0;var at=it,ut=function(){if(!m.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{m.addEventListener("test",y,e),m.removeEventListener("test",y,e)}catch(t){}return t}();function ct(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}function ht(t,e){if(ct.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(J){t:{try{W(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:lt[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&ht.Z.h.call(this)}}ct.prototype.h=function(){this.defaultPrevented=!0},k(ht,ct);var lt={2:"touch",3:"pen",4:"mouse"};ht.prototype.h=function(){ht.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var ft="closure_listenable_"+(1e6*Math.random()|0),pt=0;function dt(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ia=i,this.key=++pt,this.ca=this.fa=!1}function gt(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function vt(t){this.src=t,this.g={},this.h=0}function mt(t,e){var n=e.type;if(n in t.g){var r,i=t.g[n],o=O(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(gt(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function yt(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.ca&&o.listener==e&&o.capture==!!n&&o.ia==r)return i}return-1}vt.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.g[o])||(t=this.g[o]=[],this.h++);var s=yt(t,e,r,i);return-1<s?(e=t[s],n||(e.fa=!1)):((e=new dt(e,this.src,o,!!r,i)).fa=n,t.push(e)),e};var _t="closure_lm_"+(1e6*Math.random()|0),bt={};function wt(t,e,n,r,i){if(r&&r.once)return Et(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)wt(t,e[o],n,r,i);return null}return n=Ot(n),t&&t[ft]?t.N(e,n,b(r)?!!r.capture:!!r,i):It(t,e,n,!1,r,i)}function It(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=b(i)?!!i.capture:!!i,a=Nt(t);if(a||(t[_t]=a=new vt(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=kt;return function e(n){return t.call(e.src,e.listener,n)}}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)ut||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(St(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function Et(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)Et(t,e[o],n,r,i);return null}return n=Ot(n),t&&t[ft]?t.O(e,n,b(r)?!!r.capture:!!r,i):It(t,e,n,!0,r,i)}function Tt(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)Tt(t,e[o],n,r,i);else r=b(r)?!!r.capture:!!r,n=Ot(n),t&&t[ft]?(t=t.i,(e=String(e).toString())in t.g&&-1<(n=yt(o=t.g[e],n,r,i))&&(gt(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.g[e],t.h--))):t&&(t=Nt(t))&&(e=t.g[e.toString()],t=-1,e&&(t=yt(e,n,r,i)),(n=-1<t?e[t]:null)&&At(n))}function At(t){if("number"!=typeof t&&t&&!t.ca){var e=t.src;if(e&&e[ft])mt(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(St(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Nt(e))?(mt(n,t),0==n.h&&(n.src=null,e[_t]=null)):gt(t)}}}function St(t){return t in bt?bt[t]:bt[t]="on"+t}function kt(t,e){if(t.ca)t=!0;else{e=new ht(e,this);var n=t.listener,r=t.ia||t.src;t.fa&&At(t),t=n.call(r,e)}return t}function Nt(t){return(t=t[_t])instanceof vt?t:null}var Ct="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ot(t){return"function"==typeof t?t:(t[Ct]||(t[Ct]=function(e){return t.handleEvent(e)}),t[Ct])}function xt(){N.call(this),this.i=new vt(this),this.P=this,this.I=null}function Rt(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,"string"==typeof e)e=new ct(e,t);else if(e instanceof ct)e.target=e.target||t;else{var i=e;H(e=new ct(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.g=n[o];i=Dt(s,r,!0,e)&&i}if(i=Dt(s=e.g=t,r,!0,e)&&i,i=Dt(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=Dt(s=e.g=n[o],r,!1,e)&&i}function Dt(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.ca&&s.capture==n){var a=s.listener,u=s.ia||s.src;s.fa&&mt(t.i,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}k(xt,N),xt.prototype[ft]=!0,xt.prototype.removeEventListener=function(t,e,n,r){Tt(this,t,e,n,r)},xt.prototype.M=function(){if(xt.Z.M.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)gt(n[r]);delete e.g[t],e.h--}}this.I=null},xt.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},xt.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var Pt=m.JSON.stringify;function Lt(){var t=Gt,e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var Mt,Ut=function(){function t(){this.h=this.g=null}return t.prototype.add=function(t,e){var n=Ft.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n},t}(),Ft=new(function(){function t(t,e){this.i=t,this.j=e,this.h=0,this.g=null}return t.prototype.get=function(){var t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t},t}())((function(){return new jt}),(function(t){return t.reset()})),jt=function(){function t(){this.next=this.g=this.h=null}return t.prototype.set=function(t,e){this.h=t,this.g=e,this.next=null},t.prototype.reset=function(){this.next=this.g=this.h=null},t}();function qt(t){m.setTimeout((function(){throw t}),0)}function Bt(t,e){Mt||function(){var t=m.Promise.resolve(void 0);Mt=function(){t.then(Ht)}}(),Vt||(Mt(),Vt=!0),Gt.add(t,e)}var Vt=!1,Gt=new Ut;function Ht(){for(var t;t=Lt();){try{t.h.call(t.g)}catch(t){qt(t)}var e=Ft;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Vt=!1}function Wt(t,e){xt.call(this),this.h=t||1,this.g=e||m,this.j=A(this.kb,this),this.l=Date.now()}function zt(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}function Kt(t,e,n){if("function"==typeof t)n&&(t=A(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=A(t.handleEvent,t)}return 2147483647<Number(e)?-1:m.setTimeout(t,e||0)}function $t(t){t.g=Kt((function(){t.g=null,t.i&&(t.i=!1,$t(t))}),t.j);var e=t.h;t.h=null,t.m.apply(null,e)}k(Wt,xt),(d=Wt.prototype).da=!1,d.S=null,d.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Rt(this,"tick"),this.da&&(zt(this),this.start()))}},d.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},d.M=function(){Wt.Z.M.call(this),zt(this),delete this.g};var Yt=function(t){function e(e,n){var r=t.call(this)||this;return r.m=e,r.j=n,r.h=null,r.i=!1,r.g=null,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}f(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.l=function(t){this.h=arguments,this.g?this.i=!0:$t(this)},e.prototype.M=function(){t.prototype.M.call(this),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},e}(N);function Qt(t){N.call(this),this.h=t,this.g={}}k(Qt,N);var Xt=[];function Jt(t,e,n,r){Array.isArray(n)||(n&&(Xt[0]=n.toString()),n=Xt);for(var i=0;i<n.length;i++){var o=wt(e,n[i],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function Zt(t){B(t.g,(function(t,e){this.g.hasOwnProperty(e)&&At(t)}),t),t.g={}}function te(){this.g=!0}function ee(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return Pt(n)}catch(t){return e}}(t,n)+(r?" "+r:"")}))}Qt.prototype.M=function(){Qt.Z.M.call(this),Zt(this)},Qt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},te.prototype.Aa=function(){this.g=!1},te.prototype.info=function(){};var ne={},re=null;function ie(){return re=re||new xt}function oe(t){ct.call(this,ne.Ma,t)}function se(t){var e=ie();Rt(e,new oe(e,t))}function ae(t,e){ct.call(this,ne.STAT_EVENT,t),this.stat=e}function ue(t){var e=ie();Rt(e,new ae(e,t))}function ce(t,e){ct.call(this,ne.Na,t),this.size=e}function he(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return m.setTimeout((function(){t()}),e)}ne.Ma="serverreachability",k(oe,ct),ne.STAT_EVENT="statevent",k(ae,ct),ne.Na="timingevent",k(ce,ct);var le={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},fe={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function pe(){}function de(t){return t.h||(t.h=t.i())}function ge(){}pe.prototype.h=null;var ve,me={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function ye(){ct.call(this,"d")}function _e(){ct.call(this,"c")}function be(){}function we(t,e,n,r){this.l=t,this.j=e,this.m=n,this.X=r||1,this.V=new Qt(this),this.P=Ee,t=X?125:void 0,this.W=new Wt(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Ie}function Ie(){this.i=null,this.g="",this.h=!1}k(ye,ct),k(_e,ct),k(be,pe),be.prototype.g=function(){return new XMLHttpRequest},be.prototype.i=function(){return{}},ve=new be;var Ee=45e3,Te={},Ae={};function Se(t,e,n){t.K=1,t.v=Ye(Ge(e)),t.s=n,t.U=!0,ke(t,null)}function ke(t,e){t.F=Date.now(),xe(t),t.A=Ge(t.v);var n=t.A,r=t.X;Array.isArray(r)||(r=[String(r)]),cn(n.h,"t",r),t.C=0,n=t.l.H,t.h=new Ie,t.g=hr(t.l,n?e:null,!t.s),0<t.O&&(t.L=new Yt(A(t.Ia,t,t.g),t.O)),Jt(t.V,t.g,"readystatechange",t.gb),e=t.H?V(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),se(1),function(t,e,n,r,i,o){t.info((function(){if(t.g)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var h=c[0];c=c[1];var l=h.split("_");s=2<=l.length&&"type"==l[1]?s+(h+"=")+c+"&":s+(h+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s}))}(t.j,t.u,t.A,t.m,t.X,t.s)}function Ne(t){return!!t.g&&"GET"==t.u&&2!=t.K&&t.l.Ba}function Ce(t,e,n){for(var r,i=!0;!t.I&&t.C<n.length;){if((r=Oe(t,n))==Ae){4==e&&(t.o=4,ue(14),i=!1),ee(t.j,t.m,null,"[Incomplete Response]");break}if(r==Te){t.o=4,ue(15),ee(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}ee(t.j,t.m,r,null),Me(t,r)}Ne(t)&&r!=Ae&&r!=Te&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,ue(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.aa&&(t.aa=!0,(e=t.l).g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),nr(e),e.L=!0,ue(11))):(ee(t.j,t.m,n,"[Invalid Chunked Response]"),Le(t),Pe(t))}function Oe(t,e){var n=t.C,r=e.indexOf("\n",n);return-1==r?Ae:(n=Number(e.substring(n,r)),isNaN(n)?Te:(r+=1)+n>e.length?Ae:(e=e.substr(r,n),t.C=r+n,e))}function xe(t){t.Y=Date.now()+t.P,Re(t,t.P)}function Re(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=he(A(t.eb,t),e)}function De(t){t.B&&(m.clearTimeout(t.B),t.B=null)}function Pe(t){0==t.l.G||t.I||or(t.l,t)}function Le(t){De(t);var e=t.L;e&&"function"==typeof e.na&&e.na(),t.L=null,zt(t.W),Zt(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function Me(t,e){try{var n=t.l;if(0!=n.G&&(n.g==t||vn(n.i,t)))if(n.I=t.N,!t.J&&vn(n.i,t)&&3==n.G){try{var r=n.Ca.g.parse(e)}catch(o){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.u){if(n.g){if(!(n.g.F+3e3<t.F))break t;ir(n),Kn(n)}er(n),ue(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=he(A(n.ab,n),6e3));if(1>=gn(n.i)&&n.ka){try{n.ka()}catch(o){}n.ka=void 0}}else ar(n,11)}else if((t.J||n.g==t)&&ir(n),!P(e))for(i=n.Ca.g.parse(e),e=0;e<i.length;e++){var o=i[e];if(n.U=o[0],o=o[1],2==n.G)if("c"==o[0]){n.J=o[1],n.la=o[2];var s=o[3];null!=s&&(n.ma=s,n.h.info("VER="+n.ma));var a=o[4];null!=a&&(n.za=a,n.h.info("SVER="+n.za));var u=o[5];null!=u&&"number"==typeof u&&0<u&&(r=1.5*u,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=t.g;if(c){var h=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(h){var l=r.i;!l.g&&(U(h,"spdy")||U(h,"quic")||U(h,"h2"))&&(l.j=l.l,l.g=new Set,l.h&&(mn(l,l.h),l.h=null))}if(r.D){var f=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.sa=f,$e(r.F,r.D,f))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-t.F,n.h.info("Handshake RTT: "+n.O+"ms"));var p=t;if((r=n).oa=cr(r,r.H?r.la:null,r.W),p.J){yn(r.i,p);var d=p,g=r.K;g&&d.setTimeout(g),d.B&&(De(d),xe(d)),r.g=p}else tr(r);0<n.l.length&&Qn(n)}else"stop"!=o[0]&&"close"!=o[0]||ar(n,7);else 3==n.G&&("stop"==o[0]||"close"==o[0]?"stop"==o[0]?ar(n,7):zn(n):"noop"!=o[0]&&n.j&&n.j.wa(o),n.A=0)}se(4)}catch(o){}}function Ue(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(_(t)||"string"==typeof t)x(t,e,void 0);else{if(t.T&&"function"==typeof t.T)var n=t.T();else if(t.R&&"function"==typeof t.R)n=void 0;else if(_(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;r=function(t){if(t.R&&"function"==typeof t.R)return t.R();if("string"==typeof t)return t.split("");if(_(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t),i=r.length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Fe(t,e){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Fe)for(n=t.T(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function je(t){if(t.i!=t.g.length){for(var e=0,n=0;e<t.g.length;){var r=t.g[e];qe(t.h,r)&&(t.g[n++]=r),e++}t.g.length=n}if(t.i!=t.g.length){var i={};for(n=e=0;e<t.g.length;)qe(i,r=t.g[e])||(t.g[n++]=r,i[r]=1),e++;t.g.length=n}}function qe(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(d=we.prototype).setTimeout=function(t){this.P=t},d.gb=function(t){t=t.target;var e=this.L;e&&3==Bn(t)?e.l():this.Ia(t)},d.Ia=function(t){try{if(t==this.g)t:{var e=Bn(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>e)&&(3!=e||X||this.g&&(this.h.h||this.g.ga()||Vn(this.g)))){this.I||4!=e||7==n||se(8==n||0>=r?3:2),De(this);var i=this.g.ba();this.N=i;e:if(Ne(this)){var o=Vn(this.g);t="";var s=o.length,a=4==Bn(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Le(this),Pe(this);var u="";break e}this.h.i=new m.TextDecoder}for(n=0;n<s;n++)this.h.h=!0,t+=this.h.i.decode(o[n],{stream:a&&n==s-1});o.splice(0,s),this.h.g+=t,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==i,function(t,e,n,r,i,o,s){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s}))}(this.j,this.u,this.A,this.m,this.X,e,i),this.i){if(this.$&&!this.J){e:{if(this.g){var c,h=this.g;if((c=h.g?h.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!P(c)){var l=c;break e}}l=null}if(!(i=l)){this.i=!1,this.o=3,ue(12),Le(this),Pe(this);break t}ee(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Me(this,i)}this.U?(Ce(this,e,u),X&&this.i&&3==e&&(Jt(this.V,this.W,"tick",this.fb),this.W.start())):(ee(this.j,this.m,u,null),Me(this,u)),4==e&&Le(this),this.i&&!this.I&&(4==e?or(this.l,this):(this.i=!1,xe(this)))}else 400==i&&0<u.indexOf("Unknown SID")?(this.o=3,ue(12)):(this.o=0,ue(13)),Le(this),Pe(this)}}}catch(e){}},d.fb=function(){if(this.g){var t=Bn(this.g),e=this.g.ga();this.C<e.length&&(De(this),Ce(this,t,e),this.i&&4!=t&&xe(this))}},d.cancel=function(){this.I=!0,Le(this)},d.eb=function(){this.B=null;var t=Date.now();0<=t-this.Y?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.j,this.A),2!=this.K&&(se(3),ue(17)),Le(this),this.o=2,Pe(this)):Re(this,this.Y-t)},(d=Fe.prototype).R=function(){je(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t},d.T=function(){return je(this),this.g.concat()},d.get=function(t,e){return qe(this.h,t)?this.h[t]:e},d.set=function(t,e){qe(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e},d.forEach=function(t,e){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Be=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ve(t,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof Ve){this.g=void 0!==e?e:t.g,He(this,t.j),this.s=t.s,We(this,t.i),ze(this,t.m),this.l=t.l,e=t.h;var n=new on;n.i=e.i,e.g&&(n.g=new Fe(e.g),n.h=e.h),Ke(this,n),this.o=t.o}else t&&(n=String(t).match(Be))?(this.g=!!e,He(this,n[1]||"",!0),this.s=Qe(n[2]||""),We(this,n[3]||"",!0),ze(this,n[4]),this.l=Qe(n[5]||"",!0),Ke(this,n[6]||"",!0),this.o=Qe(n[7]||"")):(this.g=!!e,this.h=new on(null,this.g))}function Ge(t){return new Ve(t)}function He(t,e,n){t.j=n?Qe(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function We(t,e,n){t.i=n?Qe(e,!0):e}function ze(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function Ke(t,e,n){e instanceof on?(t.h=e,function(t,e){e&&!t.j&&(sn(t),t.i=null,t.g.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(an(this,e),cn(this,n,t))}),t)),t.j=e}(t.h,t.g)):(n||(e=Xe(e,nn)),t.h=new on(e,t.g))}function $e(t,e,n){t.h.set(e,n)}function Ye(t){return $e(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Qe(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Xe(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Je),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Je(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Ve.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Xe(e,Ze,!0),":");var n=this.i;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(Xe(e,Ze,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&t.push("/"),t.push(Xe(n,"/"==n.charAt(0)?en:tn,!0))),(n=this.h.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Xe(n,rn)),t.join("")};var Ze=/[#\/\?@]/g,tn=/[#\?:]/g,en=/[#\?]/g,nn=/[#\?@]/g,rn=/#/g;function on(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function sn(t){t.g||(t.g=new Fe,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function an(t,e){sn(t),e=hn(t,e),qe(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,qe((t=t.g).h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&je(t)))}function un(t,e){return sn(t),e=hn(t,e),qe(t.g.h,e)}function cn(t,e,n){an(t,e),0<n.length&&(t.i=null,t.g.set(hn(t,e),D(n)),t.h+=n.length)}function hn(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}(d=on.prototype).add=function(t,e){sn(this),this.i=null,t=hn(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},d.forEach=function(t,e){sn(this),this.g.forEach((function(n,r){x(n,(function(n){t.call(e,n,r,this)}),this)}),this)},d.T=function(){sn(this);for(var t=this.g.R(),e=this.g.T(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},d.R=function(t){sn(this);var e=[];if("string"==typeof t)un(this,t)&&(e=R(e,this.g.get(hn(this,t))));else{t=this.g.R();for(var n=0;n<t.length;n++)e=R(e,t[n])}return e},d.set=function(t,e){return sn(this),this.i=null,un(this,t=hn(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},d.get=function(t,e){return t&&0<(t=this.R(t)).length?String(t[0]):e},d.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.R(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.i=t.join("&")};var ln=function(t,e){this.h=t,this.g=e};function fn(t){this.l=t||pn,t=m.PerformanceNavigationTiming?0<(t=m.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(m.g&&m.g.Ea&&m.g.Ea()&&m.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var pn=10;function dn(t){return!!t.h||!!t.g&&t.g.size>=t.j}function gn(t){return t.h?1:t.g?t.g.size:0}function vn(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function mn(t,e){t.g?t.g.add(e):t.h=e}function yn(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function _n(t){var e,n;if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){var r=t.i;try{for(var i=p(t.g.values()),o=i.next();!o.done;o=i.next()){var s=o.value;r=r.concat(s.D)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return D(t.i)}function bn(){}function wn(){this.g=new bn}function In(t,e,n){var r=n||"";try{Ue(t,(function(t,n){var i=t;b(t)&&(i=Pt(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(t){throw e.push(r+"type="+encodeURIComponent("_badmap")),t}}function En(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}function Tn(t){this.l=t.$b||null,this.j=t.ib||!1}function An(t,e){xt.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=Sn,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}fn.prototype.cancel=function(){var t,e;if(this.i=_n(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){try{for(var n=p(this.g.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.g.clear()}},bn.prototype.stringify=function(t){return m.JSON.stringify(t,void 0)},bn.prototype.parse=function(t){return m.JSON.parse(t,void 0)},k(Tn,pe),Tn.prototype.g=function(){return new An(this.l,this.j)},Tn.prototype.i=function(t){return function(){return t}}({}),k(An,xt);var Sn=0;function kn(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}function Nn(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Cn(t)}function Cn(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(d=An.prototype).open=function(t,e){if(this.readyState!=Sn)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Cn(this)},d.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||m).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},d.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Nn(this)),this.readyState=Sn},d.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Cn(this)),this.g&&(this.readyState=3,Cn(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==m.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;kn(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))},d.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Nn(this):Cn(this),3==this.readyState&&kn(this)}},d.Ua=function(t){this.g&&(this.response=this.responseText=t,Nn(this))},d.Ta=function(t){this.g&&(this.response=t,Nn(this))},d.ha=function(){this.g&&Nn(this)},d.setRequestHeader=function(t,e){this.v.append(t,e)},d.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},d.getAllResponseHeaders=function(){if(!this.h)return"";for(var t=[],e=this.h.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(An.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var On=m.JSON.parse;function xn(t){xt.call(this),this.headers=new Fe,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Rn,this.K=this.L=!1}k(xn,xt);var Rn="",Dn=/^https?$/i,Pn=["POST","PUT"];function Ln(t){return"content-type"==t.toLowerCase()}function Mn(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,Un(t),jn(t)}function Un(t){t.D||(t.D=!0,Rt(t,"complete"),Rt(t,"error"))}function Fn(t){if(t.h&&void 0!==v&&(!t.C[1]||4!=Bn(t)||2!=t.ba()))if(t.v&&4==Bn(t))Kt(t.Fa,0,t);else if(Rt(t,"readystatechange"),4==Bn(t)){t.h=!1;try{var e,n=t.ba();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.H).match(Be)[1]||null;if(!o&&m.self&&m.self.location){var s=m.self.location.protocol;o=s.substr(0,s.length-1)}i=!Dn.test(o?o.toLowerCase():"")}e=i}if(e)Rt(t,"complete"),Rt(t,"success");else{t.m=6;try{var a=2<Bn(t)?t.g.statusText:""}catch(t){a=""}t.j=a+" ["+t.ba()+"]",Un(t)}}finally{jn(t)}}}function jn(t,e){if(t.g){qn(t);var n=t.g,r=t.C[0]?y:null;t.g=null,t.C=null,e||Rt(t,"ready");try{n.onreadystatechange=r}catch(t){}}}function qn(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(m.clearTimeout(t.A),t.A=null)}function Bn(t){return t.g?t.g.readyState:0}function Vn(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case Rn:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Gn(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return B(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):$e(t,e,n))}function Hn(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Wn(t){this.za=0,this.l=[],this.h=new te,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Hn("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Hn("baseRetryDelayMs",5e3,t),this.$a=Hn("retryDelaySeedMs",1e4,t),this.Ya=Hn("forwardChannelMaxRetries",2,t),this.ra=Hn("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new fn(t&&t.concurrentRequestLimit),this.Ca=new wn,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||!1!==t.Xb}function zn(t){if($n(t),3==t.G){var e=t.V++,n=Ge(t.F);$e(n,"SID",t.J),$e(n,"RID",e),$e(n,"TYPE","terminate"),Jn(t,n),(e=new we(t,t.h,e,void 0)).K=2,e.v=Ye(Ge(n)),n=!1,m.navigator&&m.navigator.sendBeacon&&(n=m.navigator.sendBeacon(e.v.toString(),"")),!n&&m.Image&&((new Image).src=e.v,n=!0),n||(e.g=hr(e.l,null),e.g.ea(e.v)),e.F=Date.now(),xe(e)}ur(t)}function Kn(t){t.g&&(nr(t),t.g.cancel(),t.g=null)}function $n(t){Kn(t),t.u&&(m.clearTimeout(t.u),t.u=null),ir(t),t.i.cancel(),t.m&&("number"==typeof t.m&&m.clearTimeout(t.m),t.m=null)}function Yn(t,e){t.l.push(new ln(t.Za++,e)),3==t.G&&Qn(t)}function Qn(t){dn(t.i)||t.m||(t.m=!0,Bt(t.Ha,t),t.C=0)}function Xn(t,e){var n;n=e?e.m:t.V++;var r=Ge(t.F);$e(r,"SID",t.J),$e(r,"RID",n),$e(r,"AID",t.U),Jn(t,r),t.o&&t.s&&Gn(r,t.o,t.s),n=new we(t,t.h,n,t.C+1),null===t.o&&(n.H=t.s),e&&(t.l=e.D.concat(t.l)),e=Zn(t,n,1e3),n.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),mn(t.i,n),Se(n,r,e)}function Jn(t,e){t.j&&Ue({},(function(t,n){$e(e,n,t)}))}function Zn(t,e,n){n=Math.min(t.l.length,n);var r=t.j?A(t.j.Oa,t.j,t):null;t:for(var i=t.l,o=-1;;){var s=["count="+n];-1==o?0<n?(o=i[0].h,s.push("ofs="+o)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].h,h=i[u].g;if(0>(c-=o))o=Math.max(0,i[u].h-100),a=!1;else try{In(h,s,"req"+c+"_")}catch(t){r&&r(h)}}if(a){r=s.join("&");break t}}return t=t.l.splice(0,n),e.D=t,r}function tr(t){t.g||t.u||(t.Y=1,Bt(t.Ga,t),t.A=0)}function er(t){return!(t.g||t.u||3<=t.A||(t.Y++,t.u=he(A(t.Ga,t),sr(t,t.A)),t.A++,0))}function nr(t){null!=t.B&&(m.clearTimeout(t.B),t.B=null)}function rr(t){t.g=new we(t,t.h,"rpc",t.Y),null===t.o&&(t.g.H=t.s),t.g.O=0;var e=Ge(t.oa);$e(e,"RID","rpc"),$e(e,"SID",t.J),$e(e,"CI",t.N?"0":"1"),$e(e,"AID",t.U),Jn(t,e),$e(e,"TYPE","xmlhttp"),t.o&&t.s&&Gn(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.la,n.K=1,n.v=Ye(Ge(e)),n.s=null,n.U=!0,ke(n,t)}function ir(t){null!=t.v&&(m.clearTimeout(t.v),t.v=null)}function or(t,e){var n=null;if(t.g==e){ir(t),nr(t),t.g=null;var r=2}else{if(!vn(t.i,e))return;n=e.D,yn(t.i,e),r=1}if(t.I=e.N,0!=t.G)if(e.i)if(1==r){n=e.s?e.s.length:0,e=Date.now()-e.F;var i=t.C;Rt(r=ie(),new ce(r,n,e,i)),Qn(t)}else tr(t);else if(3==(i=e.o)||0==i&&0<t.I||!(1==r&&function(t,e){return!(gn(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.l=e.D.concat(t.l),0):1==t.G||2==t.G||t.C>=(t.Xa?0:t.Ya)||(t.m=he(A(t.Ha,t,e),sr(t,t.C)),t.C++,0)))}(t,e)||2==r&&er(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:ar(t,5);break;case 4:ar(t,10);break;case 3:ar(t,6);break;default:ar(t,2)}}function sr(t,e){var n=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(n*=2),n*e}function ar(t,e){if(t.h.info("Error code "+e),2==e){var n=null;t.j&&(n=null);var r=A(t.jb,t);n||(n=new Ve("//www.google.com/images/cleardot.gif"),m.location&&"http"==m.location.protocol||He(n,"https"),Ye(n)),function(t,e){var n=new te;if(m.Image){var r=new Image;r.onload=S(En,n,r,"TestLoadImage: loaded",!0,e),r.onerror=S(En,n,r,"TestLoadImage: error",!1,e),r.onabort=S(En,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=S(En,n,r,"TestLoadImage: timeout",!1,e),m.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else ue(2);t.G=0,t.j&&t.j.va(e),ur(t),$n(t)}function ur(t){t.G=0,t.I=-1,t.j&&(0==_n(t.i).length&&0==t.l.length||(t.i.i.length=0,D(t.l),t.l.length=0),t.j.ua())}function cr(t,e,n){var r=function(t){return t instanceof Ve?Ge(t):new Ve(t,void 0)}(n);if(""!=r.i)e&&We(r,e+"."+r.i),ze(r,r.m);else{var i=m.location;r=function(t,e,n,r){var i=new Ve(null,void 0);return t&&He(i,t),e&&We(i,e),n&&ze(i,n),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.aa&&B(t.aa,(function(t,e){$e(r,e,t)})),e=t.D,n=t.sa,e&&n&&$e(r,e,n),$e(r,"VER",t.ma),Jn(t,r),r}function hr(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=n&&t.Ba&&!t.qa?new xn(new Tn({ib:!0})):new xn(t.qa)).L=t.H,e}function lr(){}function fr(){if(Y&&!(10<=Number(at)))throw Error("Environmental error: no available transport.")}function pr(t,e){xt.call(this),this.g=new Wn(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!P(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!P(e)&&(this.g.D=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new vr(this)}function dr(t){ye.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function gr(){_e.call(this),this.status=1}function vr(t){this.g=t}(d=xn.prototype).ea=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():ve.g(),this.C=this.u?de(this.u):de(ve),this.g.onreadystatechange=A(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(t){return void Mn(this,t)}t=n||"";var i=new Fe(this.headers);r&&Ue(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=Ln,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.T()),n=m.FormData&&t instanceof m.FormData,!(0<=O(Pn,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.g.setRequestHeader(e,t)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{qn(this),0<this.B&&((this.K=function(t){return Y&&st()&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=A(this.pa,this)):this.A=Kt(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(t){Mn(this,t)}},d.pa=function(){void 0!==v&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Rt(this,"timeout"),this.abort(8))},d.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Rt(this,"complete"),Rt(this,"abort"),jn(this))},d.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),jn(this,!0)),xn.Z.M.call(this)},d.Fa=function(){this.s||(this.F||this.v||this.l?Fn(this):this.cb())},d.cb=function(){Fn(this)},d.ba=function(){try{return 2<Bn(this)?this.g.status:-1}catch(t){return-1}},d.ga=function(){try{return this.g?this.g.responseText:""}catch(t){return""}},d.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),On(e)}},d.Da=function(){return this.m},d.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(d=Wn.prototype).ma=8,d.G=1,d.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch(t){}},d.Ha=function(t){if(this.m)if(this.m=null,1==this.G){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;var e=new we(this,this.h,t,void 0),n=this.s;if(this.P&&(n?H(n=V(n),this.P):n=this.P),null===this.o&&(e.H=n),this.ja)t:{for(var r=0,i=0;i<this.l.length;i++){var o=this.l[i];if(void 0===(o="__data__"in o.g&&"string"==typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(r+=o)){r=i;break t}if(4096===r||i===this.l.length-1){r=i+1;break t}}r=1e3}else r=1e3;r=Zn(this,e,r),$e(i=Ge(this.F),"RID",t),$e(i,"CVER",22),this.D&&$e(i,"X-HTTP-Session-Id",this.D),Jn(this,i),this.o&&n&&Gn(i,this.o,n),mn(this.i,e),this.Ra&&$e(i,"TYPE","init"),this.ja?($e(i,"$req",r),$e(i,"SID","null"),e.$=!0,Se(e,i,null)):Se(e,i,r),this.G=2}}else 3==this.G&&(t?Xn(this,t):0==this.l.length||dn(this.i)||Xn(this))},d.Ga=function(){if(this.u=null,rr(this),this.$&&!(this.L||null==this.g||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=he(A(this.bb,this),t)}},d.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,ue(10),Kn(this),rr(this))},d.ab=function(){null!=this.v&&(this.v=null,Kn(this),er(this),ue(19))},d.jb=function(t){t?(this.h.info("Successfully pinged google.com"),ue(2)):(this.h.info("Failed to ping google.com"),ue(1))},(d=lr.prototype).xa=function(){},d.wa=function(){},d.va=function(){},d.ua=function(){},d.Oa=function(){},fr.prototype.g=function(t,e){return new pr(t,e)},k(pr,xt),pr.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),Bt(A(t.hb,t,e))),ue(0),t.W=e,t.aa=n||{},t.N=t.X,t.F=cr(t,null,t.W),Qn(t)},pr.prototype.close=function(){zn(this.g)},pr.prototype.u=function(t){if("string"==typeof t){var e={};e.__data__=t,Yn(this.g,e)}else this.v?((e={}).__data__=Pt(t),Yn(this.g,e)):Yn(this.g,t)},pr.prototype.M=function(){this.g.j=null,delete this.j,zn(this.g),delete this.g,pr.Z.M.call(this)},k(dr,ye),k(gr,_e),k(vr,lr),vr.prototype.xa=function(){Rt(this.g,"a")},vr.prototype.wa=function(t){Rt(this.g,new dr(t))},vr.prototype.va=function(t){Rt(this.g,new gr(t))},vr.prototype.ua=function(){Rt(this.g,"b")},fr.prototype.createWebChannel=fr.prototype.g,pr.prototype.send=pr.prototype.u,pr.prototype.open=pr.prototype.m,pr.prototype.close=pr.prototype.close,le.NO_ERROR=0,le.TIMEOUT=8,le.HTTP_ERROR=6,fe.COMPLETE="complete",ge.EventType=me,me.OPEN="a",me.CLOSE="b",me.ERROR="c",me.MESSAGE="d",xt.prototype.listen=xt.prototype.N,xn.prototype.listenOnce=xn.prototype.O,xn.prototype.getLastError=xn.prototype.La,xn.prototype.getLastErrorCode=xn.prototype.Da,xn.prototype.getStatus=xn.prototype.ba,xn.prototype.getResponseJson=xn.prototype.Qa,xn.prototype.getResponseText=xn.prototype.ga,xn.prototype.send=xn.prototype.ea;var mr=le,yr=fe,_r=ne,br=10,wr=11,Ir=Tn,Er=ge,Tr=xn,Ar=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();Ar.o=-1;var Sr={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},kr=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return s(e,t),e}(Error),Nr=new l.Yd("@firebase/firestore");function Cr(){return Nr.logLevel}function Or(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Nr.logLevel<=l.in.DEBUG){var r=e.map(Dr);Nr.debug.apply(Nr,c(["Firestore (8.10.1): "+t],r))}}function xr(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Nr.logLevel<=l.in.ERROR){var r=e.map(Dr);Nr.error.apply(Nr,c(["Firestore (8.10.1): "+t],r))}}function Rr(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Nr.logLevel<=l.in.WARN){var r=e.map(Dr);Nr.warn.apply(Nr,c(["Firestore (8.10.1): "+t],r))}}function Dr(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}var e}function Pr(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.10.1) INTERNAL ASSERTION FAILED: "+t;throw xr(e),new Error(e)}function Lr(t,e){t||Pr()}function Mr(t,e){return t}function Ur(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Fr=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=Ur(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function jr(t,e){return t<e?-1:t>e?1:0}function qr(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function Br(t){return t+"\0"}var Vr=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new kr(Sr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new kr(Sr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new kr(Sr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new kr(Sr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?jr(this.nanoseconds,t.nanoseconds):jr(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),Gr=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new Vr(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();function Hr(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Wr(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function zr(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Kr=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&Pr(),void 0===n?n=t.length-e:n>t.length-e&&Pr(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),$r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new kr(Sr.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter((function(t){return t.length>0})))}return new e(r)},e.emptyPath=function(){return new e([])},e}(Kr),Yr=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Qr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return Yr.test(t)},e.prototype.canonicalString=function(){return this.toArray().map((function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new kr(Sr.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new kr(Sr.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new kr(Sr.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new kr(Sr.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(Kr),Xr=function(){function t(t){this.fields=t,t.sort(Qr.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return qr(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),Jr=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return t=this.binaryString,btoa(t);var t},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return jr(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();Jr.EMPTY_BYTE_STRING=new Jr("");var Zr=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ti(t){if(Lr(!!t),"string"==typeof t){var e=0,n=Zr.exec(t);if(Lr(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ei(t.seconds),nanos:ei(t.nanos)}}function ei(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function ni(t){return"string"==typeof t?Jr.fromBase64String(t):Jr.fromUint8Array(t)}function ri(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function ii(t){var e=t.mapValue.fields.__previous_value__;return ri(e)?ii(e):e}function oi(t){var e=ti(t.mapValue.fields.__local_write_time__.timestampValue);return new Vr(e.seconds,e.nanos)}function si(t){return null==t}function ai(t){return 0===t&&1/t==-1/0}function ui(t){return"number"==typeof t&&Number.isInteger(t)&&!ai(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var ci=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t($r.fromString(e))},t.fromName=function(e){return new t($r.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===$r.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return $r.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new $r(e.slice()))},t}();function hi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ri(t)?4:10:Pr()}function li(t,e){var n=hi(t);if(n!==hi(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return oi(t).isEqual(oi(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=ti(t.timestampValue),r=ti(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return ni(t.bytesValue).isEqual(ni(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return ei(t.geoPointValue.latitude)===ei(e.geoPointValue.latitude)&&ei(t.geoPointValue.longitude)===ei(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return ei(t.integerValue)===ei(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=ei(t.doubleValue),r=ei(e.doubleValue);return n===r?ai(n)===ai(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return qr(t.arrayValue.values||[],e.arrayValue.values||[],li);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(Hr(n)!==Hr(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!li(n[i],r[i])))return!1;return!0}(t,e);default:return Pr()}}function fi(t,e){return void 0!==(t.values||[]).find((function(t){return li(t,e)}))}function pi(t,e){var n=hi(t),r=hi(e);if(n!==r)return jr(n,r);switch(n){case 0:return 0;case 1:return jr(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=ei(t.integerValue||t.doubleValue),r=ei(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return di(t.timestampValue,e.timestampValue);case 4:return di(oi(t),oi(e));case 5:return jr(t.stringValue,e.stringValue);case 6:return function(t,e){var n=ni(t),r=ni(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=jr(n[i],r[i]);if(0!==o)return o}return jr(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=jr(ei(t.latitude),ei(e.latitude));return 0!==n?n:jr(ei(t.longitude),ei(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=pi(n[i],r[i]);if(o)return o}return jr(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=jr(r[s],o[s]);if(0!==a)return a;var u=pi(n[r[s]],i[o[s]]);if(0!==u)return u}return jr(r.length,o.length)}(t.mapValue,e.mapValue);default:throw Pr()}}function di(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return jr(t,e);var n=ti(t),r=ti(e),i=jr(n.seconds,r.seconds);return 0!==i?i:jr(n.nanos,r.nanos)}function gi(t){return vi(t)}function vi(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=ti(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?ni(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,ci.fromName(n).toString()):"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=vi(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+vi(t.fields[o])}return e+"}"}(t.mapValue):Pr();var e,n}function mi(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function yi(t){return!!t&&"integerValue"in t}function _i(t){return!!t&&"arrayValue"in t}function bi(t){return!!t&&"nullValue"in t}function wi(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ii(t){return!!t&&"mapValue"in t}function Ei(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){var e={mapValue:{fields:{}}};return Wr(t.mapValue.fields,(function(t,n){return e.mapValue.fields[t]=Ei(n)})),e}if(t.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(t.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Ei(t.arrayValue.values[r]);return n}return Object.assign({},t)}var Ti=function(){function t(t){this.value=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.isEmpty())return this.value;for(var e=this.value,n=0;n<t.length-1;++n)if(!Ii(e=(e.mapValue.fields||{})[t.get(n)]))return null;return(e=(e.mapValue.fields||{})[t.lastSegment()])||null},t.prototype.set=function(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Ei(e)},t.prototype.setAll=function(t){var e=this,n=Qr.emptyPath(),r={},i=[];t.forEach((function(t,o){if(!n.isImmediateParentOf(o)){var s=e.getFieldsMap(n);e.applyChanges(s,r,i),r={},i=[],n=o.popLast()}t?r[o.lastSegment()]=Ei(t):i.push(o.lastSegment())}));var o=this.getFieldsMap(n);this.applyChanges(o,r,i)},t.prototype.delete=function(t){var e=this.field(t.popLast());Ii(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]},t.prototype.isEqual=function(t){return li(this.value,t.value)},t.prototype.getFieldsMap=function(t){var e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(var n=0;n<t.length;++n){var r=e.mapValue.fields[t.get(n)];Ii(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields},t.prototype.applyChanges=function(t,e,n){Wr(e,(function(e,n){return t[e]=n}));for(var r=0,i=n;r<i.length;r++){var o=i[r];delete t[o]}},t.prototype.clone=function(){return new t(Ei(this.value))},t}();function Ai(t){var e=[];return Wr(t.fields,(function(t,n){var r=new Qr([t]);if(Ii(n)){var i=Ai(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++){var a=s[o];e.push(r.child(a))}}else e.push(r)})),new Xr(e)}var Si=function(){function t(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}return t.newInvalidDocument=function(e){return new t(e,0,Gr.min(),Ti.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,Ti.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,Ti.empty(),2)},t.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=Ti.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=Ti.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),ki=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.h=null};function Ni(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new ki(t,e,n,r,i,o,s)}function Ci(t){var e=Mr(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return function(t){return t.field.canonicalString()+t.op.toString()+gi(t.value)}(t)})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return function(t){return t.field.canonicalString()+t.dir}(t)})).join(","),si(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Vi(e.startAt)),e.endAt&&(n+="|ub:",n+=Vi(e.endAt)),e.h=n}return e.h}function Oi(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!Hi(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if(i=t.filters[r],o=e.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!li(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!zi(t.startAt,e.startAt)&&zi(t.endAt,e.endAt)}function xi(t){return ci.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var Ri=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return s(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new Di(t,n,r):"array-contains"===n?new Ui(t,r):"in"===n?new Fi(t,r):"not-in"===n?new ji(t,r):"array-contains-any"===n?new qi(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new Pi(t,n):new Li(t,n)},e.prototype.matches=function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(pi(e,this.value)):null!==e&&hi(this.value)===hi(e)&&this.m(pi(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Pr()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}((function(){})),Di=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=ci.fromName(r.referenceValue),i}return s(e,t),e.prototype.matches=function(t){var e=ci.comparator(t.key,this.key);return this.m(e)},e}(Ri),Pi=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=Mi(0,n),r}return s(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Ri),Li=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=Mi(0,n),r}return s(e,t),e.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Ri);function Mi(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return ci.fromName(t.referenceValue)}))}var Ui=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return s(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return _i(e)&&fi(e.arrayValue,this.value)},e}(Ri),Fi=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return s(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return null!==e&&fi(this.value.arrayValue,e)},e}(Ri),ji=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return s(e,t),e.prototype.matches=function(t){if(fi(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!fi(this.value.arrayValue,e)},e}(Ri),qi=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return s(e,t),e.prototype.matches=function(t){var e=this,n=t.data.field(this.field);return!(!_i(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return fi(e.value.arrayValue,t)}))},e}(Ri),Bi=function(t,e){this.position=t,this.before=e};function Vi(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return gi(t)})).join(",")}var Gi=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function Hi(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function Wi(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.isKeyField()?ci.comparator(ci.fromName(s.referenceValue),n.key):pi(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function zi(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!li(t.position[n],e.position[n]))return!1;return!0}var Ki=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.p=null,this.T=null,this.startAt,this.endAt};function $i(t,e,n,r,i,o,s,a){return new Ki(t,e,n,r,i,o,s,a)}function Yi(t){return new Ki(t)}function Qi(t){return!si(t.limit)&&"F"===t.limitType}function Xi(t){return!si(t.limit)&&"L"===t.limitType}function Ji(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function Zi(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function to(t){return null!==t.collectionGroup}function eo(t){var e=Mr(t);if(null===e.p){e.p=[];var n=Zi(e),r=Ji(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new Gi(n)),e.p.push(new Gi(Qr.keyField(),"asc"));else{for(var i=!1,o=0,s=e.explicitOrderBy;o<s.length;o++){var a=s[o];e.p.push(a),a.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new Gi(Qr.keyField(),u))}}}return e.p}function no(t){var e=Mr(t);if(!e.T)if("F"===e.limitType)e.T=Ni(e.path,e.collectionGroup,eo(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=eo(e);r<i.length;r++){var o=i[r],s="desc"===o.dir?"asc":"desc";n.push(new Gi(o.field,s))}var a=e.endAt?new Bi(e.endAt.position,!e.endAt.before):null,u=e.startAt?new Bi(e.startAt.position,!e.startAt.before):null;e.T=Ni(e.path,e.collectionGroup,n,e.filters,e.limit,a,u)}return e.T}function ro(t,e,n){return new Ki(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function io(t,e){return Oi(no(t),no(e))&&t.limitType===e.limitType}function oo(t){return Ci(no(t))+"|lt:"+t.limitType}function so(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map((function(t){return(e=t).field.canonicalString()+" "+e.op+" "+gi(e.value);var e})).join(", ")+"]"),si(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map((function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)})).join(", ")+"]"),t.startAt&&(e+=", startAt: "+Vi(t.startAt)),t.endAt&&(e+=", endAt: "+Vi(t.endAt)),"Target("+e+")"}(no(t))+"; limitType="+t.limitType+")"}function ao(t,e){return e.isFoundDocument()&&function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):ci.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!Wi(t.startAt,eo(t),e)||t.endAt&&Wi(t.endAt,eo(t),e))}(t,e)}function uo(t){return function(e,n){for(var r=!1,i=0,o=eo(t);i<o.length;i++){var s=o[i],a=co(s,e,n);if(0!==a)return a;r=r||s.field.isKeyField()}return 0}}function co(t,e,n){var r=t.field.isKeyField()?ci.comparator(e.key,n.key):function(t,e,n){var r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?pi(r,i):Pr()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Pr()}}function ho(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ai(e)?"-0":e}}function lo(t){return{integerValue:""+t}}function fo(t,e){return ui(e)?lo(e):ho(t,e)}var po=function(){this._=void 0};function go(t,e,n){return t instanceof yo?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof _o?bo(t,e):t instanceof wo?Io(t,e):function(t,e){var n=mo(t,e),r=To(n)+To(t.A);return yi(n)&&yi(t.A)?lo(r):ho(t.R,r)}(t,e)}function vo(t,e,n){return t instanceof _o?bo(t,e):t instanceof wo?Io(t,e):n}function mo(t,e){return t instanceof Eo?yi(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var yo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(po),_o=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return s(e,t),e}(po);function bo(t,e){for(var n=Ao(e),r=function(t){n.some((function(e){return li(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var wo=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return s(e,t),e}(po);function Io(t,e){for(var n=Ao(e),r=function(t){n=n.filter((function(e){return!li(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Eo=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).R=e,r.A=n,r}return s(e,t),e}(po);function To(t){return ei(t.integerValue||t.doubleValue)}function Ao(t){return _i(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var So=function(t,e){this.field=t,this.transform=e},ko=function(t,e){this.version=t,this.transformResults=e},No=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function Co(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var Oo=function(){};function xo(t,e,n){t instanceof Mo?function(t,e,n){var r=t.value.clone(),i=jo(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof Uo?function(t,e,n){if(Co(t.precondition,e)){var r=jo(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(Fo(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function Ro(t,e,n){t instanceof Mo?function(t,e,n){if(Co(t.precondition,e)){var r=t.value.clone(),i=qo(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(Lo(e),r).setHasLocalMutations()}}(t,e,n):t instanceof Uo?function(t,e,n){if(Co(t.precondition,e)){var r=qo(t.fieldTransforms,n,e),i=e.data;i.setAll(Fo(t)),i.setAll(r),e.convertToFoundDocument(Lo(e),i).setHasLocalMutations()}}(t,e,n):function(t,e){Co(t.precondition,e)&&e.convertToNoDocument(Gr.min())}(t,e)}function Do(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],s=e.data.field(o.field),a=mo(o.transform,s||null);null!=a&&(null==n&&(n=Ti.empty()),n.set(o.field,a))}return n||null}function Po(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&qr(t,e,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof _o&&e instanceof _o||t instanceof wo&&e instanceof wo?qr(t.elements,e.elements,li):t instanceof Eo&&e instanceof Eo?li(t.A,e.A):t instanceof yo&&e instanceof yo}(t.transform,e.transform)}(t,e)}))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function Lo(t){return t.isFoundDocument()?t.version:Gr.min()}var Mo=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return s(e,t),e}(Oo),Uo=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.fieldMask=r,s.precondition=i,s.fieldTransforms=o,s.type=1,s}return s(e,t),e}(Oo);function Fo(t){var e=new Map;return t.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}})),e}function jo(t,e,n){var r=new Map;Lr(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,vo(s,a,n[i]))}return r}function qo(t,e,n){for(var r=new Map,i=0,o=t;i<o.length;i++){var s=o[i],a=s.transform,u=n.data.field(s.field);r.set(s.field,go(a,u,e))}return r}var Bo,Vo,Go=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return s(e,t),e}(Oo),Ho=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return s(e,t),e}(Oo),Wo=function(t){this.count=t};function zo(t){switch(t){case Sr.OK:return Pr();case Sr.CANCELLED:case Sr.UNKNOWN:case Sr.DEADLINE_EXCEEDED:case Sr.RESOURCE_EXHAUSTED:case Sr.INTERNAL:case Sr.UNAVAILABLE:case Sr.UNAUTHENTICATED:return!1;case Sr.INVALID_ARGUMENT:case Sr.NOT_FOUND:case Sr.ALREADY_EXISTS:case Sr.PERMISSION_DENIED:case Sr.FAILED_PRECONDITION:case Sr.ABORTED:case Sr.OUT_OF_RANGE:case Sr.UNIMPLEMENTED:case Sr.DATA_LOSS:return!0;default:return Pr()}}function Ko(t){if(void 0===t)return xr("GRPC error has no .code"),Sr.UNKNOWN;switch(t){case Bo.OK:return Sr.OK;case Bo.CANCELLED:return Sr.CANCELLED;case Bo.UNKNOWN:return Sr.UNKNOWN;case Bo.DEADLINE_EXCEEDED:return Sr.DEADLINE_EXCEEDED;case Bo.RESOURCE_EXHAUSTED:return Sr.RESOURCE_EXHAUSTED;case Bo.INTERNAL:return Sr.INTERNAL;case Bo.UNAVAILABLE:return Sr.UNAVAILABLE;case Bo.UNAUTHENTICATED:return Sr.UNAUTHENTICATED;case Bo.INVALID_ARGUMENT:return Sr.INVALID_ARGUMENT;case Bo.NOT_FOUND:return Sr.NOT_FOUND;case Bo.ALREADY_EXISTS:return Sr.ALREADY_EXISTS;case Bo.PERMISSION_DENIED:return Sr.PERMISSION_DENIED;case Bo.FAILED_PRECONDITION:return Sr.FAILED_PRECONDITION;case Bo.ABORTED:return Sr.ABORTED;case Bo.OUT_OF_RANGE:return Sr.OUT_OF_RANGE;case Bo.UNIMPLEMENTED:return Sr.UNIMPLEMENTED;case Bo.DATA_LOSS:return Sr.DATA_LOSS;default:return Pr()}}(Vo=Bo||(Bo={}))[Vo.OK=0]="OK",Vo[Vo.CANCELLED=1]="CANCELLED",Vo[Vo.UNKNOWN=2]="UNKNOWN",Vo[Vo.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Vo[Vo.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Vo[Vo.NOT_FOUND=5]="NOT_FOUND",Vo[Vo.ALREADY_EXISTS=6]="ALREADY_EXISTS",Vo[Vo.PERMISSION_DENIED=7]="PERMISSION_DENIED",Vo[Vo.UNAUTHENTICATED=16]="UNAUTHENTICATED",Vo[Vo.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Vo[Vo.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Vo[Vo.ABORTED=10]="ABORTED",Vo[Vo.OUT_OF_RANGE=11]="OUT_OF_RANGE",Vo[Vo.UNIMPLEMENTED=12]="UNIMPLEMENTED",Vo[Vo.INTERNAL=13]="INTERNAL",Vo[Vo.UNAVAILABLE=14]="UNAVAILABLE",Vo[Vo.DATA_LOSS=15]="DATA_LOSS";var $o=function(){function t(t,e){this.comparator=t,this.root=e||Qo.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Qo.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Qo.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.inorderTraversal((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new Yo(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new Yo(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new Yo(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new Yo(this.root,t,this.comparator,!0)},t}(),Yo=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),Qo=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw Pr();if(this.right.isRed())throw Pr();var t=this.left.check();if(t!==this.right.check())throw Pr();return t+(this.isRed()?0:1)},t}();Qo.EMPTY=null,Qo.RED=!0,Qo.BLACK=!1,Qo.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw Pr()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw Pr()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw Pr()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw Pr()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw Pr()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Qo(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());var Xo=function(){function t(t){this.comparator=t,this.data=new $o(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new Jo(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new Jo(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),Jo=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),Zo=new $o(ci.comparator);function ts(){return Zo}var es=new $o(ci.comparator);function ns(){return es}var rs=new $o(ci.comparator);function is(){return rs}var os=new Xo(ci.comparator);function ss(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=os,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var as=new Xo(jr);function us(){return as}var cs=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,hs.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(Gr.min(),r,us(),ts(),ss())},t}(),hs=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(Jr.EMPTY_BYTE_STRING,n,ss(),ss(),ss())},t}(),ls=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},fs=function(t,e){this.targetId=t,this.V=e},ps=function(t,e,n,r){void 0===n&&(n=Jr.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},ds=function(){function t(){this.S=0,this.D=ms(),this.C=Jr.EMPTY_BYTE_STRING,this.N=!1,this.k=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"F",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"$",{get:function(){return this.k},enumerable:!1,configurable:!0}),t.prototype.O=function(t){t.approximateByteSize()>0&&(this.k=!0,this.C=t)},t.prototype.M=function(){var t=ss(),e=ss(),n=ss();return this.D.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:Pr()}})),new hs(this.C,this.N,t,e,n)},t.prototype.L=function(){this.k=!1,this.D=ms()},t.prototype.B=function(t,e){this.k=!0,this.D=this.D.insert(t,e)},t.prototype.q=function(t){this.k=!0,this.D=this.D.remove(t)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.k=!0,this.N=!0},t}(),gs=function(){function t(t){this.W=t,this.G=new Map,this.H=ts(),this.J=vs(),this.Y=new Xo(jr)}return t.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)r=o[i],this.tt(r,t.key,t.P)},t.prototype.et=function(t){var e=this;this.forEachTarget(t,(function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.O(t.resumeToken);break;case 1:r.K(),r.F||r.L(),r.O(t.resumeToken);break;case 2:r.K(),r.F||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.O(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.O(t.resumeToken));break;default:Pr()}}))},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach((function(t,r){n.st(r)&&e(r)}))},t.prototype.rt=function(t){var e=t.targetId,n=t.V.count,r=this.ot(e);if(r){var i=r.target;if(xi(i))if(0===n){var o=new ci(i.path);this.tt(e,o,Si.newNoDocument(o,Gr.min()))}else Lr(1===n);else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.ut=function(t){var e=this,n=new Map;this.G.forEach((function(r,i){var o=e.ot(i);if(o){if(r.current&&xi(o.target)){var s=new ci(o.target.path);null!==e.H.get(s)||e.at(i,s)||e.tt(i,s,Si.newNoDocument(s,t))}r.$&&(n.set(i,r.M()),r.L())}}));var r=ss();this.J.forEach((function(t,n){var i=!0;n.forEachWhile((function(t){var n=e.ot(t);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new cs(t,n,this.Y,this.H,r);return this.H=ts(),this.J=vs(),this.Y=new Xo(jr),i},t.prototype.Z=function(t,e){if(this.st(t)){var n=this.at(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},t.prototype.tt=function(t,e,n){if(this.st(t)){var r=this.nt(t);this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}},t.prototype.removeTarget=function(t){this.G.delete(t)},t.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(t){this.nt(t).U()},t.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new ds,this.G.set(t,e)),e},t.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new Xo(jr),this.J=this.J.insert(t,e)),e},t.prototype.st=function(t){var e=null!==this.ot(t);return e||Or("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ot=function(t){var e=this.G.get(t);return e&&e.F?null:this.W.lt(t)},t.prototype.it=function(t){var e=this;this.G.set(t,new ds),this.W.getRemoteKeysForTarget(t).forEach((function(n){e.tt(t,n,null)}))},t.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},t}();function vs(){return new $o(ci.comparator)}function ms(){return new $o(ci.comparator)}var ys={asc:"ASCENDING",desc:"DESCENDING"},_s={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},bs=function(t,e){this.databaseId=t,this.I=e};function ws(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function Is(t,e){return t.I?e.toBase64():e.toUint8Array()}function Es(t,e){return ws(t,e.toTimestamp())}function Ts(t){return Lr(!!t),Gr.fromTimestamp(function(t){var e=ti(t);return new Vr(e.seconds,e.nanos)}(t))}function As(t,e){return function(t){return new $r(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function Ss(t){var e=$r.fromString(t);return Lr(Qs(e)),e}function ks(t,e){return As(t.databaseId,e.path)}function Ns(t,e){var n=Ss(e);if(n.get(1)!==t.databaseId.projectId)throw new kr(Sr.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new kr(Sr.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ci(Rs(n))}function Cs(t,e){return As(t.databaseId,e)}function Os(t){var e=Ss(t);return 4===e.length?$r.emptyPath():Rs(e)}function xs(t){return new $r(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Rs(t){return Lr(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function Ds(t,e,n){return{name:ks(t,e),fields:n.value.mapValue.fields}}function Ps(t,e,n){var r=Ns(t,e.name),i=Ts(e.updateTime),o=new Ti({mapValue:{fields:e.fields}}),s=Si.newFoundDocument(r,i,o);return n&&s.setHasCommittedMutations(),n?s.setHasCommittedMutations():s}function Ls(t,e){var n;if(e instanceof Mo)n={update:Ds(t,e.key,e.value)};else if(e instanceof Go)n={delete:ks(t,e.key)};else if(e instanceof Uo)n={update:Ds(t,e.key,e.data),updateMask:Ys(e.fieldMask)};else{if(!(e instanceof Ho))return Pr();n={verify:ks(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof yo)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof _o)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof wo)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Eo)return{fieldPath:e.field.canonicalString(),increment:n.A};throw Pr()}(0,t)}))),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Es(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:Pr()}(t,e.precondition)),n}function Ms(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?No.updateTime(Ts(t.updateTime)):void 0!==t.exists?No.exists(t.exists):No.none()}(e.currentDocument):No.none(),r=e.updateTransforms?e.updateTransforms.map((function(e){return function(t,e){var n=null;if("setToServerValue"in e)Lr("REQUEST_TIME"===e.setToServerValue),n=new yo;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new _o(r)}else if("removeAllFromArray"in e){var i=e.removeAllFromArray.values||[];n=new wo(i)}else"increment"in e?n=new Eo(t,e.increment):Pr();var o=Qr.fromServerFormat(e.fieldPath);return new So(o,n)}(t,e)})):[];if(e.update){e.update.name;var i=Ns(t,e.update.name),o=new Ti({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(t){var e=t.fieldPaths||[];return new Xr(e.map((function(t){return Qr.fromServerFormat(t)})))}(e.updateMask);return new Uo(i,o,s,n,r)}return new Mo(i,o,n,r)}if(e.delete){var a=Ns(t,e.delete);return new Go(a,n)}if(e.verify){var u=Ns(t,e.verify);return new Ho(u,n)}return Pr()}function Us(t,e){return{documents:[Cs(t,e.path)]}}function Fs(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Cs(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Cs(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(wi(t.value))return{unaryFilter:{field:Ws(t.field),op:"IS_NAN"}};if(bi(t.value))return{unaryFilter:{field:Ws(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(wi(t.value))return{unaryFilter:{field:Ws(t.field),op:"IS_NOT_NAN"}};if(bi(t.value))return{unaryFilter:{field:Ws(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ws(t.field),op:Hs(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return function(t){return{field:Ws(t.field),direction:Gs(t.dir)}}(t)}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.I||si(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=Bs(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Bs(e.endAt)),n}function js(t){var e=Os(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Lr(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=qs(n.where));var a=[];n.orderBy&&(a=n.orderBy.map((function(t){return function(t){return new Gi(zs(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)})));var u=null;n.limit&&(u=function(t){var e;return si(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=Vs(n.startAt));var h=null;return n.endAt&&(h=Vs(n.endAt)),$i(e,i,a,s,u,"F",c,h)}function qs(t){return t?void 0!==t.unaryFilter?[$s(t)]:void 0!==t.fieldFilter?[Ks(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((function(t){return qs(t)})).reduce((function(t,e){return t.concat(e)})):Pr():[]}function Bs(t){return{before:t.before,values:t.position}}function Vs(t){var e=!!t.before,n=t.values||[];return new Bi(n,e)}function Gs(t){return ys[t]}function Hs(t){return _s[t]}function Ws(t){return{fieldPath:t.canonicalString()}}function zs(t){return Qr.fromServerFormat(t.fieldPath)}function Ks(t){return Ri.create(zs(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Pr()}}(t.fieldFilter.op),t.fieldFilter.value)}function $s(t){switch(t.unaryFilter.op){case"IS_NAN":var e=zs(t.unaryFilter.field);return Ri.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=zs(t.unaryFilter.field);return Ri.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=zs(t.unaryFilter.field);return Ri.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=zs(t.unaryFilter.field);return Ri.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Pr()}}function Ys(t){var e=[];return t.fields.forEach((function(t){return e.push(t.canonicalString())})),{fieldPaths:e}}function Qs(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function Xs(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=Zs(e)),e=Js(t.get(n),e);return Zs(e)}function Js(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function Zs(t){return t+""}function ta(t){var e=t.length;if(Lr(e>=2),2===e)return Lr(""===t.charAt(0)&&""===t.charAt(1)),$r.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("",o);switch((s<0||s>n)&&Pr(),t.charAt(s+1)){case"":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:Pr()}o=s+2}return new $r(r)}var ea=function(t,e){this.seconds=t,this.nanoseconds=e},na=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};na.store="owner",na.key="owner";var ra=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};ra.store="mutationQueues",ra.keyPath="userId";var ia=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};ia.store="mutations",ia.keyPath="batchId",ia.userMutationsIndex="userMutationsIndex",ia.userMutationsKeyPath=["userId","batchId"];var oa=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,Xs(e)]},t.key=function(t,e,n){return[t,Xs(e),n]},t}();oa.store="documentMutations",oa.PLACEHOLDER=new oa;var sa=function(t,e){this.path=t,this.readTime=e},aa=function(t,e){this.path=t,this.version=e},ua=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};ua.store="remoteDocuments",ua.readTimeIndex="readTimeIndex",ua.readTimeIndexPath="readTime",ua.collectionReadTimeIndex="collectionReadTimeIndex",ua.collectionReadTimeIndexPath=["parentPath","readTime"];var ca=function(t){this.byteSize=t};ca.store="remoteDocumentGlobal",ca.key="remoteDocumentGlobalKey";var ha=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};ha.store="targets",ha.keyPath="targetId",ha.queryTargetsIndexName="queryTargetsIndex",ha.queryTargetsKeyPath=["canonicalId","targetId"];var la=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};la.store="targetDocuments",la.keyPath=["targetId","path"],la.documentTargetsIndex="documentTargetsIndex",la.documentTargetsKeyPath=["path","targetId"];var fa=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};fa.key="targetGlobalKey",fa.store="targetGlobal";var pa=function(t,e){this.collectionId=t,this.parent=e};pa.store="collectionParents",pa.keyPath=["collectionId","parent"];var da=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};da.store="clientMetadata",da.keyPath="clientId";var ga=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};ga.store="bundles",ga.keyPath="bundleId";var va=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};va.store="namedQueries",va.keyPath="name";var ma=c(c([],c(c([],c(c([],c(c([],[ra.store,ia.store,oa.store,ua.store,ha.store,na.store,fa.store,la.store]),[da.store])),[ca.store])),[pa.store])),[ga.store,va.store]),ya="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",_a=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach((function(t){return t()}))},t}(),ba=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},wa=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)}),(function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&Pr(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}}))},t.prototype.toPromise=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.waitFor=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.waitFor(r)},t}(),Ia=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new ba,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new Aa(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){var r=Oa(e.target.error);n.ft.reject(new Aa(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new Aa(n,e)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(Or("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new ka(e)},t}(),Ea=function(){function t(e,n,r){this.name=e,this.version=n,this.wt=r,12.2===t._t((0,h.z$)())&&xr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return Or("SimpleDb","Removing database:",t),Na(window.indexedDB.deleteDatabase(t)).toPromise()},t.yt=function(){if("undefined"==typeof indexedDB)return!1;if(t.gt())return!0;var e=(0,h.z$)(),n=t._t(e),r=0<n&&n<10,i=t.Et(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.gt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t={FIREBASE_API_KEY:"AIzaSyA_d2z_LMkARJysO5MINZc-W3DFE-ZHXT0",FIREBASE_AUTH_DOMAIN:"lmi-store.firebaseapp.com",FIREBASE_PROJECT_ID:"lmi-store",FIREBASE_STORAGE_BUCKET:"lmi-store.appspot.com",FIREBASE_MESSAGING_SENDER_ID:"724695490036",FIREBASE_APP_ID:"1:724695490036:web:74fdba648a47384d3b2da1",FIREBASE_MEASUREMENT_ID:"G-H88RV60D76",ENV_DOMAIN:"https://api.tldv.io",TLDV_LOGIN_URL:"https://tldv.io/app/login?autoClose=true",MIXPANEL_PLAN:"early-beta",MIXPANEL_KEY:"9119f2c3302030eaaee56e29fcf9b1bc",NODE_ENV:"production",ONBOARDING_URL:"https://tldv.io/app/chrome-extension-onboarding",APP_URL:"https://tldv.io/app",MAX_MEETING_DURATION_IN_HOURS:"3",UNINSTALL_URL:"https://tally.so/r/3jqNxm",SENTRY_DSN:"https://27e262052a324fec9473a47392ea1735@o1042962.ingest.sentry.io/6021256",GROWTHBOOK_ROOT_DOMAIN:"https://cdn.growthbook.io",GROWTHBOOK_API_KEY:"key_prod_78197814c430ea7f"})||void 0===t?void 0:t.Tt)},t.It=function(t,e){return t.store(e)},t._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Et=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.At=function(t){return a(this,void 0,void 0,(function(){var e,n=this;return u(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(Or("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new Aa(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new kr(Sr.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new Aa(t,n))},i.onupgradeneeded=function(t){Or("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;n.wt.Rt(e,i.transaction,t.oldVersion,n.version).next((function(){Or("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}}))}))},t.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return a(this,void 0,void 0,(function(){var i,o,s,a,c;return u(this,(function(h){switch(h.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,c,h,l;return u(this,(function(u){switch(u.label){case 0:++o,u.label=1;case 1:return u.trys.push([1,4,,5]),[4,a.At(t)];case 2:return a.db=u.sent(),e=Ia.open(a.db,t,i?"readonly":"readwrite",n),s=r(e).catch((function(t){return e.abort(t),wa.reject(t)})).toPromise(),c={},s.catch((function(){})),[4,e.dt];case 3:return[2,(c.value=(u.sent(),s),c)];case 4:return h=u.sent(),l="FirebaseError"!==h.name&&o<3,Or("SimpleDb","Transaction failed with error:",h.message,"Retrying:",l),a.close(),l?[3,5]:[2,{value:Promise.reject(h)}];case 5:return[2]}}))},a=this,h.label=1;case 1:return[5,s()];case 2:if("object"==typeof(c=h.sent()))return[2,c.value];h.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),Ta=function(){function t(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(t){this.St=t},t.prototype.delete=function(){return Na(this.Pt.delete())},t}(),Aa=function(t){function e(e,n){var r=this;return(r=t.call(this,Sr.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return s(e,t),e}(kr);function Sa(t){return"IndexedDbTransactionError"===t.name}var ka=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(Or("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(Or("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Na(n)},t.prototype.add=function(t){return Or("SimpleDb","ADD",this.store.name,t,t),Na(this.store.add(t))},t.prototype.get=function(t){var e=this;return Na(this.store.get(t)).next((function(n){return void 0===n&&(n=null),Or("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return Or("SimpleDb","DELETE",this.store.name,t),Na(this.store.delete(t))},t.prototype.count=function(){return Or("SimpleDb","COUNT",this.store.name),Na(this.store.count())},t.prototype.Nt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.xt(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.kt=function(t,e){Or("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.Ft=!1;var r=this.cursor(n);return this.xt(r,(function(t,e,n){return n.delete()}))},t.prototype.$t=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.xt(r,e)},t.prototype.Ot=function(t){var e=this.cursor({});return new wa((function(n,r){e.onerror=function(t){var e=Oa(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.xt=function(t,e){var n=[];return new wa((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new Ta(i),s=e(i.primaryKey,i.value,o);if(s instanceof wa){var a=s.catch((function(t){return o.done(),wa.reject(t)}));n.push(a)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}})).next((function(){return wa.waitFor(n)}))},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.Ft?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function Na(t){return new wa((function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=Oa(t.target.error);n(e)}}))}var Ca=!1;function Oa(t){var e=Ea._t((0,h.z$)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new kr("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Ca||(Ca=!0,setTimeout((function(){throw r}),0)),r}}return t}var xa=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Mt=e,r.currentSequenceNumber=n,r}return s(e,t),e}(_a);function Ra(t,e){var n=Mr(t);return Ea.It(n.Mt,e)}var Da=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&xo(i,t,n[r])}},t.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(o=n[e]).key.isEqual(t.key)&&Ro(o,t,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(t.key)&&Ro(o,t,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach((function(n){var r=t.get(n.key),i=r;e.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Gr.min())}))},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),ss())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&qr(this.mutations,t.mutations,(function(t,e){return Po(t,e)}))&&qr(this.baseMutations,t.baseMutations,(function(t,e){return Po(t,e)}))},t}(),Pa=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){Lr(e.mutations.length===r.length);for(var i=is(),o=e.mutations,s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),La=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=Gr.min()),void 0===o&&(o=Gr.min()),void 0===s&&(s=Jr.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),Ma=function(t){this.Lt=t};function Ua(t,e){if(e.document)return Ps(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=ci.fromSegments(e.noDocument.path),r=Va(e.noDocument.readTime),i=Si.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var o=ci.fromSegments(e.unknownDocument.path);return r=Va(e.unknownDocument.version),Si.newUnknownDocument(o,r)}return Pr()}function Fa(t,e,n){var r=ja(n),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){var o=function(t,e){return{name:ks(t,e.key),fields:e.data.value.mapValue.fields,updateTime:ws(t,e.version.toTimestamp())}}(t.Lt,e),s=e.hasCommittedMutations;return new ua(null,null,o,s,r,i)}if(e.isNoDocument()){var a=e.key.path.toArray(),u=Ba(e.version);return s=e.hasCommittedMutations,new ua(null,new sa(a,u),null,s,r,i)}if(e.isUnknownDocument()){var c=e.key.path.toArray(),h=Ba(e.version);return new ua(new aa(c,h),null,null,!0,r,i)}return Pr()}function ja(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function qa(t){var e=new Vr(t[0],t[1]);return Gr.fromTimestamp(e)}function Ba(t){var e=t.toTimestamp();return new ea(e.seconds,e.nanoseconds)}function Va(t){var e=new Vr(t.seconds,t.nanoseconds);return Gr.fromTimestamp(e)}function Ga(t,e){for(var n=(e.baseMutations||[]).map((function(e){return Ms(t.Lt,e)})),r=0;r<e.mutations.length-1;++r){var i=e.mutations[r];if(r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform){var o=e.mutations[r+1];i.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(r+1,1),++r}}var s=e.mutations.map((function(e){return Ms(t.Lt,e)})),a=Vr.fromMillis(e.localWriteTimeMs);return new Da(e.batchId,a,n,s)}function Ha(t){var e,n,r=Va(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?Va(t.lastLimboFreeSnapshotVersion):Gr.min();return void 0!==t.query.documents?(Lr(1===(n=t.query).documents.length),e=no(Yi(Os(n.documents[0])))):e=function(t){return no(js(t))}(t.query),new La(e,t.targetId,0,t.lastListenSequenceNumber,r,i,Jr.fromBase64String(t.resumeToken))}function Wa(t,e){var n,r=Ba(e.snapshotVersion),i=Ba(e.lastLimboFreeSnapshotVersion);n=xi(e.target)?Us(t.Lt,e.target):Fs(t.Lt,e.target);var o=e.resumeToken.toBase64();return new ha(e.targetId,Ci(e.target),r,o,e.sequenceNumber,i,n)}function za(t){var e=js({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?ro(e,e.limit,"L"):e}var Ka=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return $a(t).get(e).next((function(t){if(t)return{id:(e=t).bundleId,createTime:Va(e.createTime),version:e.version};var e}))},t.prototype.saveBundleMetadata=function(t,e){return $a(t).put({bundleId:(n=e).id,createTime:Ba(Ts(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return Ya(t).get(e).next((function(t){if(t)return{name:(e=t).name,query:za(e.bundledQuery),readTime:Va(e.readTime)};var e}))},t.prototype.saveNamedQuery=function(t,e){return Ya(t).put(function(t){return{name:t.name,readTime:Ba(Ts(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function $a(t){return Ra(t,ga.store)}function Ya(t){return Ra(t,va.store)}var Qa=function(){function t(){this.Bt=new Xa}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),wa.resolve()},t.prototype.getCollectionParents=function(t,e){return wa.resolve(this.Bt.getEntries(e))},t}(),Xa=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new Xo($r.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new Xo($r.comparator)).toArray()},t}(),Ja=function(){function t(){this.qt=new Xa}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.qt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener((function(){n.qt.add(e)}));var o={collectionId:r,parent:Xs(i)};return Za(t).put(o)}return wa.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[Br(e),""],!1,!0);return Za(t).Nt(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(ta(o.parent))}return n}))},t}();function Za(t){return Ra(t,pa.store)}var tu={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},eu=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();function nu(t,e,n){var r=t.store(ia.store),i=t.store(oa.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.$t({range:s},(function(t,e,n){return a++,n.delete()}));o.push(u.next((function(){Lr(1===a)})));for(var c=[],h=0,l=n.mutations;h<l.length;h++){var f=l[h],p=oa.key(e,f.key.path,n.batchId);o.push(i.delete(p)),c.push(f.key)}return wa.waitFor(o).next((function(){return c}))}function ru(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Pr();e=t.noDocument}return JSON.stringify(e).length}eu.DEFAULT_COLLECTION_PERCENTILE=10,eu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,eu.DEFAULT=new eu(41943040,eu.DEFAULT_COLLECTION_PERCENTILE,eu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),eu.DISABLED=new eu(-1,0,0);var iu=function(){function t(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Kt={}}return t.Qt=function(e,n,r,i){return Lr(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return su(t).$t({index:ia.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=au(t),s=su(t);return s.add({}).next((function(a){Lr("number"==typeof a);for(var u=new Da(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return Ls(t.Lt,e)})),i=n.mutations.map((function(e){return Ls(t.Lt,e)}));return new ia(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),h=[],l=new Xo((function(t,e){return jr(t.canonicalString(),e.canonicalString())})),f=0,p=r;f<p.length;f++){var d=p[f],g=oa.key(i.userId,d.key.path,a);l=l.add(d.key.path.popLast()),h.push(s.put(c)),h.push(o.put(g,oa.PLACEHOLDER))}return l.forEach((function(e){h.push(i.Ut.addToCollectionParentIndex(t,e))})),t.addOnCommittedListener((function(){i.Kt[a]=u.keys()})),wa.waitFor(h).next((function(){return u}))}))},t.prototype.lookupMutationBatch=function(t,e){var n=this;return su(t).get(e).next((function(t){return t?(Lr(t.userId===n.userId),Ga(n.R,t)):null}))},t.prototype.jt=function(t,e){var n=this;return this.Kt[e]?wa.resolve(this.Kt[e]):this.lookupMutationBatch(t,e).next((function(t){if(t){var r=t.keys();return n.Kt[e]=r,r}return null}))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return su(t).$t({index:ia.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(Lr(e.batchId>=r),o=Ga(n.R,e)),i.done()})).next((function(){return o}))},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return su(t).$t({index:ia.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return su(t).Nt(ia.userMutationsIndex,n).next((function(t){return t.map((function(t){return Ga(e.R,t)}))}))},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=oa.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return au(t).$t({range:i},(function(r,i,s){var a=r[0],u=r[1],c=r[2],h=ta(u);if(a===n.userId&&e.path.isEqual(h))return su(t).get(c).next((function(t){if(!t)throw Pr();Lr(t.userId===n.userId),o.push(Ga(n.R,t))}));s.done()})).next((function(){return o}))},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Xo(jr),i=[];return e.forEach((function(e){var o=oa.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=au(t).$t({range:s},(function(t,i,o){var s=t[0],a=t[1],u=t[2],c=ta(a);s===n.userId&&e.path.isEqual(c)?r=r.add(u):o.done()}));i.push(a)})),wa.waitFor(i).next((function(){return n.Wt(t,r)}))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=oa.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Xo(jr);return au(t).$t({range:s},(function(t,e,o){var s=t[0],u=t[1],c=t[2],h=ta(u);s===n.userId&&r.isPrefixOf(h)?h.length===i&&(a=a.add(c)):o.done()})).next((function(){return n.Wt(t,a)}))},t.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(su(t).get(e).next((function(t){if(null===t)throw Pr();Lr(t.userId===n.userId),r.push(Ga(n.R,t))})))})),wa.waitFor(i).next((function(){return r}))},t.prototype.removeMutationBatch=function(t,e){var n=this;return nu(t.Mt,this.userId,e).next((function(r){return t.addOnCommittedListener((function(){n.Gt(e.batchId)})),wa.forEach(r,(function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)}))}))},t.prototype.Gt=function(t){delete this.Kt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next((function(n){if(!n)return wa.resolve();var r=IDBKeyRange.lowerBound(oa.prefixForUser(e.userId)),i=[];return au(t).$t({range:r},(function(t,n,r){if(t[0]===e.userId){var o=ta(t[1]);i.push(o)}else r.done()})).next((function(){Lr(0===i.length)}))}))},t.prototype.containsKey=function(t,e){return ou(t,this.userId,e)},t.prototype.zt=function(t){var e=this;return uu(t).get(this.userId).next((function(t){return t||new ra(e.userId,-1,"")}))},t}();function ou(t,e,n){var r=oa.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return au(t).$t({range:o,Ft:!0},(function(t,n,r){var o=t[0],a=t[1];t[2],o===e&&a===i&&(s=!0),r.done()})).next((function(){return s}))}function su(t){return Ra(t,ia.store)}function au(t){return Ra(t,oa.store)}function uu(t){return Ra(t,ra.store)}var cu=function(){function t(t){this.Ht=t}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),hu=function(){function t(t,e){this.referenceDelegate=t,this.R=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next((function(n){var r=new cu(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next((function(t){return Gr.fromTimestamp(new Vr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)}))},t.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next((function(){return n.Xt(t).next((function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)}))}))},t.prototype.updateTargetData=function(t,e){return this.te(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next((function(){return lu(t).delete(e.targetId)})).next((function(){return n.Xt(t)})).next((function(e){return Lr(e.targetCount>0),e.targetCount-=1,n.Zt(t,e)}))},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return lu(t).$t((function(s,a){var u=Ha(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))})).next((function(){return wa.waitFor(o)})).next((function(){return i}))},t.prototype.forEachTarget=function(t,e){return lu(t).$t((function(t,n){var r=Ha(n);e(r)}))},t.prototype.Xt=function(t){return fu(t).get(fa.key).next((function(t){return Lr(null!==t),t}))},t.prototype.Zt=function(t,e){return fu(t).put(fa.key,e)},t.prototype.te=function(t,e){return lu(t).put(Wa(this.R,e))},t.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.Xt(t).next((function(t){return t.targetCount}))},t.prototype.getTargetData=function(t,e){var n=Ci(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return lu(t).$t({range:r,index:ha.queryTargetsIndexName},(function(t,n,r){var o=Ha(n);Oi(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=pu(t);return e.forEach((function(e){var s=Xs(e.path);i.push(o.put(new la(n,s))),i.push(r.referenceDelegate.addReference(t,n,e))})),wa.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=pu(t);return wa.forEach(e,(function(e){var o=Xs(e.path);return wa.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])}))},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=pu(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=pu(t),i=ss();return r.$t({range:n,Ft:!0},(function(t,e,n){var r=ta(t[1]),o=new ci(r);i=i.add(o)})).next((function(){return i}))},t.prototype.containsKey=function(t,e){var n=Xs(e.path),r=IDBKeyRange.bound([n],[Br(n)],!1,!0),i=0;return pu(t).$t({index:la.documentTargetsIndex,Ft:!0,range:r},(function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.lt=function(t,e){return lu(t).get(e).next((function(t){return t?Ha(t):null}))},t}();function lu(t){return Ra(t,ha.store)}function fu(t){return Ra(t,fa.store)}function pu(t){return Ra(t,la.store)}function du(t){return a(this,void 0,void 0,(function(){return u(this,(function(e){if(t.code!==Sr.FAILED_PRECONDITION||t.message!==ya)throw t;return Or("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}function gu(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],s=jr(n,i);return 0===s?jr(r,o):s}var vu=function(){function t(t){this.ne=t,this.buffer=new Xo(gu),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();gu(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),mu=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){var e=this,n=this.oe?3e5:6e4;Or("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,(function(){return a(e,void 0,void 0,(function(){var e;return u(this,(function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return Sa(e=n.sent())?(Or("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,du(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),yu=function(){function t(t,e){this.ae=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return wa.resolve(Ar.o);var r=new vu(e);return this.ae.forEachTarget(t,(function(t){return r.re(t.sequenceNumber)})).next((function(){return n.ae.le(t,(function(t){return r.re(t)}))})).next((function(){return r.maxValue}))},t.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Or("LruGarbageCollector","Garbage collection skipped; disabled"),wa.resolve(tu)):this.getCacheSize(t).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(Or("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),tu):n.fe(t,e)}))},t.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},t.prototype.fe=function(t,e){var n,r,i,o,s,a,u,c=this,h=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((function(e){return e>c.params.maximumSequenceNumbersToCollect?(Or("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),r=c.params.maximumSequenceNumbersToCollect):r=e,o=Date.now(),c.nthSequenceNumber(t,r)})).next((function(r){return n=r,s=Date.now(),c.removeTargets(t,n,e)})).next((function(e){return i=e,a=Date.now(),c.removeOrphanedDocuments(t,n)})).next((function(t){return u=Date.now(),Cr()<=l.in.DEBUG&&Or("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-h)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-h)+"ms"),wa.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})}))},t}(),_u=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new yu(t,e)}(this,e)}return t.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.de=function(t){var e=0;return this.le(t,(function(t){e++})).next((function(){return e}))},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.le=function(t,e){return this.we(t,(function(t,n){return e(n)}))},t.prototype.addReference=function(t,e,n){return bu(t,n)},t.prototype.removeReference=function(t,e,n){return bu(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return bu(t,e)},t.prototype._e=function(t,e){return function(t,e){var n=!1;return uu(t).Ot((function(r){return ou(t,r,e).next((function(t){return t&&(n=!0),wa.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(t,(function(s,a){if(a<=e){var u=n._e(t,s).next((function(e){if(!e)return o++,r.getEntry(t,s).next((function(){return r.removeEntry(s),pu(t).delete([0,Xs(s.path)])}))}));i.push(u)}})).next((function(){return wa.waitFor(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return bu(t,e)},t.prototype.we=function(t,e){var n,r=pu(t),i=Ar.o;return r.$t({index:la.documentTargetsIndex},(function(t,r){var o=t[0];t[1];var s=r.path,a=r.sequenceNumber;0===o?(i!==Ar.o&&e(new ci(ta(n)),i),i=a,n=s):i=Ar.o})).next((function(){i!==Ar.o&&e(new ci(ta(n)),i)}))},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function bu(t,e){return pu(t).put(function(t,e){return new la(0,Xs(t.path),e)}(e,t.currentSequenceNumber))}var wu=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];if(this.equalsFn(s,t))return a}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){Wr(this.inner,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];t(s,a)}}))},t.prototype.isEmpty=function(){return zr(this.inner)},t}(),Iu=function(){function t(){this.changes=new wu((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:Gr.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:Si.newInvalidDocument(t),readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?wa.resolve(n.document):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),Eu=function(){function t(t,e){this.R=t,this.Ut=e}return t.prototype.addEntry=function(t,e,n){return Su(t).put(ku(e),n)},t.prototype.removeEntry=function(t,e){var n=Su(t),r=ku(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.me(t,r)}))},t.prototype.getEntry=function(t,e){var n=this;return Su(t).get(ku(e)).next((function(t){return n.ye(e,t)}))},t.prototype.ge=function(t,e){var n=this;return Su(t).get(ku(e)).next((function(t){return{document:n.ye(e,t),size:ru(t)}}))},t.prototype.getEntries=function(t,e){var n=this,r=ts();return this.pe(t,e,(function(t,e){var i=n.ye(t,e);r=r.insert(t,i)})).next((function(){return r}))},t.prototype.Ee=function(t,e){var n=this,r=ts(),i=new $o(ci.comparator);return this.pe(t,e,(function(t,e){var o=n.ye(t,e);r=r.insert(t,o),i=i.insert(t,ru(e))})).next((function(){return{documents:r,Te:i}}))},t.prototype.pe=function(t,e,n){if(e.isEmpty())return wa.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return Su(t).$t({range:r},(function(t,e,r){for(var s=ci.fromSegments(t);o&&ci.comparator(o,s)<0;)n(o,null),o=i.getNext();o&&o.isEqual(s)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()})).next((function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=ts(),o=e.path.length+1,s={};if(n.isEqual(Gr.min())){var a=e.path.toArray();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.toArray(),c=ja(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=ua.collectionReadTimeIndex}return Su(t).$t(s,(function(t,n,s){if(t.length===o){var a=Ua(r.R,n);e.path.isPrefixOf(a.key.path)?ao(e,a)&&(i=i.insert(a.key,a)):s.done()}})).next((function(){return i}))},t.prototype.newChangeBuffer=function(t){return new Tu(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return Au(t).get(ca.key).next((function(t){return Lr(!!t),t}))},t.prototype.me=function(t,e){return Au(t).put(ca.key,e)},t.prototype.ye=function(t,e){if(e){var n=Ua(this.R,e);if(!n.isNoDocument()||!n.version.isEqual(Gr.min()))return n}return Si.newInvalidDocument(t)},t}(),Tu=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ie=e,r.trackRemovals=n,r.Ae=new wu((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return s(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new Xo((function(t,e){return jr(t.canonicalString(),e.canonicalString())}));return this.changes.forEach((function(o,s){var a=e.Ae.get(o);if(s.document.isValidDocument()){var u=Fa(e.Ie.R,s.document,e.getReadTime(o));i=i.add(o.path.popLast());var c=ru(u);r+=c-a,n.push(e.Ie.addEntry(t,o,u))}else if(r-=a,e.trackRemovals){var h=Fa(e.Ie.R,Si.newNoDocument(o,Gr.min()),e.getReadTime(o));n.push(e.Ie.addEntry(t,o,h))}else n.push(e.Ie.removeEntry(t,o))})),i.forEach((function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))})),n.push(this.Ie.updateMetadata(t,r)),wa.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next((function(t){return n.Ae.set(e,t.size),t.document}))},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next((function(t){var e=t.documents;return t.Te.forEach((function(t,e){n.Ae.set(t,e)})),e}))},e}(Iu);function Au(t){return Ra(t,ca.store)}function Su(t){return Ra(t,ua.store)}function ku(t){return t.path.toArray()}var Nu=function(){function t(t){this.R=t}return t.prototype.Rt=function(t,e,n,r){var i=this;Lr(n<r&&n>=0&&r<=11);var o=new Ia("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(na.store)}(t),function(t){t.createObjectStore(ra.store,{keyPath:ra.keyPath}),t.createObjectStore(ia.store,{keyPath:ia.keyPath,autoIncrement:!0}).createIndex(ia.userMutationsIndex,ia.userMutationsKeyPath,{unique:!0}),t.createObjectStore(oa.store)}(t),Cu(t),function(t){t.createObjectStore(ua.store)}(t));var s=wa.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(la.store),t.deleteObjectStore(ha.store),t.deleteObjectStore(fa.store)}(t),Cu(t)),s=s.next((function(){return function(t){var e=t.store(fa.store),n=new fa(0,0,Gr.min().toTimestamp(),0);return e.put(fa.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(s=s.next((function(){return function(t,e){return e.store(ia.store).Nt().next((function(n){t.deleteObjectStore(ia.store),t.createObjectStore(ia.store,{keyPath:ia.keyPath,autoIncrement:!0}).createIndex(ia.userMutationsIndex,ia.userMutationsKeyPath,{unique:!0});var r=e.store(ia.store),i=n.map((function(t){return r.put(t)}));return wa.waitFor(i)}))}(t,o)}))),s=s.next((function(){!function(t){t.createObjectStore(da.store,{keyPath:da.keyPath})}(t)}))),n<5&&r>=5&&(s=s.next((function(){return i.Re(o)}))),n<6&&r>=6&&(s=s.next((function(){return function(t){t.createObjectStore(ca.store)}(t),i.be(o)}))),n<7&&r>=7&&(s=s.next((function(){return i.ve(o)}))),n<8&&r>=8&&(s=s.next((function(){return i.Pe(t,o)}))),n<9&&r>=9&&(s=s.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(ua.store);e.createIndex(ua.readTimeIndex,ua.readTimeIndexPath,{unique:!1}),e.createIndex(ua.collectionReadTimeIndex,ua.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(s=s.next((function(){return i.Ve(o)}))),n<11&&r>=11&&(s=s.next((function(){!function(t){t.createObjectStore(ga.store,{keyPath:ga.keyPath})}(t),function(t){t.createObjectStore(va.store,{keyPath:va.keyPath})}(t)}))),s},t.prototype.be=function(t){var e=0;return t.store(ua.store).$t((function(t,n){e+=ru(n)})).next((function(){var n=new ca(e);return t.store(ca.store).put(ca.key,n)}))},t.prototype.Re=function(t){var e=this,n=t.store(ra.store),r=t.store(ia.store);return n.Nt().next((function(n){return wa.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(ia.userMutationsIndex,i).next((function(r){return wa.forEach(r,(function(r){Lr(r.userId===n.userId);var i=Ga(e.R,r);return nu(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.ve=function(t){var e=t.store(la.store),n=t.store(ua.store);return t.store(fa.store).get(fa.key).next((function(t){var r=[];return n.$t((function(n,i){var o=new $r(n),s=function(t){return[0,Xs(t)]}(o);r.push(e.get(s).next((function(n){return n?wa.resolve():function(n){return e.put(new la(0,Xs(n),t.highestListenSequenceNumber))}(o)})))})).next((function(){return wa.waitFor(r)}))}))},t.prototype.Pe=function(t,e){t.createObjectStore(pa.store,{keyPath:pa.keyPath});var n=e.store(pa.store),r=new Xa,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:Xs(i)})}};return e.store(ua.store).$t({Ft:!0},(function(t,e){var n=new $r(t);return i(n.popLast())})).next((function(){return e.store(oa.store).$t({Ft:!0},(function(t,e){t[0];var n=t[1];t[2];var r=ta(n);return i(r.popLast())}))}))},t.prototype.Ve=function(t){var e=this,n=t.store(ha.store);return n.$t((function(t,r){var i=Ha(r),o=Wa(e.R,i);return n.put(o)}))},t}();function Cu(t){t.createObjectStore(la.store,{keyPath:la.keyPath}).createIndex(la.documentTargetsIndex,la.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(ha.store,{keyPath:ha.keyPath}).createIndex(ha.queryTargetsIndexName,ha.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(fa.store)}var Ou="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",xu=function(){function t(e,n,r,i,o,s,a,u,c,h){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=s,this.document=a,this.De=c,this.Ce=h,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ke=null,this.inForeground=!1,this.Fe=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!t.yt())throw new kr(Sr.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new _u(this,i),this.Le=n+"main",this.R=new Ma(u),this.Be=new Ea(this.Le,11,new Nu(this.R)),this.qe=new hu(this.referenceDelegate,this.R),this.Ut=new Ja,this.Ue=function(t,e){return new Eu(t,e)}(this.R,this.Ut),this.Ke=new Ka,this.window&&this.window.localStorage?this.Qe=this.window.localStorage:(this.Qe=null,!1===h&&xr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.je().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new kr(Sr.FAILED_PRECONDITION,Ou);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.qe.getHighestSequenceNumber(e)}))})).then((function(e){t.Ne=new Ar(e,t.De)})).then((function(){t.xe=!0})).catch((function(e){return t.Be&&t.Be.close(),Promise.reject(e)}))},t.prototype.He=function(t){var e=this;return this.Me=function(n){return a(e,void 0,void 0,(function(){return u(this,(function(e){return this.started?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt((function(n){return a(e,void 0,void 0,(function(){return u(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget((function(){return a(e,void 0,void 0,(function(){return u(this,(function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return Du(e).put(new da(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.Je(e).next((function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable((function(){return t.Me(!1)})))}))})).next((function(){return t.Ye(e)})).next((function(n){return t.isPrimary&&!n?t.Xe(e).next((function(){return!1})):!!n&&t.Ze(e).next((function(){return!0}))}))})).catch((function(e){if(Sa(e))return Or("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return Or("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.Se.enqueueRetryable((function(){return t.Me(e)})),t.isPrimary=e}))},t.prototype.Je=function(t){var e=this;return Ru(t).get(na.key).next((function(t){return wa.resolve(e.tn(t))}))},t.prototype.en=function(t){return Du(t).delete(this.clientId)},t.prototype.nn=function(){return a(this,void 0,void 0,(function(){var t,e,n,r,i=this;return u(this,(function(o){switch(o.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(t){var e=Ra(t,da.store);return e.Nt().next((function(t){var n=i.rn(t,18e5),r=t.filter((function(t){return-1===n.indexOf(t)}));return wa.forEach(r,(function(t){return e.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(t=o.sent(),this.Qe)for(e=0,n=t;e<n.length;e++)r=n[e],this.Qe.removeItem(this.on(r.clientId));o.label=2;case 2:return[2]}}))}))},t.prototype.ze=function(){var t=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return t.je().then((function(){return t.nn()})).then((function(){return t.ze()}))}))},t.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ye=function(t){var e=this;return this.Ce?wa.resolve(!0):Ru(t).get(na.key).next((function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new kr(Sr.FAILED_PRECONDITION,Ou);return!1}}return!(!e.networkEnabled||!e.inForeground)||Du(t).Nt().next((function(t){return void 0===e.rn(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&Or("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.shutdown=function(){return a(this,void 0,void 0,(function(){var t=this;return u(this,(function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[na.store,da.store],(function(e){var n=new xa(e,Ar.o);return t.Xe(n).next((function(){return t.en(n)}))}))];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}}))}))},t.prototype.rn=function(t,e){var n=this;return t.filter((function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)}))},t.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return Du(e).Nt().next((function(e){return t.rn(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return iu.Qt(t,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r=this;Or("IndexedDbPersistence","Starting transaction:",t);var i,o="readonly"===e?"readonly":"readwrite";return this.Be.runTransaction(t,o,ma,(function(o){return i=new xa(o,r.Ne?r.Ne.next():Ar.o),"readwrite-primary"===e?r.Je(i).next((function(t){return!!t||r.Ye(i)})).next((function(e){if(!e)throw xr("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.Se.enqueueRetryable((function(){return r.Me(!1)})),new kr(Sr.FAILED_PRECONDITION,ya);return n(i)})).next((function(t){return r.Ze(i).next((function(){return t}))})):r.dn(i).next((function(){return n(i)}))})).then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.dn=function(t){var e=this;return Ru(t).get(na.key).next((function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new kr(Sr.FAILED_PRECONDITION,Ou)}))},t.prototype.Ze=function(t){var e=new na(this.clientId,this.allowTabSynchronization,Date.now());return Ru(t).put(na.key,e)},t.yt=function(){return Ea.yt()},t.prototype.Xe=function(t){var e=this,n=Ru(t);return n.get(na.key).next((function(t){return e.tn(t)?(Or("IndexedDbPersistence","Releasing primary lease."),n.delete(na.key)):wa.resolve()}))},t.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(xr("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Fe=function(){t.Se.enqueueAndForget((function(){return t.inForeground="visible"===t.document.visibilityState,t.je()}))},this.document.addEventListener("visibilitychange",this.Fe),this.inForeground="visible"===this.document.visibilityState)},t.prototype.an=function(){this.Fe&&(this.document.removeEventListener("visibilitychange",this.Fe),this.Fe=null)},t.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.ke=function(){e.un(),(0,h.G6)()&&navigator.appVersion.match("Version/14")&&e.Se.enterRestrictedMode(!0),e.Se.enqueueAndForget((function(){return e.shutdown()}))},this.window.addEventListener("pagehide",this.ke))},t.prototype.hn=function(){this.ke&&(this.window.removeEventListener("pagehide",this.ke),this.ke=null)},t.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Qe)||void 0===e?void 0:e.getItem(this.on(t)));return Or("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return xr("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.un=function(){if(this.Qe)try{this.Qe.setItem(this.on(this.clientId),String(Date.now()))}catch(t){xr("Failed to set zombie client id.",t)}},t.prototype.ln=function(){if(this.Qe)try{this.Qe.removeItem(this.on(this.clientId))}catch(t){}},t.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function Ru(t){return Ra(t,na.store)}function Du(t){return Ra(t,da.store)}function Pu(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var Lu=function(t,e){this.progress=t,this.wn=e},Mu=function(){function t(t,e,n){this.Ue=t,this._n=e,this.Ut=n}return t.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next((function(r){return n.yn(t,e,r)}))},t.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next((function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t}))},t.prototype.gn=function(t,e){t.forEach((function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)}))},t.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next((function(e){return n.En(t,e).next((function(){return e}))}))},t.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next((function(t){return n.gn(e,t)}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return ci.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Tn(t,e.path):to(e)?this.In(t,e,n):this.An(t,e,n)},t.prototype.Tn=function(t,e){return this.mn(t,new ci(e)).next((function(t){var e=ns();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))},t.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,o=ns();return this.Ut.getCollectionParents(t,i).next((function(s){return wa.forEach(s,(function(s){var a=function(t,e){return new Ki(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.An(t,a,n).next((function(t){t.forEach((function(t,e){o=o.insert(t,e)}))}))})).next((function(){return o}))}))},t.prototype.An=function(t,e,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next((function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(t,e)})).next((function(e){return i=e,o.Rn(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,h=r.get(c);null==h&&(h=Si.newInvalidDocument(c),r=r.insert(c,h)),Ro(u,h,o.localWriteTime),h.isFoundDocument()||(r=r.remove(c))}}))})).next((function(){return r.forEach((function(t,n){ao(e,n)||(r=r.remove(t))})),r}))},t.prototype.Rn=function(t,e,n){for(var r=ss(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof Uo&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next((function(t){return t.forEach((function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))})),c}))},t}(),Uu=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}return t.Pn=function(e,n){for(var r=ss(),i=ss(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),Fu=function(){function t(){}return t.prototype.Vn=function(t){this.Sn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(Gr.min())?this.Dn(t,e):this.Sn.pn(t,r).next((function(o){var s=i.Cn(e,o);return(Qi(e)||Xi(e))&&i.Nn(e.limitType,s,r,n)?i.Dn(t,e):(Cr()<=l.in.DEBUG&&Or("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),so(e)),i.Sn.getDocumentsMatchingQuery(t,e,n).next((function(t){return s.forEach((function(e){t=t.insert(e.key,e)})),t})))}))},t.prototype.Cn=function(t,e){var n=new Xo(uo(t));return e.forEach((function(e,r){ao(t,r)&&(n=n.add(r))})),n},t.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.Dn=function(t,e){return Cr()<=l.in.DEBUG&&Or("QueryEngine","Using full collection scan to execute query:",so(e)),this.Sn.getDocumentsMatchingQuery(t,e,Gr.min())},t}(),ju=function(){function t(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.kn=new $o(jr),this.Fn=new wu((function(t){return Ci(t)}),Oi),this.$n=Gr.min(),this._n=t.getMutationQueue(n),this.On=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new Mu(this.On,this._n,this.persistence.getIndexManager()),this.Ke=t.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.collect(n,e.kn)}))},t}();function qu(t,e,n,r){return new ju(t,e,n,r)}function Bu(t,e){return a(this,void 0,void 0,(function(){var n,r,i,o;return u(this,(function(s){switch(s.label){case 0:return n=Mr(t),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var o;return n._n.getAllMutationBatches(t).next((function(s){return o=s,r=n.persistence.getMutationQueue(e),i=new Mu(n.On,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)})).next((function(e){for(var n=[],r=[],s=ss(),a=0,u=o;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var h=0,l=c.mutations;h<l.length;h++){var f=l[h];s=s.add(f.key)}}for(var p=0,d=e;p<d.length;p++){var g=d[p];r.push(g.batchId);for(var v=0,m=g.mutations;v<m.length;v++){var y=m[v];s=s.add(y.key)}}return i.pn(t,s).next((function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:r}}))}))}))];case 1:return o=s.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),o)]}}))}))}function Vu(t,e){var n=Mr(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r=e.batch.keys(),i=n.On.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=wa.resolve();return o.forEach((function(t){s=s.next((function(){return r.getEntry(e,t)})).next((function(e){var o=n.docVersions.get(t);Lr(null!==o),e.version.compareTo(o)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&r.addEntry(e,n.commitVersion))}))})),s.next((function(){return t._n.removeMutationBatch(e,i)}))}(n,t,e,i).next((function(){return i.apply(t)})).next((function(){return n._n.performConsistencyCheck(t)})).next((function(){return n.Mn.pn(t,r)}))}))}function Gu(t){var e=Mr(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.qe.getLastRemoteSnapshotVersion(t)}))}function Hu(t,e){var n=Mr(t),r=e.snapshotVersion,i=n.kn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.On.newChangeBuffer({trackRemovals:!0});i=n.kn;var s=[];e.targetChanges.forEach((function(e,o){var a=i.get(o);if(a){s.push(n.qe.removeMatchingKeys(t,e.removedDocuments,o).next((function(){return n.qe.addMatchingKeys(t,e.addedDocuments,o)})));var u=e.resumeToken;if(u.approximateByteSize()>0){var c=a.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,c),function(t,e,n){return Lr(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(a,c,e)&&s.push(n.qe.updateTargetData(t,c))}}}));var a=ts();if(e.documentUpdates.forEach((function(r,i){e.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))})),s.push(Wu(t,o,e.documentUpdates,r,void 0).next((function(t){a=t}))),!r.isEqual(Gr.min())){var u=n.qe.getLastRemoteSnapshotVersion(t).next((function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)}));s.push(u)}return wa.waitFor(s).next((function(){return o.apply(t)})).next((function(){return n.Mn.En(t,a)})).next((function(){return a}))})).then((function(t){return n.kn=i,t}))}function Wu(t,e,n,r,i){var o=ss();return n.forEach((function(t){return o=o.add(t)})),e.getEntries(t,o).next((function(t){var o=ts();return n.forEach((function(n,s){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;s.isNoDocument()&&s.version.isEqual(Gr.min())?(e.removeEntry(n,u),o=o.insert(n,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(e.addEntry(s,u),o=o.insert(n,s)):Or("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)})),o}))}function zu(t,e){var n=Mr(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n._n.getNextMutationBatchAfterBatchId(t,e)}))}function Ku(t,e){var n=Mr(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n.qe.getTargetData(t,e).next((function(i){return i?(r=i,wa.resolve(r)):n.qe.allocateTargetId(t).next((function(i){return r=new La(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.kn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.kn=n.kn.insert(t.targetId,t),n.Fn.set(e,t.targetId)),t}))}function $u(t,e,n){return a(this,void 0,void 0,(function(){var r,i,o,s;return u(this,(function(a){switch(a.label){case 0:r=Mr(t),i=r.kn.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,(function(t){return r.persistence.referenceDelegate.removeTarget(t,i)}))];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!Sa(s=a.sent()))throw s;return Or("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.kn=r.kn.remove(e),r.Fn.delete(i.target),[2]}}))}))}function Yu(t,e,n){var r=Mr(t),i=Gr.min(),o=ss();return r.persistence.runTransaction("Execute query","readonly",(function(t){return function(t,e,n){var r=Mr(t),i=r.Fn.get(n);return void 0!==i?wa.resolve(r.kn.get(i)):r.qe.getTargetData(e,n)}(r,t,no(e)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next((function(t){o=t}))})).next((function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:Gr.min(),n?o:ss())})).next((function(t){return{documents:t,Bn:o}}))}))}function Qu(t,e){var n=Mr(t),r=Mr(n.qe),i=n.kn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.lt(t,e).next((function(t){return t?t.target:null}))}))}function Xu(t){var e=Mr(t);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return function(t,e,n){var r=Mr(t),i=ts(),o=ja(n),s=Su(e),a=IDBKeyRange.lowerBound(o,!0);return s.$t({index:ua.readTimeIndex,range:a},(function(t,e){var n=Ua(r.R,e);i=i.insert(n.key,n),o=e.readTime})).next((function(){return{wn:i,readTime:qa(o)}}))}(e.On,t,e.$n)})).then((function(t){var n=t.wn,r=t.readTime;return e.$n=r,n}))}function Ju(t){return a(this,void 0,void 0,(function(){var e;return u(this,(function(n){return[2,(e=Mr(t)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return function(t){var e=Su(t),n=Gr.min();return e.$t({index:ua.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=qa(e.readTime)),r.done()})).next((function(){return n}))}(t)})).then((function(t){e.$n=t}))]}))}))}function Zu(t,e,n,r){return a(this,void 0,void 0,(function(){var i,o,s,a,c,h,l,f,p,d;return u(this,(function(u){switch(u.label){case 0:for(i=Mr(t),o=ss(),s=ts(),a=is(),c=0,h=n;c<h.length;c++)l=h[c],f=e.qn(l.metadata.name),l.document&&(o=o.add(f)),s=s.insert(f,e.Un(l)),a=a.insert(f,e.Kn(l.metadata.readTime));return p=i.On.newChangeBuffer({trackRemovals:!0}),[4,Ku(i,function(t){return no(Yi($r.fromString("__bundle__/docs/"+t)))}(r))];case 1:return d=u.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",(function(t){return Wu(t,p,s,Gr.min(),a).next((function(e){return p.apply(t),e})).next((function(e){return i.qe.removeMatchingKeysForTargetId(t,d.targetId).next((function(){return i.qe.addMatchingKeys(t,o,d.targetId)})).next((function(){return i.Mn.En(t,e)})).next((function(){return e}))}))}))]}}))}))}function tc(t,e,n){return void 0===n&&(n=ss()),a(this,void 0,void 0,(function(){var r,i;return u(this,(function(o){switch(o.label){case 0:return[4,Ku(t,no(za(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=Mr(t)).persistence.runTransaction("Save named query","readwrite",(function(t){var o=Ts(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Ke.saveNamedQuery(t,e);var s=r.withResumeToken(Jr.EMPTY_BYTE_STRING,o);return i.kn=i.kn.insert(s.targetId,s),i.qe.updateTargetData(t,s).next((function(){return i.qe.removeMatchingKeysForTargetId(t,r.targetId)})).next((function(){return i.qe.addMatchingKeys(t,n,r.targetId)})).next((function(){return i.Ke.saveNamedQuery(t,e)}))}))]}}))}))}var ec=function(){function t(t){this.R=t,this.Qn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(t,e){return wa.resolve(this.Qn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Qn.set(e.id,{id:(n=e).id,version:n.version,createTime:Ts(n.createTime)}),wa.resolve()},t.prototype.getNamedQuery=function(t,e){return wa.resolve(this.jn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,function(t){return{name:t.name,query:za(t.bundledQuery),readTime:Ts(t.readTime)}}(e)),wa.resolve()},t}(),nc=function(){function t(){this.Wn=new Xo(rc.Gn),this.zn=new Xo(rc.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(t,e){var n=new rc(t,e);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},t.prototype.Jn=function(t,e){var n=this;t.forEach((function(t){return n.addReference(t,e)}))},t.prototype.removeReference=function(t,e){this.Yn(new rc(t,e))},t.prototype.Xn=function(t,e){var n=this;t.forEach((function(t){return n.removeReference(t,e)}))},t.prototype.Zn=function(t){var e=this,n=new ci(new $r([])),r=new rc(n,t),i=new rc(n,t+1),o=[];return this.zn.forEachInRange([r,i],(function(t){e.Yn(t),o.push(t.key)})),o},t.prototype.ts=function(){var t=this;this.Wn.forEach((function(e){return t.Yn(e)}))},t.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},t.prototype.es=function(t){var e=new ci(new $r([])),n=new rc(e,t),r=new rc(e,t+1),i=ss();return this.zn.forEachInRange([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.containsKey=function(t){var e=new rc(t,0),n=this.Wn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),rc=function(){function t(t,e){this.key=t,this.ns=e}return t.Gn=function(t,e){return ci.comparator(t.key,e.key)||jr(t.ns,e.ns)},t.Hn=function(t,e){return jr(t.ns,e.ns)||ci.comparator(t.key,e.key)},t}(),ic=function(){function t(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new Xo(rc.Gn)}return t.prototype.checkEmpty=function(t){return wa.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++,this._n.length>0&&this._n[this._n.length-1];var o=new Da(i,e,n,r);this._n.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.rs=this.rs.add(new rc(u.key,i)),this.Ut.addToCollectionParentIndex(t,u.key.path.popLast())}return wa.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return wa.resolve(this.os(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=e+1,r=this.cs(n),i=r<0?0:r;return wa.resolve(this._n.length>i?this._n[i]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return wa.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(t){return wa.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new rc(e,0),i=new rc(e,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],(function(t){var e=n.os(t.ns);o.push(e)})),wa.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Xo(jr);return e.forEach((function(t){var e=new rc(t,0),i=new rc(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,i],(function(t){r=r.add(t.ns)}))})),wa.resolve(this.us(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;ci.isDocumentKey(i)||(i=i.child(""));var o=new rc(new ci(i),0),s=new Xo(jr);return this.rs.forEachWhile((function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(s=s.add(t.ns)),!0)}),o),wa.resolve(this.us(s))},t.prototype.us=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.os(t);null!==r&&n.push(r)})),n},t.prototype.removeMutationBatch=function(t,e){var n=this;Lr(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return wa.forEach(e.mutations,(function(i){var o=new rc(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)})).next((function(){n.rs=r}))},t.prototype.Gt=function(t){},t.prototype.containsKey=function(t,e){var n=new rc(e,0),r=this.rs.firstAfterOrEqual(n);return wa.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return this._n.length,wa.resolve()},t.prototype.hs=function(t,e){return this.cs(t)},t.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},t.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},t}(),oc=function(){function t(t,e){this.Ut=t,this.ls=e,this.docs=new $o(ci.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:s,readTime:n}),this.size+=s-o,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return wa.resolve(n?n.document.clone():Si.newInvalidDocument(e))},t.prototype.getEntries=function(t,e){var n=this,r=ts();return e.forEach((function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():Si.newInvalidDocument(t))})),wa.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=ts(),i=new ci(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var s=o.getNext(),a=s.key,u=s.value,c=u.document,h=u.readTime;if(!e.path.isPrefixOf(a.path))break;h.compareTo(n)<=0||ao(e,c)&&(r=r.insert(c.key,c.clone()))}return wa.resolve(r)},t.prototype.fs=function(t,e){return wa.forEach(this.docs,(function(t){return e(t)}))},t.prototype.newChangeBuffer=function(t){return new sc(this)},t.prototype.getSize=function(t){return wa.resolve(this.size)},t}(),sc=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ie=e,n}return s(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach((function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)})),wa.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},e}(Iu),ac=function(){function t(t){this.persistence=t,this.ds=new wu((function(t){return Ci(t)}),Oi),this.lastRemoteSnapshotVersion=Gr.min(),this.highestTargetId=0,this.ws=0,this._s=new nc,this.targetCount=0,this.ys=cu.Jt()}return t.prototype.forEachTarget=function(t,e){return this.ds.forEach((function(t,n){return e(n)})),wa.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return wa.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return wa.resolve(this.ws)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),wa.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),wa.resolve()},t.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new cu(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,wa.resolve()},t.prototype.updateTargetData=function(t,e){return this.te(e),wa.resolve()},t.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,wa.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.ds.forEach((function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.ds.delete(s),o.push(r.removeMatchingKeysForTargetId(t,a.targetId)),i++)})),wa.waitFor(o).next((function(){return i}))},t.prototype.getTargetCount=function(t){return wa.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.ds.get(e)||null;return wa.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),wa.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach((function(e){i.push(r.markPotentiallyOrphaned(t,e))})),wa.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),wa.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this._s.es(e);return wa.resolve(n)},t.prototype.containsKey=function(t,e){return wa.resolve(this._s.containsKey(e))},t}(),uc=function(){function t(t,e){var n=this;this.gs={},this.Ne=new Ar(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new ac(this),this.Ut=new Qa,this.Ue=function(t,e){return new oc(t,(function(t){return n.referenceDelegate.ps(t)}))}(this.Ut),this.R=new Ma(e),this.Ke=new ec(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new ic(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r=this;Or("MemoryPersistence","Starting transaction:",t);var i=new cc(this.Ne.next());return this.referenceDelegate.Es(),n(i).next((function(t){return r.referenceDelegate.Ts(i).next((function(){return t}))})).toPromise().then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.Is=function(t,e){return wa.or(Object.values(this.gs).map((function(n){return function(){return n.containsKey(t,e)}})))},t}(),cc=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return s(e,t),e}(_a),hc=function(){function t(t){this.persistence=t,this.As=new nc,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw Pr()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),wa.resolve()},t.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),wa.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),wa.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach((function(t){return n.vs.add(t.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next((function(t){t.forEach((function(t){return n.vs.add(t.toString())}))})).next((function(){return r.removeTargetData(t,e)}))},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return wa.forEach(this.vs,(function(r){var i=ci.fromPath(r);return e.Ps(t,i).next((function(t){t||n.removeEntry(i)}))})).next((function(){return e.Rs=null,n.apply(t)}))},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next((function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())}))},t.prototype.ps=function(t){return 0},t.prototype.Ps=function(t,e){var n=this;return wa.or([function(){return wa.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},t}(),lc=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();function fc(t,e){return"firestore_clients_"+t+"_"+e}function pc(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function dc(t,e){return"firestore_targets_"+t+"_"+e}lc.UNAUTHENTICATED=new lc(null),lc.GOOGLE_CREDENTIALS=new lc("google-credentials-uid"),lc.FIRST_PARTY=new lc("first-party-uid"),lc.MOCK_USER=new lc("mock-user");var gc=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Vs=function(e,n,r){var i,o=JSON.parse(r),s="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return s&&o.error&&(s="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new kr(o.error.code,o.error.message)),s?new t(e,n,o.state,i):(xr("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),vc=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Vs=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new kr(i.error.code,i.error.message)),o?new t(e,i.state,r):(xr("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),mc=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Vs=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=us(),s=0;i&&s<r.activeTargetIds.length;++s)i=ui(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(xr("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),yc=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Vs=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(xr("SharedClientState","Failed to parse online state: "+e),null)},t}(),_c=function(){function t(){this.activeTargetIds=us()}return t.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),bc=function(){function t(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.ks.bind(this),this.Fs=new $o(jr),this.started=!1,this.$s=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Os=fc(this.persistenceKey,this.Ns),this.Ms=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.Fs=this.Fs.insert(this.Ns,new _c),this.Ls=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Ks=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return a(this,void 0,void 0,(function(){var t,e,n,r,i,o,s,a,c,h,l,f=this;return u(this,(function(u){switch(u.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=u.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ns&&(i=this.getItem(fc(this.persistenceKey,r)))&&(o=mc.Vs(r,i))&&(this.Fs=this.Fs.insert(o.clientId,o));for(this.Qs(),(s=this.storage.getItem(this.Us))&&(a=this.js(s))&&this.Ws(a),c=0,h=this.$s;c<h.length;c++)l=h[c],this.ks(l);return this.$s=[],this.window.addEventListener("pagehide",(function(){return f.shutdown()})),this.started=!0,[2]}}))}))},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.Fs)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.Fs.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.addPendingMutation=function(t){this.zs(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(dc(this.persistenceKey,t));if(n){var r=vc.Vs(t,n);r&&(e=r.state)}}return this.Js.Ds(t),this.Qs(),e},t.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Qs()},t.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(dc(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach((function(t){r.Hs(t)})),this.currentUser=t,n.forEach((function(t){r.addPendingMutation(t)}))},t.prototype.setOnlineState=function(t){this.Xs(t)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return Or("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){Or("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){Or("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.ks=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(Or("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Os)return void xr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable((function(){return a(e,void 0,void 0,(function(){var t,e,r,i,o,s;return u(this,(function(a){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(e=this.ni(n.key,n.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(i=this.ri(n.key,n.newValue)))return[2,this.oi(i)]}else if(n.key===this.Us){if(null!==n.newValue&&(o=this.js(n.newValue)))return[2,this.Ws(o)]}else if(n.key===this.Ms)(s=function(t){var e=Ar.o;if(null!=t)try{var n=JSON.parse(t);Lr("number"==typeof n),e=n}catch(t){xr("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==Ar.o&&this.sequenceNumberHandler(s);else if(n.key===this.Ks)return[2,this.syncEngine.ci()]}else this.$s.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.Fs.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Qs=function(){this.setItem(this.Os,this.Js.Ss())},t.prototype.zs=function(t,e,n){var r=new gc(this.currentUser,t,e,n),i=pc(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Ss())},t.prototype.Hs=function(t){var e=pc(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Xs=function(t){var e={clientId:this.Ns,onlineState:t};this.storage.setItem(this.Us,JSON.stringify(e))},t.prototype.Ys=function(t,e,n){var r=dc(this.persistenceKey,t),i=new vc(t,e,n);this.setItem(r,i.Ss())},t.prototype.Zs=function(){this.setItem(this.Ks,"value-not-used")},t.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},t.prototype.ni=function(t,e){var n=this.ti(t);return mc.Vs(n,e)},t.prototype.si=function(t,e){var n=this.Bs.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return gc.Vs(new lc(i),r,e)},t.prototype.ri=function(t,e){var n=this.qs.exec(t),r=Number(n[1]);return vc.Vs(r,e)},t.prototype.js=function(t){return yc.Vs(t)},t.prototype.ii=function(t){return a(this,void 0,void 0,(function(){return u(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(Or("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},t.prototype.ei=function(t,e){var n=this,r=e?this.Fs.insert(t,e):this.Fs.remove(t),i=this.Gs(this.Fs),o=this.Gs(r),s=[],a=[];return o.forEach((function(t){i.has(t)||s.push(t)})),i.forEach((function(t){o.has(t)||a.push(t)})),this.syncEngine.hi(s,a).then((function(){n.Fs=r}))},t.prototype.Ws=function(t){this.Fs.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Gs=function(t){var e=us();return t.forEach((function(t,n){e=e.unionWith(n.activeTargetIds)})),e},t}(),wc=function(){function t(){this.li=new _c,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},t.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.fi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.start=function(){return this.li=new _c,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),Ic=function(){function t(){}return t.prototype.di=function(t){},t.prototype.shutdown=function(){},t}(),Ec=function(){function t(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return t.prototype.di=function(t){this.gi.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){Or("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},t.prototype.yi=function(){Or("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),Tc={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Ac=function(){function t(t){this.Ei=t.Ei,this.Ti=t.Ti}return t.prototype.Ii=function(t){this.Ai=t},t.prototype.Ri=function(t){this.bi=t},t.prototype.onMessage=function(t){this.vi=t},t.prototype.close=function(){this.Ti()},t.prototype.send=function(t){this.Ei(t)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(t){this.bi(t)},t.prototype.Si=function(t){this.vi(t)},t}(),Sc=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n.useFetchStreams=e.useFetchStreams,n}return s(e,t),e.prototype.Fi=function(t,e,n,r){return new Promise((function(i,o){var s=new Tr;s.listenOnce(yr.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case mr.NO_ERROR:var e=s.getResponseJson();Or("Connection","XHR received:",JSON.stringify(e)),i(e);break;case mr.TIMEOUT:Or("Connection",'RPC "'+t+'" timed out'),o(new kr(Sr.DEADLINE_EXCEEDED,"Request time out"));break;case mr.HTTP_ERROR:var n=s.getStatus();if(Or("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(Sr).indexOf(e)>=0?e:Sr.UNKNOWN}(r.status);o(new kr(a,r.message))}else o(new kr(Sr.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new kr(Sr.UNAVAILABLE,"Connection failed."));break;default:Pr()}}finally{Or("Connection",'RPC "'+t+'" completed.')}}));var a=JSON.stringify(r);s.send(e,"POST",a,n,15)}))},e.prototype.Oi=function(t,e){var n=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new fr,i=ie(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new Ir({})),this.ki(o.initMessageHeaders,e),(0,h.uI)()||(0,h.b$)()||(0,h.d)()||(0,h.w1)()||(0,h.Mn)()||(0,h.ru)()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=n.join("");Or("Connection","Creating WebChannel: "+s,o);var a=r.createWebChannel(s,o),u=!1,c=!1,l=new Ac({Ei:function(t){c?Or("Connection","Not sending because WebChannel is closed:",t):(u||(Or("Connection","Opening WebChannel transport."),a.open(),u=!0),Or("Connection","WebChannel sending:",t),a.send(t))},Ti:function(){return a.close()}}),f=function(t,e,n){t.listen(e,(function(t){try{n(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return f(a,Er.EventType.OPEN,(function(){c||Or("Connection","WebChannel transport opened.")})),f(a,Er.EventType.CLOSE,(function(){c||(c=!0,Or("Connection","WebChannel transport closed"),l.Vi())})),f(a,Er.EventType.ERROR,(function(t){c||(c=!0,Rr("Connection","WebChannel transport errored:",t),l.Vi(new kr(Sr.UNAVAILABLE,"The operation could not be completed")))})),f(a,Er.EventType.MESSAGE,(function(t){var e;if(!c){var n=t.data[0];Lr(!!n);var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){Or("Connection","WebChannel received error:",i);var o=i.status,s=function(t){var e=Bo[t];if(void 0!==e)return Ko(e)}(o),u=i.message;void 0===s&&(s=Sr.INTERNAL,u="Unknown error status: "+o+" with message "+i.message),c=!0,l.Vi(new kr(s,u)),a.close()}else Or("Connection","WebChannel received:",n),l.Si(n)}})),f(i,_r.STAT_EVENT,(function(t){t.stat===br?Or("Connection","Detected buffering proxy"):t.stat===wr&&Or("Connection","Detected no buffering proxy")})),setTimeout((function(){l.Pi()}),0),l},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId;var e=t.ssl?"https":"http";this.Di=e+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);Or("RestConnection","Sending: ",i,n);var o={};return this.ki(o,r),this.Fi(t,i,o,n).then((function(t){return Or("RestConnection","Received: ",t),t}),(function(e){throw Rr("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype.$i=function(t,e,n,r){return this.Ni(t,e,n,r)},t.prototype.ki=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.10.1",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.xi=function(t,e){var n=Tc[t];return this.Di+"/v1/"+e+":"+n},t}());function kc(){return"undefined"!=typeof window?window:null}function Nc(){return"undefined"!=typeof document?document:null}function Cc(t){return new bs(t,!0)}var Oc=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Ki=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Qi=function(){this.qi=this.Bi},t.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Ki),i=Math.max(0,n-r);i>0&&Or("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,(function(){return e.Ki=Date.now(),t()})),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),xc=function(){function t(t,e,n,r,i,o){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new Oc(t,e)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return a(this,void 0,void 0,(function(){return u(this,(function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,(function(){return t.rr()})))},t.prototype.cr=function(t){this.ur(),this.stream.send(t)},t.prototype.rr=function(){return a(this,void 0,void 0,(function(){return u(this,(function(t){return this.er()?[2,this.close(0)]:[2]}))}))},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(t,e){return a(this,void 0,void 0,(function(){return u(this,(function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===Sr.RESOURCE_EXHAUSTED?(xr(e.toString()),xr("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Qi()):e&&e.code===Sr.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.ar=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then((function(e){t.Yi===n&&t.lr(e)}),(function(n){e((function(){var e=new kr(Sr.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)}))}))},t.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii((function(){n((function(){return e.state=2,e.listener.Ii()}))})),this.stream.Ri((function(t){n((function(){return e.dr(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji((function(){return a(t,void 0,void 0,(function(){return u(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.dr=function(t){return Or("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget((function(){return e.Yi===t?n():(Or("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),Rc=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,s}return s(e,t),e.prototype.wr=function(t){return this.Hi.Oi("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){var n;if("targetChange"in e){e.targetChange;var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:Pr()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.I?(Lr(void 0===e||"string"==typeof e),Jr.fromBase64String(e||"")):(Lr(void 0===e||e instanceof Uint8Array),Jr.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=(a=e.targetChange.cause)&&function(t){var e=void 0===t.code?Sr.UNKNOWN:Ko(t.code);return new kr(e,t.message||"")}(a);n=new ps(r,i,o,s||null)}else if("documentChange"in e){e.documentChange,(r=e.documentChange).document,r.document.name,r.document.updateTime,i=Ns(t,r.document.name),o=Ts(r.document.updateTime);var a=new Ti({mapValue:{fields:r.document.fields}}),u=(s=Si.newFoundDocument(i,o,a),r.targetIds||[]),c=r.removedTargetIds||[];n=new ls(u,c,s.key,s)}else if("documentDelete"in e)e.documentDelete,(r=e.documentDelete).document,i=Ns(t,r.document),o=r.readTime?Ts(r.readTime):Gr.min(),a=Si.newNoDocument(i,o),s=r.removedTargetIds||[],n=new ls([],s,a.key,a);else if("documentRemove"in e)e.documentRemove,(r=e.documentRemove).document,i=Ns(t,r.document),o=r.removedTargetIds||[],n=new ls([],o,i,null);else{if(!("filter"in e))return Pr();e.filter;var h=e.filter;h.targetId,r=h.count||0,i=new Wo(r),o=h.targetId,n=new fs(o,i)}return n}(this.R,t),n=function(t){if(!("targetChange"in t))return Gr.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?Gr.min():e.readTime?Ts(e.readTime):Gr.min()}(t);return this.listener._r(e,n)},e.prototype.mr=function(t){var e={};e.database=xs(this.R),e.addTarget=function(t,e){var n,r=e.target;return(n=xi(r)?{documents:Us(t,r)}:{query:Fs(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=Is(t,e.resumeToken):e.snapshotVersion.compareTo(Gr.min())>0&&(n.readTime=ws(t,e.snapshotVersion.toTimestamp())),n}(this.R,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Pr()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(this.R,t);n&&(e.labels=n),this.cr(e)},e.prototype.yr=function(t){var e={};e.database=xs(this.R),e.removeTarget=t,this.cr(e)},e}(xc),Dc=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,s.gr=!1,s}return s(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.Oi("Write",t)},e.prototype.onMessage=function(t){if(Lr(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=function(t,e){return t&&t.length>0?(Lr(void 0!==e),t.map((function(t){return function(t,e){var n=t.updateTime?Ts(t.updateTime):Ts(e);return n.isEqual(Gr.min())&&(n=Ts(e)),new ko(n,t.transformResults||[])}(t,e)}))):[]}(t.writeResults,t.commitTime),n=Ts(t.commitTime);return this.listener.Tr(n,e)}return Lr(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=xs(this.R),this.cr(t)},e.prototype.Er=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return Ls(e.R,t)}))};this.cr(n)},e}(xc),Pc=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Hi=n,i.R=r,i.Rr=!1,i}return s(e,t),e.prototype.br=function(){if(this.Rr)throw new kr(Sr.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.Ni(t,e,n,i)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===Sr.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new kr(Sr.UNKNOWN,t.toString())}))},e.prototype.$i=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.$i(t,e,n,i)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===Sr.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new kr(Sr.UNKNOWN,t.toString())}))},e.prototype.terminate=function(){this.Rr=!0},e}((function(){})),Lc=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()})))},t.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.kr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},t.prototype.set=function(t){this.kr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},t.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(xr(e),this.Vr=!1):Or("OnlineStateTracker",e)},t.prototype.kr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),Mc=function(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.Fr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=i,this.Lr.di((function(t){n.enqueueAndForget((function(){return a(o,void 0,void 0,(function(){return u(this,(function(t){switch(t.label){case 0:return Wc(this)?(Or("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return a(this,void 0,void 0,(function(){var e;return u(this,(function(n){switch(n.label){case 0:return(e=Mr(t)).Or.add(4),[4,Fc(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.Or.delete(4),[4,Uc(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.Br=new Lc(n,r)};function Uc(t){return a(this,void 0,void 0,(function(){var e,n;return u(this,(function(r){switch(r.label){case 0:if(!Wc(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function Fc(t){return a(this,void 0,void 0,(function(){var e,n;return u(this,(function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function jc(t,e){var n=Mr(t);n.$r.has(e.targetId)||(n.$r.set(e.targetId,e),Hc(n)?Gc(n):sh(n).er()&&Bc(n,e))}function qc(t,e){var n=Mr(t),r=sh(n);n.$r.delete(e),r.er()&&Vc(n,e),0===n.$r.size&&(r.er()?r.ir():Wc(n)&&n.Br.set("Unknown"))}function Bc(t,e){t.qr.U(e.targetId),sh(t).mr(e)}function Vc(t,e){t.qr.U(e),sh(t).yr(e)}function Gc(t){t.qr=new gs({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.$r.get(e)||null}}),sh(t).start(),t.Br.Sr()}function Hc(t){return Wc(t)&&!sh(t).tr()&&t.$r.size>0}function Wc(t){return 0===Mr(t).Or.size}function zc(t){t.qr=void 0}function Kc(t){return a(this,void 0,void 0,(function(){return u(this,(function(e){return t.$r.forEach((function(e,n){Bc(t,e)})),[2]}))}))}function $c(t,e){return a(this,void 0,void 0,(function(){return u(this,(function(n){return zc(t),Hc(t)?(t.Br.Nr(e),Gc(t)):t.Br.set("Unknown"),[2]}))}))}function Yc(t,e,n){return a(this,void 0,void 0,(function(){var r,i,o;return u(this,(function(s){switch(s.label){case 0:if(t.Br.set("Online"),!(e instanceof ps&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return a(this,void 0,void 0,(function(){var n,r,i,o;return u(this,(function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?(o=i[r],t.$r.has(o)?[4,t.remoteSyncer.rejectListen(o,n)]:[3,3]):[3,5];case 2:s.sent(),t.$r.delete(o),t.qr.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),Or("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,Qc(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof ls?t.qr.X(e):e instanceof fs?t.qr.rt(e):t.qr.et(e),n.isEqual(Gr.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,Gu(t.localStore)];case 8:return i=s.sent(),n.compareTo(i)>=0?[4,function(t,e){var n=t.qr.ut(e);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.$r.get(r);i&&t.$r.set(r,i.withResumeToken(n.resumeToken,e))}})),n.targetMismatches.forEach((function(e){var n=t.$r.get(e);if(n){t.$r.set(e,n.withResumeToken(Jr.EMPTY_BYTE_STRING,n.snapshotVersion)),Vc(t,e);var r=new La(n.target,e,1,n.sequenceNumber);Bc(t,r)}})),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return Or("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,Qc(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}}))}))}function Qc(t,e,n){return a(this,void 0,void 0,(function(){var r=this;return u(this,(function(i){switch(i.label){case 0:if(!Sa(e))throw e;return t.Or.add(1),[4,Fc(t)];case 1:return i.sent(),t.Br.set("Offline"),n||(n=function(){return Gu(t.localStore)}),t.asyncQueue.enqueueRetryable((function(){return a(r,void 0,void 0,(function(){return u(this,(function(e){switch(e.label){case 0:return Or("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Or.delete(1),[4,Uc(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function Xc(t,e){return e().catch((function(n){return Qc(t,n,e)}))}function Jc(t){return a(this,void 0,void 0,(function(){var e,n,r,i,o;return u(this,(function(s){switch(s.label){case 0:e=Mr(t),n=ah(e),r=e.Fr.length>0?e.Fr[e.Fr.length-1].batchId:-1,s.label=1;case 1:if(!function(t){return Wc(t)&&t.Fr.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,zu(e.localStore,r)];case 3:return null===(i=s.sent())?(0===e.Fr.length&&n.ir(),[3,7]):(r=i.batchId,function(t,e){t.Fr.push(e);var n=ah(t);n.er()&&n.pr&&n.Er(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,Qc(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return Zc(e)&&th(e),[2]}}))}))}function Zc(t){return Wc(t)&&!ah(t).tr()&&t.Fr.length>0}function th(t){ah(t).start()}function eh(t){return a(this,void 0,void 0,(function(){return u(this,(function(e){return ah(t).Ar(),[2]}))}))}function nh(t){return a(this,void 0,void 0,(function(){var e,n,r,i;return u(this,(function(o){for(e=ah(t),n=0,r=t.Fr;n<r.length;n++)i=r[n],e.Er(i.mutations);return[2]}))}))}function rh(t,e,n){return a(this,void 0,void 0,(function(){var r,i;return u(this,(function(o){switch(o.label){case 0:return r=t.Fr.shift(),i=Pa.from(r,e,n),[4,Xc(t,(function(){return t.remoteSyncer.applySuccessfulWrite(i)}))];case 1:return o.sent(),[4,Jc(t)];case 2:return o.sent(),[2]}}))}))}function ih(t,e){return a(this,void 0,void 0,(function(){return u(this,(function(n){switch(n.label){case 0:return e&&ah(t).pr?[4,function(t,e){return a(this,void 0,void 0,(function(){var n,r;return u(this,(function(i){switch(i.label){case 0:return zo(r=e.code)&&r!==Sr.ABORTED?(n=t.Fr.shift(),ah(t).sr(),[4,Xc(t,(function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)}))]):[3,3];case 1:return i.sent(),[4,Jc(t)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return Zc(t)&&th(t),[2]}}))}))}function oh(t,e){return a(this,void 0,void 0,(function(){var n;return u(this,(function(r){switch(r.label){case 0:return n=Mr(t),e?(n.Or.delete(2),[4,Uc(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Or.add(2),[4,Fc(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function sh(t){var e=this;return t.Ur||(t.Ur=function(t,e,n){var r=Mr(t);return r.br(),new Rc(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:Kc.bind(null,t),Ri:$c.bind(null,t),_r:Yc.bind(null,t)}),t.Mr.push((function(n){return a(e,void 0,void 0,(function(){return u(this,(function(e){switch(e.label){case 0:return n?(t.Ur.sr(),Hc(t)?Gc(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:e.sent(),zc(t),e.label=3;case 3:return[2]}}))}))}))),t.Ur}function ah(t){var e=this;return t.Kr||(t.Kr=function(t,e,n){var r=Mr(t);return r.br(),new Dc(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:eh.bind(null,t),Ri:ih.bind(null,t),Ir:nh.bind(null,t),Tr:rh.bind(null,t)}),t.Mr.push((function(n){return a(e,void 0,void 0,(function(){return u(this,(function(e){switch(e.label){case 0:return n?(t.Kr.sr(),[4,Jc(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Kr.stop()];case 3:e.sent(),t.Fr.length>0&&(Or("RemoteStore","Stopping write stream with "+t.Fr.length+" pending writes"),t.Fr=[]),e.label=4;case 4:return[2]}}))}))}))),t.Kr}var uh=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new ba,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(t){}))}return t.createAndSchedule=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout((function(){return e.handleDelayElapsed()}),t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new kr(Sr.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget((function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then((function(e){return t.deferred.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function ch(t,e){if(xr("AsyncQueue",e+": "+t),Sa(t))return new kr(Sr.UNAVAILABLE,e+": "+t);throw t}var hh=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||ci.comparator(e.key,n.key)}:function(t,e){return ci.comparator(t.key,e.key)},this.keyedMap=ns(),this.sortedSet=new $o(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),lh=function(){function t(){this.Qr=new $o(ci.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Qr.get(e);n?0!==t.type&&3===n.type?this.Qr=this.Qr.insert(e,t):3===t.type&&1!==n.type?this.Qr=this.Qr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Qr=this.Qr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Qr=this.Qr.remove(e):1===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):Pr():this.Qr=this.Qr.insert(e,t)},t.prototype.jr=function(){var t=[];return this.Qr.inorderTraversal((function(e,n){t.push(n)})),t},t}(),fh=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,hh.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&io(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),ph=function(){this.Wr=void 0,this.listeners=[]},dh=function(){this.queries=new wu((function(t){return oo(t)}),io),this.onlineState="Unknown",this.Gr=new Set};function gh(t,e){return a(this,void 0,void 0,(function(){var n,r,i,o,s,a,c;return u(this,(function(u){switch(u.label){case 0:if(n=Mr(t),r=e.query,i=!1,(o=n.queries.get(r))||(i=!0,o=new ph),!i)return[3,4];u.label=1;case 1:return u.trys.push([1,3,,4]),s=o,[4,n.onListen(r)];case 2:return s.Wr=u.sent(),[3,4];case 3:return a=u.sent(),c=ch(a,"Initialization of query '"+so(e.query)+"' failed"),[2,void e.onError(c)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.zr(n.onlineState),o.Wr&&e.Hr(o.Wr)&&_h(n),[2]}}))}))}function vh(t,e){return a(this,void 0,void 0,(function(){var n,r,i,o,s;return u(this,(function(a){return n=Mr(t),r=e.query,i=!1,(o=n.queries.get(r))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]}))}))}function mh(t,e){for(var n=Mr(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=s.query,u=n.queries.get(a);if(u){for(var c=0,h=u.listeners;c<h.length;c++)h[c].Hr(s)&&(r=!0);u.Wr=s}}r&&_h(n)}function yh(t,e,n){var r=Mr(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function _h(t){t.Gr.forEach((function(t){t.next()}))}var bh=function(){function t(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new fh(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),o=!0):this.eo(t,this.onlineState)&&(this.no(t),o=!0),this.Xr=t,o},t.prototype.onError=function(t){this.Jr.error(t)},t.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},t.prototype.eo=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.so&&n||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.Zr=function(t){if(t.docChanges.length>0)return!0;var e=this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(t){t=fh.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},t}(),wh=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.io=function(){return"metadata"in this.payload},t}(),Ih=function(){function t(t){this.R=t}return t.prototype.qn=function(t){return Ns(this.R,t)},t.prototype.Un=function(t){return t.metadata.exists?Ps(this.R,t.document,!1):Si.newNoDocument(this.qn(t.metadata.name),this.Kn(t.metadata.readTime))},t.prototype.Kn=function(t){return Ts(t)},t}();!function(){function t(t,e,n){this.ro=t,this.localStore=e,this.R=n,this.queries=[],this.documents=[],this.progress=function(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(t)}t.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.co=function(t){for(var e=new Map,n=new Ih(this.R),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var s=n.qn(o.metadata.name),a=0,u=o.metadata.queries;a<u.length;a++){var c=u[a],h=(e.get(c)||ss()).add(s);e.set(c,h)}}return e},t.prototype.complete=function(){return a(this,void 0,void 0,(function(){var t,e,n,r,i;return u(this,(function(o){switch(o.label){case 0:return[4,Zu(this.localStore,new Ih(this.R),this.documents,this.ro.id)];case 1:t=o.sent(),e=this.co(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?(i=r[n],[4,tc(this.localStore,i,e.get(i.name))]):[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new Lu(Object.assign({},this.progress),t))]}}))}))}}();var Eh=function(t){this.key=t},Th=function(t){this.key=t},Ah=function(){function t(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=ss(),this.mutatedKeys=ss(),this.lo=uo(t),this.fo=new hh(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(t,e){var n=this,r=e?e.mo:new lh,i=e?e.fo:this.fo,o=e?e.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=Qi(this.query)&&i.size===this.query.limit?i.last():null,c=Xi(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((function(t,e){var h=i.get(t),l=ao(n.query,e)?e:null,f=!!h&&n.mutatedKeys.has(h.key),p=!!l&&(l.hasLocalMutations||n.mutatedKeys.has(l.key)&&l.hasCommittedMutations),d=!1;h&&l?h.data.isEqual(l.data)?f!==p&&(r.track({type:3,doc:l}),d=!0):n.yo(h,l)||(r.track({type:2,doc:l}),d=!0,(u&&n.lo(l,u)>0||c&&n.lo(l,c)<0)&&(a=!0)):!h&&l?(r.track({type:0,doc:l}),d=!0):h&&!l&&(r.track({type:1,doc:h}),d=!0,(u||c)&&(a=!0)),d&&(l?(s=s.add(l),o=p?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))})),Qi(this.query)||Xi(this.query))for(;s.size>this.query.limit;){var h=Qi(this.query)?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{fo:s,mo:r,Nn:a,mutatedKeys:o}},t.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var o=t.mo.jr();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Pr()}};return n(t)-n(e)}(t.type,e.type)||r.lo(t.doc,e.doc)})),this.po(n);var s=e?this.Eo():[],a=0===this.ho.size&&this.current?1:0,u=a!==this.ao;return this.ao=a,0!==o.length||u?{snapshot:new fh(this.query,t.fo,i,o,t.mutatedKeys,0===a,u,!1),To:s}:{To:s}},t.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new lh,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},t.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach((function(t){return e.uo=e.uo.add(t)})),t.modifiedDocuments.forEach((function(t){})),t.removedDocuments.forEach((function(t){return e.uo=e.uo.delete(t)})),this.current=t.current)},t.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=ss(),this.fo.forEach((function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))}));var n=[];return e.forEach((function(e){t.ho.has(e)||n.push(new Th(e))})),this.ho.forEach((function(t){e.has(t)||n.push(new Eh(t))})),n},t.prototype.Ao=function(t){this.uo=t.Bn,this.ho=ss();var e=this._o(t.documents);return this.applyChanges(e,!0)},t.prototype.Ro=function(){return fh.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},t}(),Sh=function(t,e,n){this.query=t,this.targetId=e,this.view=n},kh=function(t){this.key=t,this.bo=!1},Nh=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new wu((function(t){return oo(t)}),io),this.Vo=new Map,this.So=new Set,this.Do=new $o(ci.comparator),this.Co=new Map,this.No=new nc,this.xo={},this.ko=new Map,this.Fo=cu.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.$o},enumerable:!1,configurable:!0}),t}();function Ch(t,e){return a(this,void 0,void 0,(function(){var n,r,i,o,s,a;return u(this,(function(u){switch(u.label){case 0:return n=il(t),(o=n.Po.get(e))?(r=o.targetId,n.sharedClientState.addLocalQueryTarget(r),i=o.view.Ro(),[3,4]):[3,1];case 1:return[4,Ku(n.localStore,no(e))];case 2:return s=u.sent(),a=n.sharedClientState.addLocalQueryTarget(s.targetId),r=s.targetId,[4,Oh(n,e,r,"current"===a)];case 3:i=u.sent(),n.isPrimaryClient&&jc(n.remoteStore,s),u.label=4;case 4:return[2,i]}}))}))}function Oh(t,e,n,r){return a(this,void 0,void 0,(function(){var i,o,s,c,h,l;return u(this,(function(f){switch(f.label){case 0:return t.Oo=function(e,n,r){return function(t,e,n,r){return a(this,void 0,void 0,(function(){var i,o,s;return u(this,(function(a){switch(a.label){case 0:return(i=e.view._o(n)).Nn?[4,Yu(t.localStore,e.query,!1).then((function(t){var n=t.documents;return e.view._o(n,i)}))]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.targetChanges.get(e.targetId),s=e.view.applyChanges(i,t.isPrimaryClient,o),[2,(Gh(t,e.targetId,s.To),s.snapshot)]}}))}))}(t,e,n,r)},[4,Yu(t.localStore,e,!0)];case 1:return i=f.sent(),o=new Ah(e,i.Bn),s=o._o(i.documents),c=hs.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),h=o.applyChanges(s,t.isPrimaryClient,c),Gh(t,n,h.To),l=new Sh(e,n,o),[2,(t.Po.set(e,l),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),h.snapshot)]}}))}))}function xh(t,e){return a(this,void 0,void 0,(function(){var n,r,i;return u(this,(function(o){switch(o.label){case 0:return n=Mr(t),r=n.Po.get(e),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter((function(t){return!io(t,e)}))),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,$u(n.localStore,r.targetId,!1).then((function(){n.sharedClientState.clearQueryState(r.targetId),qc(n.remoteStore,r.targetId),Bh(n,r.targetId)})).catch(du)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return Bh(n,r.targetId),[4,$u(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))}function Rh(t,e,n){return a(this,void 0,void 0,(function(){var r,i,o,s;return u(this,(function(a){switch(a.label){case 0:r=ol(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(t,e){var n,r=Mr(t),i=Vr.now(),o=e.reduce((function(t,e){return t.add(e.key)}),ss());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return r.Mn.pn(t,o).next((function(o){n=o;for(var s=[],a=0,u=e;a<u.length;a++){var c=u[a],h=Do(c,n.get(c.key));null!=h&&s.push(new Uo(c.key,h,Ai(h.value.mapValue),No.exists(!0)))}return r._n.addMutationBatch(t,i,s,e)}))})).then((function(t){return t.applyToLocalDocumentSet(n),{batchId:t.batchId,changes:n}}))}(r.localStore,e)];case 2:return i=a.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.xo[t.currentUser.toKey()];r||(r=new $o(jr)),r=r.insert(e,n),t.xo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,zh(r,i.changes)];case 3:return a.sent(),[4,Jc(r.remoteStore)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=ch(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}}))}))}function Dh(t,e){return a(this,void 0,void 0,(function(){var n,r;return u(this,(function(i){switch(i.label){case 0:n=Mr(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,Hu(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach((function(t,e){var r=n.Co.get(e);r&&(Lr(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.bo=!0:t.modifiedDocuments.size>0?Lr(r.bo):t.removedDocuments.size>0&&(Lr(r.bo),r.bo=!1))})),[4,zh(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,du(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function Ph(t,e,n){var r=Mr(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach((function(t,n){var r=n.view.zr(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=Mr(t);n.onlineState=e;var r=!1;n.queries.forEach((function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zr(e)&&(r=!0)})),r&&_h(n)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Lh(t,e,n){return a(this,void 0,void 0,(function(){var r,i,o,s,a,c;return u(this,(function(u){switch(u.label){case 0:return(r=Mr(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.Co.get(e),(o=i&&i.key)?(s=(s=new $o(ci.comparator)).insert(o,Si.newNoDocument(o,Gr.min())),a=ss().add(o),c=new cs(Gr.min(),new Map,new Xo(jr),s,a),[4,Dh(r,c)]):[3,2];case 1:return u.sent(),r.Do=r.Do.remove(o),r.Co.delete(e),Wh(r),[3,4];case 2:return[4,$u(r.localStore,e,!1).then((function(){return Bh(r,e,n)})).catch(du)];case 3:u.sent(),u.label=4;case 4:return[2]}}))}))}function Mh(t,e){return a(this,void 0,void 0,(function(){var n,r,i;return u(this,(function(o){switch(o.label){case 0:n=Mr(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,Vu(n.localStore,e)];case 2:return i=o.sent(),qh(n,r,null),jh(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,zh(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,du(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function Uh(t,e,n){return a(this,void 0,void 0,(function(){var r,i;return u(this,(function(o){switch(o.label){case 0:r=Mr(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=Mr(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var r;return n._n.lookupMutationBatch(t,e).next((function(e){return Lr(null!==e),r=e.keys(),n._n.removeMutationBatch(t,e)})).next((function(){return n._n.performConsistencyCheck(t)})).next((function(){return n.Mn.pn(t,r)}))}))}(r.localStore,e)];case 2:return i=o.sent(),qh(r,e,n),jh(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,zh(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,du(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function Fh(t,e){return a(this,void 0,void 0,(function(){var n,r,i,o,s;return u(this,(function(a){switch(a.label){case 0:Wc((n=Mr(t)).remoteStore)||Or("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(t){var e=Mr(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return e._n.getHighestUnacknowledgedBatchId(t)}))}(n.localStore)];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.ko.get(r)||[]).push(e),n.ko.set(r,i),[3,4]);case 3:return o=a.sent(),s=ch(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}}))}))}function jh(t,e){(t.ko.get(e)||[]).forEach((function(t){t.resolve()})),t.ko.delete(e)}function qh(t,e,n){var r=Mr(t),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function Bh(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var o=i[r];t.Po.delete(o),n&&t.vo.Mo(o,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach((function(e){t.No.containsKey(e)||Vh(t,e)}))}function Vh(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(qc(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),Wh(t))}function Gh(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof Eh?(t.No.addReference(o.key,e),Hh(t,o)):o instanceof Th?(Or("SyncEngine","Document no longer in limbo: "+o.key),t.No.removeReference(o.key,e),t.No.containsKey(o.key)||Vh(t,o.key)):Pr()}}function Hh(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(Or("SyncEngine","New document in limbo: "+n),t.So.add(r),Wh(t))}function Wh(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new ci($r.fromString(e)),r=t.Fo.next();t.Co.set(r,new kh(n)),t.Do=t.Do.insert(n,r),jc(t.remoteStore,new La(no(Yi(n.path)),r,2,Ar.o))}}function zh(t,e,n){return a(this,void 0,void 0,(function(){var r,i,o,s;return u(this,(function(c){switch(c.label){case 0:return r=Mr(t),i=[],o=[],s=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach((function(t,a){s.push(r.Oo(a,e,n).then((function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=Uu.Pn(a.targetId,t);o.push(e)}})))})),[4,Promise.all(s)]);case 1:return c.sent(),r.vo._r(i),[4,function(t,e){return a(this,void 0,void 0,(function(){var n,r,i,o,s,a,c,h,l;return u(this,(function(u){switch(u.label){case 0:n=Mr(t),u.label=1;case 1:return u.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return wa.forEach(e,(function(e){return wa.forEach(e.bn,(function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)})).next((function(){return wa.forEach(e.vn,(function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)}))}))}))}))];case 2:return u.sent(),[3,4];case 3:if(!Sa(r=u.sent()))throw r;return Or("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)s=o[i],a=s.targetId,s.fromCache||(c=n.kn.get(a),h=c.snapshotVersion,l=c.withLastLimboFreeSnapshotVersion(h),n.kn=n.kn.insert(a,l));return[2]}}))}))}(r.localStore,o)];case 2:c.sent(),c.label=3;case 3:return[2]}}))}))}function Kh(t,e){return a(this,void 0,void 0,(function(){var n,r;return u(this,(function(i){switch(i.label){case 0:return(n=Mr(t)).currentUser.isEqual(e)?[3,3]:(Or("SyncEngine","User change. New user:",e.toKey()),[4,Bu(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.ko.forEach((function(t){t.forEach((function(t){t.reject(new kr(Sr.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.ko.clear()}(n),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,zh(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}function $h(t,e){var n=Mr(t),r=n.Co.get(e);if(r&&r.bo)return ss().add(r.key);var i=ss(),o=n.Vo.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=a[s],c=n.Po.get(u);i=i.unionWith(c.view.wo)}return i}function Yh(t,e){return a(this,void 0,void 0,(function(){var n,r,i;return u(this,(function(o){switch(o.label){case 0:return[4,Yu((n=Mr(t)).localStore,e.query,!0)];case 1:return r=o.sent(),i=e.view.Ao(r),[2,(n.isPrimaryClient&&Gh(n,e.targetId,i.To),i)]}}))}))}function Qh(t){return a(this,void 0,void 0,(function(){var e;return u(this,(function(n){return[2,Xu((e=Mr(t)).localStore).then((function(t){return zh(e,t)}))]}))}))}function Xh(t,e,n,r){return a(this,void 0,void 0,(function(){var i,o;return u(this,(function(s){switch(s.label){case 0:return[4,function(t,e){var n=Mr(t),r=Mr(n._n);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return r.jt(t,e).next((function(e){return e?n.Mn.pn(t,e):wa.resolve(null)}))}))}((i=Mr(t)).localStore,e)];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,Jc(i.remoteStore)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(qh(i,e,r||null),jh(i,e),function(t,e){Mr(Mr(t)._n).Gt(e)}(i.localStore,e)):Pr(),s.label=4;case 4:return[4,zh(i,o)];case 5:return s.sent(),[3,7];case 6:Or("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}}))}))}function Jh(t,e){return a(this,void 0,void 0,(function(){var n,r,i,o,s,a,c,h;return u(this,(function(u){switch(u.label){case 0:return il(n=Mr(t)),ol(n),!0!==e||!0===n.$o?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,Zh(n,r.toArray())]);case 1:return i=u.sent(),n.$o=!0,[4,oh(n.remoteStore,!0)];case 2:for(u.sent(),o=0,s=i;o<s.length;o++)a=s[o],jc(n.remoteStore,a);return[3,7];case 3:return!1!==e||!1===n.$o?[3,7]:(c=[],h=Promise.resolve(),n.Vo.forEach((function(t,e){n.sharedClientState.isLocalQueryTarget(e)?c.push(e):h=h.then((function(){return Bh(n,e),$u(n.localStore,e,!0)})),qc(n.remoteStore,e)})),[4,h]);case 4:return u.sent(),[4,Zh(n,c)];case 5:return u.sent(),function(t){var e=Mr(t);e.Co.forEach((function(t,n){qc(e.remoteStore,n)})),e.No.ts(),e.Co=new Map,e.Do=new $o(ci.comparator)}(n),n.$o=!1,[4,oh(n.remoteStore,!1)];case 6:u.sent(),u.label=7;case 7:return[2]}}))}))}function Zh(t,e,n){return a(this,void 0,void 0,(function(){var n,r,i,o,s,a,c,h,l,f,p,d,g,v;return u(this,(function(u){switch(u.label){case 0:n=Mr(t),r=[],i=[],o=0,s=e,u.label=1;case 1:return o<s.length?(a=s[o],c=void 0,(h=n.Vo.get(a))&&0!==h.length?[4,Ku(n.localStore,no(h[0]))]:[3,7]):[3,13];case 2:c=u.sent(),l=0,f=h,u.label=3;case 3:return l<f.length?(p=f[l],d=n.Po.get(p),[4,Yh(n,d)]):[3,6];case 4:(g=u.sent()).snapshot&&i.push(g.snapshot),u.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,Qu(n.localStore,a)];case 8:return v=u.sent(),[4,Ku(n.localStore,v)];case 9:return c=u.sent(),[4,Oh(n,tl(v),a,!1)];case 10:u.sent(),u.label=11;case 11:r.push(c),u.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vo._r(i),r)]}}))}))}function tl(t){return $i(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function el(t){var e=Mr(t);return Mr(Mr(e.localStore).persistence).fn()}function nl(t,e,n,r){return a(this,void 0,void 0,(function(){var i,o,s;return u(this,(function(a){switch(a.label){case 0:return(i=Mr(t)).$o?(Or("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Xu(i.localStore)];case 3:return o=a.sent(),s=cs.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,zh(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,$u(i.localStore,e,!0)];case 6:return a.sent(),Bh(i,e,r),[3,8];case 7:Pr(),a.label=8;case 8:return[2]}}))}))}function rl(t,e,n){return a(this,void 0,void 0,(function(){var r,i,o,s,a,c,h,l,f,p;return u(this,(function(d){switch(d.label){case 0:if(!(r=il(t)).$o)return[3,10];i=0,o=e,d.label=1;case 1:return i<o.length?(s=o[i],r.Vo.has(s)?(Or("SyncEngine","Adding an already active target "+s),[3,5]):[4,Qu(r.localStore,s)]):[3,6];case 2:return a=d.sent(),[4,Ku(r.localStore,a)];case 3:return c=d.sent(),[4,Oh(r,tl(a),c.targetId,!1)];case 4:d.sent(),jc(r.remoteStore,c),d.label=5;case 5:return i++,[3,1];case 6:h=function(t){return u(this,(function(e){switch(e.label){case 0:return r.Vo.has(t)?[4,$u(r.localStore,t,!1).then((function(){qc(r.remoteStore,t),Bh(r,t)})).catch(du)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},l=0,f=n,d.label=7;case 7:return l<f.length?(p=f[l],[5,h(p)]):[3,10];case 8:d.sent(),d.label=9;case 9:return l++,[3,7];case 10:return[2]}}))}))}function il(t){var e=Mr(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Dh.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=$h.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Lh.bind(null,e),e.vo._r=mh.bind(null,e.eventManager),e.vo.Mo=yh.bind(null,e.eventManager),e}function ol(t){var e=Mr(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Mh.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Uh.bind(null,e),e}var sl=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return a(this,void 0,void 0,(function(){return u(this,(function(e){switch(e.label){case 0:return this.R=Cc(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Ko(t),[2]}}))}))},t.prototype.Uo=function(t){return null},t.prototype.Ko=function(t){return qu(this.persistence,new Fu,t.initialUser,this.R)},t.prototype.qo=function(t){return new uc(hc.bs,this.R)},t.prototype.Bo=function(t){return new wc},t.prototype.terminate=function(){return a(this,void 0,void 0,(function(){return u(this,(function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}}))}))},t}(),al=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Qo=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return s(e,t),e.prototype.initialize=function(e){return a(this,void 0,void 0,(function(){var n=this;return u(this,(function(r){switch(r.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return r.sent(),[4,Ju(this.localStore)];case 2:return r.sent(),[4,this.Qo.initialize(this,e)];case 3:return r.sent(),[4,ol(this.Qo.syncEngine)];case 4:return r.sent(),[4,Jc(this.Qo.remoteStore)];case 5:return r.sent(),[4,this.persistence.He((function(){return n.gcScheduler&&!n.gcScheduler.started&&n.gcScheduler.start(n.localStore),Promise.resolve()}))];case 6:return r.sent(),[2]}}))}))},e.prototype.Ko=function(t){return qu(this.persistence,new Fu,t.initialUser,this.R)},e.prototype.Uo=function(t){var e=this.persistence.referenceDelegate.garbageCollector;return new mu(e,t.asyncQueue)},e.prototype.qo=function(t){var e=Pu(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?eu.withCacheSize(this.cacheSizeBytes):eu.DEFAULT;return new xu(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,kc(),Nc(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new wc},e}(sl),ul=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Qo=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return s(e,t),e.prototype.initialize=function(e){return a(this,void 0,void 0,(function(){var n,r=this;return u(this,(function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Qo.syncEngine,this.sharedClientState instanceof bc?(this.sharedClientState.syncEngine={ui:Xh.bind(null,n),ai:nl.bind(null,n),hi:rl.bind(null,n),fn:el.bind(null,n),ci:Qh.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He((function(t){return a(r,void 0,void 0,(function(){return u(this,(function(e){switch(e.label){case 0:return[4,Jh(this.Qo.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}}))}))}))];case 4:return i.sent(),[2]}}))}))},e.prototype.Bo=function(t){var e=kc();if(!bc.yt(e))throw new kr(Sr.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Pu(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new bc(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(al),cl=function(){function t(){}return t.prototype.initialize=function(t,e){return a(this,void 0,void 0,(function(){var n=this;return u(this,(function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return Ph(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Kh.bind(null,this.syncEngine),[4,oh(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.createEventManager=function(t){return new dh},t.prototype.createDatastore=function(t){var e,n=Cc(t.databaseInfo.databaseId),r=(e=t.databaseInfo,new Sc(e));return function(t,e,n){return new Pc(t,e,n)}(t.credentials,r,n)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,s=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return Ph(s.syncEngine,t,0)},o=Ec.yt()?new Ec:new Ic,new Mc(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,o,s){var a=new Nh(t,e,n,r,i,o);return s&&(a.$o=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return a(this,void 0,void 0,(function(){var e;return u(this,(function(n){switch(n.label){case 0:return e=Mr(t),Or("RemoteStore","RemoteStore shutting down."),e.Or.add(5),[4,Fc(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}}))}))}(this.remoteStore)},t}(),hl=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}(),ll=(function(){function t(t,e){var n=this;this.Go=t,this.R=e,this.metadata=new ba,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then((function(t){t&&t.io()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))}),(function(t){return n.metadata.reject(t)}))}t.prototype.close=function(){return this.Go.cancel()},t.prototype.getMetadata=function(){return a(this,void 0,void 0,(function(){return u(this,(function(t){return[2,this.metadata.promise]}))}))},t.prototype.Lo=function(){return a(this,void 0,void 0,(function(){return u(this,(function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}}))}))},t.prototype.Ho=function(){return a(this,void 0,void 0,(function(){var t,e,n,r;return u(this,(function(i){switch(i.label){case 0:return[4,this.Jo()];case 1:return null===(t=i.sent())?[2,null]:(e=this.zo.decode(t),n=Number(e),isNaN(n)&&this.Yo("length string ("+e+") is not valid number"),[4,this.Xo(n)]);case 2:return r=i.sent(),[2,new wh(JSON.parse(r),t.length+n)]}}))}))},t.prototype.Zo=function(){return this.buffer.findIndex((function(t){return t==="{".charCodeAt(0)}))},t.prototype.Jo=function(){return a(this,void 0,void 0,(function(){var t,e;return u(this,(function(n){switch(n.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}}))}))},t.prototype.Xo=function(t){return a(this,void 0,void 0,(function(){var e;return u(this,(function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}}))}))},t.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.tc=function(){return a(this,void 0,void 0,(function(){var t,e;return u(this,(function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}}))}))}}(),function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return a(this,void 0,void 0,(function(){var e,n=this;return u(this,(function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new kr(Sr.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return a(this,void 0,void 0,(function(){var n,r,i,o,s,a;return u(this,(function(u){switch(u.label){case 0:return n=Mr(t),r=xs(n.R)+"/documents",i={documents:e.map((function(t){return ks(n.R,t)}))},[4,n.$i("BatchGetDocuments",r,i)];case 1:return o=u.sent(),s=new Map,o.forEach((function(t){var e=function(t,e){return"found"in e?function(t,e){Lr(!!e.found),e.found.name,e.found.updateTime;var n=Ns(t,e.found.name),r=Ts(e.found.updateTime),i=new Ti({mapValue:{fields:e.found.fields}});return Si.newFoundDocument(n,r,i)}(t,e):"missing"in e?function(t,e){Lr(!!e.missing),Lr(!!e.readTime);var n=Ns(t,e.missing),r=Ts(e.readTime);return Si.newNoDocument(n,r)}(t,e):Pr()}(n.R,t);s.set(e.key.toString(),e)})),a=[],[2,(e.forEach((function(t){var e=s.get(t.toString());Lr(!!e),a.push(e)})),a)]}}))}))}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach((function(t){return n.recordVersion(t)})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new Go(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return a(this,void 0,void 0,(function(){var t,e=this;return u(this,(function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=ci.fromPath(n);e.mutations.push(new Ho(r,e.precondition(r)))})),[4,function(t,e){return a(this,void 0,void 0,(function(){var n,r,i;return u(this,(function(o){switch(o.label){case 0:return n=Mr(t),r=xs(n.R)+"/documents",i={writes:e.map((function(t){return Ls(n.R,t)}))},[4,n.Ni("Commit",r,i)];case 1:return o.sent(),[2]}}))}))}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}}))}))},t.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw Pr();e=Gr.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new kr(Sr.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?No.updateTime(e):No.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(Gr.min()))throw new kr(Sr.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return No.updateTime(e)}return No.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}()),fl=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new Oc(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.ec-=1,this.nc()},t.prototype.nc=function(){var t=this;this.Zi.ji((function(){return a(t,void 0,void 0,(function(){var t,e,n=this;return u(this,(function(r){return t=new ll(this.datastore),(e=this.sc(t))&&e.then((function(e){n.asyncQueue.enqueueAndForget((function(){return t.commit().then((function(){n.deferred.resolve(e)})).catch((function(t){n.ic(t)}))}))})).catch((function(t){n.ic(t)})),[2]}))}))}))},t.prototype.sc=function(t){try{var e=this.updateFunction(t);return!si(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget((function(){return e.nc(),Promise.resolve()}))):this.deferred.reject(t)},t.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!zo(e)}return!1},t}(),pl=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=lc.UNAUTHENTICATED,this.clientId=Fr.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(e,(function(t){return a(r,void 0,void 0,(function(){return u(this,(function(e){switch(e.label){case 0:return Or("FirestoreClient","Received user=",t.uid),[4,this.credentialListener(t)];case 1:return e.sent(),this.user=t,[2]}}))}))}))}return t.prototype.getConfiguration=function(){return a(this,void 0,void 0,(function(){return u(this,(function(t){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]}))}))},t.prototype.setCredentialChangeListener=function(t){this.credentialListener=t},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new kr(Sr.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new ba;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((function(){return a(t,void 0,void 0,(function(){var t,n;return u(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=ch(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}}))}))})),e.promise},t}();function dl(t,e){return a(this,void 0,void 0,(function(){var n,r,i=this;return u(this,(function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),Or("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.initialUser,t.setCredentialChangeListener((function(t){return a(i,void 0,void 0,(function(){return u(this,(function(n){switch(n.label){case 0:return r.isEqual(t)?[3,2]:[4,Bu(e.localStore,t)];case 1:n.sent(),r=t,n.label=2;case 2:return[2]}}))}))})),e.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=e,[2]}}))}))}function gl(t,e){return a(this,void 0,void 0,(function(){var n,r;return u(this,(function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,vl(t)];case 1:return n=i.sent(),Or("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener((function(t){return function(t,e){return a(this,void 0,void 0,(function(){var n,r;return u(this,(function(i){switch(i.label){case 0:return(n=Mr(t)).asyncQueue.verifyOperationInProgress(),Or("RemoteStore","RemoteStore received new credentials"),r=Wc(n),n.Or.add(3),[4,Fc(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.Or.delete(3),[4,Uc(n)];case 3:return i.sent(),[2]}}))}))}(e.remoteStore,t)})),t.onlineComponents=e,[2]}}))}))}function vl(t){return a(this,void 0,void 0,(function(){return u(this,(function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(Or("FirestoreClient","Using default OfflineComponentProvider"),[4,dl(t,new sl)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}}))}))}function ml(t){return a(this,void 0,void 0,(function(){return u(this,(function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(Or("FirestoreClient","Using default OnlineComponentProvider"),[4,gl(t,new cl)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}}))}))}function yl(t){return vl(t).then((function(t){return t.persistence}))}function _l(t){return vl(t).then((function(t){return t.localStore}))}function bl(t){return ml(t).then((function(t){return t.remoteStore}))}function wl(t){return ml(t).then((function(t){return t.syncEngine}))}function Il(t){return a(this,void 0,void 0,(function(){var e,n;return u(this,(function(r){switch(r.label){case 0:return[4,ml(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=Ch.bind(null,e.syncEngine),n.onUnlisten=xh.bind(null,e.syncEngine),n)]}}))}))}function El(t,e,n){var r=this;void 0===n&&(n={});var i=new ba;return t.asyncQueue.enqueueAndForget((function(){return a(r,void 0,void 0,(function(){var r;return u(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new hl({next:function(o){e.enqueueAndForget((function(){return vh(t,s)}));var a=o.docs.has(n);!a&&o.fromCache?i.reject(new kr(Sr.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new kr(Sr.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new bh(Yi(n.path),o,{includeMetadataChanges:!0,so:!0});return gh(t,s)},[4,Il(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}function Tl(t,e,n){var r=this;void 0===n&&(n={});var i=new ba;return t.asyncQueue.enqueueAndForget((function(){return a(r,void 0,void 0,(function(){var r;return u(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new hl({next:function(n){e.enqueueAndForget((function(){return vh(t,s)})),n.fromCache&&"server"===r.source?i.reject(new kr(Sr.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new bh(n,o,{includeMetadataChanges:!0,so:!0});return gh(t,s)},[4,Il(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}var Al=function(t,e,n,r,i,o,s,a){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.useFetchStreams=a},Sl=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),kl=new Map,Nl=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},Cl=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){this.changeListener=e,t.enqueueRetryable((function(){return e(lc.UNAUTHENTICATED)}))},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),Ol=function(){function t(t){this.token=t,this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(this.token)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){var n=this;this.changeListener=e,t.enqueueRetryable((function(){return e(n.token.user)}))},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),xl=function(){function t(t){var e=this;this.currentUser=lc.UNAUTHENTICATED,this.oc=new ba,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){e.cc++,e.currentUser=e.ac(),e.oc.resolve(),e.changeListener&&e.asyncQueue.enqueueRetryable((function(){return e.changeListener(e.currentUser)}))};var n=function(t){Or("FirebaseCredentialsProvider","Auth detected"),e.auth=t,e.auth.addAuthTokenListener(e.uc)};t.onInit((function(t){return n(t)})),setTimeout((function(){if(!e.auth){var r=t.getImmediate({optional:!0});r?n(r):(Or("FirebaseCredentialsProvider","Auth not yet detected"),e.oc.resolve())}}),0)}return t.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.cc!==e?(Or("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(Lr("string"==typeof n.accessToken),new Nl(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t,e){var n=this;this.asyncQueue=t,this.asyncQueue.enqueueRetryable((function(){return a(n,void 0,void 0,(function(){return u(this,(function(t){switch(t.label){case 0:return[4,this.oc.promise];case 1:return t.sent(),[4,e(this.currentUser)];case 2:return t.sent(),this.changeListener=e,[2]}}))}))}))},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},t.prototype.ac=function(){var t=this.auth&&this.auth.getUid();return Lr(null===t||"string"==typeof t),new lc(t)},t}(),Rl=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n,this.type="FirstParty",this.user=lc.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.lc},e=this.hc.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.fc&&(t["X-Goog-Iam-Authorization-Token"]=this.fc),t},enumerable:!1,configurable:!0}),t}(),Dl=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n}return t.prototype.getToken=function(){return Promise.resolve(new Rl(this.hc,this.lc,this.fc))},t.prototype.setChangeListener=function(t,e){t.enqueueRetryable((function(){return e(lc.FIRST_PARTY)}))},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function Pl(t,e,n){if(!n)throw new kr(Sr.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function Ll(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new kr(Sr.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function Ml(t,e,n,r){if(!0===e&&!0===r)throw new kr(Sr.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function Ul(t){if(!ci.isDocumentKey(t))throw new kr(Sr.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function Fl(t){if(ci.isDocumentKey(t))throw new kr(Sr.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function jl(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":Pr()}function ql(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new kr(Sr.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=jl(t);throw new kr(Sr.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function Bl(t,e){if(e<=0)throw new kr(Sr.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var Vl=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new kr(Sr.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new kr(Sr.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,Ml("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams},t}(),Gl=function(){function t(t,e){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Vl({}),this._settingsFrozen=!1,t instanceof Sl?(this._databaseId=t,this._credentials=new Cl):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new kr(Sr.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Sl(t.options.projectId)}(t),this._credentials=new xl(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new kr(Sr.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new kr(Sr.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Vl(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new Cl;switch(t.type){case"gapi":var e=t.client;return Lr(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Dl(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new kr(Sr.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return(t=kl.get(this))&&(Or("ComponentProvider","Removing Datastore"),kl.delete(this),t.terminate()),Promise.resolve();var t},t}(),Hl=function(){function t(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new zl(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),Wl=function(){function t(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),zl=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,Yi(r))||this)._path=r,i.type="collection",i}return s(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new Hl(this.firestore,null,new ci(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(Wl);function Kl(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=(0,h.m9)(t),Pl("collection","path",e),t instanceof Gl)return Fl(n=$r.fromString.apply($r,c([e],r))),new zl(t,null,n);if(!(t instanceof Hl||t instanceof zl))throw new kr(Sr.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Fl(n=$r.fromString.apply($r,c([t.path],r)).child($r.fromString(e))),new zl(t.firestore,null,n)}function $l(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=(0,h.m9)(t),1===arguments.length&&(e=Fr.u()),Pl("doc","path",e),t instanceof Gl)return Ul(n=$r.fromString.apply($r,c([e],r))),new Hl(t,null,new ci(n));if(!(t instanceof Hl||t instanceof zl))throw new kr(Sr.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Ul(n=t._path.child($r.fromString.apply($r,c([e],r)))),new Hl(t.firestore,t instanceof zl?t.converter:null,new ci(n))}function Yl(t,e){return t=(0,h.m9)(t),e=(0,h.m9)(e),(t instanceof Hl||t instanceof zl)&&(e instanceof Hl||e instanceof zl)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function Ql(t,e){return t=(0,h.m9)(t),e=(0,h.m9)(e),t instanceof Wl&&e instanceof Wl&&t.firestore===e.firestore&&io(t._query,e._query)&&t.converter===e.converter}var Xl=function(){function t(){var t=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=!1,this.Tc=[],this.Zi=new Oc(this,"async_queue_retry"),this.Ic=function(){var e=Nc();e&&Or("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=Nc();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ic)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Ac(),this.Rc(t)},t.prototype.enterRestrictedMode=function(t){if(!this._c){this._c=!0,this.Ec=t||!1;var e=Nc();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Ic)}},t.prototype.enqueue=function(t){var e=this;if(this.Ac(),this._c)return new Promise((function(){}));var n=new ba;return this.Rc((function(){return e._c&&e.Ec?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget((function(){return e.wc.push(t),e.bc()}))},t.prototype.bc=function(){return a(this,void 0,void 0,(function(){var t,e=this;return u(this,(function(n){switch(n.label){case 0:if(0===this.wc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return n.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!Sa(t=n.sent()))throw t;return Or("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.wc.length>0&&this.Zi.ji((function(){return e.bc()})),n.label=5;case 5:return[2]}}))}))},t.prototype.Rc=function(t){var e=this,n=this.dc.then((function(){return e.gc=!0,t().catch((function(t){throw e.yc=t,e.gc=!1,xr("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.gc=!1,t}))}));return this.dc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Ac(),this.Tc.indexOf(t)>-1&&(e=0);var i=uh.createAndSchedule(this,t,e,n,(function(t){return r.vc(t)}));return this.mc.push(i),i},t.prototype.Ac=function(){this.yc&&Pr()},t.prototype.verifyOperationInProgress=function(){},t.prototype.Pc=function(){return a(this,void 0,void 0,(function(){var t;return u(this,(function(e){switch(e.label){case 0:return[4,t=this.dc];case 1:e.sent(),e.label=2;case 2:if(t!==this.dc)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.Vc=function(t){for(var e=0,n=this.mc;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.Sc=function(t){var e=this;return this.Pc().then((function(){e.mc.sort((function(t,e){return t.targetTimeMs-e.targetTimeMs}));for(var n=0,r=e.mc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.Pc()}))},t.prototype.Dc=function(t){this.Tc.push(t)},t.prototype.vc=function(t){var e=this.mc.indexOf(t);this.mc.splice(e,1)},t}();function Jl(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}!function(){function t(){this._progressObserver={},this._taskCompletionResolver=new ba,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}t.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},t.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},t.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},t.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},t.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}();var Zl=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).type="firestore",r._queue=new Xl,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return s(e,t),e.prototype._terminate=function(){return this._firestoreClient||ef(this),this._firestoreClient.terminate()},e}(Gl);function tf(t){return t._firestoreClient||ef(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function ef(t){var e,n=t._freezeSettings(),r=function(t,e,n,r){return new Al(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new pl(t._credentials,t._queue,r)}function nf(t,e,n){var r=this,i=new ba;return t.asyncQueue.enqueue((function(){return a(r,void 0,void 0,(function(){var r;return u(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,dl(t,n)];case 1:return o.sent(),[4,gl(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===Sr.FAILED_PRECONDITION||t.code===Sr.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}}))}))})).then((function(){return i.promise}))}function rf(t){if(t._initialized||t._terminated)throw new kr(Sr.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var of=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new kr(Sr.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qr(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),sf=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(Jr.fromBase64String(e))}catch(e){throw new kr(Sr.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(Jr.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),af=function(t){this._methodName=t},uf=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new kr(Sr.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new kr(Sr.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return jr(this._lat,t._lat)||jr(this._long,t._long)},t}(),cf=/^__.*__$/,hf=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new Uo(t,this.data,this.fieldMask,e,this.fieldTransforms):new Mo(t,this.data,e,this.fieldTransforms)},t}(),lf=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new Uo(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();function ff(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Pr()}}var pf=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Cc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Nc",{get:function(){return this.settings.Nc},enumerable:!1,configurable:!0}),t.prototype.xc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.kc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.xc({path:n,Fc:!1});return r.$c(t),r},t.prototype.Oc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.xc({path:n,Fc:!1});return r.Cc(),r},t.prototype.Mc=function(t){return this.xc({path:void 0,Fc:!0})},t.prototype.Lc=function(t){return Df(t,this.settings.methodName,this.settings.Bc||!1,this.path,this.settings.qc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find((function(e){return t.isPrefixOf(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.isPrefixOf(e.field)}))},t.prototype.Cc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.$c(this.path.get(t))},t.prototype.$c=function(t){if(0===t.length)throw this.Lc("Document fields must not be empty");if(ff(this.Nc)&&cf.test(t))throw this.Lc('Document fields cannot begin and end with "__"')},t}(),df=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||Cc(t)}return t.prototype.Uc=function(t,e,n,r){return void 0===r&&(r=!1),new pf({Nc:t,methodName:e,qc:n,path:Qr.emptyPath(),Fc:!1,Bc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function gf(t){var e=t._freezeSettings(),n=Cc(t._databaseId);return new df(t._databaseId,!!e.ignoreUndefinedProperties,n)}function vf(t,e,n,r,i,o){void 0===o&&(o={});var s=t.Uc(o.merge||o.mergeFields?2:0,e,n,i);Cf("Data must be an object, but it was:",s,r);var a,u,c=kf(r,s);if(o.merge)a=new Xr(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){for(var h=[],l=0,f=o.mergeFields;l<f.length;l++){var p=Of(e,f[l],n);if(!s.contains(p))throw new kr(Sr.INVALID_ARGUMENT,"Field '"+p+"' is specified in your field mask but missing from your input data.");Pf(h,p)||h.push(p)}a=new Xr(h),u=s.fieldTransforms.filter((function(t){return a.covers(t.field)}))}else a=null,u=s.fieldTransforms;return new hf(new Ti(c),a,u)}var mf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Nc)throw 1===t.Nc?t.Lc(this._methodName+"() can only appear at the top level of your update data"):t.Lc(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(af);function yf(t,e,n){return new pf({Nc:3,qc:e.settings.qc,methodName:t._methodName,Fc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var _f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype._toFieldTransform=function(t){return new So(t.path,new yo)},e.prototype.isEqual=function(t){return t instanceof e},e}(af),bf=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return s(e,t),e.prototype._toFieldTransform=function(t){var e=yf(this,t,!0),n=this.Kc.map((function(t){return Sf(t,e)})),r=new _o(n);return new So(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(af),wf=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return s(e,t),e.prototype._toFieldTransform=function(t){var e=yf(this,t,!0),n=this.Kc.map((function(t){return Sf(t,e)})),r=new wo(n);return new So(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(af),If=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Qc=n,r}return s(e,t),e.prototype._toFieldTransform=function(t){var e=new Eo(t.R,fo(t.R,this.Qc));return new So(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(af);function Ef(t,e,n,r){var i=t.Uc(1,e,n);Cf("Data must be an object, but it was:",i,r);var o=[],s=Ti.empty();Wr(r,(function(t,r){var a=Rf(e,t,n);r=(0,h.m9)(r);var u=i.Oc(a);if(r instanceof mf)o.push(a);else{var c=Sf(r,u);null!=c&&(o.push(a),s.set(a,c))}}));var a=new Xr(o);return new lf(s,a,i.fieldTransforms)}function Tf(t,e,n,r,i,o){var s=t.Uc(1,e,n),a=[Of(e,r,n)],u=[i];if(o.length%2!=0)throw new kr(Sr.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(Of(e,o[c])),u.push(o[c+1]);for(var l=[],f=Ti.empty(),p=a.length-1;p>=0;--p)if(!Pf(l,a[p])){var d=a[p],g=u[p];g=(0,h.m9)(g);var v=s.Oc(d);if(g instanceof mf)l.push(d);else{var m=Sf(g,v);null!=m&&(l.push(d),f.set(d,m))}}var y=new Xr(l);return new lf(f,y,s.fieldTransforms)}function Af(t,e,n,r){return void 0===r&&(r=!1),Sf(n,t.Uc(r?4:3,e))}function Sf(t,e){if(Nf(t=(0,h.m9)(t)))return Cf("Unsupported field value:",e,t),kf(t,e);if(t instanceof af)return function(t,e){if(!ff(e.Nc))throw e.Lc(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.Lc(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Fc&&4!==e.Nc)throw e.Lc("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=Sf(o[i],e.Mc(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=(0,h.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return fo(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=Vr.fromDate(t);return{timestampValue:ws(e.R,n)}}if(t instanceof Vr)return n=new Vr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:ws(e.R,n)};if(t instanceof uf)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof sf)return{bytesValue:Is(e.R,t._byteString)};if(t instanceof Hl){n=e.databaseId;var r=t.firestore._databaseId;if(!r.isEqual(n))throw e.Lc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:As(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Lc("Unsupported field value: "+jl(t))}(t,e)}function kf(t,e){var n={};return zr(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Wr(t,(function(t,r){var i=Sf(r,e.kc(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function Nf(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Vr||t instanceof uf||t instanceof sf||t instanceof Hl||t instanceof af)}function Cf(t,e,n){if(!Nf(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=jl(n);throw"an object"===r?e.Lc(t+" a custom object"):e.Lc(t+" "+r)}}function Of(t,e,n){if((e=(0,h.m9)(e))instanceof of)return e._internalPath;if("string"==typeof e)return Rf(t,e);throw Df("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var xf=new RegExp("[~\\*/\\[\\]]");function Rf(t,e,n){if(e.search(xf)>=0)throw Df("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(of.bind.apply(of,c([void 0],e.split(".")))))._internalPath}catch(r){throw Df("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function Df(t,e,n,r,i){var o=r&&!r.isEmpty(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new kr(Sr.INVALID_ARGUMENT,(a+=". ")+t+u)}function Pf(t,e){return t.some((function(t){return t.isEqual(e)}))}var Lf=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Hl(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new Mf(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}},t.prototype.get=function(t){if(this._document){var e=this._document.data.field(Uf("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),Mf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(Lf);function Uf(t,e){return"string"==typeof e?Rf(t,e):e instanceof of?e._internalPath:e._delegate._internalPath}var Ff=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),jf=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this)._firestore=e,a._firestoreImpl=e,a.metadata=o,a}return s(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new qf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data.field(Uf("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(Lf),qf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(jf),Bf=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Ff(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach((function(r){t.call(e,new qf(n._firestore,n._userDataWriter,r.key,r,new Ff(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new kr(Sr.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map((function(e){return{type:"added",doc:new qf(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Ff(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),oldIndex:-1,newIndex:n++}}))}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var n=new qf(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Ff(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:Vf(e.type),doc:n,oldIndex:i,newIndex:o}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function Vf(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Pr()}}function Gf(t,e){return t instanceof jf&&e instanceof jf?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Bf&&e instanceof Bf&&t._firestore===e._firestore&&Ql(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function Hf(t){if(Xi(t)&&0===t.explicitOrderBy.length)throw new kr(Sr.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Wf=function(){};function zf(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o._apply(t)}return t}var Kf=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).jc=e,i.Wc=n,i.Gc=r,i.type="where",i}return s(e,t),e.prototype._apply=function(t){var e=gf(t.firestore),n=function(t,e,n,r,i,o,s){var a;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new kr(Sr.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){tp(s,o);for(var u=[],c=0,h=s;c<h.length;c++){var l=h[c];u.push(Zf(r,t,l))}a={arrayValue:{values:u}}}else a=Zf(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||tp(s,o),a=Af(n,"where",s,"in"===o||"not-in"===o);var f=Ri.create(i,o,a);return function(t,e){if(e.g()){var n=Zi(t);if(null!==n&&!n.isEqual(e.field))throw new kr(Sr.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=Ji(t);null!==r&&ep(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw i===e.op?new kr(Sr.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new kr(Sr.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,f),f}(t._query,0,e,t.firestore._databaseId,this.jc,this.Wc,this.Gc);return new Wl(t.firestore,t.converter,function(t,e){var n=t.filters.concat([e]);return new Ki(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}(Wf),$f=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).jc=e,r.zc=n,r.type="orderBy",r}return s(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new kr(Sr.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new kr(Sr.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Gi(e,n);return function(t,e){if(null===Ji(t)){var n=Zi(t);null!==n&&ep(0,n,e.field)}}(t,r),r}(t._query,this.jc,this.zc);return new Wl(t.firestore,t.converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new Ki(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}(Wf),Yf=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Hc=n,i.Jc=r,i}return s(e,t),e.prototype._apply=function(t){return new Wl(t.firestore,t.converter,ro(t._query,this.Hc,this.Jc))},e}(Wf),Qf=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Yc=n,i.Xc=r,i}return s(e,t),e.prototype._apply=function(t){var e=Jf(t,this.type,this.Yc,this.Xc);return new Wl(t.firestore,t.converter,function(t,e){return new Ki(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}(Wf),Xf=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Yc=n,i.Xc=r,i}return s(e,t),e.prototype._apply=function(t){var e=Jf(t,this.type,this.Yc,this.Xc);return new Wl(t.firestore,t.converter,function(t,e){return new Ki(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}(Wf);function Jf(t,e,n,r){if(n[0]=(0,h.m9)(n[0]),n[0]instanceof Lf)return function(t,e,n,r,i){if(!r)throw new kr(Sr.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=eo(t);s<a.length;s++){var u=a[s];if(u.field.isKeyField())o.push(mi(e,r.key));else{var c=r.data.field(u.field);if(ri(c))throw new kr(Sr.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var h=u.field.canonicalString();throw new kr(Sr.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+h+"' (used as the orderBy) does not exist.")}o.push(c)}}return new Bi(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=gf(t.firestore);return function(t,e,n,r,i,o){var s=t.explicitOrderBy;if(i.length>s.length)throw new kr(Sr.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.isKeyField()){if("string"!=typeof c)throw new kr(Sr.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!to(t)&&-1!==c.indexOf("/"))throw new kr(Sr.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var h=t.path.child($r.fromString(c));if(!ci.isDocumentKey(h))throw new kr(Sr.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+h+"' is not because it contains an odd number of segments.");var l=new ci(h);a.push(mi(e,l))}else{var f=Af(n,r,c);a.push(f)}}return new Bi(a,o)}(t._query,t.firestore._databaseId,i,e,n,r)}function Zf(t,e,n){if("string"==typeof(n=(0,h.m9)(n))){if(""===n)throw new kr(Sr.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!to(e)&&-1!==n.indexOf("/"))throw new kr(Sr.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child($r.fromString(n));if(!ci.isDocumentKey(r))throw new kr(Sr.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return mi(t,new ci(r))}if(n instanceof Hl)return mi(t,n._key);throw new kr(Sr.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+jl(n)+".")}function tp(t,e){if(!Array.isArray(t)||0===t.length)throw new kr(Sr.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new kr(Sr.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function ep(t,e,n){if(!n.isEqual(e))throw new kr(Sr.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}var np=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),hi(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ei(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(ni(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw Pr()}},t.prototype.convertObject=function(t,e){var n=this,r={};return Wr(t.fields,(function(t,i){r[t]=n.convertValue(i,e)})),r},t.prototype.convertGeoPoint=function(t){return new uf(ei(t.latitude),ei(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map((function(t){return n.convertValue(t,e)}))},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=ii(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(oi(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=ti(t);return new Vr(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=$r.fromString(t);Lr(Qs(n));var r=new Sl(n.get(1),n.get(3)),i=new ci(n.popFirst(5));return r.isEqual(e)||xr("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();function rp(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var ip=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return s(e,t),e.prototype.convertBytes=function(t){return new sf(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Hl(this.firestore,null,e)},e}(np),op=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=gf(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=sp(t,this._firestore),i=rp(r.converter,e,n),o=vf(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,No.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,s=sp(t,this._firestore);return o="string"==typeof(e=(0,h.m9)(e))||e instanceof of?Tf(this._dataReader,"WriteBatch.update",s._key,e,n,r):Ef(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(o.toMutation(s._key,No.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=sp(t,this._firestore);return this._mutations=this._mutations.concat(new Go(e._key,No.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new kr(Sr.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function sp(t,e){if((t=(0,h.m9)(t)).firestore!==e)throw new kr(Sr.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var ap=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return s(e,t),e.prototype.convertBytes=function(t){return new sf(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Hl(this.firestore,null,e)},e}(np);function up(t,e,n){t=ql(t,Hl);var r=ql(t.firestore,Zl),i=rp(t.converter,e,n);return lp(r,[vf(gf(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,No.none())])}function cp(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=ql(t,Hl);var o=ql(t.firestore,Zl),s=gf(o);return lp(o,[("string"==typeof(e=(0,h.m9)(e))||e instanceof of?Tf(s,"updateDoc",t._key,e,n,r):Ef(s,"updateDoc",t._key,e)).toMutation(t._key,No.exists(!0))])}function hp(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t=(0,h.m9)(t);var s={includeMetadataChanges:!1},c=0;"object"!=typeof i[c]||Jl(i[c])||(s=i[c],c++);var l,f,p,d={includeMetadataChanges:s.includeMetadataChanges};if(Jl(i[c])){var g=i[c];i[c]=null===(e=g.next)||void 0===e?void 0:e.bind(g),i[c+1]=null===(n=g.error)||void 0===n?void 0:n.bind(g),i[c+2]=null===(r=g.complete)||void 0===r?void 0:r.bind(g)}if(t instanceof Hl)f=ql(t.firestore,Zl),p=Yi(t._key.path),l={next:function(e){i[c]&&i[c](fp(f,t,e))},error:i[c+1],complete:i[c+2]};else{var v=ql(t,Wl);f=ql(v.firestore,Zl),p=v._query;var m=new ap(f);l={next:function(t){i[c]&&i[c](new Bf(f,m,v,t))},error:i[c+1],complete:i[c+2]},Hf(t._query)}return function(t,e,n,r){var i=this,o=new hl(r),s=new bh(e,o,n);return t.asyncQueue.enqueueAndForget((function(){return a(i,void 0,void 0,(function(){var e;return u(this,(function(n){switch(n.label){case 0:return e=gh,[4,Il(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))})),function(){o.Wo(),t.asyncQueue.enqueueAndForget((function(){return a(i,void 0,void 0,(function(){var e;return u(this,(function(n){switch(n.label){case 0:return e=vh,[4,Il(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))}))}}(tf(f),p,d,l)}function lp(t,e){return function(t,e){var n=this,r=new ba;return t.asyncQueue.enqueueAndForget((function(){return a(n,void 0,void 0,(function(){var n;return u(this,(function(i){switch(i.label){case 0:return n=Rh,[4,wl(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(tf(t),e)}function fp(t,e,n){var r=n.docs.get(e._key),i=new ap(t);return new jf(t,i,e._key,r,new Ff(n.hasPendingWrites,n.fromCache),e.converter)}var pp=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return s(e,t),e.prototype.get=function(e){var n=this,r=sp(e,this._firestore),i=new ap(this._firestore);return t.prototype.get.call(this,e).then((function(t){return new jf(n._firestore,i,r._key,t._document,new Ff(!1,!1),r.converter)}))},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=gf(t)}return t.prototype.get=function(t){var e=this,n=sp(t,this._firestore),r=new ip(this._firestore);return this._transaction.lookup([n._key]).then((function(t){if(!t||1!==t.length)return Pr();var i=t[0];if(i.isFoundDocument())return new Lf(e._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new Lf(e._firestore,r,n._key,null,n.converter);throw Pr()}))},t.prototype.set=function(t,e,n){var r=sp(t,this._firestore),i=rp(r.converter,e,n),o=vf(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=sp(t,this._firestore);return o="string"==typeof(e=(0,h.m9)(e))||e instanceof of?Tf(this._dataReader,"Transaction.update",s._key,e,n,r):Ef(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,o),this},t.prototype.delete=function(t){var e=sp(t,this._firestore);return this._transaction.delete(e._key),this},t}());function dp(){if("undefined"==typeof Uint8Array)throw new kr(Sr.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function gp(){if("undefined"==typeof atob)throw new kr(Sr.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var vp=function(){function t(t){this._delegate=t}return t.fromBase64String=function(e){return gp(),new t(sf.fromBase64String(e))},t.fromUint8Array=function(e){return dp(),new t(sf.fromUint8Array(e))},t.prototype.toBase64=function(){return gp(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return dp(),this._delegate.toUint8Array()},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),mp=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){rf(t=ql(t,Zl));var n=tf(t),r=t._freezeSettings(),i=new cl;return nf(n,i,new al(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){rf(t=ql(t,Zl));var e=tf(t),n=t._freezeSettings(),r=new cl;return nf(e,r,new ul(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new kr(Sr.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new ba;return t._queue.enqueueAndForgetEvenWhileRestricted((function(){return a(e,void 0,void 0,(function(){var e;return u(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return a(this,void 0,void 0,(function(){var e;return u(this,(function(n){switch(n.label){case 0:return Ea.yt()?(e=t+"main",[4,Ea.delete(e)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))}(Pu(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise}(t._delegate)},t}(),yp=function(){function t(t,e,n){var r=this;this._delegate=e,this.Zc=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof Sl||(this.tu=t)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){var e=this._delegate._getSettings();t.merge||e.host===t.host||Rr("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)},t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){var i;void 0===r&&(r={});var o=(t=ql(t,Gl))._getSettings();if("firestore.googleapis.com"!==o.host&&o.host!==e&&Rr("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},o),{host:e+":"+n,ssl:!1})),r.mockUserToken){var s,a;if("string"==typeof r.mockUserToken)s=r.mockUserToken,a=lc.MOCK_USER;else{s=(0,h.Sg)(r.mockUserToken,null===(i=t._app)||void 0===i?void 0:i.options.projectId);var u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new kr(Sr.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");a=new lc(u)}t._credentials=new Ol(new Nl(s,a))}}(this._delegate,t,e,n)},t.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return a(e,void 0,void 0,(function(){var e,n;return u(this,(function(r){switch(r.label){case 0:return[4,yl(t)];case 1:return e=r.sent(),[4,bl(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=Mr(t);return e.Or.delete(0),Uc(e)}(n))]}}))}))}))}(tf(ql(this._delegate,Zl)))},t.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return a(e,void 0,void 0,(function(){var e,n;return u(this,(function(r){switch(r.label){case 0:return[4,yl(t)];case 1:return e=r.sent(),[4,bl(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return a(this,void 0,void 0,(function(){var e;return u(this,(function(n){switch(n.label){case 0:return(e=Mr(t)).Or.add(0),[4,Fc(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(tf(ql(this._delegate,Zl)))},t.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&Ml("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Zc.enableMultiTabIndexedDbPersistence(this):this.Zc.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.Zc.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.tu&&(this.tu._removeServiceInstance("firestore"),this.tu._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new ba;return t.asyncQueue.enqueueAndForget((function(){return a(e,void 0,void 0,(function(){var e;return u(this,(function(r){switch(r.label){case 0:return e=Fh,[4,wl(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}(tf(ql(this._delegate,Zl)))},t.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new hl(e);return t.asyncQueue.enqueueAndForget((function(){return a(n,void 0,void 0,(function(){var e;return u(this,(function(n){switch(n.label){case 0:return e=function(t,e){Mr(t).Gr.add(e),e.next()},[4,Il(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))})),function(){r.Wo(),t.asyncQueue.enqueueAndForget((function(){return a(n,void 0,void 0,(function(){var e;return u(this,(function(n){switch(n.label){case 0:return e=function(t,e){Mr(t).Gr.delete(e)},[4,Il(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))}))}}(tf(t=ql(t,Zl)),Jl(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.tu)throw new kr(Sr.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.tu},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new Rp(this,Kl(this._delegate,t))}catch(t){throw Tp(t,"collection()","Firestore.collection()")}},t.prototype.doc=function(t){try{return new Ep(this,$l(this._delegate,t))}catch(t){throw Tp(t,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(t){try{return new Cp(this,function(t,e){if(t=ql(t,Gl),Pl("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new kr(Sr.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new Wl(t,null,function(t){return new Ki($r.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw Tp(t,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new ba;return t.asyncQueue.enqueueAndForget((function(){return a(n,void 0,void 0,(function(){var n;return u(this,(function(i){switch(i.label){case 0:return[4,function(t){return ml(t).then((function(t){return t.datastore}))}(t)];case 1:return n=i.sent(),new fl(t.asyncQueue,n,e,r).run(),[2]}}))}))})),r.promise}(tf(t),(function(n){return e(new pp(t,n))}))}(this._delegate,(function(n){return t(new bp(e,n))}))},t.prototype.batch=function(){var t=this;return tf(this._delegate),new wp(new op(this._delegate,(function(e){return lp(t._delegate,e)})))},t.prototype.loadBundle=function(t){throw new kr(Sr.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(t){throw new kr(Sr.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),_p=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return s(e,t),e.prototype.convertBytes=function(t){return new vp(new sf(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return Ep.eu(e,this.firestore,null)},e}(np),bp=function(){function t(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new _p(t)}return t.prototype.get=function(t){var e=this,n=Dp(t);return this._delegate.get(n).then((function(t){return new kp(e._firestore,new jf(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n.converter))}))},t.prototype.set=function(t,e,n){var r=Dp(t);return n?(Ll("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Dp(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,c([s,e,n],i)),this},t.prototype.delete=function(t){var e=Dp(t);return this._delegate.delete(e),this},t}(),wp=function(){function t(t){this._delegate=t}return t.prototype.set=function(t,e,n){var r=Dp(t);return n?(Ll("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Dp(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,c([s,e,n],i)),this},t.prototype.delete=function(t){var e=Dp(t);return this._delegate.delete(e),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),Ip=function(){function t(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}return t.prototype.fromFirestore=function(t,e){var n=new qf(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new Np(this._firestore,n),null!=e?e:{})},t.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},t.nu=function(e,n){var r=t.su,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var o=i.get(n);return o||(o=new t(e,new _p(e),n),i.set(n,o)),o},t}();Ip.su=new WeakMap;var Ep=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new _p(t)}return t.iu=function(e,n,r){if(e.length%2!=0)throw new kr(Sr.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new Hl(n._delegate,r,new ci(e)))},t.eu=function(e,n,r){return new t(n,new Hl(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Rp(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new Rp(this.firestore,Kl(this._delegate,t))}catch(t){throw Tp(t,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(t){return(t=(0,h.m9)(t))instanceof Hl&&Yl(this._delegate,t)},t.prototype.set=function(t,e){e=Ll("DocumentReference.set",e);try{return e?up(this._delegate,t,e):up(this._delegate,t)}catch(t){throw Tp(t,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?cp(this._delegate,t):cp.apply(void 0,c([this._delegate,t,e],n))}catch(t){throw Tp(t,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return lp(ql((t=this._delegate).firestore,Zl),[new Go(t._key,No.none())]);var t},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Ap(e),i=Sp(e,(function(e){return new kp(t.firestore,new jf(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))}));return hp(this._delegate,r,i)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=ql(t,Hl);var e=ql(t.firestore,Zl),n=tf(e),r=new ap(e);return function(t,e){var n=this,r=new ba;return t.asyncQueue.enqueueAndForget((function(){return a(n,void 0,void 0,(function(){var n;return u(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return a(this,void 0,void 0,(function(){var r,i;return u(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=Mr(t);return n.persistence.runTransaction("read document","readonly",(function(t){return n.Mn.mn(t,e)}))}(t,e)];case 1:return(i=o.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new kr(Sr.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=ch(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}}))}))},[4,_l(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._key).then((function(n){return new jf(e,r,t._key,n,new Ff(null!==n&&n.hasLocalMutations,!0),t.converter)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=ql(t,Hl);var e=ql(t.firestore,Zl);return El(tf(e),t._key,{source:"server"}).then((function(n){return fp(e,t,n)}))}(this._delegate):function(t){t=ql(t,Hl);var e=ql(t.firestore,Zl);return El(tf(e),t._key).then((function(n){return fp(e,t,n)}))}(this._delegate)).then((function(t){return new kp(e.firestore,new jf(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}))},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(Ip.nu(this.firestore,e)):this._delegate.withConverter(null))},t}();function Tp(t,e,n){return t.message=t.message.replace(e,n),t}function Ap(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!Jl(r))return r}return{}}function Sp(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=Jl(t[0])?t[0]:Jl(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var kp=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"ref",{get:function(){return new Ep(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(t){return this._delegate.data(t)},t.prototype.get=function(t,e){return this._delegate.get(t,e)},t.prototype.isEqual=function(t){return Gf(this._delegate,t._delegate)},t}(),Np=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(kp),Cp=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new _p(t)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,zf(this._delegate,function(t,e,n){var r=e,i=Uf("where",t);return new Kf(i,r,n)}(e,n,r)))}catch(e){throw Tp(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,zf(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=Uf("orderBy",t);return new $f(r,n)}(e,n)))}catch(e){throw Tp(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,zf(this._delegate,function(t){return Bl("limit",t),new Yf("limit",t,"F")}(e)))}catch(e){throw Tp(e,"limit()","Query.limit()")}},t.prototype.limitToLast=function(e){try{return new t(this.firestore,zf(this._delegate,function(t){return Bl("limitToLast",t),new Yf("limitToLast",t,"L")}(e)))}catch(e){throw Tp(e,"limitToLast()","Query.limitToLast()")}},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,zf(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Qf("startAt",t,!0)}.apply(void 0,e)))}catch(e){throw Tp(e,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,zf(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Qf("startAfter",t,!1)}.apply(void 0,e)))}catch(e){throw Tp(e,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,zf(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Xf("endBefore",t,!0)}.apply(void 0,e)))}catch(e){throw Tp(e,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,zf(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Xf("endAt",t,!1)}.apply(void 0,e)))}catch(e){throw Tp(e,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(t){return Ql(this._delegate,t._delegate)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=ql(t,Wl);var e=ql(t.firestore,Zl),n=tf(e),r=new ap(e);return function(t,e){var n=this,r=new ba;return t.asyncQueue.enqueueAndForget((function(){return a(n,void 0,void 0,(function(){var n;return u(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return a(this,void 0,void 0,(function(){var r,i,o,s,a;return u(this,(function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,Yu(t,e,!0)];case 1:return a=u.sent(),r=new Ah(e,a.Bn),i=r._o(a.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=u.sent(),a=ch(s,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}}))}))},[4,_l(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._query).then((function(n){return new Bf(e,r,t,n)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=ql(t,Wl);var e=ql(t.firestore,Zl),n=tf(e),r=new ap(e);return Tl(n,t._query,{source:"server"}).then((function(n){return new Bf(e,r,t,n)}))}(this._delegate):function(t){t=ql(t,Wl);var e=ql(t.firestore,Zl),n=tf(e),r=new ap(e);return Hf(t._query),Tl(n,t._query).then((function(n){return new Bf(e,r,t,n)}))}(this._delegate)).then((function(t){return new xp(e.firestore,new Bf(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}))},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Ap(e),i=Sp(e,(function(e){return new xp(t.firestore,new Bf(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}));return hp(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(Ip.nu(this.firestore,e)):this._delegate.withConverter(null))},t}(),Op=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new Np(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),xp=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"query",{get:function(){return new Cp(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map((function(e){return new Np(t._firestore,e)}))},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map((function(t){return new Op(e._firestore,t)}))},t.prototype.forEach=function(t,e){var n=this;this._delegate.forEach((function(r){t.call(e,new Np(n._firestore,r))}))},t.prototype.isEqual=function(t){return Gf(this._delegate,t._delegate)},t}(),Rp=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return s(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new Ep(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new Ep(this.firestore,void 0===t?$l(this._delegate):$l(this._delegate,t))}catch(t){throw Tp(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=ql(t.firestore,Zl),r=$l(t),i=rp(t.converter,e);return lp(n,[vf(gf(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,No.exists(!1))]).then((function(){return r}))}(this._delegate,t).then((function(t){return new Ep(e.firestore,t)}))},e.prototype.isEqual=function(t){return Yl(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,t?this._delegate.withConverter(Ip.nu(this.firestore,t)):this._delegate.withConverter(null))},e}(Cp);function Dp(t){return ql(t,Hl)}var Pp,Lp=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(of.bind.apply(of,c([void 0],t)))}return t.documentId=function(){return new t(Qr.keyField().canonicalString())},t.prototype.isEqual=function(t){return(t=(0,h.m9)(t))instanceof of&&this._delegate._internalPath.isEqual(t._internalPath)},t}(),Mp=function(){function t(t){this._delegate=t}return t.serverTimestamp=function(){var e=new _f("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new mf("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new bf("arrayUnion",t)}.apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new wf("arrayRemove",t)}.apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=function(t){return new If("increment",t)}(e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t}(),Up=n(2604),Fp={Firestore:yp,GeoPoint:uf,Timestamp:Vr,Blob:vp,Transaction:bp,WriteBatch:wp,DocumentReference:Ep,DocumentSnapshot:kp,Query:Cp,QueryDocumentSnapshot:Np,QuerySnapshot:xp,CollectionReference:Rp,FieldPath:Lp,FieldValue:Mp,setLogLevel:function(t){var e;e=t,Nr.setLogLevel(e)},CACHE_SIZE_UNLIMITED:-1};(function(t,e){t.INTERNAL.registerComponent(new Up.wA("firestore",(function(t){return function(t,e){return new yp(t,new Zl(t,e),new mp)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},Fp)))})(Pp=r.Z),Pp.registerVersion("@firebase/firestore","2.4.1"),n(3003);0===r.Z.apps.length&&r.Z.initializeApp({apiKey:"AIzaSyA_d2z_LMkARJysO5MINZc-W3DFE-ZHXT0",authDomain:"lmi-store.firebaseapp.com",projectId:"lmi-store",storageBucket:"lmi-store.appspot.com",messagingSenderId:"724695490036",appId:"1:724695490036:web:74fdba648a47384d3b2da1",measurementId:"G-H88RV60D76"});const jp=r.Z.auth(),qp=r.Z.firestore(),{serverTimestamp:Bp}=r.Z.firestore.FieldValue,Vp="participants",Gp="highlights",Hp=qp.collection("chats"),Wp=(qp.collection("meetings"),{db:qp,auth:jp,stopRecording:async({meetingId:t,data:e})=>Hp.doc(t).set(e,{merge:!0}),saveHighlight:async({meetingId:t,userId:e,username:n,highlight:r,creatorEmail:i,creatorId:o,isPrivate:s=!1,time:a,startTime:u,from:c})=>{let h={};const l=Bp(),f=Bp();return s?(h={time:a,username:n,startTime:u,text:r,creatorId:o,creatorEmail:i,createdAt:l,updatedAt:f,isPrivate:s,from:c},(async({meetingId:t,userId:e,data:n})=>{const r=Hp.doc(t).collection(e).doc();return r.set({id:r.id,...n},{merge:!0})})({meetingId:t,userId:e,data:h})):(h={time:a,username:n,startTime:u,text:r,createdAt:l,updatedAt:f,creatorId:o,creatorEmail:i,isPrivate:s,from:c},(async({meetingId:t,data:e})=>{const n=Hp.doc(t).collection(Gp).doc();e.from||(e.from="unspecified");const r={id:n.id,...e};return console.log({newHighlight:r}),n.set(r,{merge:!0})})({meetingId:t,data:h}))},updateHighlight:async({meetingId:t,highlightId:e,isPrivate:n,highlightText:r,highlightStartTime:i,updatedByEmail:o,updatedById:s})=>{const a=Bp();return n?(async({meetingId:t,userId:e,highlightId:n,data:r})=>Hp.doc(t).collection(e).doc(n).update(r))({meetingId:t,data:{text:r,updatedAt:a,startTime:i,updatedByEmail:o,updatedById:s,isPrivate:n},userId:s,highlightId:e}):(async({meetingId:t,highlightId:e,data:n})=>Hp.doc(t).collection(Gp).doc(e).update(n))({meetingId:t,highlightId:e,data:{text:r,updatedAt:Bp(),startTime:i,updatedByEmail:o,updatedById:s,isPrivate:n}})},deleteHighlight:async({meetingId:t,userId:e,highlightId:n,isPrivate:r})=>{r&&await(async({meetingId:t,userId:e,highlightId:n})=>Hp.doc(t).collection(e).doc(n).delete())({meetingId:t,highlightId:n,userId:e}),await(async({meetingId:t,highlightId:e})=>Hp.doc(t).collection(Gp).doc(e).delete())({meetingId:t,highlightId:n})},getFirebaseUserId:async()=>{if(jp&&jp.currentUser){const t=await jp.currentUser.getIdTokenResult(),{email:e,username:n}=t;return{uid:jp.currentUser.uid,email:e,username:n}}return{uid:null,email:null,username:null}},updateParticipant:async({meetingId:t,participantId:e,updateData:n})=>{if(t&&e)return Hp.doc(t).collection(Vp).doc(e).update(n)},updateParticipants:async({meetingId:t,participants:e})=>{if(!t||!e||!e.length)return Promise.resolve();const n=e.map((e=>Hp.doc(t).collection(Vp).doc(e.id).update({shouldGrantAccess:e.shouldGrantAccess})));return Promise.all(n)}});var zp=n(4320),Kp=n(6555),$p=n(7714),Yp=n(8398),Qp=n(5305),Xp=n(9729);const Jp=zp.wc.JOIN_NOW.STATUS_TYPE,{auth:Zp}=Wp,{db:td}=Wp,ed=td.collection("chats"),nd=td.collection("meetings");let rd=null,id=null,od=null,sd=null,ad=null;const ud=async()=>Wp.getFirebaseUserId(),cd=()=>{rd&&rd(),id&&id(),sd&&sd(),od&&od()};function hd({listenerInstance:t,meetingId:e,source:n="",allowedSources:r=["NONE"]}){return!t||e!==ad||r.includes(n)}const ld=({meetingId:t,tabId:e,uid:n,source:r="NONE",provider:i})=>{if(t)try{let i=[],o=[];if(!n){console.error("No user Id provided :::: listenForChatMessages");const t={type:zp.wc.HIGHLIGHT.RETRY_LISTENING};return void(0,Yp.b)({tabId:e,message:t})}console.info("listening for messages",r),hd({listenerInstance:rd,meetingId:t,source:r,allowedSources:["chat"]})&&(rd&&rd(),ad=t,rd=ed.doc(t).collection("highlights").orderBy("startTime").onSnapshot((t=>{const n=[];t.forEach((t=>{n.push(t.data())})),i=n;const r=(0,Kp.ln)({highlights:[...i,...o]});(0,$p.q)({data:r,tabId:e})}),(t=>{t&&t.code&&"permission-denied"===t.code&&((0,$p.t)(),cd())}))),hd({listenerInstance:id,meetingId:t,source:r,allowedSources:["chat"]})&&(id&&id(),ad=t,id=ed.doc(t).collection(n).orderBy("startTime").onSnapshot((t=>{const n=[];t.forEach((t=>{n.push(t.data())})),o=n;const r=(0,Kp.ln)({highlights:[...i,...o]});(0,$p.q)({data:r,tabId:e})}),(t=>{t&&t.code&&"permission-denied"===t.code&&((0,$p.t)(),cd())})))}catch(t){console.log("listenForChatMessages :::: ",t.message,t.code)}else console.error("No meeting ID provided in listenForChatMessages")},fd=({meetingId:t,tabId:e,source:n=""})=>{if(t)try{hd({listenerInstance:sd,meetingId:t,source:n,allowedSources:["join-now","chat"]})&&(sd&&sd(),console.info("Listening for meeting status change"),ad=t,sd=nd.doc(t).onSnapshot((t=>{if(t.exists){const{status:n}=t.data();Xp.Z.log("firebase.js",{event:t.data()}),(0,$p.q)({tabId:e,type:Jp,data:t.data()});const r={type:zp.wc.MEETING.STATUS,status:n};(0,Yp.b)({tabId:e,message:r})}}),(t=>{console.log("MEETING STATUS ::::",t)})))}catch(t){console.log("listener error meeting status ::::",t.message,t.code)}else console.log("NO meeting ID provided in listenForMeetingStatusChange")},pd=({meetingId:t,tabId:e,source:n="NONE",provider:r})=>{if(t)try{hd({listenerInstance:od,meetingId:t,source:n,allowedSources:["chat","join"]})&&(od&&od(),od=ed.doc(t).collection("participants").onSnapshot((t=>{const n=[];t.forEach((t=>n.push({...t.data(),id:t.id}))),(0,$p.q)({data:n,tabId:e,type:"participants"})}),(t=>{console.error("participants error:::: ",t),t&&t.code&&"permission-denied"===t.code&&od&&od()})))}catch(t){console.log("listenForParticipantsChange :::: ",t.message,t.code)}else console.error("No meeting ID provided in listenForParticipantsChange")},dd=async({meetingId:t,highlight:e,time:n,startTime:r,isPrivate:i=!1,userId:o,username:s,email:a,from:u})=>{try{if(!t)throw new Error("No meeting Id provided :::: store highlight");if(!o)throw new Error("No firebase user found :::: storeHighlight");return Wp.saveHighlight({meetingId:t,userId:o,highlight:e,startTime:r,isPrivate:i,username:s,time:n,from:u,creatorEmail:a,creatorId:o})}catch(t){return console.log("Problem adding highlight :::: storeHighlight",t),null}},gd=async({meetingId:t,highlightText:e,highlightId:n,highlightStartTime:r,isPrivate:i=!1,userId:o,email:s})=>{try{if(!t)throw new Error("No meeting Id provided :::: update highlight");if(!o)throw new Error("No firebase user found :::: updateHighlight");return Wp.updateHighlight({meetingId:t,highlightId:n,updatedById:o,isPrivate:i,highlightText:e,highlightStartTime:r,updatedByEmail:s})}catch(t){return console.log("Problem updating highlight :::: updateHighlight",t),null}},vd=async({meetingId:t,highlightId:e,isPrivate:n=!1,userId:r})=>{try{if(!t)return void console.log("No meeting Id provided");if(!r)throw new Error("No firebase user found :::: deleteHighlight");await Wp.deleteHighlight({meetingId:t,userId:r,highlightId:e,isPrivate:n})}catch(t){console.log("Problem deleting highlight ::: deleteHighlight",t)}},md=async({meetingId:t,participantId:e,updateData:n})=>{try{if(!t)return void console.log("No meeting Id provided ::: updateParticipant");if(!e)return void console.log("No participant Id provided ::: updateParticipant");if(!n)return void console.log("No participant update data provided ::: updateParticipant");await Wp.updateParticipant({meetingId:t,participantId:e,updateData:n})}catch(t){console.log("Problem updating participant ::: updateParticipant",t)}},yd=async({meetingId:t,participants:e})=>{try{if(!t)return void console.log("No meeting Id provided");if(!e)return void console.log("No participants provided");await Wp.updateParticipants({meetingId:t,participants:e})}catch(t){console.log("Problem updating participants ::: updateParticipants",t)}},_d=async({tabId:t})=>{try{(({tabId:t})=>{Zp.onAuthStateChanged((async e=>{if(e){const{uid:n}=e,{claims:r}=await e.getIdTokenResult(),{email:i}=r,o=r.username||"";t&&(0,Yp.b)({tabId:t,message:{type:zp.wc.USER.GET_ID,uid:n,email:i,username:o}}),console.log("FIREBASE USER")}else(0,Yp.b)({tabId:t,message:{type:zp.wc.USER.GET_ID,uid:null,email:null,username:null}}),console.log("NO FIREBASE USER")}))})({tabId:t});const{token:e}=await(0,Qp.ON)({tabId:t});await Zp.signInWithCustomToken(e)}catch(t){throw console.log("firebase sign in error>>>",t),t}},bd=async({meetingId:t,data:e})=>{try{if(!t)return void console.log("No meeting Id provided :::: stopRecording");await Wp.stopRecording({meetingId:t,data:e})}catch(t){console.log("Problem stopping recording :::: stopRecording",t)}}},2697:(t,e,n)=>{"use strict";n.d(e,{Y:()=>h,a:()=>c});var r=n(4320),i=n(5305),o=n(417),s=n(8398),a=n(4629),u=n(9729);const c=async({googleMeetMeetingId:t,meetingName:e,tabId:n,provider:c="googleMeet",link:h})=>new Promise(((l,f)=>{(0,s.W)({storageKey:r.wc.JWT,callback:async function(){let f=a.Z.joinMeeting;h&&(u.Z.log("join.js","calling zoom with link"),f=a.Z.joinNowWithZoomLink),f({conferenceId:t,meetingName:e,provider:c,link:h}).then((async t=>{await(0,o.pA)({tabId:n});const{meetingId:e}=t;await(0,i.iR)({meetingId:e});const a={type:r.wc.JOIN_NOW.ACCEPTED,meetingId:e};(0,o.Dk)({meetingId:e,tabId:n});const{uid:u}=await(0,o.rD)();return e&&u&&((0,o.oJ)({meetingId:e,tabId:n,uid:u}),(0,o.wJ)({meetingId:e,tabId:n,source:"join"})),(0,s.b)({tabId:n,message:a}),l(a)})).catch((o=>{let a;return o.response&&403===o.response.status||o.response&&401===o.response.status||"Unauthenticated"===o.message?(a={type:r.wc.USER.UNAUTHORIZED,status:o.response.status},(0,i.dt)({googleMeetMeetingId:t,meetingName:e,tabId:n})):a=o.response&&400===o.response.status?"The meeting has already been triggered"===o.response.data.message?{type:r.wc.JOIN_NOW.ALREADY_JOINED,googleMeetMeetingId:t}:{type:r.wc.JOIN_NOW.ERROR_NO_POD_AVAILABLE,status:o.response.status}:{type:r.wc.JOIN_NOW.ERROR,status:0},(0,s.b)({tabId:n,message:a}),l(a)}))}})})),h=async({conferenceId:t,provider:e="googleMeet"})=>{try{return await a.Z.getMeetingId({conferenceId:t,provider:e})}catch(t){throw t.response&&console.log("Get meeting Id error response >>>",t.response.data),console.log("Get meeting Id error>>>",t),t}}},7714:(t,e,n)=>{"use strict";n.d(e,{q:()=>u,t:()=>c});const r="tldv-port";let i=null,o=!1;const s=({tabId:t})=>(o=!1,i||(i=chrome.tabs.connect(t,{name:r}),i.onDisconnect.addListener((e=>a({port:e,tabId:t}))),i)),a=({port:t,tabId:e})=>{o||(chrome.runtime.lastError,s({tabId:e}))},u=({data:t,tabId:e,type:n="highlights"})=>{try{s({tabId:e}).postMessage({type:n,data:t})}catch(s){(({tabId:t,type:e,data:n})=>{o=!1,i=chrome.tabs.connect(t,{name:r}),i.onDisconnect.addListener((e=>a({port:e,tabId:t}))),i.postMessage({type:e,data:n})})({tabId:e,data:t,type:n})}},c=()=>{o=!0,o&&i&&i.disconnect()}},8978:()=>{window.APP=window.APP||{},function(t,e){if(!e.__SV){let r,i,o=window;try{var n;let e,r;const i=o.location,s=i.hash;n=function(t,n){return(e=t.match(RegExp(`${n}=([^&]*)`)))?e[1]:null},s&&n(s,"state")&&(r=JSON.parse(decodeURIComponent(n(s,"state"))),"mpeditor"===r.action&&(o.sessionStorage.setItem("_mpcehash",s),history.replaceState(r.desiredHash||"",t.title,i.pathname+i.search)))}catch(t){}window.mixpanel=e,e._i=[],e.init=function(t,n,o){function s(t,e){const n=e.split(".");2==n.length&&(t=t[n[0]],e=n[1]),t[e]=function(){t.push([e].concat(Array.prototype.slice.call(arguments,0)))}}let a=e;for(void 0!==o?a=e[o]=[]:o="mixpanel",a.people=a.people||[],a.toString=function(t){let e="mixpanel";return"mixpanel"!==o&&(e+=`.${o}`),t||(e+=" (stub)"),e},a.people.toString=function(){return`${a.toString(1)}.people (stub)`},r="disable time_event track track_pageview track_links track_forms track_with_groups add_group set_group remove_group register register_once alias unregister identify name_tag set_config reset opt_in_tracking opt_out_tracking has_opted_in_tracking has_opted_out_tracking clear_opt_in_out_tracking people.set people.set_once people.unset people.increment people.append people.union people.track_charge people.clear_charges people.delete_user people.remove".split(" "),i=0;i<r.length;i++)s(a,r[i]);const u="set set_once union unset remove delete".split(" ");a.get_group=function(){function t(t){e[t]=function(){call2_args=arguments,call2=[t].concat(Array.prototype.slice.call(call2_args,0)),a.push([n,call2])}}for(var e={},n=["get_group"].concat(Array.prototype.slice.call(arguments,0)),r=0;r<u.length;r++)t(u[r]);return e},e._i.push([t,n,o])},e.__SV=1.2,o=t.createElement("script"),o.type="text/javascript",o.async=!0,o.src="https://cdn4.mxpnl.com/libs/mixpanel-2-latest.min.js",(n=t.getElementsByTagName("script")[0]).parentNode.insertBefore(o,n)}}(document,window.mixpanel||[]),window.mixpanel.init("9119f2c3302030eaaee56e29fcf9b1bc",{batch_requests:!0}),window.init(window.APP)},6555:(t,e,n)=>{"use strict";n.d(e,{be:()=>s,ln:()=>a,pU:()=>u});var r=n(7185),i=n.n(r),o=n(4320);const s=async({requireToken:t=!0})=>new Promise(((e,n)=>{chrome.storage.sync.get(o.wc.JWT,(function(n){const{jwt:r}=n,s={"Content-Type":"application/json"};r&&t&&(s.Authorization=`Bearer ${r}`);const a=i().create({baseURL:o.qW,headers:s});return e(a)}))})),a=({highlights:t})=>t.sort(((t,e)=>t.startTime-e.startTime)),u=t=>{const e=t.indexOf("@");return t.slice(e+1)}},4392:(t,e,n)=>{"use strict";n.d(e,{k:()=>o});var r=n(6354),i=n.n(r);const o=t=>i().storage.sync.get(t)},8437:(t,e,n)=>{"use strict";function r(t){return function(t){let e=2166136261;const n=t.length;for(let r=0;r<n;r++)e^=t.charCodeAt(r),e+=(e<<1)+(e<<4)+(e<<7)+(e<<8)+(e<<24);return e>>>0}(t)%1e3/1e3}n.d(e,{Xn:()=>b,JU:()=>y,EZ:()=>_,Zm:()=>w});const i={};function o(t,e){if("$or"in e)return h(t,e.$or);if("$nor"in e)return!h(t,e.$nor);if("$and"in e)return function(t,e){for(let n=0;n<e.length;n++)if(!o(t,e[n]))return!1;return!0}(t,e.$and);if("$not"in e)return!o(t,e.$not);for(const[n,r]of Object.entries(e))if(!a(r,s(t,n)))return!1;return!0}function s(t,e){const n=e.split(".");let r=t;for(let t=0;t<n.length;t++){if(!(n[t]in r))return null;r=r[n[t]]}return r}function a(t,e){if("string"==typeof t)return e+""===t;if("number"==typeof t)return 1*e===t;if("boolean"==typeof t)return!!e===t;if(Array.isArray(t)||!u(t))return JSON.stringify(e)===JSON.stringify(t);for(const n in t)if(!c(n,e,t[n]))return!1;return!0}function u(t){const e=Object.keys(t);return e.length>0&&e.filter((t=>"$"===t[0])).length===e.length}function c(t,e,n){switch(t){case"$eq":return e===n;case"$ne":return e!==n;case"$lt":return e<n;case"$lte":return e<=n;case"$gt":return e>n;case"$gte":return e>=n;case"$exists":return n?null!==e:null===e;case"$in":return n.includes(e);case"$nin":return!n.includes(e);case"$not":return!a(n,e);case"$size":return!!Array.isArray(e)&&a(n,e.length);case"$elemMatch":return function(t,e){if(!Array.isArray(t))return!1;const n=u(e)?t=>a(e,t):t=>o(t,e);for(let e=0;e<t.length;e++)if(t[e]&&n(t[e]))return!0;return!1}(e,n);case"$all":if(!Array.isArray(e))return!1;for(let t=0;t<n.length;t++){let r=!1;for(let i=0;i<e.length;i++)if(a(n[t],e[i])){r=!0;break}if(!r)return!1}return!0;case"$regex":try{return(r=n,i[r]||(i[r]=new RegExp(r.replace(/([^\\])\//g,"$1\\/"))),i[r]).test(e)}catch(t){return!1}case"$type":return function(t){if(null===t)return"null";if(Array.isArray(t))return"array";const e=typeof t;return["string","number","boolean","object","undefined"].includes(e)?e:"unknown"}(e)===n;default:return console.error("Unknown operator: "+t),!1}var r}function h(t,e){if(!e.length)return!0;for(let n=0;n<e.length;n++)if(o(t,e[n]))return!0;return!1}function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const f="undefined"!=typeof window&&"undefined"!=typeof document;var p=n(9729),d=n(4629),g=n(6555),v=n(11);const m=new class{constructor(t={}){l(this,"_renderer",null),l(this,"_trackedExperiments",new Set),l(this,"_trackedFeatures",{}),l(this,"debug",!1),l(this,"subscriptions",new Set),l(this,"_rtQueue",[]),l(this,"_rtTimer",0),l(this,"assigned",new Map),l(this,"_forcedFeatureValues",new Map),l(this,"_attributeOverrides",{}),this.context=t,f&&!t.disableDevTools&&(window._growthbook=this,document.dispatchEvent(new Event("gbloaded")))}render(){this._renderer&&this._renderer()}setFeatures(t){this.context.features=t,this.render()}setAttributes(t){this.context.attributes=t,this.render()}setAttributeOverrides(t){this._attributeOverrides=t,this.render()}setForcedVariations(t){this.context.forcedVariations=t||{},this.render()}setForcedFeatures(t){this._forcedFeatureValues=t,this.render()}getAttributes(){return{...this.context.attributes,...this._attributeOverrides}}getFeatures(){return this.context.features||{}}subscribe(t){return this.subscriptions.add(t),()=>{this.subscriptions.delete(t)}}getAllResults(){return new Map(this.assigned)}destroy(){this.subscriptions.clear(),this.assigned.clear(),this._trackedExperiments.clear(),this._trackedFeatures={},this._rtQueue=[],this._rtTimer&&clearTimeout(this._rtTimer),f&&window._growthbook===this&&delete window._growthbook}setRenderer(t){this._renderer=t}forceVariation(t,e){this.context.forcedVariations=this.context.forcedVariations||{},this.context.forcedVariations[t]=e,this.render()}run(t){const e=this._run(t),n=t.key,r=this.assigned.get(n);return r&&r.result.inExperiment===e.inExperiment&&r.result.variationId===e.variationId||(this.assigned.set(n,{experiment:t,result:e}),this.subscriptions.forEach((n=>{try{n(t,e)}catch(t){console.error(t)}}))),e}trackFeatureUsage(t,e){if("override"===e.source)return;const n=JSON.stringify(e.value);if(this._trackedFeatures[t]!==n){if(this._trackedFeatures[t]=n,this.context.onFeatureUsage)try{this.context.onFeatureUsage(t,e)}catch(t){}f&&window.fetch&&(this._rtQueue.push({key:t,on:e.on}),this._rtTimer||(this._rtTimer=window.setTimeout((()=>{this._rtTimer=0;const t=[...this._rtQueue];this._rtQueue=[],this.context.realtimeKey&&window.fetch("https://rt.growthbook.io/?key=".concat(this.context.realtimeKey,"&events=").concat(encodeURIComponent(JSON.stringify(t))),{cache:"no-cache",mode:"no-cors"}).catch((()=>{}))}),this.context.realtimeInterval||2e3)))}}getFeatureResult(t,e,n,r,i=null,o=null){const s={value:e,on:!!e,off:!e,source:n,ruleId:r||""};return i&&(s.experiment=i),o&&(s.experimentResult=o),this.trackFeatureUsage(t,s),s}isOn(t){return this.evalFeature(t).on}isOff(t){return this.evalFeature(t).off}getFeatureValue(t,e){var n;return null!==(n=this.evalFeature(t).value)&&void 0!==n?n:e}feature(t){return this.evalFeature(t)}evalFeature(t){var e;if(this._forcedFeatureValues.has(t))return this.getFeatureResult(t,this._forcedFeatureValues.get(t),"override");if(!this.context.features||!this.context.features[t])return this.getFeatureResult(t,null,"unknownFeature");const n=this.context.features[t];if(n.rules)for(const e of n.rules){if(e.condition&&!this.conditionPasses(e.condition))continue;if("force"in e){if("coverage"in e){const{hashValue:n}=this.getHashAttribute(e.hashAttribute);if(!n)continue;if(r(n+t)>e.coverage)continue}return this.getFeatureResult(t,e.force,"force",e.id)}if(!e.variations)continue;const n={variations:e.variations,key:e.key||t};"coverage"in e&&(n.coverage=e.coverage),e.weights&&(n.weights=e.weights),e.hashAttribute&&(n.hashAttribute=e.hashAttribute),e.namespace&&(n.namespace=e.namespace);const i=this.run(n);if(i.inExperiment)return this.getFeatureResult(t,i.value,"experiment",e.id,n,i)}return this.getFeatureResult(t,null!==(e=n.defaultValue)&&void 0!==e?e:null,"defaultValue")}conditionPasses(t){return o(this.getAttributes(),t)}_run(t){const e=t.key,n=t.variations.length;if(n<2)return this.getResult(t);if(!1===this.context.enabled)return this.getResult(t);t=this.mergeOverrides(t);const i=function(t,e,n){if(!e)return null;const r=e.split("?")[1];if(!r)return null;const i=r.replace(/#.*/,"").split("&").map((t=>t.split("=",2))).filter((([e])=>e===t)).map((([,t])=>parseInt(t)));return i.length>0&&i[0]>=0&&i[0]<n?i[0]:null}(e,this.getContextUrl(),n);if(null!==i)return this.getResult(t,i);if(this.context.forcedVariations&&e in this.context.forcedVariations){const n=this.context.forcedVariations[e];return this.getResult(t,n)}if("draft"===t.status||!1===t.active)return this.getResult(t);const{hashValue:o}=this.getHashAttribute(t.hashAttribute);if(!o)return this.getResult(t);if(t.namespace&&!function(t,e){const n=r(t+"__"+e[0]);return n>=e[1]&&n<e[2]}(o,t.namespace))return this.getResult(t);if(t.include&&!function(t){try{return t()}catch(t){return console.error(t),!1}}(t.include))return this.getResult(t);if(t.condition&&!this.conditionPasses(t.condition))return this.getResult(t);if(t.groups&&!this.hasGroupOverlap(t.groups))return this.getResult(t);if(t.url&&!this.urlIsValid(t.url))return this.getResult(t);const s=function(t,e=1,n){e<0?e=0:e>1&&(e=1);const r=(i=t)<=0?[]:new Array(i).fill(1/i);var i;(n=n||r).length!==t&&(n=r);const o=n.reduce(((t,e)=>e+t),0);(o<.99||o>1.01)&&(n=r);let s=0;return n.map((t=>{const n=s;return s+=t,[n,n+e*t]}))}(n,t.coverage||1,t.weights),a=function(t,e){for(let n=0;n<e.length;n++)if(t>=e[n][0]&&t<e[n][1])return n;return-1}(r(o+e),s);if(a<0)return this.getResult(t);if("force"in t)return this.getResult(t,t.force);if(this.context.qaMode)return this.getResult(t);if("stopped"===t.status)return this.getResult(t);const u=this.getResult(t,a,!0);return this.track(t,u),u}log(t,e){this.debug&&(this.context.log?this.context.log(t,e):console.log(t,e))}track(t,e){if(!this.context.trackingCallback)return;const n=t.key,r=e.hashAttribute+e.hashValue+n+e.variationId;if(!this._trackedExperiments.has(r)){this._trackedExperiments.add(r);try{this.context.trackingCallback(t,e)}catch(t){console.error(t)}}}mergeOverrides(t){const e=t.key,n=this.context.overrides;return n&&n[e]&&"string"==typeof(t=Object.assign({},t,n[e])).url&&(t.url=function(t){try{const e=t.replace(/([^\\])\//g,"$1\\/");return new RegExp(e)}catch(t){return void console.error(t)}}(t.url)),t}getHashAttribute(t){const e=t||"id";let n="";return this._attributeOverrides[e]?n=this._attributeOverrides[e]:this.context.attributes?n=this.context.attributes[e]||"":this.context.user&&(n=this.context.user[e]||""),{hashAttribute:e,hashValue:n}}getResult(t,e=0,n=!1){(e<0||e>=t.variations.length)&&(e=0);const{hashAttribute:r,hashValue:i}=this.getHashAttribute(t.hashAttribute);return{inExperiment:n,variationId:e,value:t.variations[e],hashAttribute:r,hashValue:i}}getContextUrl(){return this.context.url||(f?window.location.href:"")}urlIsValid(t){const e=this.getContextUrl();if(!e)return!1;const n=e.replace(/^https?:\/\//,"").replace(/^[^/]*\//,"/");return!!t.test(e)||!!t.test(n)}hasGroupOverlap(t){const e=this.context.groups||{};for(let n=0;n<t.length;n++)if(e[t[n]])return!0;return!1}},y="trigger-zoom-meetings",_="auto-refocus-zoom-popup",b=3e5,w=async()=>{try{const{GROWTHBOOK_ROOT_DOMAIN:t,GROWTHBOOK_API_KEY:e}={FIREBASE_API_KEY:"AIzaSyA_d2z_LMkARJysO5MINZc-W3DFE-ZHXT0",FIREBASE_AUTH_DOMAIN:"lmi-store.firebaseapp.com",FIREBASE_PROJECT_ID:"lmi-store",FIREBASE_STORAGE_BUCKET:"lmi-store.appspot.com",FIREBASE_MESSAGING_SENDER_ID:"724695490036",FIREBASE_APP_ID:"1:724695490036:web:74fdba648a47384d3b2da1",FIREBASE_MEASUREMENT_ID:"G-H88RV60D76",ENV_DOMAIN:"https://api.tldv.io",TLDV_LOGIN_URL:"https://tldv.io/app/login?autoClose=true",MIXPANEL_PLAN:"early-beta",MIXPANEL_KEY:"9119f2c3302030eaaee56e29fcf9b1bc",NODE_ENV:"production",ONBOARDING_URL:"https://tldv.io/app/chrome-extension-onboarding",APP_URL:"https://tldv.io/app",MAX_MEETING_DURATION_IN_HOURS:"3",UNINSTALL_URL:"https://tally.so/r/3jqNxm",SENTRY_DSN:"https://27e262052a324fec9473a47392ea1735@o1042962.ingest.sentry.io/6021256",GROWTHBOOK_ROOT_DOMAIN:"https://cdn.growthbook.io",GROWTHBOOK_API_KEY:"key_prod_78197814c430ea7f"},{email:n,registeredAt:r}=await d.Z.getUserProfile();await(0,v.q9)({email:n,userRegisteredAt:r});const i=(0,g.pU)(n);m.setAttributes({email:n,domain:i}),await fetch(`${t}/api/features/${e}`).then((t=>t.json())).then((t=>{m.setFeatures(t.features)}))}catch(t){p.Z.error("GrowthBook","Unable to Update Growth Book Data",t.message)}return m}},9:(t,e,n)=>{"use strict";n.d(e,{Me:()=>h,Uw:()=>c,n9:()=>s,ok:()=>l,q9:()=>u,qn:()=>a});var r=n(9729),i=n(6354),o=n.n(i);function s(t,e){o().tabs.executeScript(t,e)}function a(t){return o().storage.sync.get(t)}function u(t){return o().storage.sync.set(t)}function c(){fetch(o().runtime.getURL("manifest.json")).then((t=>t.text())).then((t=>chrome.management.getPermissionWarningsByManifest(t,(t=>{r.Z.warn("Permissions",`Current manifest.json permissions: \n\n${t.map((t=>`- ${t}`)).join("\n")}\n\n`)}))))}function h(){const{id:t}=o().runtime.getManifest();return t}function l(t,e){const{width:n,height:r}=e;window.open(t,"popUpWindow","height=500,width=400,left=100,top=100,resizable=yes,scrollbars=yes,toolbar=yes,menubar=no,location=no,directories=no, status=yes")}},11:(t,e,n)=>{"use strict";n.d(e,{Me:()=>r.Me,Uw:()=>r.Uw,n9:()=>r.n9,ok:()=>r.ok,q9:()=>r.q9,qn:()=>r.qn});var r=n(9)},9729:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});const r={log(t,...e){console.log(`[tl;dv] ${t}:`,...e)},warn(t,...e){console.warn(`[tl;dv] ${t}:`,...e)},error(t,...e){console.error(`[tl;dv] ${t}:`,...e)},success(t,...e){console.info(`[tl;dv] ${t}:`,...e)}}},4629:(t,e,n)=>{"use strict";n.d(e,{Z:()=>p});var r={};n.r(r),n.d(r,{getInstance:()=>u,getMeetingId:()=>c,getUserProfile:()=>f,joinMeeting:()=>l,joinNowWithZoomLink:()=>h});var i=n(4392),o=n(4320),s=n(7185),a=n.n(s);const u=async t=>{const e=t||{};e.shouldUseAuthorization=e.shouldUseAuthorization||!1;const{jwt:n}=await(0,i.k)(o.wc.JWT),r={headers:{"Content-Type":"application/json"},baseURL:o.qW};return n&&e.shouldUseAuthorization&&(r.headers.Authorization=`Bearer ${n}`),a().create(r)},c=async({conferenceId:t,provider:e})=>{if(!t)throw new Error("Conference id cannot be null");const n=await u();return-1===e.indexOf("zoom")&&null===t.match(/^([0-9])+/g)||(e="zoom"),n.get(`/meetings/v2/get-id?conferenceId=${t}&provider=${e}`).then((t=>t.data))},h=async({link:t,meetingName:e})=>(await u({shouldUseAuthorization:!0}))("/meetings/join-now",{method:"POST",data:{link:t,meetingName:e}}).then((t=>t.data)),l=async t=>(await u({shouldUseAuthorization:!0}))("/meetings/join-now",{method:"POST",data:t}).then((t=>t.data)),f=async()=>(await u({shouldUseAuthorization:!0}))("/users/me",{method:"GET"}).then((t=>t.data)),p=r},8593:t=>{"use strict";t.exports=JSON.parse('{"name":"axios","version":"0.21.2","description":"Promise based HTTP client for the browser and node.js","main":"index.js","scripts":{"test":"grunt test","start":"node ./sandbox/server.js","build":"NODE_ENV=production grunt build","preversion":"npm test","version":"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json","postversion":"git push && git push --tags","examples":"node ./examples/server.js","coveralls":"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js","fix":"eslint --fix lib/**/*.js"},"repository":{"type":"git","url":"https://github.com/axios/axios.git"},"keywords":["xhr","http","ajax","promise","node"],"author":"Matt Zabriskie","license":"MIT","bugs":{"url":"https://github.com/axios/axios/issues"},"homepage":"https://axios-http.com","devDependencies":{"coveralls":"^3.0.0","es6-promise":"^4.2.4","grunt":"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1","karma":"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2","minimist":"^1.2.0","mocha":"^8.2.1","sinon":"^4.5.0","terser-webpack-plugin":"^4.2.3","typescript":"^4.0.5","url-search-params":"^0.10.0","webpack":"^4.44.2","webpack-dev-server":"^3.11.0"},"browser":{"./lib/adapters/http.js":"./lib/adapters/xhr.js"},"jsdelivr":"dist/axios.min.js","unpkg":"dist/axios.min.js","typings":"./index.d.ts","dependencies":{"follow-redirects":"^1.14.0"},"bundlesize":[{"path":"./dist/axios.min.js","threshold":"5kB"}]}')}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var o=e[r]={id:r,loaded:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.hmd=t=>((t=Object.create(t)).children||(t.children=[]),Object.defineProperty(t,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+t.id)}}),t),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),n(4320),n(6555),n(417),n(8437),n(5305),n(2697),n(662),n(8978),n(7714),n(8398)})();